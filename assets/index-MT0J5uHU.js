(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function WT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Cd={exports:{}},_l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function XT(){if(my)return _l;my=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var h in r)h!=="key"&&(l[h]=r[h])}else l=r;return r=l.ref,{$$typeof:n,type:s,key:u,ref:r!==void 0?r:null,props:l}}return _l.Fragment=t,_l.jsx=e,_l.jsxs=e,_l}var gy;function qT(){return gy||(gy=1,Cd.exports=XT()),Cd.exports}var m=qT(),Dd={exports:{}},le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function YT(){if(vy)return le;vy=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function y(F){return F===null||typeof F!="object"?null:(F=x&&F[x]||F["@@iterator"],typeof F=="function"?F:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,E={};function M(F,nt,Mt){this.props=F,this.context=nt,this.refs=E,this.updater=Mt||_}M.prototype.isReactComponent={},M.prototype.setState=function(F,nt){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,nt,"setState")},M.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function S(){}S.prototype=M.prototype;function L(F,nt,Mt){this.props=F,this.context=nt,this.refs=E,this.updater=Mt||_}var w=L.prototype=new S;w.constructor=L,b(w,M.prototype),w.isPureReactComponent=!0;var A=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function I(F,nt,Mt,bt,J,ft){return Mt=ft.ref,{$$typeof:n,type:F,key:nt,ref:Mt!==void 0?Mt:null,props:ft}}function z(F,nt){return I(F.type,nt,void 0,void 0,void 0,F.props)}function U(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function C(F){var nt={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Mt){return nt[Mt]})}var j=/\/+/g;function it(F,nt){return typeof F=="object"&&F!==null&&F.key!=null?C(""+F.key):nt.toString(36)}function $(){}function et(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then($,$):(F.status="pending",F.then(function(nt){F.status==="pending"&&(F.status="fulfilled",F.value=nt)},function(nt){F.status==="pending"&&(F.status="rejected",F.reason=nt)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function ut(F,nt,Mt,bt,J){var ft=typeof F;(ft==="undefined"||ft==="boolean")&&(F=null);var vt=!1;if(F===null)vt=!0;else switch(ft){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(F.$$typeof){case n:case t:vt=!0;break;case g:return vt=F._init,ut(vt(F._payload),nt,Mt,bt,J)}}if(vt)return J=J(F),vt=bt===""?"."+it(F,0):bt,A(J)?(Mt="",vt!=null&&(Mt=vt.replace(j,"$&/")+"/"),ut(J,nt,Mt,"",function(ee){return ee})):J!=null&&(U(J)&&(J=z(J,Mt+(J.key==null||F&&F.key===J.key?"":(""+J.key).replace(j,"$&/")+"/")+vt)),nt.push(J)),1;vt=0;var wt=bt===""?".":bt+":";if(A(F))for(var Ct=0;Ct<F.length;Ct++)bt=F[Ct],ft=wt+it(bt,Ct),vt+=ut(bt,nt,Mt,ft,J);else if(Ct=y(F),typeof Ct=="function")for(F=Ct.call(F),Ct=0;!(bt=F.next()).done;)bt=bt.value,ft=wt+it(bt,Ct++),vt+=ut(bt,nt,Mt,ft,J);else if(ft==="object"){if(typeof F.then=="function")return ut(et(F),nt,Mt,bt,J);throw nt=String(F),Error("Objects are not valid as a React child (found: "+(nt==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":nt)+"). If you meant to render a collection of children, use an array instead.")}return vt}function V(F,nt,Mt){if(F==null)return F;var bt=[],J=0;return ut(F,bt,"","",function(ft){return nt.call(Mt,ft,J++)}),bt}function G(F){if(F._status===-1){var nt=F._result;nt=nt(),nt.then(function(Mt){(F._status===0||F._status===-1)&&(F._status=1,F._result=Mt)},function(Mt){(F._status===0||F._status===-1)&&(F._status=2,F._result=Mt)}),F._status===-1&&(F._status=0,F._result=nt)}if(F._status===1)return F._result.default;throw F._result}var q=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var nt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(nt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function yt(){}return le.Children={map:V,forEach:function(F,nt,Mt){V(F,function(){nt.apply(this,arguments)},Mt)},count:function(F){var nt=0;return V(F,function(){nt++}),nt},toArray:function(F){return V(F,function(nt){return nt})||[]},only:function(F){if(!U(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},le.Component=M,le.Fragment=e,le.Profiler=r,le.PureComponent=L,le.StrictMode=s,le.Suspense=f,le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,le.__COMPILER_RUNTIME={__proto__:null,c:function(F){return N.H.useMemoCache(F)}},le.cache=function(F){return function(){return F.apply(null,arguments)}},le.cloneElement=function(F,nt,Mt){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var bt=b({},F.props),J=F.key,ft=void 0;if(nt!=null)for(vt in nt.ref!==void 0&&(ft=void 0),nt.key!==void 0&&(J=""+nt.key),nt)!O.call(nt,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&nt.ref===void 0||(bt[vt]=nt[vt]);var vt=arguments.length-2;if(vt===1)bt.children=Mt;else if(1<vt){for(var wt=Array(vt),Ct=0;Ct<vt;Ct++)wt[Ct]=arguments[Ct+2];bt.children=wt}return I(F.type,J,void 0,void 0,ft,bt)},le.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},le.createElement=function(F,nt,Mt){var bt,J={},ft=null;if(nt!=null)for(bt in nt.key!==void 0&&(ft=""+nt.key),nt)O.call(nt,bt)&&bt!=="key"&&bt!=="__self"&&bt!=="__source"&&(J[bt]=nt[bt]);var vt=arguments.length-2;if(vt===1)J.children=Mt;else if(1<vt){for(var wt=Array(vt),Ct=0;Ct<vt;Ct++)wt[Ct]=arguments[Ct+2];J.children=wt}if(F&&F.defaultProps)for(bt in vt=F.defaultProps,vt)J[bt]===void 0&&(J[bt]=vt[bt]);return I(F,ft,void 0,void 0,null,J)},le.createRef=function(){return{current:null}},le.forwardRef=function(F){return{$$typeof:h,render:F}},le.isValidElement=U,le.lazy=function(F){return{$$typeof:g,_payload:{_status:-1,_result:F},_init:G}},le.memo=function(F,nt){return{$$typeof:d,type:F,compare:nt===void 0?null:nt}},le.startTransition=function(F){var nt=N.T,Mt={};N.T=Mt;try{var bt=F(),J=N.S;J!==null&&J(Mt,bt),typeof bt=="object"&&bt!==null&&typeof bt.then=="function"&&bt.then(yt,q)}catch(ft){q(ft)}finally{N.T=nt}},le.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},le.use=function(F){return N.H.use(F)},le.useActionState=function(F,nt,Mt){return N.H.useActionState(F,nt,Mt)},le.useCallback=function(F,nt){return N.H.useCallback(F,nt)},le.useContext=function(F){return N.H.useContext(F)},le.useDebugValue=function(){},le.useDeferredValue=function(F,nt){return N.H.useDeferredValue(F,nt)},le.useEffect=function(F,nt,Mt){var bt=N.H;if(typeof Mt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return bt.useEffect(F,nt)},le.useId=function(){return N.H.useId()},le.useImperativeHandle=function(F,nt,Mt){return N.H.useImperativeHandle(F,nt,Mt)},le.useInsertionEffect=function(F,nt){return N.H.useInsertionEffect(F,nt)},le.useLayoutEffect=function(F,nt){return N.H.useLayoutEffect(F,nt)},le.useMemo=function(F,nt){return N.H.useMemo(F,nt)},le.useOptimistic=function(F,nt){return N.H.useOptimistic(F,nt)},le.useReducer=function(F,nt,Mt){return N.H.useReducer(F,nt,Mt)},le.useRef=function(F){return N.H.useRef(F)},le.useState=function(F){return N.H.useState(F)},le.useSyncExternalStore=function(F,nt,Mt){return N.H.useSyncExternalStore(F,nt,Mt)},le.useTransition=function(){return N.H.useTransition()},le.version="19.1.0",le}var xy;function Wm(){return xy||(xy=1,Dd.exports=YT()),Dd.exports}var xt=Wm();const tr=WT(xt);var Ld={exports:{}},Sl={},Pd={exports:{}},Ud={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function KT(){return yy||(yy=1,function(n){function t(V,G){var q=V.length;V.push(G);t:for(;0<q;){var yt=q-1>>>1,F=V[yt];if(0<r(F,G))V[yt]=G,V[q]=F,q=yt;else break t}}function e(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var G=V[0],q=V.pop();if(q!==G){V[0]=q;t:for(var yt=0,F=V.length,nt=F>>>1;yt<nt;){var Mt=2*(yt+1)-1,bt=V[Mt],J=Mt+1,ft=V[J];if(0>r(bt,q))J<F&&0>r(ft,bt)?(V[yt]=ft,V[J]=q,yt=J):(V[yt]=bt,V[Mt]=q,yt=Mt);else if(J<F&&0>r(ft,q))V[yt]=ft,V[J]=q,yt=J;else break t}}return G}function r(V,G){var q=V.sortIndex-G.sortIndex;return q!==0?q:V.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],d=[],g=1,x=null,y=3,_=!1,b=!1,E=!1,M=!1,S=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function A(V){for(var G=e(d);G!==null;){if(G.callback===null)s(d);else if(G.startTime<=V)s(d),G.sortIndex=G.expirationTime,t(f,G);else break;G=e(d)}}function N(V){if(E=!1,A(V),!b)if(e(f)!==null)b=!0,O||(O=!0,it());else{var G=e(d);G!==null&&ut(N,G.startTime-V)}}var O=!1,I=-1,z=5,U=-1;function C(){return M?!0:!(n.unstable_now()-U<z)}function j(){if(M=!1,O){var V=n.unstable_now();U=V;var G=!0;try{t:{b=!1,E&&(E=!1,L(I),I=-1),_=!0;var q=y;try{e:{for(A(V),x=e(f);x!==null&&!(x.expirationTime>V&&C());){var yt=x.callback;if(typeof yt=="function"){x.callback=null,y=x.priorityLevel;var F=yt(x.expirationTime<=V);if(V=n.unstable_now(),typeof F=="function"){x.callback=F,A(V),G=!0;break e}x===e(f)&&s(f),A(V)}else s(f);x=e(f)}if(x!==null)G=!0;else{var nt=e(d);nt!==null&&ut(N,nt.startTime-V),G=!1}}break t}finally{x=null,y=q,_=!1}G=void 0}}finally{G?it():O=!1}}}var it;if(typeof w=="function")it=function(){w(j)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,et=$.port2;$.port1.onmessage=j,it=function(){et.postMessage(null)}}else it=function(){S(j,0)};function ut(V,G){I=S(function(){V(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(V){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var q=y;y=G;try{return V()}finally{y=q}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var q=y;y=V;try{return G()}finally{y=q}},n.unstable_scheduleCallback=function(V,G,q){var yt=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?yt+q:yt):q=yt,V){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=q+F,V={id:g++,callback:G,priorityLevel:V,startTime:q,expirationTime:F,sortIndex:-1},q>yt?(V.sortIndex=q,t(d,V),e(f)===null&&V===e(d)&&(E?(L(I),I=-1):E=!0,ut(N,q-yt))):(V.sortIndex=F,t(f,V),b||_||(b=!0,O||(O=!0,it()))),V},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(V){var G=y;return function(){var q=y;y=G;try{return V.apply(this,arguments)}finally{y=q}}}}(Ud)),Ud}var _y;function ZT(){return _y||(_y=1,Pd.exports=KT()),Pd.exports}var Nd={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function QT(){if(Sy)return Vn;Sy=1;var n=Wm();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(f,d,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:x==null?null:""+x,children:f,containerInfo:d,implementation:g}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Vn.createPortal=function(f,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return l(f,d,null,g)},Vn.flushSync=function(f){var d=u.T,g=s.p;try{if(u.T=null,s.p=2,f)return f()}finally{u.T=d,s.p=g,s.d.f()}},Vn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(f,d))},Vn.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Vn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var g=d.as,x=h(g,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,_=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?s.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:x,integrity:y,fetchPriority:_}):g==="script"&&s.d.X(f,{crossOrigin:x,integrity:y,fetchPriority:_,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Vn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=h(d.as,d.crossOrigin);s.d.M(f,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(f)},Vn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,x=h(g,d.crossOrigin);s.d.L(f,g,{crossOrigin:x,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Vn.preloadModule=function(f,d){if(typeof f=="string")if(d){var g=h(d.as,d.crossOrigin);s.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(f)},Vn.requestFormReset=function(f){s.d.r(f)},Vn.unstable_batchedUpdates=function(f,d){return f(d)},Vn.useFormState=function(f,d,g){return u.H.useFormState(f,d,g)},Vn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Vn.version="19.1.0",Vn}var My;function JT(){if(My)return Nd.exports;My=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Nd.exports=QT(),Nd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function $T(){if(by)return Sl;by=1;var n=ZT(),t=Wm(),e=JT();function s(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var a=i,o=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(o=a.return),i=a.return;while(i)}return a.tag===3?o:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(l(i)!==i)throw Error(s(188))}function f(i){var a=i.alternate;if(!a){if(a=l(i),a===null)throw Error(s(188));return a!==i?null:i}for(var o=i,c=a;;){var p=o.return;if(p===null)break;var v=p.alternate;if(v===null){if(c=p.return,c!==null){o=c;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===o)return h(p),i;if(v===c)return h(p),a;v=v.sibling}throw Error(s(188))}if(o.return!==c.return)o=p,c=v;else{for(var T=!1,D=p.child;D;){if(D===o){T=!0,o=p,c=v;break}if(D===c){T=!0,c=p,o=v;break}D=D.sibling}if(!T){for(D=v.child;D;){if(D===o){T=!0,o=v,c=p;break}if(D===c){T=!0,c=v,o=p;break}D=D.sibling}if(!T)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:a}function d(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=d(i),a!==null)return a;i=i.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),w=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function it(i){return i===null||typeof i!="object"?null:(i=j&&i[j]||i["@@iterator"],typeof i=="function"?i:null)}var $=Symbol.for("react.client.reference");function et(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===$?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case b:return"Fragment";case M:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case O:return"SuspenseList";case U:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case w:return(i.displayName||"Context")+".Provider";case L:return(i._context.displayName||"Context")+".Consumer";case A:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case I:return a=i.displayName||null,a!==null?a:et(i.type)||"Memo";case z:a=i._payload,i=i._init;try{return et(i(a))}catch{}}return null}var ut=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},yt=[],F=-1;function nt(i){return{current:i}}function Mt(i){0>F||(i.current=yt[F],yt[F]=null,F--)}function bt(i,a){F++,yt[F]=i.current,i.current=a}var J=nt(null),ft=nt(null),vt=nt(null),wt=nt(null);function Ct(i,a){switch(bt(vt,a),bt(ft,i),bt(J,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?kx(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=kx(a),i=Gx(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Mt(J),bt(J,i)}function ee(){Mt(J),Mt(ft),Mt(vt)}function Ht(i){i.memoizedState!==null&&bt(wt,i);var a=J.current,o=Gx(a,i.type);a!==o&&(bt(ft,i),bt(J,o))}function _e(i){ft.current===i&&(Mt(J),Mt(ft)),wt.current===i&&(Mt(wt),ml._currentValue=q)}var Ae=Object.prototype.hasOwnProperty,fe=n.unstable_scheduleCallback,k=n.unstable_cancelCallback,mn=n.unstable_shouldYield,be=n.unstable_requestPaint,ge=n.unstable_now,Gt=n.unstable_getCurrentPriorityLevel,Ee=n.unstable_ImmediatePriority,Zt=n.unstable_UserBlockingPriority,oe=n.unstable_NormalPriority,sn=n.unstable_LowPriority,B=n.unstable_IdlePriority,R=n.log,at=n.unstable_setDisableYieldValue,pt=null,gt=null;function ht(i){if(typeof R=="function"&&at(i),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(pt,i)}catch{}}var It=Math.clz32?Math.clz32:Wt,Pt=Math.log,kt=Math.LN2;function Wt(i){return i>>>=0,i===0?32:31-(Pt(i)/kt|0)|0}var Et=256,Ft=4194304;function Yt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Kt(i,a,o){var c=i.pendingLanes;if(c===0)return 0;var p=0,v=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var D=c&134217727;return D!==0?(c=D&~v,c!==0?p=Yt(c):(T&=D,T!==0?p=Yt(T):o||(o=D&~i,o!==0&&(p=Yt(o))))):(D=c&~v,D!==0?p=Yt(D):T!==0?p=Yt(T):o||(o=c&~i,o!==0&&(p=Yt(o)))),p===0?0:a!==0&&a!==p&&(a&v)===0&&(v=p&-p,o=a&-a,v>=o||v===32&&(o&4194048)!==0)?a:p}function Dt(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function re(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X(){var i=Et;return Et<<=1,(Et&4194048)===0&&(Et=256),i}function Ut(){var i=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),i}function Tt(i){for(var a=[],o=0;31>o;o++)a.push(i);return a}function zt(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Rt(i,a,o,c,p,v){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var D=i.entanglements,H=i.expirationTimes,st=i.hiddenUpdates;for(o=T&~o;0<o;){var dt=31-It(o),_t=1<<dt;D[dt]=0,H[dt]=-1;var rt=st[dt];if(rt!==null)for(st[dt]=null,dt=0;dt<rt.length;dt++){var ot=rt[dt];ot!==null&&(ot.lane&=-536870913)}o&=~_t}c!==0&&St(i,c,0),v!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=v&~(T&~a))}function St(i,a,o){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-It(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|o&4194090}function Vt(i,a){var o=i.entangledLanes|=a;for(i=i.entanglements;o;){var c=31-It(o),p=1<<c;p&a|i[c]&a&&(i[c]|=a),o&=~p}}function ae(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ne(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Re(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:cy(i.type))}function ni(i,a){var o=G.p;try{return G.p=i,a()}finally{G.p=o}}var Mn=Math.random().toString(36).slice(2),gn="__reactFiber$"+Mn,Ln="__reactProps$"+Mn,Zn="__reactContainer$"+Mn,ya="__reactEvents$"+Mn,fc="__reactListeners$"+Mn,dc="__reactHandles$"+Mn,_a="__reactResources$"+Mn,Rs="__reactMarker$"+Mn;function Cs(i){delete i[gn],delete i[Ln],delete i[ya],delete i[fc],delete i[dc]}function Qi(i){var a=i[gn];if(a)return a;for(var o=i.parentNode;o;){if(a=o[Zn]||o[gn]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(i=Yx(i);i!==null;){if(o=i[gn])return o;i=Yx(i)}return a}i=o,o=i.parentNode}return null}function Ji(i){if(i=i[gn]||i[Zn]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Sa(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(s(33))}function Ds(i){var a=i[_a];return a||(a=i[_a]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function un(i){i[Rs]=!0}var pc=new Set,mc={};function $i(i,a){P(i,a),P(i+"Capture",a)}function P(i,a){for(mc[i]=a,i=0;i<a.length;i++)pc.add(a[i])}var K=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lt={},ct={};function Z(i){return Ae.call(ct,i)?!0:Ae.call(lt,i)?!1:K.test(i)?ct[i]=!0:(lt[i]=!0,!1)}function At(i,a,o){if(Z(a))if(o===null)i.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+o)}}function Lt(i,a,o){if(o===null)i.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+o)}}function Ot(i,a,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(a,o,""+c)}}var Bt,ne;function Jt(i){if(Bt===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Bt=a&&a[1]||"",ne=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bt+i+ne}var Xt=!1;function he(i,a){if(!i||Xt)return"";Xt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var _t=function(){throw Error()};if(Object.defineProperty(_t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_t,[])}catch(ot){var rt=ot}Reflect.construct(i,[],_t)}else{try{_t.call()}catch(ot){rt=ot}i.call(_t.prototype)}}else{try{throw Error()}catch(ot){rt=ot}(_t=i())&&typeof _t.catch=="function"&&_t.catch(function(){})}}catch(ot){if(ot&&rt&&typeof ot.stack=="string")return[ot.stack,rt.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),T=v[0],D=v[1];if(T&&D){var H=T.split(`
`),st=D.split(`
`);for(p=c=0;c<H.length&&!H[c].includes("DetermineComponentFrameRoot");)c++;for(;p<st.length&&!st[p].includes("DetermineComponentFrameRoot");)p++;if(c===H.length||p===st.length)for(c=H.length-1,p=st.length-1;1<=c&&0<=p&&H[c]!==st[p];)p--;for(;1<=c&&0<=p;c--,p--)if(H[c]!==st[p]){if(c!==1||p!==1)do if(c--,p--,0>p||H[c]!==st[p]){var dt=`
`+H[c].replace(" at new "," at ");return i.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",i.displayName)),dt}while(1<=c&&0<=p);break}}}finally{Xt=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Jt(o):""}function Pe(i){switch(i.tag){case 26:case 27:case 5:return Jt(i.type);case 16:return Jt("Lazy");case 13:return Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return he(i.type,!1);case 11:return he(i.type.render,!1);case 1:return he(i.type,!0);case 31:return Jt("Activity");default:return""}}function Ke(i){try{var a="";do a+=Pe(i),i=i.return;while(i);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function pe(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ue(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Qt(i){var a=Ue(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),c=""+i[a];if(!i.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,v=o.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(T){c=""+T,v.call(this,T)}}),Object.defineProperty(i,a,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Fe(i){i._valueTracker||(i._valueTracker=Qt(i))}function Te(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var o=a.getValue(),c="";return i&&(c=Ue(i)?i.checked?"true":"false":i.value),i=c,i!==o?(a.setValue(i),!0):!1}function bn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ls=/[\n"\\]/g;function Xe(i){return i.replace(Ls,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ts(i,a,o,c,p,v,T,D){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),a!=null?T==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+pe(a)):i.value!==""+pe(a)&&(i.value=""+pe(a)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),a!=null?zn(i,T,pe(a)):o!=null?zn(i,T,pe(o)):c!=null&&i.removeAttribute("value"),p==null&&v!=null&&(i.defaultChecked=!!v),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+pe(D):i.removeAttribute("name")}function ke(i,a,o,c,p,v,T,D){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),a!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||a!=null))return;o=o!=null?""+pe(o):"",a=a!=null?""+pe(a):o,D||a===i.value||(i.value=a),i.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=D?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function zn(i,a,o){a==="number"&&bn(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function vn(i,a,o,c){if(i=i.options,a){a={};for(var p=0;p<o.length;p++)a["$"+o[p]]=!0;for(o=0;o<i.length;o++)p=a.hasOwnProperty("$"+i[o].value),i[o].selected!==p&&(i[o].selected=p),p&&c&&(i[o].defaultSelected=!0)}else{for(o=""+pe(o),a=null,p=0;p<i.length;p++){if(i[p].value===o){i[p].selected=!0,c&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function En(i,a,o){if(a!=null&&(a=""+pe(a),a!==i.value&&(i.value=a),o==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=o!=null?""+pe(o):""}function Pn(i,a,o,c){if(a==null){if(c!=null){if(o!=null)throw Error(s(92));if(ut(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),a=o}o=pe(a),i.defaultValue=o,c=i.textContent,c===o&&c!==""&&c!==null&&(i.value=c)}function Ii(i,a){if(a){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=a;return}}i.textContent=a}var es=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kg(i,a,o){var c=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,o):typeof o!="number"||o===0||es.has(a)?a==="float"?i.cssFloat=o:i[a]=(""+o).trim():i[a]=o+"px"}function Gg(i,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(i=i.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&o[p]!==c&&kg(i,p,c)}else for(var v in a)a.hasOwnProperty(v)&&kg(i,v,a[v])}function wh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),G1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gc(i){return G1.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Rh=null;function Ch(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var lr=null,cr=null;function Wg(i){var a=Ji(i);if(a&&(i=a.stateNode)){var o=i[Ln]||null;t:switch(i=a.stateNode,a.type){case"input":if(ts(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Xe(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var c=o[a];if(c!==i&&c.form===i.form){var p=c[Ln]||null;if(!p)throw Error(s(90));ts(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<o.length;a++)c=o[a],c.form===i.form&&Te(c)}break t;case"textarea":En(i,o.value,o.defaultValue);break t;case"select":a=o.value,a!=null&&vn(i,!!o.multiple,a,!1)}}}var Dh=!1;function Xg(i,a,o){if(Dh)return i(a,o);Dh=!0;try{var c=i(a);return c}finally{if(Dh=!1,(lr!==null||cr!==null)&&(eu(),lr&&(a=lr,i=cr,cr=lr=null,Wg(a),i)))for(a=0;a<i.length;a++)Wg(i[a])}}function Ro(i,a){var o=i.stateNode;if(o===null)return null;var c=o[Ln]||null;if(c===null)return null;o=c[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lh=!1;if(ns)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){Lh=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{Lh=!1}var Ps=null,Ph=null,vc=null;function qg(){if(vc)return vc;var i,a=Ph,o=a.length,c,p="value"in Ps?Ps.value:Ps.textContent,v=p.length;for(i=0;i<o&&a[i]===p[i];i++);var T=o-i;for(c=1;c<=T&&a[o-c]===p[v-c];c++);return vc=p.slice(i,1<c?1-c:void 0)}function xc(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function yc(){return!0}function Yg(){return!1}function Qn(i){function a(o,c,p,v,T){this._reactName=o,this._targetInst=p,this.type=c,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(o=i[D],this[D]=o?o(v):v[D]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?yc:Yg,this.isPropagationStopped=Yg,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),a}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_c=Qn(Ma),Do=g({},Ma,{view:0,detail:0}),W1=Qn(Do),Uh,Nh,Lo,Sc=g({},Do,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ih,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Lo&&(Lo&&i.type==="mousemove"?(Uh=i.screenX-Lo.screenX,Nh=i.screenY-Lo.screenY):Nh=Uh=0,Lo=i),Uh)},movementY:function(i){return"movementY"in i?i.movementY:Nh}}),Kg=Qn(Sc),X1=g({},Sc,{dataTransfer:0}),q1=Qn(X1),Y1=g({},Do,{relatedTarget:0}),Oh=Qn(Y1),K1=g({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),Z1=Qn(K1),Q1=g({},Ma,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),J1=Qn(Q1),$1=g({},Ma,{data:0}),Zg=Qn($1),tE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iE(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=nE[i])?!!a[i]:!1}function Ih(){return iE}var sE=g({},Do,{key:function(i){if(i.key){var a=tE[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=xc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?eE[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ih,charCode:function(i){return i.type==="keypress"?xc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),aE=Qn(sE),rE=g({},Sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qg=Qn(rE),oE=g({},Do,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ih}),lE=Qn(oE),cE=g({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),uE=Qn(cE),hE=g({},Sc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),fE=Qn(hE),dE=g({},Ma,{newState:0,oldState:0}),pE=Qn(dE),mE=[9,13,27,32],Fh=ns&&"CompositionEvent"in window,Po=null;ns&&"documentMode"in document&&(Po=document.documentMode);var gE=ns&&"TextEvent"in window&&!Po,Jg=ns&&(!Fh||Po&&8<Po&&11>=Po),$g=" ",t0=!1;function e0(i,a){switch(i){case"keyup":return mE.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ur=!1;function vE(i,a){switch(i){case"compositionend":return n0(a);case"keypress":return a.which!==32?null:(t0=!0,$g);case"textInput":return i=a.data,i===$g&&t0?null:i;default:return null}}function xE(i,a){if(ur)return i==="compositionend"||!Fh&&e0(i,a)?(i=qg(),vc=Ph=Ps=null,ur=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Jg&&a.locale!=="ko"?null:a.data;default:return null}}var yE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i0(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!yE[i.type]:a==="textarea"}function s0(i,a,o,c){lr?cr?cr.push(c):cr=[c]:lr=c,a=ou(a,"onChange"),0<a.length&&(o=new _c("onChange","change",null,o,c),i.push({event:o,listeners:a}))}var Uo=null,No=null;function _E(i){zx(i,0)}function Mc(i){var a=Sa(i);if(Te(a))return i}function a0(i,a){if(i==="change")return a}var r0=!1;if(ns){var zh;if(ns){var Bh="oninput"in document;if(!Bh){var o0=document.createElement("div");o0.setAttribute("oninput","return;"),Bh=typeof o0.oninput=="function"}zh=Bh}else zh=!1;r0=zh&&(!document.documentMode||9<document.documentMode)}function l0(){Uo&&(Uo.detachEvent("onpropertychange",c0),No=Uo=null)}function c0(i){if(i.propertyName==="value"&&Mc(No)){var a=[];s0(a,No,i,Ch(i)),Xg(_E,a)}}function SE(i,a,o){i==="focusin"?(l0(),Uo=a,No=o,Uo.attachEvent("onpropertychange",c0)):i==="focusout"&&l0()}function ME(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Mc(No)}function bE(i,a){if(i==="click")return Mc(a)}function EE(i,a){if(i==="input"||i==="change")return Mc(a)}function TE(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ii=typeof Object.is=="function"?Object.is:TE;function Oo(i,a){if(ii(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var o=Object.keys(i),c=Object.keys(a);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var p=o[c];if(!Ae.call(a,p)||!ii(i[p],a[p]))return!1}return!0}function u0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function h0(i,a){var o=u0(i);i=0;for(var c;o;){if(o.nodeType===3){if(c=i+o.textContent.length,i<=a&&c>=a)return{node:o,offset:a-i};i=c}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=u0(o)}}function f0(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?f0(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function d0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=bn(i.document);a instanceof i.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)i=a.contentWindow;else break;a=bn(i.document)}return a}function Vh(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var AE=ns&&"documentMode"in document&&11>=document.documentMode,hr=null,jh=null,Io=null,Hh=!1;function p0(i,a,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Hh||hr==null||hr!==bn(c)||(c=hr,"selectionStart"in c&&Vh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Io&&Oo(Io,c)||(Io=c,c=ou(jh,"onSelect"),0<c.length&&(a=new _c("onSelect","select",null,a,o),i.push({event:a,listeners:c}),a.target=hr)))}function ba(i,a){var o={};return o[i.toLowerCase()]=a.toLowerCase(),o["Webkit"+i]="webkit"+a,o["Moz"+i]="moz"+a,o}var fr={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionrun:ba("Transition","TransitionRun"),transitionstart:ba("Transition","TransitionStart"),transitioncancel:ba("Transition","TransitionCancel"),transitionend:ba("Transition","TransitionEnd")},kh={},m0={};ns&&(m0=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function Ea(i){if(kh[i])return kh[i];if(!fr[i])return i;var a=fr[i],o;for(o in a)if(a.hasOwnProperty(o)&&o in m0)return kh[i]=a[o];return i}var g0=Ea("animationend"),v0=Ea("animationiteration"),x0=Ea("animationstart"),wE=Ea("transitionrun"),RE=Ea("transitionstart"),CE=Ea("transitioncancel"),y0=Ea("transitionend"),_0=new Map,Gh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gh.push("scrollEnd");function Ai(i,a){_0.set(i,a),$i(a,[i])}var S0=new WeakMap;function mi(i,a){if(typeof i=="object"&&i!==null){var o=S0.get(i);return o!==void 0?o:(a={value:i,source:a,stack:Ke(a)},S0.set(i,a),a)}return{value:i,source:a,stack:Ke(a)}}var gi=[],dr=0,Wh=0;function bc(){for(var i=dr,a=Wh=dr=0;a<i;){var o=gi[a];gi[a++]=null;var c=gi[a];gi[a++]=null;var p=gi[a];gi[a++]=null;var v=gi[a];if(gi[a++]=null,c!==null&&p!==null){var T=c.pending;T===null?p.next=p:(p.next=T.next,T.next=p),c.pending=p}v!==0&&M0(o,p,v)}}function Ec(i,a,o,c){gi[dr++]=i,gi[dr++]=a,gi[dr++]=o,gi[dr++]=c,Wh|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Xh(i,a,o,c){return Ec(i,a,o,c),Tc(i)}function pr(i,a){return Ec(i,null,null,a),Tc(i)}function M0(i,a,o){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o);for(var p=!1,v=i.return;v!==null;)v.childLanes|=o,c=v.alternate,c!==null&&(c.childLanes|=o),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(p=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,p&&a!==null&&(p=31-It(o),i=v.hiddenUpdates,c=i[p],c===null?i[p]=[a]:c.push(a),a.lane=o|536870912),v):null}function Tc(i){if(50<ol)throw ol=0,$f=null,Error(s(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var mr={};function DE(i,a,o,c){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(i,a,o,c){return new DE(i,a,o,c)}function qh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function is(i,a){var o=i.alternate;return o===null?(o=si(i.tag,a,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=a,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,a=i.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function b0(i,a){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,a=o.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Ac(i,a,o,c,p,v){var T=0;if(c=i,typeof i=="function")qh(i)&&(T=1);else if(typeof i=="string")T=PT(i,o,J.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case U:return i=si(31,o,a,p),i.elementType=U,i.lanes=v,i;case b:return Ta(o.children,p,v,a);case E:T=8,p|=24;break;case M:return i=si(12,o,a,p|2),i.elementType=M,i.lanes=v,i;case N:return i=si(13,o,a,p),i.elementType=N,i.lanes=v,i;case O:return i=si(19,o,a,p),i.elementType=O,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case S:case w:T=10;break t;case L:T=9;break t;case A:T=11;break t;case I:T=14;break t;case z:T=16,c=null;break t}T=29,o=Error(s(130,i===null?"null":typeof i,"")),c=null}return a=si(T,o,a,p),a.elementType=i,a.type=c,a.lanes=v,a}function Ta(i,a,o,c){return i=si(7,i,c,a),i.lanes=o,i}function Yh(i,a,o){return i=si(6,i,null,a),i.lanes=o,i}function Kh(i,a,o){return a=si(4,i.children!==null?i.children:[],i.key,a),a.lanes=o,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var gr=[],vr=0,wc=null,Rc=0,vi=[],xi=0,Aa=null,ss=1,as="";function wa(i,a){gr[vr++]=Rc,gr[vr++]=wc,wc=i,Rc=a}function E0(i,a,o){vi[xi++]=ss,vi[xi++]=as,vi[xi++]=Aa,Aa=i;var c=ss;i=as;var p=32-It(c)-1;c&=~(1<<p),o+=1;var v=32-It(a)+p;if(30<v){var T=p-p%5;v=(c&(1<<T)-1).toString(32),c>>=T,p-=T,ss=1<<32-It(a)+p|o<<p|c,as=v+i}else ss=1<<v|o<<p|c,as=i}function Zh(i){i.return!==null&&(wa(i,1),E0(i,1,0))}function Qh(i){for(;i===wc;)wc=gr[--vr],gr[vr]=null,Rc=gr[--vr],gr[vr]=null;for(;i===Aa;)Aa=vi[--xi],vi[xi]=null,as=vi[--xi],vi[xi]=null,ss=vi[--xi],vi[xi]=null}var Gn=null,tn=null,Le=!1,Ra=null,Fi=!1,Jh=Error(s(519));function Ca(i){var a=Error(s(418,""));throw Bo(mi(a,i)),Jh}function T0(i){var a=i.stateNode,o=i.type,c=i.memoizedProps;switch(a[gn]=i,a[Ln]=c,o){case"dialog":xe("cancel",a),xe("close",a);break;case"iframe":case"object":case"embed":xe("load",a);break;case"video":case"audio":for(o=0;o<cl.length;o++)xe(cl[o],a);break;case"source":xe("error",a);break;case"img":case"image":case"link":xe("error",a),xe("load",a);break;case"details":xe("toggle",a);break;case"input":xe("invalid",a),ke(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Fe(a);break;case"select":xe("invalid",a);break;case"textarea":xe("invalid",a),Pn(a,c.value,c.defaultValue,c.children),Fe(a)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||c.suppressHydrationWarning===!0||Hx(a.textContent,o)?(c.popover!=null&&(xe("beforetoggle",a),xe("toggle",a)),c.onScroll!=null&&xe("scroll",a),c.onScrollEnd!=null&&xe("scrollend",a),c.onClick!=null&&(a.onclick=lu),a=!0):a=!1,a||Ca(i)}function A0(i){for(Gn=i.return;Gn;)switch(Gn.tag){case 5:case 13:Fi=!1;return;case 27:case 3:Fi=!0;return;default:Gn=Gn.return}}function Fo(i){if(i!==Gn)return!1;if(!Le)return A0(i),Le=!0,!1;var a=i.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||md(i.type,i.memoizedProps)),o=!o),o&&tn&&Ca(i),A0(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));t:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(a===0){tn=Ri(i.nextSibling);break t}a--}else o!=="$"&&o!=="$!"&&o!=="$?"||a++;i=i.nextSibling}tn=null}}else a===27?(a=tn,Ys(i.type)?(i=yd,yd=null,tn=i):tn=a):tn=Gn?Ri(i.stateNode.nextSibling):null;return!0}function zo(){tn=Gn=null,Le=!1}function w0(){var i=Ra;return i!==null&&(ti===null?ti=i:ti.push.apply(ti,i),Ra=null),i}function Bo(i){Ra===null?Ra=[i]:Ra.push(i)}var $h=nt(null),Da=null,rs=null;function Us(i,a,o){bt($h,a._currentValue),a._currentValue=o}function os(i){i._currentValue=$h.current,Mt($h)}function tf(i,a,o){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===o)break;i=i.return}}function ef(i,a,o,c){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var v=p.dependencies;if(v!==null){var T=p.child;v=v.firstContext;t:for(;v!==null;){var D=v;v=p;for(var H=0;H<a.length;H++)if(D.context===a[H]){v.lanes|=o,D=v.alternate,D!==null&&(D.lanes|=o),tf(v.return,o,i),c||(T=null);break t}v=D.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(s(341));T.lanes|=o,v=T.alternate,v!==null&&(v.lanes|=o),tf(T,o,i),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===i){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function Vo(i,a,o,c){i=null;for(var p=a,v=!1;p!==null;){if(!v){if((p.flags&524288)!==0)v=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var D=p.type;ii(p.pendingProps.value,T.value)||(i!==null?i.push(D):i=[D])}}else if(p===wt.current){if(T=p.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(ml):i=[ml])}p=p.return}i!==null&&ef(a,i,o,c),a.flags|=262144}function Cc(i){for(i=i.firstContext;i!==null;){if(!ii(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function La(i){Da=i,rs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Bn(i){return R0(Da,i)}function Dc(i,a){return Da===null&&La(i),R0(i,a)}function R0(i,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},rs===null){if(i===null)throw Error(s(308));rs=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else rs=rs.next=a;return o}var LE=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(o,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(o){return o()})}},PE=n.unstable_scheduleCallback,UE=n.unstable_NormalPriority,xn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nf(){return{controller:new LE,data:new Map,refCount:0}}function jo(i){i.refCount--,i.refCount===0&&PE(UE,function(){i.controller.abort()})}var Ho=null,sf=0,xr=0,yr=null;function NE(i,a){if(Ho===null){var o=Ho=[];sf=0,xr=rd(),yr={status:"pending",value:void 0,then:function(c){o.push(c)}}}return sf++,a.then(C0,C0),a}function C0(){if(--sf===0&&Ho!==null){yr!==null&&(yr.status="fulfilled");var i=Ho;Ho=null,xr=0,yr=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function OE(i,a){var o=[],c={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<o.length;p++)(0,o[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),c}var D0=V.S;V.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&NE(i,a),D0!==null&&D0(i,a)};var Pa=nt(null);function af(){var i=Pa.current;return i!==null?i:qe.pooledCache}function Lc(i,a){a===null?bt(Pa,Pa.current):bt(Pa,a.pool)}function L0(){var i=af();return i===null?null:{parent:xn._currentValue,pool:i}}var ko=Error(s(460)),P0=Error(s(474)),Pc=Error(s(542)),rf={then:function(){}};function U0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Uc(){}function N0(i,a,o){switch(o=i[o],o===void 0?i.push(a):o!==a&&(a.then(Uc,Uc),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,I0(i),i;default:if(typeof a.status=="string")a.then(Uc,Uc);else{if(i=qe,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,I0(i),i}throw Go=a,ko}}var Go=null;function O0(){if(Go===null)throw Error(s(459));var i=Go;return Go=null,i}function I0(i){if(i===ko||i===Pc)throw Error(s(483))}var Ns=!1;function of(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lf(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Os(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Is(i,a,o){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Oe&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=Tc(i),M0(i,null,o),a}return Ec(i,c,a,o),Tc(i)}function Wo(i,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var c=a.lanes;c&=i.pendingLanes,o|=c,a.lanes=o,Vt(i,o)}}function cf(i,a){var o=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var p=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?p=v=T:v=v.next=T,o=o.next}while(o!==null);v===null?p=v=a:v=v.next=a}else p=v=a;o={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=a:i.next=a,o.lastBaseUpdate=a}var uf=!1;function Xo(){if(uf){var i=yr;if(i!==null)throw i}}function qo(i,a,o,c){uf=!1;var p=i.updateQueue;Ns=!1;var v=p.firstBaseUpdate,T=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var H=D,st=H.next;H.next=null,T===null?v=st:T.next=st,T=H;var dt=i.alternate;dt!==null&&(dt=dt.updateQueue,D=dt.lastBaseUpdate,D!==T&&(D===null?dt.firstBaseUpdate=st:D.next=st,dt.lastBaseUpdate=H))}if(v!==null){var _t=p.baseState;T=0,dt=st=H=null,D=v;do{var rt=D.lane&-536870913,ot=rt!==D.lane;if(ot?(we&rt)===rt:(c&rt)===rt){rt!==0&&rt===xr&&(uf=!0),dt!==null&&(dt=dt.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});t:{var ie=i,$t=D;rt=a;var Ve=o;switch($t.tag){case 1:if(ie=$t.payload,typeof ie=="function"){_t=ie.call(Ve,_t,rt);break t}_t=ie;break t;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=$t.payload,rt=typeof ie=="function"?ie.call(Ve,_t,rt):ie,rt==null)break t;_t=g({},_t,rt);break t;case 2:Ns=!0}}rt=D.callback,rt!==null&&(i.flags|=64,ot&&(i.flags|=8192),ot=p.callbacks,ot===null?p.callbacks=[rt]:ot.push(rt))}else ot={lane:rt,tag:D.tag,payload:D.payload,callback:D.callback,next:null},dt===null?(st=dt=ot,H=_t):dt=dt.next=ot,T|=rt;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;ot=D,D=ot.next,ot.next=null,p.lastBaseUpdate=ot,p.shared.pending=null}}while(!0);dt===null&&(H=_t),p.baseState=H,p.firstBaseUpdate=st,p.lastBaseUpdate=dt,v===null&&(p.shared.lanes=0),Gs|=T,i.lanes=T,i.memoizedState=_t}}function F0(i,a){if(typeof i!="function")throw Error(s(191,i));i.call(a)}function z0(i,a){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)F0(o[i],a)}var _r=nt(null),Nc=nt(0);function B0(i,a){i=ps,bt(Nc,i),bt(_r,a),ps=i|a.baseLanes}function hf(){bt(Nc,ps),bt(_r,_r.current)}function ff(){ps=Nc.current,Mt(_r),Mt(Nc)}var Fs=0,de=null,ze=null,hn=null,Oc=!1,Sr=!1,Ua=!1,Ic=0,Yo=0,Mr=null,IE=0;function an(){throw Error(s(321))}function df(i,a){if(a===null)return!1;for(var o=0;o<a.length&&o<i.length;o++)if(!ii(i[o],a[o]))return!1;return!0}function pf(i,a,o,c,p,v){return Fs=v,de=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,V.H=i===null||i.memoizedState===null?Mv:bv,Ua=!1,v=o(c,p),Ua=!1,Sr&&(v=j0(a,o,c,p)),V0(i),v}function V0(i){V.H=Hc;var a=ze!==null&&ze.next!==null;if(Fs=0,hn=ze=de=null,Oc=!1,Yo=0,Mr=null,a)throw Error(s(300));i===null||Tn||(i=i.dependencies,i!==null&&Cc(i)&&(Tn=!0))}function j0(i,a,o,c){de=i;var p=0;do{if(Sr&&(Mr=null),Yo=0,Sr=!1,25<=p)throw Error(s(301));if(p+=1,hn=ze=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}V.H=kE,v=a(o,c)}while(Sr);return v}function FE(){var i=V.H,a=i.useState()[0];return a=typeof a.then=="function"?Ko(a):a,i=i.useState()[0],(ze!==null?ze.memoizedState:null)!==i&&(de.flags|=1024),a}function mf(){var i=Ic!==0;return Ic=0,i}function gf(i,a,o){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~o}function vf(i){if(Oc){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Oc=!1}Fs=0,hn=ze=de=null,Sr=!1,Yo=Ic=0,Mr=null}function Jn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?de.memoizedState=hn=i:hn=hn.next=i,hn}function fn(){if(ze===null){var i=de.alternate;i=i!==null?i.memoizedState:null}else i=ze.next;var a=hn===null?de.memoizedState:hn.next;if(a!==null)hn=a,ze=i;else{if(i===null)throw de.alternate===null?Error(s(467)):Error(s(310));ze=i,i={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},hn===null?de.memoizedState=hn=i:hn=hn.next=i}return hn}function xf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(i){var a=Yo;return Yo+=1,Mr===null&&(Mr=[]),i=N0(Mr,i,a),a=de,(hn===null?a.memoizedState:hn.next)===null&&(a=a.alternate,V.H=a===null||a.memoizedState===null?Mv:bv),i}function Fc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ko(i);if(i.$$typeof===w)return Bn(i)}throw Error(s(438,String(i)))}function yf(i){var a=null,o=de.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var c=de.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=xf(),de.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(i),c=0;c<i;c++)o[c]=C;return a.index++,o}function ls(i,a){return typeof a=="function"?a(i):a}function zc(i){var a=fn();return _f(a,ze,i)}function _f(i,a,o){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var p=i.baseQueue,v=c.pending;if(v!==null){if(p!==null){var T=p.next;p.next=v.next,v.next=T}a.baseQueue=p=v,c.pending=null}if(v=i.baseState,p===null)i.memoizedState=v;else{a=p.next;var D=T=null,H=null,st=a,dt=!1;do{var _t=st.lane&-536870913;if(_t!==st.lane?(we&_t)===_t:(Fs&_t)===_t){var rt=st.revertLane;if(rt===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),_t===xr&&(dt=!0);else if((Fs&rt)===rt){st=st.next,rt===xr&&(dt=!0);continue}else _t={lane:0,revertLane:st.revertLane,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},H===null?(D=H=_t,T=v):H=H.next=_t,de.lanes|=rt,Gs|=rt;_t=st.action,Ua&&o(v,_t),v=st.hasEagerState?st.eagerState:o(v,_t)}else rt={lane:_t,revertLane:st.revertLane,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},H===null?(D=H=rt,T=v):H=H.next=rt,de.lanes|=_t,Gs|=_t;st=st.next}while(st!==null&&st!==a);if(H===null?T=v:H.next=D,!ii(v,i.memoizedState)&&(Tn=!0,dt&&(o=yr,o!==null)))throw o;i.memoizedState=v,i.baseState=T,i.baseQueue=H,c.lastRenderedState=v}return p===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Sf(i){var a=fn(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var c=o.dispatch,p=o.pending,v=a.memoizedState;if(p!==null){o.pending=null;var T=p=p.next;do v=i(v,T.action),T=T.next;while(T!==p);ii(v,a.memoizedState)||(Tn=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),o.lastRenderedState=v}return[v,c]}function H0(i,a,o){var c=de,p=fn(),v=Le;if(v){if(o===void 0)throw Error(s(407));o=o()}else o=a();var T=!ii((ze||p).memoizedState,o);T&&(p.memoizedState=o,Tn=!0),p=p.queue;var D=W0.bind(null,c,p,i);if(Zo(2048,8,D,[i]),p.getSnapshot!==a||T||hn!==null&&hn.memoizedState.tag&1){if(c.flags|=2048,br(9,Bc(),G0.bind(null,c,p,o,a),null),qe===null)throw Error(s(349));v||(Fs&124)!==0||k0(c,a,o)}return o}function k0(i,a,o){i.flags|=16384,i={getSnapshot:a,value:o},a=de.updateQueue,a===null?(a=xf(),de.updateQueue=a,a.stores=[i]):(o=a.stores,o===null?a.stores=[i]:o.push(i))}function G0(i,a,o,c){a.value=o,a.getSnapshot=c,X0(a)&&q0(i)}function W0(i,a,o){return o(function(){X0(a)&&q0(i)})}function X0(i){var a=i.getSnapshot;i=i.value;try{var o=a();return!ii(i,o)}catch{return!0}}function q0(i){var a=pr(i,2);a!==null&&ci(a,i,2)}function Mf(i){var a=Jn();if(typeof i=="function"){var o=i;if(i=o(),Ua){ht(!0);try{o()}finally{ht(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:i},a}function Y0(i,a,o,c){return i.baseState=o,_f(i,ze,typeof c=="function"?c:ls)}function zE(i,a,o,c,p){if(jc(i))throw Error(s(485));if(i=a.action,i!==null){var v={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){v.listeners.push(T)}};V.T!==null?o(!0):v.isTransition=!1,c(v),o=a.pending,o===null?(v.next=a.pending=v,K0(a,v)):(v.next=o.next,a.pending=o.next=v)}}function K0(i,a){var o=a.action,c=a.payload,p=i.state;if(a.isTransition){var v=V.T,T={};V.T=T;try{var D=o(p,c),H=V.S;H!==null&&H(T,D),Z0(i,a,D)}catch(st){bf(i,a,st)}finally{V.T=v}}else try{v=o(p,c),Z0(i,a,v)}catch(st){bf(i,a,st)}}function Z0(i,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Q0(i,a,c)},function(c){return bf(i,a,c)}):Q0(i,a,o)}function Q0(i,a,o){a.status="fulfilled",a.value=o,J0(a),i.state=o,a=i.pending,a!==null&&(o=a.next,o===a?i.pending=null:(o=o.next,a.next=o,K0(i,o)))}function bf(i,a,o){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=o,J0(a),a=a.next;while(a!==c)}i.action=null}function J0(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function $0(i,a){return a}function tv(i,a){if(Le){var o=qe.formState;if(o!==null){t:{var c=de;if(Le){if(tn){e:{for(var p=tn,v=Fi;p.nodeType!==8;){if(!v){p=null;break e}if(p=Ri(p.nextSibling),p===null){p=null;break e}}v=p.data,p=v==="F!"||v==="F"?p:null}if(p){tn=Ri(p.nextSibling),c=p.data==="F!";break t}}Ca(c)}c=!1}c&&(a=o[0])}}return o=Jn(),o.memoizedState=o.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$0,lastRenderedState:a},o.queue=c,o=yv.bind(null,de,c),c.dispatch=o,c=Mf(!1),v=Rf.bind(null,de,!1,c.queue),c=Jn(),p={state:a,dispatch:null,action:i,pending:null},c.queue=p,o=zE.bind(null,de,p,v,o),p.dispatch=o,c.memoizedState=i,[a,o,!1]}function ev(i){var a=fn();return nv(a,ze,i)}function nv(i,a,o){if(a=_f(i,a,$0)[0],i=zc(ls)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=Ko(a)}catch(T){throw T===ko?Pc:T}else c=a;a=fn();var p=a.queue,v=p.dispatch;return o!==a.memoizedState&&(de.flags|=2048,br(9,Bc(),BE.bind(null,p,o),null)),[c,v,i]}function BE(i,a){i.action=a}function iv(i){var a=fn(),o=ze;if(o!==null)return nv(a,o,i);fn(),a=a.memoizedState,o=fn();var c=o.queue.dispatch;return o.memoizedState=i,[a,c,!1]}function br(i,a,o,c){return i={tag:i,create:o,deps:c,inst:a,next:null},a=de.updateQueue,a===null&&(a=xf(),de.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=i.next=i:(c=o.next,o.next=i,i.next=c,a.lastEffect=i),i}function Bc(){return{destroy:void 0,resource:void 0}}function sv(){return fn().memoizedState}function Vc(i,a,o,c){var p=Jn();c=c===void 0?null:c,de.flags|=i,p.memoizedState=br(1|a,Bc(),o,c)}function Zo(i,a,o,c){var p=fn();c=c===void 0?null:c;var v=p.memoizedState.inst;ze!==null&&c!==null&&df(c,ze.memoizedState.deps)?p.memoizedState=br(a,v,o,c):(de.flags|=i,p.memoizedState=br(1|a,v,o,c))}function av(i,a){Vc(8390656,8,i,a)}function rv(i,a){Zo(2048,8,i,a)}function ov(i,a){return Zo(4,2,i,a)}function lv(i,a){return Zo(4,4,i,a)}function cv(i,a){if(typeof a=="function"){i=i();var o=a(i);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function uv(i,a,o){o=o!=null?o.concat([i]):null,Zo(4,4,cv.bind(null,a,i),o)}function Ef(){}function hv(i,a){var o=fn();a=a===void 0?null:a;var c=o.memoizedState;return a!==null&&df(a,c[1])?c[0]:(o.memoizedState=[i,a],i)}function fv(i,a){var o=fn();a=a===void 0?null:a;var c=o.memoizedState;if(a!==null&&df(a,c[1]))return c[0];if(c=i(),Ua){ht(!0);try{i()}finally{ht(!1)}}return o.memoizedState=[c,a],c}function Tf(i,a,o){return o===void 0||(Fs&1073741824)!==0?i.memoizedState=a:(i.memoizedState=o,i=mx(),de.lanes|=i,Gs|=i,o)}function dv(i,a,o,c){return ii(o,a)?o:_r.current!==null?(i=Tf(i,o,c),ii(i,a)||(Tn=!0),i):(Fs&42)===0?(Tn=!0,i.memoizedState=o):(i=mx(),de.lanes|=i,Gs|=i,a)}function pv(i,a,o,c,p){var v=G.p;G.p=v!==0&&8>v?v:8;var T=V.T,D={};V.T=D,Rf(i,!1,a,o);try{var H=p(),st=V.S;if(st!==null&&st(D,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var dt=OE(H,c);Qo(i,a,dt,li(i))}else Qo(i,a,c,li(i))}catch(_t){Qo(i,a,{then:function(){},status:"rejected",reason:_t},li())}finally{G.p=v,V.T=T}}function VE(){}function Af(i,a,o,c){if(i.tag!==5)throw Error(s(476));var p=mv(i).queue;pv(i,p,a,q,o===null?VE:function(){return gv(i),o(c)})}function mv(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:q},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:o},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function gv(i){var a=mv(i).next.queue;Qo(i,a,{},li())}function wf(){return Bn(ml)}function vv(){return fn().memoizedState}function xv(){return fn().memoizedState}function jE(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var o=li();i=Os(o);var c=Is(a,i,o);c!==null&&(ci(c,a,o),Wo(c,a,o)),a={cache:nf()},i.payload=a;return}a=a.return}}function HE(i,a,o){var c=li();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},jc(i)?_v(a,o):(o=Xh(i,a,o,c),o!==null&&(ci(o,i,c),Sv(o,a,c)))}function yv(i,a,o){var c=li();Qo(i,a,o,c)}function Qo(i,a,o,c){var p={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(jc(i))_v(a,p);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var T=a.lastRenderedState,D=v(T,o);if(p.hasEagerState=!0,p.eagerState=D,ii(D,T))return Ec(i,a,p,0),qe===null&&bc(),!1}catch{}finally{}if(o=Xh(i,a,p,c),o!==null)return ci(o,i,c),Sv(o,a,c),!0}return!1}function Rf(i,a,o,c){if(c={lane:2,revertLane:rd(),action:c,hasEagerState:!1,eagerState:null,next:null},jc(i)){if(a)throw Error(s(479))}else a=Xh(i,o,c,2),a!==null&&ci(a,i,2)}function jc(i){var a=i.alternate;return i===de||a!==null&&a===de}function _v(i,a){Sr=Oc=!0;var o=i.pending;o===null?a.next=a:(a.next=o.next,o.next=a),i.pending=a}function Sv(i,a,o){if((o&4194048)!==0){var c=a.lanes;c&=i.pendingLanes,o|=c,a.lanes=o,Vt(i,o)}}var Hc={readContext:Bn,use:Fc,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an},Mv={readContext:Bn,use:Fc,useCallback:function(i,a){return Jn().memoizedState=[i,a===void 0?null:a],i},useContext:Bn,useEffect:av,useImperativeHandle:function(i,a,o){o=o!=null?o.concat([i]):null,Vc(4194308,4,cv.bind(null,a,i),o)},useLayoutEffect:function(i,a){return Vc(4194308,4,i,a)},useInsertionEffect:function(i,a){Vc(4,2,i,a)},useMemo:function(i,a){var o=Jn();a=a===void 0?null:a;var c=i();if(Ua){ht(!0);try{i()}finally{ht(!1)}}return o.memoizedState=[c,a],c},useReducer:function(i,a,o){var c=Jn();if(o!==void 0){var p=o(a);if(Ua){ht(!0);try{o(a)}finally{ht(!1)}}}else p=a;return c.memoizedState=c.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},c.queue=i,i=i.dispatch=HE.bind(null,de,i),[c.memoizedState,i]},useRef:function(i){var a=Jn();return i={current:i},a.memoizedState=i},useState:function(i){i=Mf(i);var a=i.queue,o=yv.bind(null,de,a);return a.dispatch=o,[i.memoizedState,o]},useDebugValue:Ef,useDeferredValue:function(i,a){var o=Jn();return Tf(o,i,a)},useTransition:function(){var i=Mf(!1);return i=pv.bind(null,de,i.queue,!0,!1),Jn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,o){var c=de,p=Jn();if(Le){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),qe===null)throw Error(s(349));(we&124)!==0||k0(c,a,o)}p.memoizedState=o;var v={value:o,getSnapshot:a};return p.queue=v,av(W0.bind(null,c,v,i),[i]),c.flags|=2048,br(9,Bc(),G0.bind(null,c,v,o,a),null),o},useId:function(){var i=Jn(),a=qe.identifierPrefix;if(Le){var o=as,c=ss;o=(c&~(1<<32-It(c)-1)).toString(32)+o,a=""+a+"R"+o,o=Ic++,0<o&&(a+="H"+o.toString(32)),a+=""}else o=IE++,a=""+a+"r"+o.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:wf,useFormState:tv,useActionState:tv,useOptimistic:function(i){var a=Jn();a.memoizedState=a.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=Rf.bind(null,de,!0,o),o.dispatch=a,[i,a]},useMemoCache:yf,useCacheRefresh:function(){return Jn().memoizedState=jE.bind(null,de)}},bv={readContext:Bn,use:Fc,useCallback:hv,useContext:Bn,useEffect:rv,useImperativeHandle:uv,useInsertionEffect:ov,useLayoutEffect:lv,useMemo:fv,useReducer:zc,useRef:sv,useState:function(){return zc(ls)},useDebugValue:Ef,useDeferredValue:function(i,a){var o=fn();return dv(o,ze.memoizedState,i,a)},useTransition:function(){var i=zc(ls)[0],a=fn().memoizedState;return[typeof i=="boolean"?i:Ko(i),a]},useSyncExternalStore:H0,useId:vv,useHostTransitionStatus:wf,useFormState:ev,useActionState:ev,useOptimistic:function(i,a){var o=fn();return Y0(o,ze,i,a)},useMemoCache:yf,useCacheRefresh:xv},kE={readContext:Bn,use:Fc,useCallback:hv,useContext:Bn,useEffect:rv,useImperativeHandle:uv,useInsertionEffect:ov,useLayoutEffect:lv,useMemo:fv,useReducer:Sf,useRef:sv,useState:function(){return Sf(ls)},useDebugValue:Ef,useDeferredValue:function(i,a){var o=fn();return ze===null?Tf(o,i,a):dv(o,ze.memoizedState,i,a)},useTransition:function(){var i=Sf(ls)[0],a=fn().memoizedState;return[typeof i=="boolean"?i:Ko(i),a]},useSyncExternalStore:H0,useId:vv,useHostTransitionStatus:wf,useFormState:iv,useActionState:iv,useOptimistic:function(i,a){var o=fn();return ze!==null?Y0(o,ze,i,a):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:yf,useCacheRefresh:xv},Er=null,Jo=0;function kc(i){var a=Jo;return Jo+=1,Er===null&&(Er=[]),N0(Er,i,a)}function $o(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Gc(i,a){throw a.$$typeof===x?Error(s(525)):(i=Object.prototype.toString.call(a),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Ev(i){var a=i._init;return a(i._payload)}function Tv(i){function a(Y,W){if(i){var tt=Y.deletions;tt===null?(Y.deletions=[W],Y.flags|=16):tt.push(W)}}function o(Y,W){if(!i)return null;for(;W!==null;)a(Y,W),W=W.sibling;return null}function c(Y){for(var W=new Map;Y!==null;)Y.key!==null?W.set(Y.key,Y):W.set(Y.index,Y),Y=Y.sibling;return W}function p(Y,W){return Y=is(Y,W),Y.index=0,Y.sibling=null,Y}function v(Y,W,tt){return Y.index=tt,i?(tt=Y.alternate,tt!==null?(tt=tt.index,tt<W?(Y.flags|=67108866,W):tt):(Y.flags|=67108866,W)):(Y.flags|=1048576,W)}function T(Y){return i&&Y.alternate===null&&(Y.flags|=67108866),Y}function D(Y,W,tt,mt){return W===null||W.tag!==6?(W=Yh(tt,Y.mode,mt),W.return=Y,W):(W=p(W,tt),W.return=Y,W)}function H(Y,W,tt,mt){var jt=tt.type;return jt===b?dt(Y,W,tt.props.children,mt,tt.key):W!==null&&(W.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===z&&Ev(jt)===W.type)?(W=p(W,tt.props),$o(W,tt),W.return=Y,W):(W=Ac(tt.type,tt.key,tt.props,null,Y.mode,mt),$o(W,tt),W.return=Y,W)}function st(Y,W,tt,mt){return W===null||W.tag!==4||W.stateNode.containerInfo!==tt.containerInfo||W.stateNode.implementation!==tt.implementation?(W=Kh(tt,Y.mode,mt),W.return=Y,W):(W=p(W,tt.children||[]),W.return=Y,W)}function dt(Y,W,tt,mt,jt){return W===null||W.tag!==7?(W=Ta(tt,Y.mode,mt,jt),W.return=Y,W):(W=p(W,tt),W.return=Y,W)}function _t(Y,W,tt){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Yh(""+W,Y.mode,tt),W.return=Y,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case y:return tt=Ac(W.type,W.key,W.props,null,Y.mode,tt),$o(tt,W),tt.return=Y,tt;case _:return W=Kh(W,Y.mode,tt),W.return=Y,W;case z:var mt=W._init;return W=mt(W._payload),_t(Y,W,tt)}if(ut(W)||it(W))return W=Ta(W,Y.mode,tt,null),W.return=Y,W;if(typeof W.then=="function")return _t(Y,kc(W),tt);if(W.$$typeof===w)return _t(Y,Dc(Y,W),tt);Gc(Y,W)}return null}function rt(Y,W,tt,mt){var jt=W!==null?W.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return jt!==null?null:D(Y,W,""+tt,mt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case y:return tt.key===jt?H(Y,W,tt,mt):null;case _:return tt.key===jt?st(Y,W,tt,mt):null;case z:return jt=tt._init,tt=jt(tt._payload),rt(Y,W,tt,mt)}if(ut(tt)||it(tt))return jt!==null?null:dt(Y,W,tt,mt,null);if(typeof tt.then=="function")return rt(Y,W,kc(tt),mt);if(tt.$$typeof===w)return rt(Y,W,Dc(Y,tt),mt);Gc(Y,tt)}return null}function ot(Y,W,tt,mt,jt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Y=Y.get(tt)||null,D(W,Y,""+mt,jt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case y:return Y=Y.get(mt.key===null?tt:mt.key)||null,H(W,Y,mt,jt);case _:return Y=Y.get(mt.key===null?tt:mt.key)||null,st(W,Y,mt,jt);case z:var me=mt._init;return mt=me(mt._payload),ot(Y,W,tt,mt,jt)}if(ut(mt)||it(mt))return Y=Y.get(tt)||null,dt(W,Y,mt,jt,null);if(typeof mt.then=="function")return ot(Y,W,tt,kc(mt),jt);if(mt.$$typeof===w)return ot(Y,W,tt,Dc(W,mt),jt);Gc(W,mt)}return null}function ie(Y,W,tt,mt){for(var jt=null,me=null,qt=W,te=W=0,wn=null;qt!==null&&te<tt.length;te++){qt.index>te?(wn=qt,qt=null):wn=qt.sibling;var Ce=rt(Y,qt,tt[te],mt);if(Ce===null){qt===null&&(qt=wn);break}i&&qt&&Ce.alternate===null&&a(Y,qt),W=v(Ce,W,te),me===null?jt=Ce:me.sibling=Ce,me=Ce,qt=wn}if(te===tt.length)return o(Y,qt),Le&&wa(Y,te),jt;if(qt===null){for(;te<tt.length;te++)qt=_t(Y,tt[te],mt),qt!==null&&(W=v(qt,W,te),me===null?jt=qt:me.sibling=qt,me=qt);return Le&&wa(Y,te),jt}for(qt=c(qt);te<tt.length;te++)wn=ot(qt,Y,te,tt[te],mt),wn!==null&&(i&&wn.alternate!==null&&qt.delete(wn.key===null?te:wn.key),W=v(wn,W,te),me===null?jt=wn:me.sibling=wn,me=wn);return i&&qt.forEach(function($s){return a(Y,$s)}),Le&&wa(Y,te),jt}function $t(Y,W,tt,mt){if(tt==null)throw Error(s(151));for(var jt=null,me=null,qt=W,te=W=0,wn=null,Ce=tt.next();qt!==null&&!Ce.done;te++,Ce=tt.next()){qt.index>te?(wn=qt,qt=null):wn=qt.sibling;var $s=rt(Y,qt,Ce.value,mt);if($s===null){qt===null&&(qt=wn);break}i&&qt&&$s.alternate===null&&a(Y,qt),W=v($s,W,te),me===null?jt=$s:me.sibling=$s,me=$s,qt=wn}if(Ce.done)return o(Y,qt),Le&&wa(Y,te),jt;if(qt===null){for(;!Ce.done;te++,Ce=tt.next())Ce=_t(Y,Ce.value,mt),Ce!==null&&(W=v(Ce,W,te),me===null?jt=Ce:me.sibling=Ce,me=Ce);return Le&&wa(Y,te),jt}for(qt=c(qt);!Ce.done;te++,Ce=tt.next())Ce=ot(qt,Y,te,Ce.value,mt),Ce!==null&&(i&&Ce.alternate!==null&&qt.delete(Ce.key===null?te:Ce.key),W=v(Ce,W,te),me===null?jt=Ce:me.sibling=Ce,me=Ce);return i&&qt.forEach(function(GT){return a(Y,GT)}),Le&&wa(Y,te),jt}function Ve(Y,W,tt,mt){if(typeof tt=="object"&&tt!==null&&tt.type===b&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case y:t:{for(var jt=tt.key;W!==null;){if(W.key===jt){if(jt=tt.type,jt===b){if(W.tag===7){o(Y,W.sibling),mt=p(W,tt.props.children),mt.return=Y,Y=mt;break t}}else if(W.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===z&&Ev(jt)===W.type){o(Y,W.sibling),mt=p(W,tt.props),$o(mt,tt),mt.return=Y,Y=mt;break t}o(Y,W);break}else a(Y,W);W=W.sibling}tt.type===b?(mt=Ta(tt.props.children,Y.mode,mt,tt.key),mt.return=Y,Y=mt):(mt=Ac(tt.type,tt.key,tt.props,null,Y.mode,mt),$o(mt,tt),mt.return=Y,Y=mt)}return T(Y);case _:t:{for(jt=tt.key;W!==null;){if(W.key===jt)if(W.tag===4&&W.stateNode.containerInfo===tt.containerInfo&&W.stateNode.implementation===tt.implementation){o(Y,W.sibling),mt=p(W,tt.children||[]),mt.return=Y,Y=mt;break t}else{o(Y,W);break}else a(Y,W);W=W.sibling}mt=Kh(tt,Y.mode,mt),mt.return=Y,Y=mt}return T(Y);case z:return jt=tt._init,tt=jt(tt._payload),Ve(Y,W,tt,mt)}if(ut(tt))return ie(Y,W,tt,mt);if(it(tt)){if(jt=it(tt),typeof jt!="function")throw Error(s(150));return tt=jt.call(tt),$t(Y,W,tt,mt)}if(typeof tt.then=="function")return Ve(Y,W,kc(tt),mt);if(tt.$$typeof===w)return Ve(Y,W,Dc(Y,tt),mt);Gc(Y,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,W!==null&&W.tag===6?(o(Y,W.sibling),mt=p(W,tt),mt.return=Y,Y=mt):(o(Y,W),mt=Yh(tt,Y.mode,mt),mt.return=Y,Y=mt),T(Y)):o(Y,W)}return function(Y,W,tt,mt){try{Jo=0;var jt=Ve(Y,W,tt,mt);return Er=null,jt}catch(qt){if(qt===ko||qt===Pc)throw qt;var me=si(29,qt,null,Y.mode);return me.lanes=mt,me.return=Y,me}finally{}}}var Tr=Tv(!0),Av=Tv(!1),yi=nt(null),zi=null;function zs(i){var a=i.alternate;bt(yn,yn.current&1),bt(yi,i),zi===null&&(a===null||_r.current!==null||a.memoizedState!==null)&&(zi=i)}function wv(i){if(i.tag===22){if(bt(yn,yn.current),bt(yi,i),zi===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(zi=i)}}else Bs()}function Bs(){bt(yn,yn.current),bt(yi,yi.current)}function cs(i){Mt(yi),zi===i&&(zi=null),Mt(yn)}var yn=nt(0);function Wc(i){for(var a=i;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||xd(o)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Cf(i,a,o,c){a=i.memoizedState,o=o(c,a),o=o==null?a:g({},a,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Df={enqueueSetState:function(i,a,o){i=i._reactInternals;var c=li(),p=Os(c);p.payload=a,o!=null&&(p.callback=o),a=Is(i,p,c),a!==null&&(ci(a,i,c),Wo(a,i,c))},enqueueReplaceState:function(i,a,o){i=i._reactInternals;var c=li(),p=Os(c);p.tag=1,p.payload=a,o!=null&&(p.callback=o),a=Is(i,p,c),a!==null&&(ci(a,i,c),Wo(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var o=li(),c=Os(o);c.tag=2,a!=null&&(c.callback=a),a=Is(i,c,o),a!==null&&(ci(a,i,o),Wo(a,i,o))}};function Rv(i,a,o,c,p,v,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,T):a.prototype&&a.prototype.isPureReactComponent?!Oo(o,c)||!Oo(p,v):!0}function Cv(i,a,o,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,c),a.state!==i&&Df.enqueueReplaceState(a,a.state,null)}function Na(i,a){var o=a;if("ref"in a){o={};for(var c in a)c!=="ref"&&(o[c]=a[c])}if(i=i.defaultProps){o===a&&(o=g({},o));for(var p in i)o[p]===void 0&&(o[p]=i[p])}return o}var Xc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Dv(i){Xc(i)}function Lv(i){console.error(i)}function Pv(i){Xc(i)}function qc(i,a){try{var o=i.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function Uv(i,a,o){try{var c=i.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Lf(i,a,o){return o=Os(o),o.tag=3,o.payload={element:null},o.callback=function(){qc(i,a)},o}function Nv(i){return i=Os(i),i.tag=3,i}function Ov(i,a,o,c){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var v=c.value;i.payload=function(){return p(v)},i.callback=function(){Uv(a,o,c)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Uv(a,o,c),typeof p!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var D=c.stack;this.componentDidCatch(c.value,{componentStack:D!==null?D:""})})}function GE(i,a,o,c,p){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=o.alternate,a!==null&&Vo(a,o,p,!0),o=yi.current,o!==null){switch(o.tag){case 13:return zi===null?ed():o.alternate===null&&en===0&&(en=3),o.flags&=-257,o.flags|=65536,o.lanes=p,c===rf?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([c]):a.add(c),id(i,c,p)),!1;case 22:return o.flags|=65536,c===rf?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([c]):o.add(c)),id(i,c,p)),!1}throw Error(s(435,o.tag))}return id(i,c,p),ed(),!1}if(Le)return a=yi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==Jh&&(i=Error(s(422),{cause:c}),Bo(mi(i,o)))):(c!==Jh&&(a=Error(s(423),{cause:c}),Bo(mi(a,o))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,c=mi(c,o),p=Lf(i.stateNode,c,p),cf(i,p),en!==4&&(en=2)),!1;var v=Error(s(520),{cause:c});if(v=mi(v,o),rl===null?rl=[v]:rl.push(v),en!==4&&(en=2),a===null)return!0;c=mi(c,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,i=p&-p,o.lanes|=i,i=Lf(o.stateNode,c,i),cf(o,i),!1;case 1:if(a=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ws===null||!Ws.has(v))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Nv(p),Ov(p,i,o,c),cf(o,p),!1}o=o.return}while(o!==null);return!1}var Iv=Error(s(461)),Tn=!1;function Un(i,a,o,c){a.child=i===null?Av(a,null,o,c):Tr(a,i.child,o,c)}function Fv(i,a,o,c,p){o=o.render;var v=a.ref;if("ref"in c){var T={};for(var D in c)D!=="ref"&&(T[D]=c[D])}else T=c;return La(a),c=pf(i,a,o,T,v,p),D=mf(),i!==null&&!Tn?(gf(i,a,p),us(i,a,p)):(Le&&D&&Zh(a),a.flags|=1,Un(i,a,c,p),a.child)}function zv(i,a,o,c,p){if(i===null){var v=o.type;return typeof v=="function"&&!qh(v)&&v.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=v,Bv(i,a,v,c,p)):(i=Ac(o.type,null,c,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(v=i.child,!Bf(i,p)){var T=v.memoizedProps;if(o=o.compare,o=o!==null?o:Oo,o(T,c)&&i.ref===a.ref)return us(i,a,p)}return a.flags|=1,i=is(v,c),i.ref=a.ref,i.return=a,a.child=i}function Bv(i,a,o,c,p){if(i!==null){var v=i.memoizedProps;if(Oo(v,c)&&i.ref===a.ref)if(Tn=!1,a.pendingProps=c=v,Bf(i,p))(i.flags&131072)!==0&&(Tn=!0);else return a.lanes=i.lanes,us(i,a,p)}return Pf(i,a,o,c,p)}function Vv(i,a,o){var c=a.pendingProps,p=c.children,v=i!==null?i.memoizedState:null;if(c.mode==="hidden"){if((a.flags&128)!==0){if(c=v!==null?v.baseLanes|o:o,i!==null){for(p=a.child=i.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;a.childLanes=v&~c}else a.childLanes=0,a.child=null;return jv(i,a,c,o)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Lc(a,v!==null?v.cachePool:null),v!==null?B0(a,v):hf(),wv(a);else return a.lanes=a.childLanes=536870912,jv(i,a,v!==null?v.baseLanes|o:o,o)}else v!==null?(Lc(a,v.cachePool),B0(a,v),Bs(),a.memoizedState=null):(i!==null&&Lc(a,null),hf(),Bs());return Un(i,a,p,o),a.child}function jv(i,a,o,c){var p=af();return p=p===null?null:{parent:xn._currentValue,pool:p},a.memoizedState={baseLanes:o,cachePool:p},i!==null&&Lc(a,null),hf(),wv(a),i!==null&&Vo(i,a,c,!0),null}function Yc(i,a){var o=a.ref;if(o===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(a.flags|=4194816)}}function Pf(i,a,o,c,p){return La(a),o=pf(i,a,o,c,void 0,p),c=mf(),i!==null&&!Tn?(gf(i,a,p),us(i,a,p)):(Le&&c&&Zh(a),a.flags|=1,Un(i,a,o,p),a.child)}function Hv(i,a,o,c,p,v){return La(a),a.updateQueue=null,o=j0(a,c,o,p),V0(i),c=mf(),i!==null&&!Tn?(gf(i,a,v),us(i,a,v)):(Le&&c&&Zh(a),a.flags|=1,Un(i,a,o,v),a.child)}function kv(i,a,o,c,p){if(La(a),a.stateNode===null){var v=mr,T=o.contextType;typeof T=="object"&&T!==null&&(v=Bn(T)),v=new o(c,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Df,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=c,v.state=a.memoizedState,v.refs={},of(a),T=o.contextType,v.context=typeof T=="object"&&T!==null?Bn(T):mr,v.state=a.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Cf(a,o,T,c),v.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(T=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),T!==v.state&&Df.enqueueReplaceState(v,v.state,null),qo(a,c,v,p),Xo(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){v=a.stateNode;var D=a.memoizedProps,H=Na(o,D);v.props=H;var st=v.context,dt=o.contextType;T=mr,typeof dt=="object"&&dt!==null&&(T=Bn(dt));var _t=o.getDerivedStateFromProps;dt=typeof _t=="function"||typeof v.getSnapshotBeforeUpdate=="function",D=a.pendingProps!==D,dt||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(D||st!==T)&&Cv(a,v,c,T),Ns=!1;var rt=a.memoizedState;v.state=rt,qo(a,c,v,p),Xo(),st=a.memoizedState,D||rt!==st||Ns?(typeof _t=="function"&&(Cf(a,o,_t,c),st=a.memoizedState),(H=Ns||Rv(a,o,H,c,rt,st,T))?(dt||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=st),v.props=c,v.state=st,v.context=T,c=H):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{v=a.stateNode,lf(i,a),T=a.memoizedProps,dt=Na(o,T),v.props=dt,_t=a.pendingProps,rt=v.context,st=o.contextType,H=mr,typeof st=="object"&&st!==null&&(H=Bn(st)),D=o.getDerivedStateFromProps,(st=typeof D=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==_t||rt!==H)&&Cv(a,v,c,H),Ns=!1,rt=a.memoizedState,v.state=rt,qo(a,c,v,p),Xo();var ot=a.memoizedState;T!==_t||rt!==ot||Ns||i!==null&&i.dependencies!==null&&Cc(i.dependencies)?(typeof D=="function"&&(Cf(a,o,D,c),ot=a.memoizedState),(dt=Ns||Rv(a,o,dt,c,rt,ot,H)||i!==null&&i.dependencies!==null&&Cc(i.dependencies))?(st||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ot,H),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ot,H)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===i.memoizedProps&&rt===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&rt===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ot),v.props=c,v.state=ot,v.context=H,c=dt):(typeof v.componentDidUpdate!="function"||T===i.memoizedProps&&rt===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&rt===i.memoizedState||(a.flags|=1024),c=!1)}return v=c,Yc(i,a),c=(a.flags&128)!==0,v||c?(v=a.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,i!==null&&c?(a.child=Tr(a,i.child,null,p),a.child=Tr(a,null,o,p)):Un(i,a,o,p),a.memoizedState=v.state,i=a.child):i=us(i,a,p),i}function Gv(i,a,o,c){return zo(),a.flags|=256,Un(i,a,o,c),a.child}var Uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nf(i){return{baseLanes:i,cachePool:L0()}}function Of(i,a,o){return i=i!==null?i.childLanes&~o:0,a&&(i|=_i),i}function Wv(i,a,o){var c=a.pendingProps,p=!1,v=(a.flags&128)!==0,T;if((T=v)||(T=i!==null&&i.memoizedState===null?!1:(yn.current&2)!==0),T&&(p=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,i===null){if(Le){if(p?zs(a):Bs(),Le){var D=tn,H;if(H=D){t:{for(H=D,D=Fi;H.nodeType!==8;){if(!D){D=null;break t}if(H=Ri(H.nextSibling),H===null){D=null;break t}}D=H}D!==null?(a.memoizedState={dehydrated:D,treeContext:Aa!==null?{id:ss,overflow:as}:null,retryLane:536870912,hydrationErrors:null},H=si(18,null,null,0),H.stateNode=D,H.return=a,a.child=H,Gn=a,tn=null,H=!0):H=!1}H||Ca(a)}if(D=a.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return xd(D)?a.lanes=32:a.lanes=536870912,null;cs(a)}return D=c.children,c=c.fallback,p?(Bs(),p=a.mode,D=Kc({mode:"hidden",children:D},p),c=Ta(c,p,o,null),D.return=a,c.return=a,D.sibling=c,a.child=D,p=a.child,p.memoizedState=Nf(o),p.childLanes=Of(i,T,o),a.memoizedState=Uf,c):(zs(a),If(a,D))}if(H=i.memoizedState,H!==null&&(D=H.dehydrated,D!==null)){if(v)a.flags&256?(zs(a),a.flags&=-257,a=Ff(i,a,o)):a.memoizedState!==null?(Bs(),a.child=i.child,a.flags|=128,a=null):(Bs(),p=c.fallback,D=a.mode,c=Kc({mode:"visible",children:c.children},D),p=Ta(p,D,o,null),p.flags|=2,c.return=a,p.return=a,c.sibling=p,a.child=c,Tr(a,i.child,null,o),c=a.child,c.memoizedState=Nf(o),c.childLanes=Of(i,T,o),a.memoizedState=Uf,a=p);else if(zs(a),xd(D)){if(T=D.nextSibling&&D.nextSibling.dataset,T)var st=T.dgst;T=st,c=Error(s(419)),c.stack="",c.digest=T,Bo({value:c,source:null,stack:null}),a=Ff(i,a,o)}else if(Tn||Vo(i,a,o,!1),T=(o&i.childLanes)!==0,Tn||T){if(T=qe,T!==null&&(c=o&-o,c=(c&42)!==0?1:ae(c),c=(c&(T.suspendedLanes|o))!==0?0:c,c!==0&&c!==H.retryLane))throw H.retryLane=c,pr(i,c),ci(T,i,c),Iv;D.data==="$?"||ed(),a=Ff(i,a,o)}else D.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=H.treeContext,tn=Ri(D.nextSibling),Gn=a,Le=!0,Ra=null,Fi=!1,i!==null&&(vi[xi++]=ss,vi[xi++]=as,vi[xi++]=Aa,ss=i.id,as=i.overflow,Aa=a),a=If(a,c.children),a.flags|=4096);return a}return p?(Bs(),p=c.fallback,D=a.mode,H=i.child,st=H.sibling,c=is(H,{mode:"hidden",children:c.children}),c.subtreeFlags=H.subtreeFlags&65011712,st!==null?p=is(st,p):(p=Ta(p,D,o,null),p.flags|=2),p.return=a,c.return=a,c.sibling=p,a.child=c,c=p,p=a.child,D=i.child.memoizedState,D===null?D=Nf(o):(H=D.cachePool,H!==null?(st=xn._currentValue,H=H.parent!==st?{parent:st,pool:st}:H):H=L0(),D={baseLanes:D.baseLanes|o,cachePool:H}),p.memoizedState=D,p.childLanes=Of(i,T,o),a.memoizedState=Uf,c):(zs(a),o=i.child,i=o.sibling,o=is(o,{mode:"visible",children:c.children}),o.return=a,o.sibling=null,i!==null&&(T=a.deletions,T===null?(a.deletions=[i],a.flags|=16):T.push(i)),a.child=o,a.memoizedState=null,o)}function If(i,a){return a=Kc({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Kc(i,a){return i=si(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Ff(i,a,o){return Tr(a,i.child,null,o),i=If(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Xv(i,a,o){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),tf(i.return,a,o)}function zf(i,a,o,c,p){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:p}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=o,v.tailMode=p)}function qv(i,a,o){var c=a.pendingProps,p=c.revealOrder,v=c.tail;if(Un(i,a,c.children,o),c=yn.current,(c&2)!==0)c=c&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Xv(i,o,a);else if(i.tag===19)Xv(i,o,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(bt(yn,c),p){case"forwards":for(o=a.child,p=null;o!==null;)i=o.alternate,i!==null&&Wc(i)===null&&(p=o),o=o.sibling;o=p,o===null?(p=a.child,a.child=null):(p=o.sibling,o.sibling=null),zf(a,!1,p,o,v);break;case"backwards":for(o=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&Wc(i)===null){a.child=p;break}i=p.sibling,p.sibling=o,o=p,p=i}zf(a,!0,o,null,v);break;case"together":zf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function us(i,a,o){if(i!==null&&(a.dependencies=i.dependencies),Gs|=a.lanes,(o&a.childLanes)===0)if(i!==null){if(Vo(i,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(s(153));if(a.child!==null){for(i=a.child,o=is(i,i.pendingProps),a.child=o,o.return=a;i.sibling!==null;)i=i.sibling,o=o.sibling=is(i,i.pendingProps),o.return=a;o.sibling=null}return a.child}function Bf(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Cc(i)))}function WE(i,a,o){switch(a.tag){case 3:Ct(a,a.stateNode.containerInfo),Us(a,xn,i.memoizedState.cache),zo();break;case 27:case 5:Ht(a);break;case 4:Ct(a,a.stateNode.containerInfo);break;case 10:Us(a,a.type,a.memoizedProps.value);break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(zs(a),a.flags|=128,null):(o&a.child.childLanes)!==0?Wv(i,a,o):(zs(a),i=us(i,a,o),i!==null?i.sibling:null);zs(a);break;case 19:var p=(i.flags&128)!==0;if(c=(o&a.childLanes)!==0,c||(Vo(i,a,o,!1),c=(o&a.childLanes)!==0),p){if(c)return qv(i,a,o);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),bt(yn,yn.current),c)break;return null;case 22:case 23:return a.lanes=0,Vv(i,a,o);case 24:Us(a,xn,i.memoizedState.cache)}return us(i,a,o)}function Yv(i,a,o){if(i!==null)if(i.memoizedProps!==a.pendingProps)Tn=!0;else{if(!Bf(i,o)&&(a.flags&128)===0)return Tn=!1,WE(i,a,o);Tn=(i.flags&131072)!==0}else Tn=!1,Le&&(a.flags&1048576)!==0&&E0(a,Rc,a.index);switch(a.lanes=0,a.tag){case 16:t:{i=a.pendingProps;var c=a.elementType,p=c._init;if(c=p(c._payload),a.type=c,typeof c=="function")qh(c)?(i=Na(c,i),a.tag=1,a=kv(null,a,c,i,o)):(a.tag=0,a=Pf(null,a,c,i,o));else{if(c!=null){if(p=c.$$typeof,p===A){a.tag=11,a=Fv(null,a,c,i,o);break t}else if(p===I){a.tag=14,a=zv(null,a,c,i,o);break t}}throw a=et(c)||c,Error(s(306,a,""))}}return a;case 0:return Pf(i,a,a.type,a.pendingProps,o);case 1:return c=a.type,p=Na(c,a.pendingProps),kv(i,a,c,p,o);case 3:t:{if(Ct(a,a.stateNode.containerInfo),i===null)throw Error(s(387));c=a.pendingProps;var v=a.memoizedState;p=v.element,lf(i,a),qo(a,c,null,o);var T=a.memoizedState;if(c=T.cache,Us(a,xn,c),c!==v.cache&&ef(a,[xn],o,!0),Xo(),c=T.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=Gv(i,a,c,o);break t}else if(c!==p){p=mi(Error(s(424)),a),Bo(p),a=Gv(i,a,c,o);break t}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(tn=Ri(i.firstChild),Gn=a,Le=!0,Ra=null,Fi=!0,o=Av(a,null,c,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(zo(),c===p){a=us(i,a,o);break t}Un(i,a,c,o)}a=a.child}return a;case 26:return Yc(i,a),i===null?(o=Jx(a.type,null,a.pendingProps,null))?a.memoizedState=o:Le||(o=a.type,i=a.pendingProps,c=cu(vt.current).createElement(o),c[gn]=a,c[Ln]=i,On(c,o,i),un(c),a.stateNode=c):a.memoizedState=Jx(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Ht(a),i===null&&Le&&(c=a.stateNode=Kx(a.type,a.pendingProps,vt.current),Gn=a,Fi=!0,p=tn,Ys(a.type)?(yd=p,tn=Ri(c.firstChild)):tn=p),Un(i,a,a.pendingProps.children,o),Yc(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Le&&((p=c=tn)&&(c=yT(c,a.type,a.pendingProps,Fi),c!==null?(a.stateNode=c,Gn=a,tn=Ri(c.firstChild),Fi=!1,p=!0):p=!1),p||Ca(a)),Ht(a),p=a.type,v=a.pendingProps,T=i!==null?i.memoizedProps:null,c=v.children,md(p,v)?c=null:T!==null&&md(p,T)&&(a.flags|=32),a.memoizedState!==null&&(p=pf(i,a,FE,null,null,o),ml._currentValue=p),Yc(i,a),Un(i,a,c,o),a.child;case 6:return i===null&&Le&&((i=o=tn)&&(o=_T(o,a.pendingProps,Fi),o!==null?(a.stateNode=o,Gn=a,tn=null,i=!0):i=!1),i||Ca(a)),null;case 13:return Wv(i,a,o);case 4:return Ct(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=Tr(a,null,c,o):Un(i,a,c,o),a.child;case 11:return Fv(i,a,a.type,a.pendingProps,o);case 7:return Un(i,a,a.pendingProps,o),a.child;case 8:return Un(i,a,a.pendingProps.children,o),a.child;case 12:return Un(i,a,a.pendingProps.children,o),a.child;case 10:return c=a.pendingProps,Us(a,a.type,c.value),Un(i,a,c.children,o),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,La(a),p=Bn(p),c=c(p),a.flags|=1,Un(i,a,c,o),a.child;case 14:return zv(i,a,a.type,a.pendingProps,o);case 15:return Bv(i,a,a.type,a.pendingProps,o);case 19:return qv(i,a,o);case 31:return c=a.pendingProps,o=a.mode,c={mode:c.mode,children:c.children},i===null?(o=Kc(c,o),o.ref=a.ref,a.child=o,o.return=a,a=o):(o=is(i.child,c),o.ref=a.ref,a.child=o,o.return=a,a=o),a;case 22:return Vv(i,a,o);case 24:return La(a),c=Bn(xn),i===null?(p=af(),p===null&&(p=qe,v=nf(),p.pooledCache=v,v.refCount++,v!==null&&(p.pooledCacheLanes|=o),p=v),a.memoizedState={parent:c,cache:p},of(a),Us(a,xn,p)):((i.lanes&o)!==0&&(lf(i,a),qo(a,null,null,o),Xo()),p=i.memoizedState,v=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Us(a,xn,c)):(c=v.cache,Us(a,xn,c),c!==p.cache&&ef(a,[xn],o,!0))),Un(i,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function hs(i){i.flags|=4}function Kv(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!iy(a)){if(a=yi.current,a!==null&&((we&4194048)===we?zi!==null:(we&62914560)!==we&&(we&536870912)===0||a!==zi))throw Go=rf,P0;i.flags|=8192}}function Zc(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Ut():536870912,i.lanes|=a,Cr|=a)}function tl(i,a){if(!Le)switch(i.tailMode){case"hidden":a=i.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Je(i){var a=i.alternate!==null&&i.alternate.child===i.child,o=0,c=0;if(a)for(var p=i.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=c,i.childLanes=o,a}function XE(i,a,o){var c=a.pendingProps;switch(Qh(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(a),null;case 1:return Je(a),null;case 3:return o=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),os(xn),ee(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Fo(a)?hs(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,w0())),Je(a),null;case 26:return o=a.memoizedState,i===null?(hs(a),o!==null?(Je(a),Kv(a,o)):(Je(a),a.flags&=-16777217)):o?o!==i.memoizedState?(hs(a),Je(a),Kv(a,o)):(Je(a),a.flags&=-16777217):(i.memoizedProps!==c&&hs(a),Je(a),a.flags&=-16777217),null;case 27:_e(a),o=vt.current;var p=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==c&&hs(a);else{if(!c){if(a.stateNode===null)throw Error(s(166));return Je(a),null}i=J.current,Fo(a)?T0(a):(i=Kx(p,c,o),a.stateNode=i,hs(a))}return Je(a),null;case 5:if(_e(a),o=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&hs(a);else{if(!c){if(a.stateNode===null)throw Error(s(166));return Je(a),null}if(i=J.current,Fo(a))T0(a);else{switch(p=cu(vt.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?p.createElement("select",{is:c.is}):p.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?p.createElement(o,{is:c.is}):p.createElement(o)}}i[gn]=a,i[Ln]=c;t:for(p=a.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break t;for(;p.sibling===null;){if(p.return===null||p.return===a)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}a.stateNode=i;t:switch(On(i,o,c),o){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&hs(a)}}return Je(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&hs(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(s(166));if(i=vt.current,Fo(a)){if(i=a.stateNode,o=a.memoizedProps,c=null,p=Gn,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}i[gn]=a,i=!!(i.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Hx(i.nodeValue,o)),i||Ca(a)}else i=cu(i).createTextNode(c),i[gn]=a,a.stateNode=i}return Je(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=Fo(a),c!==null&&c.dehydrated!==null){if(i===null){if(!p)throw Error(s(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[gn]=a}else zo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Je(a),p=!1}else p=w0(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(cs(a),a):(cs(a),null)}if(cs(a),(a.flags&128)!==0)return a.lanes=o,a;if(o=c!==null,i=i!==null&&i.memoizedState!==null,o){c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool);var v=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==p&&(c.flags|=2048)}return o!==i&&o&&(a.child.flags|=8192),Zc(a,a.updateQueue),Je(a),null;case 4:return ee(),i===null&&ud(a.stateNode.containerInfo),Je(a),null;case 10:return os(a.type),Je(a),null;case 19:if(Mt(yn),p=a.memoizedState,p===null)return Je(a),null;if(c=(a.flags&128)!==0,v=p.rendering,v===null)if(c)tl(p,!1);else{if(en!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(v=Wc(i),v!==null){for(a.flags|=128,tl(p,!1),i=v.updateQueue,a.updateQueue=i,Zc(a,i),a.subtreeFlags=0,i=o,o=a.child;o!==null;)b0(o,i),o=o.sibling;return bt(yn,yn.current&1|2),a.child}i=i.sibling}p.tail!==null&&ge()>$c&&(a.flags|=128,c=!0,tl(p,!1),a.lanes=4194304)}else{if(!c)if(i=Wc(v),i!==null){if(a.flags|=128,c=!0,i=i.updateQueue,a.updateQueue=i,Zc(a,i),tl(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Le)return Je(a),null}else 2*ge()-p.renderingStartTime>$c&&o!==536870912&&(a.flags|=128,c=!0,tl(p,!1),a.lanes=4194304);p.isBackwards?(v.sibling=a.child,a.child=v):(i=p.last,i!==null?i.sibling=v:a.child=v,p.last=v)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=ge(),a.sibling=null,i=yn.current,bt(yn,c?i&1|2:i&1),a):(Je(a),null);case 22:case 23:return cs(a),ff(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(o&536870912)!==0&&(a.flags&128)===0&&(Je(a),a.subtreeFlags&6&&(a.flags|=8192)):Je(a),o=a.updateQueue,o!==null&&Zc(a,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==o&&(a.flags|=2048),i!==null&&Mt(Pa),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),os(xn),Je(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function qE(i,a){switch(Qh(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return os(xn),ee(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return _e(a),null;case 13:if(cs(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(s(340));zo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Mt(yn),null;case 4:return ee(),null;case 10:return os(a.type),null;case 22:case 23:return cs(a),ff(),i!==null&&Mt(Pa),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return os(xn),null;case 25:return null;default:return null}}function Zv(i,a){switch(Qh(a),a.tag){case 3:os(xn),ee();break;case 26:case 27:case 5:_e(a);break;case 4:ee();break;case 13:cs(a);break;case 19:Mt(yn);break;case 10:os(a.type);break;case 22:case 23:cs(a),ff(),i!==null&&Mt(Pa);break;case 24:os(xn)}}function el(i,a){try{var o=a.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var p=c.next;o=p;do{if((o.tag&i)===i){c=void 0;var v=o.create,T=o.inst;c=v(),T.destroy=c}o=o.next}while(o!==p)}}catch(D){Ge(a,a.return,D)}}function Vs(i,a,o){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var v=p.next;c=v;do{if((c.tag&i)===i){var T=c.inst,D=T.destroy;if(D!==void 0){T.destroy=void 0,p=a;var H=o,st=D;try{st()}catch(dt){Ge(p,H,dt)}}}c=c.next}while(c!==v)}}catch(dt){Ge(a,a.return,dt)}}function Qv(i){var a=i.updateQueue;if(a!==null){var o=i.stateNode;try{z0(a,o)}catch(c){Ge(i,i.return,c)}}}function Jv(i,a,o){o.props=Na(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(c){Ge(i,a,c)}}function nl(i,a){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof o=="function"?i.refCleanup=o(c):o.current=c}}catch(p){Ge(i,a,p)}}function Bi(i,a){var o=i.ref,c=i.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(p){Ge(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Ge(i,a,p)}else o.current=null}function $v(i){var a=i.type,o=i.memoizedProps,c=i.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break t;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(p){Ge(i,i.return,p)}}function Vf(i,a,o){try{var c=i.stateNode;pT(c,i.type,o,a),c[Ln]=a}catch(p){Ge(i,i.return,p)}}function tx(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ys(i.type)||i.tag===4}function jf(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||tx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ys(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Hf(i,a,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(i),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=lu));else if(c!==4&&(c===27&&Ys(i.type)&&(o=i.stateNode,a=null),i=i.child,i!==null))for(Hf(i,a,o),i=i.sibling;i!==null;)Hf(i,a,o),i=i.sibling}function Qc(i,a,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?o.insertBefore(i,a):o.appendChild(i);else if(c!==4&&(c===27&&Ys(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Qc(i,a,o),i=i.sibling;i!==null;)Qc(i,a,o),i=i.sibling}function ex(i){var a=i.stateNode,o=i.memoizedProps;try{for(var c=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);On(a,c,o),a[gn]=i,a[Ln]=o}catch(v){Ge(i,i.return,v)}}var fs=!1,rn=!1,kf=!1,nx=typeof WeakSet=="function"?WeakSet:Set,An=null;function YE(i,a){if(i=i.containerInfo,dd=mu,i=d0(i),Vh(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var p=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break t}var T=0,D=-1,H=-1,st=0,dt=0,_t=i,rt=null;e:for(;;){for(var ot;_t!==o||p!==0&&_t.nodeType!==3||(D=T+p),_t!==v||c!==0&&_t.nodeType!==3||(H=T+c),_t.nodeType===3&&(T+=_t.nodeValue.length),(ot=_t.firstChild)!==null;)rt=_t,_t=ot;for(;;){if(_t===i)break e;if(rt===o&&++st===p&&(D=T),rt===v&&++dt===c&&(H=T),(ot=_t.nextSibling)!==null)break;_t=rt,rt=_t.parentNode}_t=ot}o=D===-1||H===-1?null:{start:D,end:H}}else o=null}o=o||{start:0,end:0}}else o=null;for(pd={focusedElem:i,selectionRange:o},mu=!1,An=a;An!==null;)if(a=An,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,An=i;else for(;An!==null;){switch(a=An,v=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,o=a,p=v.memoizedProps,v=v.memoizedState,c=o.stateNode;try{var ie=Na(o.type,p,o.elementType===o.type);i=c.getSnapshotBeforeUpdate(ie,v),c.__reactInternalSnapshotBeforeUpdate=i}catch($t){Ge(o,o.return,$t)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,o=i.nodeType,o===9)vd(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":vd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=a.sibling,i!==null){i.return=a.return,An=i;break}An=a.return}}function ix(i,a,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:js(i,o),c&4&&el(5,o);break;case 1:if(js(i,o),c&4)if(i=o.stateNode,a===null)try{i.componentDidMount()}catch(T){Ge(o,o.return,T)}else{var p=Na(o.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(T){Ge(o,o.return,T)}}c&64&&Qv(o),c&512&&nl(o,o.return);break;case 3:if(js(i,o),c&64&&(i=o.updateQueue,i!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{z0(i,a)}catch(T){Ge(o,o.return,T)}}break;case 27:a===null&&c&4&&ex(o);case 26:case 5:js(i,o),a===null&&c&4&&$v(o),c&512&&nl(o,o.return);break;case 12:js(i,o);break;case 13:js(i,o),c&4&&rx(i,o),c&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=iT.bind(null,o),ST(i,o))));break;case 22:if(c=o.memoizedState!==null||fs,!c){a=a!==null&&a.memoizedState!==null||rn,p=fs;var v=rn;fs=c,(rn=a)&&!v?Hs(i,o,(o.subtreeFlags&8772)!==0):js(i,o),fs=p,rn=v}break;case 30:break;default:js(i,o)}}function sx(i){var a=i.alternate;a!==null&&(i.alternate=null,sx(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Cs(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Qe=null,$n=!1;function ds(i,a,o){for(o=o.child;o!==null;)ax(i,a,o),o=o.sibling}function ax(i,a,o){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(pt,o)}catch{}switch(o.tag){case 26:rn||Bi(o,a),ds(i,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:rn||Bi(o,a);var c=Qe,p=$n;Ys(o.type)&&(Qe=o.stateNode,$n=!1),ds(i,a,o),hl(o.stateNode),Qe=c,$n=p;break;case 5:rn||Bi(o,a);case 6:if(c=Qe,p=$n,Qe=null,ds(i,a,o),Qe=c,$n=p,Qe!==null)if($n)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(o.stateNode)}catch(v){Ge(o,a,v)}else try{Qe.removeChild(o.stateNode)}catch(v){Ge(o,a,v)}break;case 18:Qe!==null&&($n?(i=Qe,qx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),yl(i)):qx(Qe,o.stateNode));break;case 4:c=Qe,p=$n,Qe=o.stateNode.containerInfo,$n=!0,ds(i,a,o),Qe=c,$n=p;break;case 0:case 11:case 14:case 15:rn||Vs(2,o,a),rn||Vs(4,o,a),ds(i,a,o);break;case 1:rn||(Bi(o,a),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Jv(o,a,c)),ds(i,a,o);break;case 21:ds(i,a,o);break;case 22:rn=(c=rn)||o.memoizedState!==null,ds(i,a,o),rn=c;break;default:ds(i,a,o)}}function rx(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{yl(i)}catch(o){Ge(a,a.return,o)}}function KE(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new nx),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new nx),a;default:throw Error(s(435,i.tag))}}function Gf(i,a){var o=KE(i);a.forEach(function(c){var p=sT.bind(null,i,c);o.has(c)||(o.add(c),c.then(p,p))})}function ai(i,a){var o=a.deletions;if(o!==null)for(var c=0;c<o.length;c++){var p=o[c],v=i,T=a,D=T;t:for(;D!==null;){switch(D.tag){case 27:if(Ys(D.type)){Qe=D.stateNode,$n=!1;break t}break;case 5:Qe=D.stateNode,$n=!1;break t;case 3:case 4:Qe=D.stateNode.containerInfo,$n=!0;break t}D=D.return}if(Qe===null)throw Error(s(160));ax(v,T,p),Qe=null,$n=!1,v=p.alternate,v!==null&&(v.return=null),p.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)ox(a,i),a=a.sibling}var wi=null;function ox(i,a){var o=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ai(a,i),ri(i),c&4&&(Vs(3,i,i.return),el(3,i),Vs(5,i,i.return));break;case 1:ai(a,i),ri(i),c&512&&(rn||o===null||Bi(o,o.return)),c&64&&fs&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var p=wi;if(ai(a,i),ri(i),c&512&&(rn||o===null||Bi(o,o.return)),c&4){var v=o!==null?o.memoizedState:null;if(c=i.memoizedState,o===null)if(c===null)if(i.stateNode===null){t:{c=i.type,o=i.memoizedProps,p=p.ownerDocument||p;e:switch(c){case"title":v=p.getElementsByTagName("title")[0],(!v||v[Rs]||v[gn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=p.createElement(c),p.head.insertBefore(v,p.querySelector("head > title"))),On(v,c,o),v[gn]=i,un(v),c=v;break t;case"link":var T=ey("link","href",p).get(c+(o.href||""));if(T){for(var D=0;D<T.length;D++)if(v=T[D],v.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(D,1);break e}}v=p.createElement(c),On(v,c,o),p.head.appendChild(v);break;case"meta":if(T=ey("meta","content",p).get(c+(o.content||""))){for(D=0;D<T.length;D++)if(v=T[D],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(D,1);break e}}v=p.createElement(c),On(v,c,o),p.head.appendChild(v);break;default:throw Error(s(468,c))}v[gn]=i,un(v),c=v}i.stateNode=c}else ny(p,i.type,i.stateNode);else i.stateNode=ty(p,c,i.memoizedProps);else v!==c?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,c===null?ny(p,i.type,i.stateNode):ty(p,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Vf(i,i.memoizedProps,o.memoizedProps)}break;case 27:ai(a,i),ri(i),c&512&&(rn||o===null||Bi(o,o.return)),o!==null&&c&4&&Vf(i,i.memoizedProps,o.memoizedProps);break;case 5:if(ai(a,i),ri(i),c&512&&(rn||o===null||Bi(o,o.return)),i.flags&32){p=i.stateNode;try{Ii(p,"")}catch(ot){Ge(i,i.return,ot)}}c&4&&i.stateNode!=null&&(p=i.memoizedProps,Vf(i,p,o!==null?o.memoizedProps:p)),c&1024&&(kf=!0);break;case 6:if(ai(a,i),ri(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,o=i.stateNode;try{o.nodeValue=c}catch(ot){Ge(i,i.return,ot)}}break;case 3:if(fu=null,p=wi,wi=uu(a.containerInfo),ai(a,i),wi=p,ri(i),c&4&&o!==null&&o.memoizedState.isDehydrated)try{yl(a.containerInfo)}catch(ot){Ge(i,i.return,ot)}kf&&(kf=!1,lx(i));break;case 4:c=wi,wi=uu(i.stateNode.containerInfo),ai(a,i),ri(i),wi=c;break;case 12:ai(a,i),ri(i);break;case 13:ai(a,i),ri(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Zf=ge()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Gf(i,c)));break;case 22:p=i.memoizedState!==null;var H=o!==null&&o.memoizedState!==null,st=fs,dt=rn;if(fs=st||p,rn=dt||H,ai(a,i),rn=dt,fs=st,ri(i),c&8192)t:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(o===null||H||fs||rn||Oa(i)),o=null,a=i;;){if(a.tag===5||a.tag===26){if(o===null){H=o=a;try{if(v=H.stateNode,p)T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{D=H.stateNode;var _t=H.memoizedProps.style,rt=_t!=null&&_t.hasOwnProperty("display")?_t.display:null;D.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(ot){Ge(H,H.return,ot)}}}else if(a.tag===6){if(o===null){H=a;try{H.stateNode.nodeValue=p?"":H.memoizedProps}catch(ot){Ge(H,H.return,ot)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Gf(i,o))));break;case 19:ai(a,i),ri(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Gf(i,c)));break;case 30:break;case 21:break;default:ai(a,i),ri(i)}}function ri(i){var a=i.flags;if(a&2){try{for(var o,c=i.return;c!==null;){if(tx(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var p=o.stateNode,v=jf(i);Qc(i,v,p);break;case 5:var T=o.stateNode;o.flags&32&&(Ii(T,""),o.flags&=-33);var D=jf(i);Qc(i,D,T);break;case 3:case 4:var H=o.stateNode.containerInfo,st=jf(i);Hf(i,st,H);break;default:throw Error(s(161))}}catch(dt){Ge(i,i.return,dt)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function lx(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;lx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function js(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ix(i,a.alternate,a),a=a.sibling}function Oa(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Vs(4,a,a.return),Oa(a);break;case 1:Bi(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&Jv(a,a.return,o),Oa(a);break;case 27:hl(a.stateNode);case 26:case 5:Bi(a,a.return),Oa(a);break;case 22:a.memoizedState===null&&Oa(a);break;case 30:Oa(a);break;default:Oa(a)}i=i.sibling}}function Hs(i,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=i,v=a,T=v.flags;switch(v.tag){case 0:case 11:case 15:Hs(p,v,o),el(4,v);break;case 1:if(Hs(p,v,o),c=v,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(st){Ge(c,c.return,st)}if(c=v,p=c.updateQueue,p!==null){var D=c.stateNode;try{var H=p.shared.hiddenCallbacks;if(H!==null)for(p.shared.hiddenCallbacks=null,p=0;p<H.length;p++)F0(H[p],D)}catch(st){Ge(c,c.return,st)}}o&&T&64&&Qv(v),nl(v,v.return);break;case 27:ex(v);case 26:case 5:Hs(p,v,o),o&&c===null&&T&4&&$v(v),nl(v,v.return);break;case 12:Hs(p,v,o);break;case 13:Hs(p,v,o),o&&T&4&&rx(p,v);break;case 22:v.memoizedState===null&&Hs(p,v,o),nl(v,v.return);break;case 30:break;default:Hs(p,v,o)}a=a.sibling}}function Wf(i,a){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&jo(o))}function Xf(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&jo(i))}function Vi(i,a,o,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)cx(i,a,o,c),a=a.sibling}function cx(i,a,o,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Vi(i,a,o,c),p&2048&&el(9,a);break;case 1:Vi(i,a,o,c);break;case 3:Vi(i,a,o,c),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&jo(i)));break;case 12:if(p&2048){Vi(i,a,o,c),i=a.stateNode;try{var v=a.memoizedProps,T=v.id,D=v.onPostCommit;typeof D=="function"&&D(T,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(H){Ge(a,a.return,H)}}else Vi(i,a,o,c);break;case 13:Vi(i,a,o,c);break;case 23:break;case 22:v=a.stateNode,T=a.alternate,a.memoizedState!==null?v._visibility&2?Vi(i,a,o,c):il(i,a):v._visibility&2?Vi(i,a,o,c):(v._visibility|=2,Ar(i,a,o,c,(a.subtreeFlags&10256)!==0)),p&2048&&Wf(T,a);break;case 24:Vi(i,a,o,c),p&2048&&Xf(a.alternate,a);break;default:Vi(i,a,o,c)}}function Ar(i,a,o,c,p){for(p=p&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var v=i,T=a,D=o,H=c,st=T.flags;switch(T.tag){case 0:case 11:case 15:Ar(v,T,D,H,p),el(8,T);break;case 23:break;case 22:var dt=T.stateNode;T.memoizedState!==null?dt._visibility&2?Ar(v,T,D,H,p):il(v,T):(dt._visibility|=2,Ar(v,T,D,H,p)),p&&st&2048&&Wf(T.alternate,T);break;case 24:Ar(v,T,D,H,p),p&&st&2048&&Xf(T.alternate,T);break;default:Ar(v,T,D,H,p)}a=a.sibling}}function il(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=i,c=a,p=c.flags;switch(c.tag){case 22:il(o,c),p&2048&&Wf(c.alternate,c);break;case 24:il(o,c),p&2048&&Xf(c.alternate,c);break;default:il(o,c)}a=a.sibling}}var sl=8192;function wr(i){if(i.subtreeFlags&sl)for(i=i.child;i!==null;)ux(i),i=i.sibling}function ux(i){switch(i.tag){case 26:wr(i),i.flags&sl&&i.memoizedState!==null&&NT(wi,i.memoizedState,i.memoizedProps);break;case 5:wr(i);break;case 3:case 4:var a=wi;wi=uu(i.stateNode.containerInfo),wr(i),wi=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=sl,sl=16777216,wr(i),sl=a):wr(i));break;default:wr(i)}}function hx(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function al(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var c=a[o];An=c,dx(c,i)}hx(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)fx(i),i=i.sibling}function fx(i){switch(i.tag){case 0:case 11:case 15:al(i),i.flags&2048&&Vs(9,i,i.return);break;case 3:al(i);break;case 12:al(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Jc(i)):al(i);break;default:al(i)}}function Jc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var c=a[o];An=c,dx(c,i)}hx(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Vs(8,a,a.return),Jc(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,Jc(a));break;default:Jc(a)}i=i.sibling}}function dx(i,a){for(;An!==null;){var o=An;switch(o.tag){case 0:case 11:case 15:Vs(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:jo(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,An=c;else t:for(o=i;An!==null;){c=An;var p=c.sibling,v=c.return;if(sx(c),c===o){An=null;break t}if(p!==null){p.return=v,An=p;break t}An=v}}}var ZE={getCacheForType:function(i){var a=Bn(xn),o=a.data.get(i);return o===void 0&&(o=i(),a.data.set(i,o)),o}},QE=typeof WeakMap=="function"?WeakMap:Map,Oe=0,qe=null,ve=null,we=0,Ie=0,oi=null,ks=!1,Rr=!1,qf=!1,ps=0,en=0,Gs=0,Ia=0,Yf=0,_i=0,Cr=0,rl=null,ti=null,Kf=!1,Zf=0,$c=1/0,tu=null,Ws=null,Nn=0,Xs=null,Dr=null,Lr=0,Qf=0,Jf=null,px=null,ol=0,$f=null;function li(){if((Oe&2)!==0&&we!==0)return we&-we;if(V.T!==null){var i=xr;return i!==0?i:rd()}return Re()}function mx(){_i===0&&(_i=(we&536870912)===0||Le?X():536870912);var i=yi.current;return i!==null&&(i.flags|=32),_i}function ci(i,a,o){(i===qe&&(Ie===2||Ie===9)||i.cancelPendingCommit!==null)&&(Pr(i,0),qs(i,we,_i,!1)),zt(i,o),((Oe&2)===0||i!==qe)&&(i===qe&&((Oe&2)===0&&(Ia|=o),en===4&&qs(i,we,_i,!1)),ji(i))}function gx(i,a,o){if((Oe&6)!==0)throw Error(s(327));var c=!o&&(a&124)===0&&(a&i.expiredLanes)===0||Dt(i,a),p=c?tT(i,a):nd(i,a,!0),v=c;do{if(p===0){Rr&&!c&&qs(i,a,0,!1);break}else{if(o=i.current.alternate,v&&!JE(o)){p=nd(i,a,!1),v=!1;continue}if(p===2){if(v=a,i.errorRecoveryDisabledLanes&v)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;t:{var D=i;p=rl;var H=D.current.memoizedState.isDehydrated;if(H&&(Pr(D,T).flags|=256),T=nd(D,T,!1),T!==2){if(qf&&!H){D.errorRecoveryDisabledLanes|=v,Ia|=v,p=4;break t}v=ti,ti=p,v!==null&&(ti===null?ti=v:ti.push.apply(ti,v))}p=T}if(v=!1,p!==2)continue}}if(p===1){Pr(i,0),qs(i,a,0,!0);break}t:{switch(c=i,v=p,v){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:qs(c,a,_i,!ks);break t;case 2:ti=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(p=Zf+300-ge(),10<p)){if(qs(c,a,_i,!ks),Kt(c,0,!0)!==0)break t;c.timeoutHandle=Wx(vx.bind(null,c,o,ti,tu,Kf,a,_i,Ia,Cr,ks,v,2,-0,0),p);break t}vx(c,o,ti,tu,Kf,a,_i,Ia,Cr,ks,v,0,-0,0)}}break}while(!0);ji(i)}function vx(i,a,o,c,p,v,T,D,H,st,dt,_t,rt,ot){if(i.timeoutHandle=-1,_t=a.subtreeFlags,(_t&8192||(_t&16785408)===16785408)&&(pl={stylesheets:null,count:0,unsuspend:UT},ux(a),_t=OT(),_t!==null)){i.cancelPendingCommit=_t(Ex.bind(null,i,a,v,o,c,p,T,D,H,dt,1,rt,ot)),qs(i,v,T,!st);return}Ex(i,a,v,o,c,p,T,D,H)}function JE(i){for(var a=i;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var p=o[c],v=p.getSnapshot;p=p.value;try{if(!ii(v(),p))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function qs(i,a,o,c){a&=~Yf,a&=~Ia,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var p=a;0<p;){var v=31-It(p),T=1<<v;c[v]=-1,p&=~T}o!==0&&St(i,o,a)}function eu(){return(Oe&6)===0?(ll(0),!1):!0}function td(){if(ve!==null){if(Ie===0)var i=ve.return;else i=ve,rs=Da=null,vf(i),Er=null,Jo=0,i=ve;for(;i!==null;)Zv(i.alternate,i),i=i.return;ve=null}}function Pr(i,a){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,gT(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),td(),qe=i,ve=o=is(i.current,null),we=a,Ie=0,oi=null,ks=!1,Rr=Dt(i,a),qf=!1,Cr=_i=Yf=Ia=Gs=en=0,ti=rl=null,Kf=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var p=31-It(c),v=1<<p;a|=i[p],c&=~v}return ps=a,bc(),o}function xx(i,a){de=null,V.H=Hc,a===ko||a===Pc?(a=O0(),Ie=3):a===P0?(a=O0(),Ie=4):Ie=a===Iv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,oi=a,ve===null&&(en=1,qc(i,mi(a,i.current)))}function yx(){var i=V.H;return V.H=Hc,i===null?Hc:i}function _x(){var i=V.A;return V.A=ZE,i}function ed(){en=4,ks||(we&4194048)!==we&&yi.current!==null||(Rr=!0),(Gs&134217727)===0&&(Ia&134217727)===0||qe===null||qs(qe,we,_i,!1)}function nd(i,a,o){var c=Oe;Oe|=2;var p=yx(),v=_x();(qe!==i||we!==a)&&(tu=null,Pr(i,a)),a=!1;var T=en;t:do try{if(Ie!==0&&ve!==null){var D=ve,H=oi;switch(Ie){case 8:td(),T=6;break t;case 3:case 2:case 9:case 6:yi.current===null&&(a=!0);var st=Ie;if(Ie=0,oi=null,Ur(i,D,H,st),o&&Rr){T=0;break t}break;default:st=Ie,Ie=0,oi=null,Ur(i,D,H,st)}}$E(),T=en;break}catch(dt){xx(i,dt)}while(!0);return a&&i.shellSuspendCounter++,rs=Da=null,Oe=c,V.H=p,V.A=v,ve===null&&(qe=null,we=0,bc()),T}function $E(){for(;ve!==null;)Sx(ve)}function tT(i,a){var o=Oe;Oe|=2;var c=yx(),p=_x();qe!==i||we!==a?(tu=null,$c=ge()+500,Pr(i,a)):Rr=Dt(i,a);t:do try{if(Ie!==0&&ve!==null){a=ve;var v=oi;e:switch(Ie){case 1:Ie=0,oi=null,Ur(i,a,v,1);break;case 2:case 9:if(U0(v)){Ie=0,oi=null,Mx(a);break}a=function(){Ie!==2&&Ie!==9||qe!==i||(Ie=7),ji(i)},v.then(a,a);break t;case 3:Ie=7;break t;case 4:Ie=5;break t;case 7:U0(v)?(Ie=0,oi=null,Mx(a)):(Ie=0,oi=null,Ur(i,a,v,7));break;case 5:var T=null;switch(ve.tag){case 26:T=ve.memoizedState;case 5:case 27:var D=ve;if(!T||iy(T)){Ie=0,oi=null;var H=D.sibling;if(H!==null)ve=H;else{var st=D.return;st!==null?(ve=st,nu(st)):ve=null}break e}}Ie=0,oi=null,Ur(i,a,v,5);break;case 6:Ie=0,oi=null,Ur(i,a,v,6);break;case 8:td(),en=6;break t;default:throw Error(s(462))}}eT();break}catch(dt){xx(i,dt)}while(!0);return rs=Da=null,V.H=c,V.A=p,Oe=o,ve!==null?0:(qe=null,we=0,bc(),en)}function eT(){for(;ve!==null&&!mn();)Sx(ve)}function Sx(i){var a=Yv(i.alternate,i,ps);i.memoizedProps=i.pendingProps,a===null?nu(i):ve=a}function Mx(i){var a=i,o=a.alternate;switch(a.tag){case 15:case 0:a=Hv(o,a,a.pendingProps,a.type,void 0,we);break;case 11:a=Hv(o,a,a.pendingProps,a.type.render,a.ref,we);break;case 5:vf(a);default:Zv(o,a),a=ve=b0(a,ps),a=Yv(o,a,ps)}i.memoizedProps=i.pendingProps,a===null?nu(i):ve=a}function Ur(i,a,o,c){rs=Da=null,vf(a),Er=null,Jo=0;var p=a.return;try{if(GE(i,p,a,o,we)){en=1,qc(i,mi(o,i.current)),ve=null;return}}catch(v){if(p!==null)throw ve=p,v;en=1,qc(i,mi(o,i.current)),ve=null;return}a.flags&32768?(Le||c===1?i=!0:Rr||(we&536870912)!==0?i=!1:(ks=i=!0,(c===2||c===9||c===3||c===6)&&(c=yi.current,c!==null&&c.tag===13&&(c.flags|=16384))),bx(a,i)):nu(a)}function nu(i){var a=i;do{if((a.flags&32768)!==0){bx(a,ks);return}i=a.return;var o=XE(a.alternate,a,ps);if(o!==null){ve=o;return}if(a=a.sibling,a!==null){ve=a;return}ve=a=i}while(a!==null);en===0&&(en=5)}function bx(i,a){do{var o=qE(i.alternate,i);if(o!==null){o.flags&=32767,ve=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(i=i.sibling,i!==null)){ve=i;return}ve=i=o}while(i!==null);en=6,ve=null}function Ex(i,a,o,c,p,v,T,D,H){i.cancelPendingCommit=null;do iu();while(Nn!==0);if((Oe&6)!==0)throw Error(s(327));if(a!==null){if(a===i.current)throw Error(s(177));if(v=a.lanes|a.childLanes,v|=Wh,Rt(i,o,v,T,D,H),i===qe&&(ve=qe=null,we=0),Dr=a,Xs=i,Lr=o,Qf=v,Jf=p,px=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,aT(oe,function(){return Cx(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=V.T,V.T=null,p=G.p,G.p=2,T=Oe,Oe|=4;try{YE(i,a,o)}finally{Oe=T,G.p=p,V.T=c}}Nn=1,Tx(),Ax(),wx()}}function Tx(){if(Nn===1){Nn=0;var i=Xs,a=Dr,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=V.T,V.T=null;var c=G.p;G.p=2;var p=Oe;Oe|=4;try{ox(a,i);var v=pd,T=d0(i.containerInfo),D=v.focusedElem,H=v.selectionRange;if(T!==D&&D&&D.ownerDocument&&f0(D.ownerDocument.documentElement,D)){if(H!==null&&Vh(D)){var st=H.start,dt=H.end;if(dt===void 0&&(dt=st),"selectionStart"in D)D.selectionStart=st,D.selectionEnd=Math.min(dt,D.value.length);else{var _t=D.ownerDocument||document,rt=_t&&_t.defaultView||window;if(rt.getSelection){var ot=rt.getSelection(),ie=D.textContent.length,$t=Math.min(H.start,ie),Ve=H.end===void 0?$t:Math.min(H.end,ie);!ot.extend&&$t>Ve&&(T=Ve,Ve=$t,$t=T);var Y=h0(D,$t),W=h0(D,Ve);if(Y&&W&&(ot.rangeCount!==1||ot.anchorNode!==Y.node||ot.anchorOffset!==Y.offset||ot.focusNode!==W.node||ot.focusOffset!==W.offset)){var tt=_t.createRange();tt.setStart(Y.node,Y.offset),ot.removeAllRanges(),$t>Ve?(ot.addRange(tt),ot.extend(W.node,W.offset)):(tt.setEnd(W.node,W.offset),ot.addRange(tt))}}}}for(_t=[],ot=D;ot=ot.parentNode;)ot.nodeType===1&&_t.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<_t.length;D++){var mt=_t[D];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}mu=!!dd,pd=dd=null}finally{Oe=p,G.p=c,V.T=o}}i.current=a,Nn=2}}function Ax(){if(Nn===2){Nn=0;var i=Xs,a=Dr,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=V.T,V.T=null;var c=G.p;G.p=2;var p=Oe;Oe|=4;try{ix(i,a.alternate,a)}finally{Oe=p,G.p=c,V.T=o}}Nn=3}}function wx(){if(Nn===4||Nn===3){Nn=0,be();var i=Xs,a=Dr,o=Lr,c=px;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Nn=5:(Nn=0,Dr=Xs=null,Rx(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Ws=null),Ne(o),a=a.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(pt,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=V.T,p=G.p,G.p=2,V.T=null;try{for(var v=i.onRecoverableError,T=0;T<c.length;T++){var D=c[T];v(D.value,{componentStack:D.stack})}}finally{V.T=a,G.p=p}}(Lr&3)!==0&&iu(),ji(i),p=i.pendingLanes,(o&4194090)!==0&&(p&42)!==0?i===$f?ol++:(ol=0,$f=i):ol=0,ll(0)}}function Rx(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,jo(a)))}function iu(i){return Tx(),Ax(),wx(),Cx()}function Cx(){if(Nn!==5)return!1;var i=Xs,a=Qf;Qf=0;var o=Ne(Lr),c=V.T,p=G.p;try{G.p=32>o?32:o,V.T=null,o=Jf,Jf=null;var v=Xs,T=Lr;if(Nn=0,Dr=Xs=null,Lr=0,(Oe&6)!==0)throw Error(s(331));var D=Oe;if(Oe|=4,fx(v.current),cx(v,v.current,T,o),Oe=D,ll(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(pt,v)}catch{}return!0}finally{G.p=p,V.T=c,Rx(i,a)}}function Dx(i,a,o){a=mi(o,a),a=Lf(i.stateNode,a,2),i=Is(i,a,2),i!==null&&(zt(i,2),ji(i))}function Ge(i,a,o){if(i.tag===3)Dx(i,i,o);else for(;a!==null;){if(a.tag===3){Dx(a,i,o);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ws===null||!Ws.has(c))){i=mi(o,i),o=Nv(2),c=Is(a,o,2),c!==null&&(Ov(o,c,a,i),zt(c,2),ji(c));break}}a=a.return}}function id(i,a,o){var c=i.pingCache;if(c===null){c=i.pingCache=new QE;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(o)||(qf=!0,p.add(o),i=nT.bind(null,i,a,o),a.then(i,i))}function nT(i,a,o){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,qe===i&&(we&o)===o&&(en===4||en===3&&(we&62914560)===we&&300>ge()-Zf?(Oe&2)===0&&Pr(i,0):Yf|=o,Cr===we&&(Cr=0)),ji(i)}function Lx(i,a){a===0&&(a=Ut()),i=pr(i,a),i!==null&&(zt(i,a),ji(i))}function iT(i){var a=i.memoizedState,o=0;a!==null&&(o=a.retryLane),Lx(i,o)}function sT(i,a){var o=0;switch(i.tag){case 13:var c=i.stateNode,p=i.memoizedState;p!==null&&(o=p.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(a),Lx(i,o)}function aT(i,a){return fe(i,a)}var su=null,Nr=null,sd=!1,au=!1,ad=!1,Fa=0;function ji(i){i!==Nr&&i.next===null&&(Nr===null?su=Nr=i:Nr=Nr.next=i),au=!0,sd||(sd=!0,oT())}function ll(i,a){if(!ad&&au){ad=!0;do for(var o=!1,c=su;c!==null;){if(i!==0){var p=c.pendingLanes;if(p===0)var v=0;else{var T=c.suspendedLanes,D=c.pingedLanes;v=(1<<31-It(42|i)+1)-1,v&=p&~(T&~D),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(o=!0,Ox(c,v))}else v=we,v=Kt(c,c===qe?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Dt(c,v)||(o=!0,Ox(c,v));c=c.next}while(o);ad=!1}}function rT(){Px()}function Px(){au=sd=!1;var i=0;Fa!==0&&(mT()&&(i=Fa),Fa=0);for(var a=ge(),o=null,c=su;c!==null;){var p=c.next,v=Ux(c,a);v===0?(c.next=null,o===null?su=p:o.next=p,p===null&&(Nr=o)):(o=c,(i!==0||(v&3)!==0)&&(au=!0)),c=p}ll(i)}function Ux(i,a){for(var o=i.suspendedLanes,c=i.pingedLanes,p=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var T=31-It(v),D=1<<T,H=p[T];H===-1?((D&o)===0||(D&c)!==0)&&(p[T]=re(D,a)):H<=a&&(i.expiredLanes|=D),v&=~D}if(a=qe,o=we,o=Kt(i,i===a?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,o===0||i===a&&(Ie===2||Ie===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&k(c),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Dt(i,o)){if(a=o&-o,a===i.callbackPriority)return a;switch(c!==null&&k(c),Ne(o)){case 2:case 8:o=Zt;break;case 32:o=oe;break;case 268435456:o=B;break;default:o=oe}return c=Nx.bind(null,i),o=fe(o,c),i.callbackPriority=a,i.callbackNode=o,a}return c!==null&&c!==null&&k(c),i.callbackPriority=2,i.callbackNode=null,2}function Nx(i,a){if(Nn!==0&&Nn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(iu()&&i.callbackNode!==o)return null;var c=we;return c=Kt(i,i===qe?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(gx(i,c,a),Ux(i,ge()),i.callbackNode!=null&&i.callbackNode===o?Nx.bind(null,i):null)}function Ox(i,a){if(iu())return null;gx(i,a,!0)}function oT(){vT(function(){(Oe&6)!==0?fe(Ee,rT):Px()})}function rd(){return Fa===0&&(Fa=X()),Fa}function Ix(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:gc(""+i)}function Fx(i,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,i.id&&o.setAttribute("form",i.id),a.parentNode.insertBefore(o,a),i=new FormData(i),o.parentNode.removeChild(o),i}function lT(i,a,o,c,p){if(a==="submit"&&o&&o.stateNode===p){var v=Ix((p[Ln]||null).action),T=c.submitter;T&&(a=(a=T[Ln]||null)?Ix(a.formAction):T.getAttribute("formAction"),a!==null&&(v=a,T=null));var D=new _c("action","action",null,c,p);i.push({event:D,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Fa!==0){var H=T?Fx(p,T):new FormData(p);Af(o,{pending:!0,data:H,method:p.method,action:v},null,H)}}else typeof v=="function"&&(D.preventDefault(),H=T?Fx(p,T):new FormData(p),Af(o,{pending:!0,data:H,method:p.method,action:v},v,H))},currentTarget:p}]})}}for(var od=0;od<Gh.length;od++){var ld=Gh[od],cT=ld.toLowerCase(),uT=ld[0].toUpperCase()+ld.slice(1);Ai(cT,"on"+uT)}Ai(g0,"onAnimationEnd"),Ai(v0,"onAnimationIteration"),Ai(x0,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(wE,"onTransitionRun"),Ai(RE,"onTransitionStart"),Ai(CE,"onTransitionCancel"),Ai(y0,"onTransitionEnd"),P("onMouseEnter",["mouseout","mouseover"]),P("onMouseLeave",["mouseout","mouseover"]),P("onPointerEnter",["pointerout","pointerover"]),P("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cl));function zx(i,a){a=(a&4)!==0;for(var o=0;o<i.length;o++){var c=i[o],p=c.event;c=c.listeners;t:{var v=void 0;if(a)for(var T=c.length-1;0<=T;T--){var D=c[T],H=D.instance,st=D.currentTarget;if(D=D.listener,H!==v&&p.isPropagationStopped())break t;v=D,p.currentTarget=st;try{v(p)}catch(dt){Xc(dt)}p.currentTarget=null,v=H}else for(T=0;T<c.length;T++){if(D=c[T],H=D.instance,st=D.currentTarget,D=D.listener,H!==v&&p.isPropagationStopped())break t;v=D,p.currentTarget=st;try{v(p)}catch(dt){Xc(dt)}p.currentTarget=null,v=H}}}}function xe(i,a){var o=a[ya];o===void 0&&(o=a[ya]=new Set);var c=i+"__bubble";o.has(c)||(Bx(a,i,2,!1),o.add(c))}function cd(i,a,o){var c=0;a&&(c|=4),Bx(o,i,c,a)}var ru="_reactListening"+Math.random().toString(36).slice(2);function ud(i){if(!i[ru]){i[ru]=!0,pc.forEach(function(o){o!=="selectionchange"&&(hT.has(o)||cd(o,!1,i),cd(o,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[ru]||(a[ru]=!0,cd("selectionchange",!1,a))}}function Bx(i,a,o,c){switch(cy(a)){case 2:var p=zT;break;case 8:p=BT;break;default:p=Ed}o=p.bind(null,a,o,i),p=void 0,!Lh||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?i.addEventListener(a,o,{capture:!0,passive:p}):i.addEventListener(a,o,!0):p!==void 0?i.addEventListener(a,o,{passive:p}):i.addEventListener(a,o,!1)}function hd(i,a,o,c,p){var v=c;if((a&1)===0&&(a&2)===0&&c!==null)t:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var D=c.stateNode.containerInfo;if(D===p)break;if(T===4)for(T=c.return;T!==null;){var H=T.tag;if((H===3||H===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;D!==null;){if(T=Qi(D),T===null)return;if(H=T.tag,H===5||H===6||H===26||H===27){c=v=T;continue t}D=D.parentNode}}c=c.return}Xg(function(){var st=v,dt=Ch(o),_t=[];t:{var rt=_0.get(i);if(rt!==void 0){var ot=_c,ie=i;switch(i){case"keypress":if(xc(o)===0)break t;case"keydown":case"keyup":ot=aE;break;case"focusin":ie="focus",ot=Oh;break;case"focusout":ie="blur",ot=Oh;break;case"beforeblur":case"afterblur":ot=Oh;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Kg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=q1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=lE;break;case g0:case v0:case x0:ot=Z1;break;case y0:ot=uE;break;case"scroll":case"scrollend":ot=W1;break;case"wheel":ot=fE;break;case"copy":case"cut":case"paste":ot=J1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Qg;break;case"toggle":case"beforetoggle":ot=pE}var $t=(a&4)!==0,Ve=!$t&&(i==="scroll"||i==="scrollend"),Y=$t?rt!==null?rt+"Capture":null:rt;$t=[];for(var W=st,tt;W!==null;){var mt=W;if(tt=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||tt===null||Y===null||(mt=Ro(W,Y),mt!=null&&$t.push(ul(W,mt,tt))),Ve)break;W=W.return}0<$t.length&&(rt=new ot(rt,ie,null,o,dt),_t.push({event:rt,listeners:$t}))}}if((a&7)===0){t:{if(rt=i==="mouseover"||i==="pointerover",ot=i==="mouseout"||i==="pointerout",rt&&o!==Rh&&(ie=o.relatedTarget||o.fromElement)&&(Qi(ie)||ie[Zn]))break t;if((ot||rt)&&(rt=dt.window===dt?dt:(rt=dt.ownerDocument)?rt.defaultView||rt.parentWindow:window,ot?(ie=o.relatedTarget||o.toElement,ot=st,ie=ie?Qi(ie):null,ie!==null&&(Ve=l(ie),$t=ie.tag,ie!==Ve||$t!==5&&$t!==27&&$t!==6)&&(ie=null)):(ot=null,ie=st),ot!==ie)){if($t=Kg,mt="onMouseLeave",Y="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&($t=Qg,mt="onPointerLeave",Y="onPointerEnter",W="pointer"),Ve=ot==null?rt:Sa(ot),tt=ie==null?rt:Sa(ie),rt=new $t(mt,W+"leave",ot,o,dt),rt.target=Ve,rt.relatedTarget=tt,mt=null,Qi(dt)===st&&($t=new $t(Y,W+"enter",ie,o,dt),$t.target=tt,$t.relatedTarget=Ve,mt=$t),Ve=mt,ot&&ie)e:{for($t=ot,Y=ie,W=0,tt=$t;tt;tt=Or(tt))W++;for(tt=0,mt=Y;mt;mt=Or(mt))tt++;for(;0<W-tt;)$t=Or($t),W--;for(;0<tt-W;)Y=Or(Y),tt--;for(;W--;){if($t===Y||Y!==null&&$t===Y.alternate)break e;$t=Or($t),Y=Or(Y)}$t=null}else $t=null;ot!==null&&Vx(_t,rt,ot,$t,!1),ie!==null&&Ve!==null&&Vx(_t,Ve,ie,$t,!0)}}t:{if(rt=st?Sa(st):window,ot=rt.nodeName&&rt.nodeName.toLowerCase(),ot==="select"||ot==="input"&&rt.type==="file")var jt=a0;else if(i0(rt))if(r0)jt=EE;else{jt=ME;var me=SE}else ot=rt.nodeName,!ot||ot.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?st&&wh(st.elementType)&&(jt=a0):jt=bE;if(jt&&(jt=jt(i,st))){s0(_t,jt,o,dt);break t}me&&me(i,rt,st),i==="focusout"&&st&&rt.type==="number"&&st.memoizedProps.value!=null&&zn(rt,"number",rt.value)}switch(me=st?Sa(st):window,i){case"focusin":(i0(me)||me.contentEditable==="true")&&(hr=me,jh=st,Io=null);break;case"focusout":Io=jh=hr=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,p0(_t,o,dt);break;case"selectionchange":if(AE)break;case"keydown":case"keyup":p0(_t,o,dt)}var qt;if(Fh)t:{switch(i){case"compositionstart":var te="onCompositionStart";break t;case"compositionend":te="onCompositionEnd";break t;case"compositionupdate":te="onCompositionUpdate";break t}te=void 0}else ur?e0(i,o)&&(te="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(te="onCompositionStart");te&&(Jg&&o.locale!=="ko"&&(ur||te!=="onCompositionStart"?te==="onCompositionEnd"&&ur&&(qt=qg()):(Ps=dt,Ph="value"in Ps?Ps.value:Ps.textContent,ur=!0)),me=ou(st,te),0<me.length&&(te=new Zg(te,i,null,o,dt),_t.push({event:te,listeners:me}),qt?te.data=qt:(qt=n0(o),qt!==null&&(te.data=qt)))),(qt=gE?vE(i,o):xE(i,o))&&(te=ou(st,"onBeforeInput"),0<te.length&&(me=new Zg("onBeforeInput","beforeinput",null,o,dt),_t.push({event:me,listeners:te}),me.data=qt)),lT(_t,i,st,o,dt)}zx(_t,a)})}function ul(i,a,o){return{instance:i,listener:a,currentTarget:o}}function ou(i,a){for(var o=a+"Capture",c=[];i!==null;){var p=i,v=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||v===null||(p=Ro(i,o),p!=null&&c.unshift(ul(i,p,v)),p=Ro(i,a),p!=null&&c.push(ul(i,p,v))),i.tag===3)return c;i=i.return}return[]}function Or(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Vx(i,a,o,c,p){for(var v=a._reactName,T=[];o!==null&&o!==c;){var D=o,H=D.alternate,st=D.stateNode;if(D=D.tag,H!==null&&H===c)break;D!==5&&D!==26&&D!==27||st===null||(H=st,p?(st=Ro(o,v),st!=null&&T.unshift(ul(o,st,H))):p||(st=Ro(o,v),st!=null&&T.push(ul(o,st,H)))),o=o.return}T.length!==0&&i.push({event:a,listeners:T})}var fT=/\r\n?/g,dT=/\u0000|\uFFFD/g;function jx(i){return(typeof i=="string"?i:""+i).replace(fT,`
`).replace(dT,"")}function Hx(i,a){return a=jx(a),jx(i)===a}function lu(){}function Be(i,a,o,c,p,v){switch(o){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Ii(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Ii(i,""+c);break;case"className":Lt(i,"class",c);break;case"tabIndex":Lt(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Lt(i,o,c);break;case"style":Gg(i,c,v);break;case"data":if(a!=="object"){Lt(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||o!=="href")){i.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=gc(""+c),i.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(a!=="input"&&Be(i,a,"name",p.name,p,null),Be(i,a,"formEncType",p.formEncType,p,null),Be(i,a,"formMethod",p.formMethod,p,null),Be(i,a,"formTarget",p.formTarget,p,null)):(Be(i,a,"encType",p.encType,p,null),Be(i,a,"method",p.method,p,null),Be(i,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=gc(""+c),i.setAttribute(o,c);break;case"onClick":c!=null&&(i.onclick=lu);break;case"onScroll":c!=null&&xe("scroll",i);break;case"onScrollEnd":c!=null&&xe("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}o=gc(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""+c):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":c===!0?i.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,c):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(o,c):i.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(o):i.setAttribute(o,c);break;case"popover":xe("beforetoggle",i),xe("toggle",i),At(i,"popover",c);break;case"xlinkActuate":Ot(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ot(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ot(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ot(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ot(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ot(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ot(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ot(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ot(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":At(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=k1.get(o)||o,At(i,o,c))}}function fd(i,a,o,c,p,v){switch(o){case"style":Gg(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof c=="string"?Ii(i,c):(typeof c=="number"||typeof c=="bigint")&&Ii(i,""+c);break;case"onScroll":c!=null&&xe("scroll",i);break;case"onScrollEnd":c!=null&&xe("scrollend",i);break;case"onClick":c!=null&&(i.onclick=lu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mc.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),a=o.slice(2,p?o.length-7:void 0),v=i[Ln]||null,v=v!=null?v[o]:null,typeof v=="function"&&i.removeEventListener(a,v,p),typeof c=="function")){typeof v!="function"&&v!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(a,c,p);break t}o in i?i[o]=c:c===!0?i.setAttribute(o,""):At(i,o,c)}}}function On(i,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",i),xe("load",i);var c=!1,p=!1,v;for(v in o)if(o.hasOwnProperty(v)){var T=o[v];if(T!=null)switch(v){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Be(i,a,v,T,o,null)}}p&&Be(i,a,"srcSet",o.srcSet,o,null),c&&Be(i,a,"src",o.src,o,null);return;case"input":xe("invalid",i);var D=v=T=p=null,H=null,st=null;for(c in o)if(o.hasOwnProperty(c)){var dt=o[c];if(dt!=null)switch(c){case"name":p=dt;break;case"type":T=dt;break;case"checked":H=dt;break;case"defaultChecked":st=dt;break;case"value":v=dt;break;case"defaultValue":D=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(s(137,a));break;default:Be(i,a,c,dt,o,null)}}ke(i,v,D,H,st,T,p,!1),Fe(i);return;case"select":xe("invalid",i),c=T=v=null;for(p in o)if(o.hasOwnProperty(p)&&(D=o[p],D!=null))switch(p){case"value":v=D;break;case"defaultValue":T=D;break;case"multiple":c=D;default:Be(i,a,p,D,o,null)}a=v,o=T,i.multiple=!!c,a!=null?vn(i,!!c,a,!1):o!=null&&vn(i,!!c,o,!0);return;case"textarea":xe("invalid",i),v=p=c=null;for(T in o)if(o.hasOwnProperty(T)&&(D=o[T],D!=null))switch(T){case"value":c=D;break;case"defaultValue":p=D;break;case"children":v=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(91));break;default:Be(i,a,T,D,o,null)}Pn(i,c,p,v),Fe(i);return;case"option":for(H in o)if(o.hasOwnProperty(H)&&(c=o[H],c!=null))switch(H){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Be(i,a,H,c,o,null)}return;case"dialog":xe("beforetoggle",i),xe("toggle",i),xe("cancel",i),xe("close",i);break;case"iframe":case"object":xe("load",i);break;case"video":case"audio":for(c=0;c<cl.length;c++)xe(cl[c],i);break;case"image":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"embed":case"source":case"link":xe("error",i),xe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(st in o)if(o.hasOwnProperty(st)&&(c=o[st],c!=null))switch(st){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Be(i,a,st,c,o,null)}return;default:if(wh(a)){for(dt in o)o.hasOwnProperty(dt)&&(c=o[dt],c!==void 0&&fd(i,a,dt,c,o,void 0));return}}for(D in o)o.hasOwnProperty(D)&&(c=o[D],c!=null&&Be(i,a,D,c,o,null))}function pT(i,a,o,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,v=null,T=null,D=null,H=null,st=null,dt=null;for(ot in o){var _t=o[ot];if(o.hasOwnProperty(ot)&&_t!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":H=_t;default:c.hasOwnProperty(ot)||Be(i,a,ot,null,c,_t)}}for(var rt in c){var ot=c[rt];if(_t=o[rt],c.hasOwnProperty(rt)&&(ot!=null||_t!=null))switch(rt){case"type":v=ot;break;case"name":p=ot;break;case"checked":st=ot;break;case"defaultChecked":dt=ot;break;case"value":T=ot;break;case"defaultValue":D=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(s(137,a));break;default:ot!==_t&&Be(i,a,rt,ot,c,_t)}}ts(i,T,D,H,st,dt,v,p);return;case"select":ot=T=D=rt=null;for(v in o)if(H=o[v],o.hasOwnProperty(v)&&H!=null)switch(v){case"value":break;case"multiple":ot=H;default:c.hasOwnProperty(v)||Be(i,a,v,null,c,H)}for(p in c)if(v=c[p],H=o[p],c.hasOwnProperty(p)&&(v!=null||H!=null))switch(p){case"value":rt=v;break;case"defaultValue":D=v;break;case"multiple":T=v;default:v!==H&&Be(i,a,p,v,c,H)}a=D,o=T,c=ot,rt!=null?vn(i,!!o,rt,!1):!!c!=!!o&&(a!=null?vn(i,!!o,a,!0):vn(i,!!o,o?[]:"",!1));return;case"textarea":ot=rt=null;for(D in o)if(p=o[D],o.hasOwnProperty(D)&&p!=null&&!c.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Be(i,a,D,null,c,p)}for(T in c)if(p=c[T],v=o[T],c.hasOwnProperty(T)&&(p!=null||v!=null))switch(T){case"value":rt=p;break;case"defaultValue":ot=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==v&&Be(i,a,T,p,c,v)}En(i,rt,ot);return;case"option":for(var ie in o)if(rt=o[ie],o.hasOwnProperty(ie)&&rt!=null&&!c.hasOwnProperty(ie))switch(ie){case"selected":i.selected=!1;break;default:Be(i,a,ie,null,c,rt)}for(H in c)if(rt=c[H],ot=o[H],c.hasOwnProperty(H)&&rt!==ot&&(rt!=null||ot!=null))switch(H){case"selected":i.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Be(i,a,H,rt,c,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in o)rt=o[$t],o.hasOwnProperty($t)&&rt!=null&&!c.hasOwnProperty($t)&&Be(i,a,$t,null,c,rt);for(st in c)if(rt=c[st],ot=o[st],c.hasOwnProperty(st)&&rt!==ot&&(rt!=null||ot!=null))switch(st){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(s(137,a));break;default:Be(i,a,st,rt,c,ot)}return;default:if(wh(a)){for(var Ve in o)rt=o[Ve],o.hasOwnProperty(Ve)&&rt!==void 0&&!c.hasOwnProperty(Ve)&&fd(i,a,Ve,void 0,c,rt);for(dt in c)rt=c[dt],ot=o[dt],!c.hasOwnProperty(dt)||rt===ot||rt===void 0&&ot===void 0||fd(i,a,dt,rt,c,ot);return}}for(var Y in o)rt=o[Y],o.hasOwnProperty(Y)&&rt!=null&&!c.hasOwnProperty(Y)&&Be(i,a,Y,null,c,rt);for(_t in c)rt=c[_t],ot=o[_t],!c.hasOwnProperty(_t)||rt===ot||rt==null&&ot==null||Be(i,a,_t,rt,c,ot)}var dd=null,pd=null;function cu(i){return i.nodeType===9?i:i.ownerDocument}function kx(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gx(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function md(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var gd=null;function mT(){var i=window.event;return i&&i.type==="popstate"?i===gd?!1:(gd=i,!0):(gd=null,!1)}var Wx=typeof setTimeout=="function"?setTimeout:void 0,gT=typeof clearTimeout=="function"?clearTimeout:void 0,Xx=typeof Promise=="function"?Promise:void 0,vT=typeof queueMicrotask=="function"?queueMicrotask:typeof Xx<"u"?function(i){return Xx.resolve(null).then(i).catch(xT)}:Wx;function xT(i){setTimeout(function(){throw i})}function Ys(i){return i==="head"}function qx(i,a){var o=a,c=0,p=0;do{var v=o.nextSibling;if(i.removeChild(o),v&&v.nodeType===8)if(o=v.data,o==="/$"){if(0<c&&8>c){o=c;var T=i.ownerDocument;if(o&1&&hl(T.documentElement),o&2&&hl(T.body),o&4)for(o=T.head,hl(o),T=o.firstChild;T;){var D=T.nextSibling,H=T.nodeName;T[Rs]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&T.rel.toLowerCase()==="stylesheet"||o.removeChild(T),T=D}}if(p===0){i.removeChild(v),yl(a);return}p--}else o==="$"||o==="$?"||o==="$!"?p++:c=o.charCodeAt(0)-48;else c=0;o=v}while(o);yl(a)}function vd(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":vd(o),Cs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function yT(i,a,o,c){for(;i.nodeType===1;){var p=o;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Rs])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var v=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Ri(i.nextSibling),i===null)break}return null}function _T(i,a,o){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ri(i.nextSibling),i===null))return null;return i}function xd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function ST(i,a){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")a();else{var c=function(){a(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Ri(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var yd=null;function Yx(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(a===0)return i;a--}else o==="/$"&&a++}i=i.previousSibling}return null}function Kx(i,a,o){switch(a=cu(o),i){case"html":if(i=a.documentElement,!i)throw Error(s(452));return i;case"head":if(i=a.head,!i)throw Error(s(453));return i;case"body":if(i=a.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function hl(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Cs(i)}var Si=new Map,Zx=new Set;function uu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ms=G.d;G.d={f:MT,r:bT,D:ET,C:TT,L:AT,m:wT,X:CT,S:RT,M:DT};function MT(){var i=ms.f(),a=eu();return i||a}function bT(i){var a=Ji(i);a!==null&&a.tag===5&&a.type==="form"?gv(a):ms.r(i)}var Ir=typeof document>"u"?null:document;function Qx(i,a,o){var c=Ir;if(c&&typeof a=="string"&&a){var p=Xe(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),Zx.has(p)||(Zx.add(p),i={rel:i,crossOrigin:o,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),On(a,"link",i),un(a),c.head.appendChild(a)))}}function ET(i){ms.D(i),Qx("dns-prefetch",i,null)}function TT(i,a){ms.C(i,a),Qx("preconnect",i,a)}function AT(i,a,o){ms.L(i,a,o);var c=Ir;if(c&&i&&a){var p='link[rel="preload"][as="'+Xe(a)+'"]';a==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+Xe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+Xe(o.imageSizes)+'"]')):p+='[href="'+Xe(i)+'"]';var v=p;switch(a){case"style":v=Fr(i);break;case"script":v=zr(i)}Si.has(v)||(i=g({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:i,as:a},o),Si.set(v,i),c.querySelector(p)!==null||a==="style"&&c.querySelector(fl(v))||a==="script"&&c.querySelector(dl(v))||(a=c.createElement("link"),On(a,"link",i),un(a),c.head.appendChild(a)))}}function wT(i,a){ms.m(i,a);var o=Ir;if(o&&i){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Xe(c)+'"][href="'+Xe(i)+'"]',v=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=zr(i)}if(!Si.has(v)&&(i=g({rel:"modulepreload",href:i},a),Si.set(v,i),o.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(dl(v)))return}c=o.createElement("link"),On(c,"link",i),un(c),o.head.appendChild(c)}}}function RT(i,a,o){ms.S(i,a,o);var c=Ir;if(c&&i){var p=Ds(c).hoistableStyles,v=Fr(i);a=a||"default";var T=p.get(v);if(!T){var D={loading:0,preload:null};if(T=c.querySelector(fl(v)))D.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":a},o),(o=Si.get(v))&&_d(i,o);var H=T=c.createElement("link");un(H),On(H,"link",i),H._p=new Promise(function(st,dt){H.onload=st,H.onerror=dt}),H.addEventListener("load",function(){D.loading|=1}),H.addEventListener("error",function(){D.loading|=2}),D.loading|=4,hu(T,a,c)}T={type:"stylesheet",instance:T,count:1,state:D},p.set(v,T)}}}function CT(i,a){ms.X(i,a);var o=Ir;if(o&&i){var c=Ds(o).hoistableScripts,p=zr(i),v=c.get(p);v||(v=o.querySelector(dl(p)),v||(i=g({src:i,async:!0},a),(a=Si.get(p))&&Sd(i,a),v=o.createElement("script"),un(v),On(v,"link",i),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(p,v))}}function DT(i,a){ms.M(i,a);var o=Ir;if(o&&i){var c=Ds(o).hoistableScripts,p=zr(i),v=c.get(p);v||(v=o.querySelector(dl(p)),v||(i=g({src:i,async:!0,type:"module"},a),(a=Si.get(p))&&Sd(i,a),v=o.createElement("script"),un(v),On(v,"link",i),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(p,v))}}function Jx(i,a,o,c){var p=(p=vt.current)?uu(p):null;if(!p)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=Fr(o.href),o=Ds(p).hoistableStyles,c=o.get(a),c||(c={type:"style",instance:null,count:0,state:null},o.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Fr(o.href);var v=Ds(p).hoistableStyles,T=v.get(i);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,T),(v=p.querySelector(fl(i)))&&!v._p&&(T.instance=v,T.state.loading=5),Si.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Si.set(i,o),v||LT(p,i,o,T.state))),a&&c===null)throw Error(s(528,""));return T}if(a&&c!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=zr(o),o=Ds(p).hoistableScripts,c=o.get(a),c||(c={type:"script",instance:null,count:0,state:null},o.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Fr(i){return'href="'+Xe(i)+'"'}function fl(i){return'link[rel="stylesheet"]['+i+"]"}function $x(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function LT(i,a,o,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),On(a,"link",o),un(a),i.head.appendChild(a))}function zr(i){return'[src="'+Xe(i)+'"]'}function dl(i){return"script[async]"+i}function ty(i,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+Xe(o.href)+'"]');if(c)return a.instance=c,un(c),c;var p=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),un(c),On(c,"style",p),hu(c,o.precedence,i),a.instance=c;case"stylesheet":p=Fr(o.href);var v=i.querySelector(fl(p));if(v)return a.state.loading|=4,a.instance=v,un(v),v;c=$x(o),(p=Si.get(p))&&_d(c,p),v=(i.ownerDocument||i).createElement("link"),un(v);var T=v;return T._p=new Promise(function(D,H){T.onload=D,T.onerror=H}),On(v,"link",c),a.state.loading|=4,hu(v,o.precedence,i),a.instance=v;case"script":return v=zr(o.src),(p=i.querySelector(dl(v)))?(a.instance=p,un(p),p):(c=o,(p=Si.get(v))&&(c=g({},o),Sd(c,p)),i=i.ownerDocument||i,p=i.createElement("script"),un(p),On(p,"link",c),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,hu(c,o.precedence,i));return a.instance}function hu(i,a,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,v=p,T=0;T<c.length;T++){var D=c[T];if(D.dataset.precedence===a)v=D;else if(v!==p)break}v?v.parentNode.insertBefore(i,v.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(i,a.firstChild))}function _d(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Sd(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var fu=null;function ey(i,a,o){if(fu===null){var c=new Map,p=fu=new Map;p.set(o,c)}else p=fu,c=p.get(o),c||(c=new Map,p.set(o,c));if(c.has(i))return c;for(c.set(i,null),o=o.getElementsByTagName(i),p=0;p<o.length;p++){var v=o[p];if(!(v[Rs]||v[gn]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var T=v.getAttribute(a)||"";T=i+T;var D=c.get(T);D?D.push(v):c.set(T,[v])}}return c}function ny(i,a,o){i=i.ownerDocument||i,i.head.insertBefore(o,a==="title"?i.querySelector("head > title"):null)}function PT(i,a,o){if(o===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function iy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var pl=null;function UT(){}function NT(i,a,o){if(pl===null)throw Error(s(475));var c=pl;if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Fr(o.href),v=i.querySelector(fl(p));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=du.bind(c),i.then(c,c)),a.state.loading|=4,a.instance=v,un(v);return}v=i.ownerDocument||i,o=$x(o),(p=Si.get(p))&&_d(o,p),v=v.createElement("link"),un(v);var T=v;T._p=new Promise(function(D,H){T.onload=D,T.onerror=H}),On(v,"link",o),a.instance=v}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(c.count++,a=du.bind(c),i.addEventListener("load",a),i.addEventListener("error",a))}}function OT(){if(pl===null)throw Error(s(475));var i=pl;return i.stylesheets&&i.count===0&&Md(i,i.stylesheets),0<i.count?function(a){var o=setTimeout(function(){if(i.stylesheets&&Md(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(o)}}:null}function du(){if(this.count--,this.count===0){if(this.stylesheets)Md(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var pu=null;function Md(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,pu=new Map,a.forEach(IT,i),pu=null,du.call(i))}function IT(i,a){if(!(a.state.loading&4)){var o=pu.get(i);if(o)var c=o.get(null);else{o=new Map,pu.set(i,o);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<p.length;v++){var T=p[v];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),c=T)}c&&o.set(null,c)}p=a.instance,T=p.getAttribute("data-precedence"),v=o.get(T)||c,v===c&&o.set(null,p),o.set(T,p),this.count++,c=du.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),v?v.parentNode.insertBefore(p,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var ml={$$typeof:w,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function FT(i,a,o,c,p,v,T,D){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.hiddenUpdates=Tt(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=v,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function sy(i,a,o,c,p,v,T,D,H,st,dt,_t){return i=new FT(i,a,o,T,D,H,st,_t),a=1,v===!0&&(a|=24),v=si(3,null,null,a),i.current=v,v.stateNode=i,a=nf(),a.refCount++,i.pooledCache=a,a.refCount++,v.memoizedState={element:c,isDehydrated:o,cache:a},of(v),i}function ay(i){return i?(i=mr,i):mr}function ry(i,a,o,c,p,v){p=ay(p),c.context===null?c.context=p:c.pendingContext=p,c=Os(a),c.payload={element:o},v=v===void 0?null:v,v!==null&&(c.callback=v),o=Is(i,c,a),o!==null&&(ci(o,i,a),Wo(o,i,a))}function oy(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<a?o:a}}function bd(i,a){oy(i,a),(i=i.alternate)&&oy(i,a)}function ly(i){if(i.tag===13){var a=pr(i,67108864);a!==null&&ci(a,i,67108864),bd(i,67108864)}}var mu=!0;function zT(i,a,o,c){var p=V.T;V.T=null;var v=G.p;try{G.p=2,Ed(i,a,o,c)}finally{G.p=v,V.T=p}}function BT(i,a,o,c){var p=V.T;V.T=null;var v=G.p;try{G.p=8,Ed(i,a,o,c)}finally{G.p=v,V.T=p}}function Ed(i,a,o,c){if(mu){var p=Td(c);if(p===null)hd(i,a,c,gu,o),uy(i,c);else if(jT(p,i,a,o,c))c.stopPropagation();else if(uy(i,c),a&4&&-1<VT.indexOf(i)){for(;p!==null;){var v=Ji(p);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var T=Yt(v.pendingLanes);if(T!==0){var D=v;for(D.pendingLanes|=2,D.entangledLanes|=2;T;){var H=1<<31-It(T);D.entanglements[1]|=H,T&=~H}ji(v),(Oe&6)===0&&($c=ge()+500,ll(0))}}break;case 13:D=pr(v,2),D!==null&&ci(D,v,2),eu(),bd(v,2)}if(v=Td(c),v===null&&hd(i,a,c,gu,o),v===p)break;p=v}p!==null&&c.stopPropagation()}else hd(i,a,c,null,o)}}function Td(i){return i=Ch(i),Ad(i)}var gu=null;function Ad(i){if(gu=null,i=Qi(i),i!==null){var a=l(i);if(a===null)i=null;else{var o=a.tag;if(o===13){if(i=u(a),i!==null)return i;i=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return gu=i,null}function cy(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gt()){case Ee:return 2;case Zt:return 8;case oe:case sn:return 32;case B:return 268435456;default:return 32}default:return 32}}var wd=!1,Ks=null,Zs=null,Qs=null,gl=new Map,vl=new Map,Js=[],VT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uy(i,a){switch(i){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":gl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(a.pointerId)}}function xl(i,a,o,c,p,v){return i===null||i.nativeEvent!==v?(i={blockedOn:a,domEventName:o,eventSystemFlags:c,nativeEvent:v,targetContainers:[p]},a!==null&&(a=Ji(a),a!==null&&ly(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function jT(i,a,o,c,p){switch(a){case"focusin":return Ks=xl(Ks,i,a,o,c,p),!0;case"dragenter":return Zs=xl(Zs,i,a,o,c,p),!0;case"mouseover":return Qs=xl(Qs,i,a,o,c,p),!0;case"pointerover":var v=p.pointerId;return gl.set(v,xl(gl.get(v)||null,i,a,o,c,p)),!0;case"gotpointercapture":return v=p.pointerId,vl.set(v,xl(vl.get(v)||null,i,a,o,c,p)),!0}return!1}function hy(i){var a=Qi(i.target);if(a!==null){var o=l(a);if(o!==null){if(a=o.tag,a===13){if(a=u(o),a!==null){i.blockedOn=a,ni(i.priority,function(){if(o.tag===13){var c=li();c=ae(c);var p=pr(o,c);p!==null&&ci(p,o,c),bd(o,c)}});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function vu(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var o=Td(i.nativeEvent);if(o===null){o=i.nativeEvent;var c=new o.constructor(o.type,o);Rh=c,o.target.dispatchEvent(c),Rh=null}else return a=Ji(o),a!==null&&ly(a),i.blockedOn=o,!1;a.shift()}return!0}function fy(i,a,o){vu(i)&&o.delete(a)}function HT(){wd=!1,Ks!==null&&vu(Ks)&&(Ks=null),Zs!==null&&vu(Zs)&&(Zs=null),Qs!==null&&vu(Qs)&&(Qs=null),gl.forEach(fy),vl.forEach(fy)}function xu(i,a){i.blockedOn===a&&(i.blockedOn=null,wd||(wd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,HT)))}var yu=null;function dy(i){yu!==i&&(yu=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){yu===i&&(yu=null);for(var a=0;a<i.length;a+=3){var o=i[a],c=i[a+1],p=i[a+2];if(typeof c!="function"){if(Ad(c||o)===null)continue;break}var v=Ji(o);v!==null&&(i.splice(a,3),a-=3,Af(v,{pending:!0,data:p,method:o.method,action:c},c,p))}}))}function yl(i){function a(H){return xu(H,i)}Ks!==null&&xu(Ks,i),Zs!==null&&xu(Zs,i),Qs!==null&&xu(Qs,i),gl.forEach(a),vl.forEach(a);for(var o=0;o<Js.length;o++){var c=Js[o];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Js.length&&(o=Js[0],o.blockedOn===null);)hy(o),o.blockedOn===null&&Js.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var p=o[c],v=o[c+1],T=p[Ln]||null;if(typeof v=="function")T||dy(o);else if(T){var D=null;if(v&&v.hasAttribute("formAction")){if(p=v,T=v[Ln]||null)D=T.formAction;else if(Ad(p)!==null)continue}else D=T.action;typeof D=="function"?o[c+1]=D:(o.splice(c,3),c-=3),dy(o)}}}function Rd(i){this._internalRoot=i}_u.prototype.render=Rd.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,c=li();ry(o,c,i,a,null,null)},_u.prototype.unmount=Rd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ry(i.current,2,null,i,null,null),eu(),a[Zn]=null}};function _u(i){this._internalRoot=i}_u.prototype.unstable_scheduleHydration=function(i){if(i){var a=Re();i={blockedOn:null,target:i,priority:a};for(var o=0;o<Js.length&&a!==0&&a<Js[o].priority;o++);Js.splice(o,0,i),o===0&&hy(i)}};var py=t.version;if(py!=="19.1.0")throw Error(s(527,py,"19.1.0"));G.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(a),i=i!==null?d(i):null,i=i===null?null:i.stateNode,i};var kT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{pt=Su.inject(kT),gt=Su}catch{}}return Sl.createRoot=function(i,a){if(!r(i))throw Error(s(299));var o=!1,c="",p=Dv,v=Lv,T=Pv,D=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks)),a=sy(i,1,!1,null,null,o,c,p,v,T,D,null),i[Zn]=a.current,ud(i),new Rd(a)},Sl.hydrateRoot=function(i,a,o){if(!r(i))throw Error(s(299));var c=!1,p="",v=Dv,T=Lv,D=Pv,H=null,st=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(D=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(H=o.unstable_transitionCallbacks),o.formState!==void 0&&(st=o.formState)),a=sy(i,1,!0,a,o??null,c,p,v,T,D,H,st),a.context=ay(null),o=a.current,c=li(),c=ae(c),p=Os(c),p.callback=null,Is(o,p,c),o=c,a.current.lanes=o,zt(a,o),ji(a),i[Zn]=a.current,ud(i),new _u(a)},Sl.version="19.1.0",Sl}var Ey;function tA(){if(Ey)return Ld.exports;Ey=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ld.exports=$T(),Ld.exports}var eA=tA();const Xm=xt.createContext({});function ec(n){const t=xt.useRef(null);return t.current===null&&(t.current=n()),t.current}const qm=typeof window<"u",Ym=qm?xt.useLayoutEffect:xt.useEffect,yh=xt.createContext(null);function Km(n,t){n.indexOf(t)===-1&&n.push(t)}function Zm(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Ts=(n,t,e)=>e>t?t:e<n?n:e;let Qm=()=>{};const As={},dM=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function pM(n){return typeof n=="object"&&n!==null}const mM=n=>/^0[^.\s]+$/u.test(n);function Jm(n){let t;return()=>(t===void 0&&(t=n()),t)}const Ti=n=>n,nA=(n,t)=>e=>t(n(e)),nc=(...n)=>n.reduce(nA),kl=(n,t,e)=>{const s=t-n;return s===0?1:(e-n)/s};class $m{constructor(){this.subscriptions=[]}add(t){return Km(this.subscriptions,t),()=>Zm(this.subscriptions,t)}notify(t,e,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,e,s);else for(let l=0;l<r;l++){const u=this.subscriptions[l];u&&u(t,e,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Wi=n=>n*1e3,Xi=n=>n/1e3;function gM(n,t){return t?n*(1e3/t):0}const vM=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,iA=1e-7,sA=12;function aA(n,t,e,s,r){let l,u,h=0;do u=t+(e-t)/2,l=vM(u,s,r)-n,l>0?e=u:t=u;while(Math.abs(l)>iA&&++h<sA);return u}function ic(n,t,e,s){if(n===t&&e===s)return Ti;const r=l=>aA(l,0,1,n,e);return l=>l===0||l===1?l:vM(r(l),t,s)}const xM=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,yM=n=>t=>1-n(1-t),_M=ic(.33,1.53,.69,.99),tg=yM(_M),SM=xM(tg),MM=n=>(n*=2)<1?.5*tg(n):.5*(2-Math.pow(2,-10*(n-1))),eg=n=>1-Math.sin(Math.acos(n)),bM=yM(eg),EM=xM(eg),rA=ic(.42,0,1,1),oA=ic(0,0,.58,1),TM=ic(.42,0,.58,1),lA=n=>Array.isArray(n)&&typeof n[0]!="number",AM=n=>Array.isArray(n)&&typeof n[0]=="number",cA={linear:Ti,easeIn:rA,easeInOut:TM,easeOut:oA,circIn:eg,circInOut:EM,circOut:bM,backIn:tg,backInOut:SM,backOut:_M,anticipate:MM},uA=n=>typeof n=="string",Ty=n=>{if(AM(n)){Qm(n.length===4);const[t,e,s,r]=n;return ic(t,e,s,r)}else if(uA(n))return cA[n];return n},Mu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function hA(n,t){let e=new Set,s=new Set,r=!1,l=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(g){u.has(g)&&(d.schedule(g),n()),g(h)}const d={schedule:(g,x=!1,y=!1)=>{const b=y&&r?e:s;return x&&u.add(g),b.has(g)||b.add(g),g},cancel:g=>{s.delete(g),u.delete(g)},process:g=>{if(h=g,r){l=!0;return}r=!0,[e,s]=[s,e],e.forEach(f),e.clear(),r=!1,l&&(l=!1,d.process(g))}};return d}const fA=40;function wM(n,t){let e=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},l=()=>e=!0,u=Mu.reduce((w,A)=>(w[A]=hA(l),w),{}),{setup:h,read:f,resolveKeyframes:d,preUpdate:g,update:x,preRender:y,render:_,postRender:b}=u,E=()=>{const w=As.useManualTiming?r.timestamp:performance.now();e=!1,As.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(w-r.timestamp,fA),1)),r.timestamp=w,r.isProcessing=!0,h.process(r),f.process(r),d.process(r),g.process(r),x.process(r),y.process(r),_.process(r),b.process(r),r.isProcessing=!1,e&&t&&(s=!1,n(E))},M=()=>{e=!0,s=!0,r.isProcessing||n(E)};return{schedule:Mu.reduce((w,A)=>{const N=u[A];return w[A]=(O,I=!1,z=!1)=>(e||M(),N.schedule(O,I,z)),w},{}),cancel:w=>{for(let A=0;A<Mu.length;A++)u[Mu[A]].cancel(w)},state:r,steps:u}}const{schedule:Ye,cancel:ws,state:In,steps:Od}=wM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ti,!0);let $u;function dA(){$u=void 0}const ei={now:()=>($u===void 0&&ei.set(In.isProcessing||As.useManualTiming?In.timestamp:performance.now()),$u),set:n=>{$u=n,queueMicrotask(dA)}},RM=n=>t=>typeof t=="string"&&t.startsWith(n),ng=RM("--"),pA=RM("var(--"),ig=n=>pA(n)?mA.test(n.split("/*")[0].trim()):!1,mA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,So={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Gl={...So,transform:n=>Ts(0,1,n)},bu={...So,default:1},Ul=n=>Math.round(n*1e5)/1e5,sg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gA(n){return n==null}const vA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ag=(n,t)=>e=>!!(typeof e=="string"&&vA.test(e)&&e.startsWith(n)||t&&!gA(e)&&Object.prototype.hasOwnProperty.call(e,t)),CM=(n,t,e)=>s=>{if(typeof s!="string")return s;const[r,l,u,h]=s.match(sg);return{[n]:parseFloat(r),[t]:parseFloat(l),[e]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},xA=n=>Ts(0,255,n),Id={...So,transform:n=>Math.round(xA(n))},Ka={test:ag("rgb","red"),parse:CM("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:s=1})=>"rgba("+Id.transform(n)+", "+Id.transform(t)+", "+Id.transform(e)+", "+Ul(Gl.transform(s))+")"};function yA(n){let t="",e="",s="",r="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),s=n.substring(5,7),r=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),s=n.substring(3,4),r=n.substring(4,5),t+=t,e+=e,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const Up={test:ag("#"),parse:yA,transform:Ka.transform},sc=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),oa=sc("deg"),qi=sc("%"),se=sc("px"),_A=sc("vh"),SA=sc("vw"),Ay={...qi,parse:n=>qi.parse(n)/100,transform:n=>qi.transform(n*100)},so={test:ag("hsl","hue"),parse:CM("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:s=1})=>"hsla("+Math.round(n)+", "+qi.transform(Ul(t))+", "+qi.transform(Ul(e))+", "+Ul(Gl.transform(s))+")"},pn={test:n=>Ka.test(n)||Up.test(n)||so.test(n),parse:n=>Ka.test(n)?Ka.parse(n):so.test(n)?so.parse(n):Up.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ka.transform(n):so.transform(n),getAnimatableNone:n=>{const t=pn.parse(n);return t.alpha=0,pn.transform(t)}},MA=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bA(n){return isNaN(n)&&typeof n=="string"&&(n.match(sg)?.length||0)+(n.match(MA)?.length||0)>0}const DM="number",LM="color",EA="var",TA="var(",wy="${}",AA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wl(n){const t=n.toString(),e=[],s={color:[],number:[],var:[]},r=[];let l=0;const h=t.replace(AA,f=>(pn.test(f)?(s.color.push(l),r.push(LM),e.push(pn.parse(f))):f.startsWith(TA)?(s.var.push(l),r.push(EA),e.push(f)):(s.number.push(l),r.push(DM),e.push(parseFloat(f))),++l,wy)).split(wy);return{values:e,split:h,indexes:s,types:r}}function PM(n){return Wl(n).values}function UM(n){const{split:t,types:e}=Wl(n),s=t.length;return r=>{let l="";for(let u=0;u<s;u++)if(l+=t[u],r[u]!==void 0){const h=e[u];h===DM?l+=Ul(r[u]):h===LM?l+=pn.transform(r[u]):l+=r[u]}return l}}const wA=n=>typeof n=="number"?0:pn.test(n)?pn.getAnimatableNone(n):n;function RA(n){const t=PM(n);return UM(n)(t.map(wA))}const pa={test:bA,parse:PM,createTransformer:UM,getAnimatableNone:RA};function Fd(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function CA({hue:n,saturation:t,lightness:e,alpha:s}){n/=360,t/=100,e/=100;let r=0,l=0,u=0;if(!t)r=l=u=e;else{const h=e<.5?e*(1+t):e+t-e*t,f=2*e-h;r=Fd(f,h,n+1/3),l=Fd(f,h,n),u=Fd(f,h,n-1/3)}return{red:Math.round(r*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:s}}function ch(n,t){return e=>e>0?t:n}const $e=(n,t,e)=>n+(t-n)*e,zd=(n,t,e)=>{const s=n*n,r=e*(t*t-s)+s;return r<0?0:Math.sqrt(r)},DA=[Up,Ka,so],LA=n=>DA.find(t=>t.test(n));function Ry(n){const t=LA(n);if(!t)return!1;let e=t.parse(n);return t===so&&(e=CA(e)),e}const Cy=(n,t)=>{const e=Ry(n),s=Ry(t);if(!e||!s)return ch(n,t);const r={...e};return l=>(r.red=zd(e.red,s.red,l),r.green=zd(e.green,s.green,l),r.blue=zd(e.blue,s.blue,l),r.alpha=$e(e.alpha,s.alpha,l),Ka.transform(r))},Np=new Set(["none","hidden"]);function PA(n,t){return Np.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function UA(n,t){return e=>$e(n,t,e)}function rg(n){return typeof n=="number"?UA:typeof n=="string"?ig(n)?ch:pn.test(n)?Cy:IA:Array.isArray(n)?NM:typeof n=="object"?pn.test(n)?Cy:NA:ch}function NM(n,t){const e=[...n],s=e.length,r=n.map((l,u)=>rg(l)(l,t[u]));return l=>{for(let u=0;u<s;u++)e[u]=r[u](l);return e}}function NA(n,t){const e={...n,...t},s={};for(const r in e)n[r]!==void 0&&t[r]!==void 0&&(s[r]=rg(n[r])(n[r],t[r]));return r=>{for(const l in s)e[l]=s[l](r);return e}}function OA(n,t){const e=[],s={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const l=t.types[r],u=n.indexes[l][s[l]],h=n.values[u]??0;e[r]=h,s[l]++}return e}const IA=(n,t)=>{const e=pa.createTransformer(t),s=Wl(n),r=Wl(t);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?Np.has(n)&&!r.values.length||Np.has(t)&&!s.values.length?PA(n,t):nc(NM(OA(s,r),r.values),e):ch(n,t)};function OM(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?$e(n,t,e):rg(n)(n,t)}const FA=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>Ye.update(t,e),stop:()=>ws(t),now:()=>In.isProcessing?In.timestamp:ei.now()}},IM=(n,t,e=10)=>{let s="";const r=Math.max(Math.round(t/e),2);for(let l=0;l<r;l++)s+=Math.round(n(l/(r-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},uh=2e4;function og(n){let t=0;const e=50;let s=n.next(t);for(;!s.done&&t<uh;)t+=e,s=n.next(t);return t>=uh?1/0:t}function zA(n,t=100,e){const s=e({...n,keyframes:[0,t]}),r=Math.min(og(s),uh);return{type:"keyframes",ease:l=>s.next(r*l).value/t,duration:Xi(r)}}const BA=5;function FM(n,t,e){const s=Math.max(t-BA,0);return gM(e-n(s),t-s)}const nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bd=.001;function VA({duration:n=nn.duration,bounce:t=nn.bounce,velocity:e=nn.velocity,mass:s=nn.mass}){let r,l,u=1-t;u=Ts(nn.minDamping,nn.maxDamping,u),n=Ts(nn.minDuration,nn.maxDuration,Xi(n)),u<1?(r=d=>{const g=d*u,x=g*n,y=g-e,_=Op(d,u),b=Math.exp(-x);return Bd-y/_*b},l=d=>{const x=d*u*n,y=x*e+e,_=Math.pow(u,2)*Math.pow(d,2)*n,b=Math.exp(-x),E=Op(Math.pow(d,2),u);return(-r(d)+Bd>0?-1:1)*((y-_)*b)/E}):(r=d=>{const g=Math.exp(-d*n),x=(d-e)*n+1;return-Bd+g*x},l=d=>{const g=Math.exp(-d*n),x=(e-d)*(n*n);return g*x});const h=5/n,f=HA(r,l,h);if(n=Wi(n),isNaN(f))return{stiffness:nn.stiffness,damping:nn.damping,duration:n};{const d=Math.pow(f,2)*s;return{stiffness:d,damping:u*2*Math.sqrt(s*d),duration:n}}}const jA=12;function HA(n,t,e){let s=e;for(let r=1;r<jA;r++)s=s-n(s)/t(s);return s}function Op(n,t){return n*Math.sqrt(1-t*t)}const kA=["duration","bounce"],GA=["stiffness","damping","mass"];function Dy(n,t){return t.some(e=>n[e]!==void 0)}function WA(n){let t={velocity:nn.velocity,stiffness:nn.stiffness,damping:nn.damping,mass:nn.mass,isResolvedFromDuration:!1,...n};if(!Dy(n,GA)&&Dy(n,kA))if(n.visualDuration){const e=n.visualDuration,s=2*Math.PI/(e*1.2),r=s*s,l=2*Ts(.05,1,1-(n.bounce||0))*Math.sqrt(r);t={...t,mass:nn.mass,stiffness:r,damping:l}}else{const e=VA(n);t={...t,...e,mass:nn.mass},t.isResolvedFromDuration=!0}return t}function hh(n=nn.visualDuration,t=nn.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:s,restDelta:r}=e;const l=e.keyframes[0],u=e.keyframes[e.keyframes.length-1],h={done:!1,value:l},{stiffness:f,damping:d,mass:g,duration:x,velocity:y,isResolvedFromDuration:_}=WA({...e,velocity:-Xi(e.velocity||0)}),b=y||0,E=d/(2*Math.sqrt(f*g)),M=u-l,S=Xi(Math.sqrt(f/g)),L=Math.abs(M)<5;s||(s=L?nn.restSpeed.granular:nn.restSpeed.default),r||(r=L?nn.restDelta.granular:nn.restDelta.default);let w;if(E<1){const N=Op(S,E);w=O=>{const I=Math.exp(-E*S*O);return u-I*((b+E*S*M)/N*Math.sin(N*O)+M*Math.cos(N*O))}}else if(E===1)w=N=>u-Math.exp(-S*N)*(M+(b+S*M)*N);else{const N=S*Math.sqrt(E*E-1);w=O=>{const I=Math.exp(-E*S*O),z=Math.min(N*O,300);return u-I*((b+E*S*M)*Math.sinh(z)+N*M*Math.cosh(z))/N}}const A={calculatedDuration:_&&x||null,next:N=>{const O=w(N);if(_)h.done=N>=x;else{let I=N===0?b:0;E<1&&(I=N===0?Wi(b):FM(w,N,O));const z=Math.abs(I)<=s,U=Math.abs(u-O)<=r;h.done=z&&U}return h.value=h.done?u:O,h},toString:()=>{const N=Math.min(og(A),uh),O=IM(I=>A.next(N*I).value,N,30);return N+"ms "+O},toTransition:()=>{}};return A}hh.applyToOptions=n=>{const t=zA(n,100,hh);return n.ease=t.ease,n.duration=Wi(t.duration),n.type="keyframes",n};function Ip({keyframes:n,velocity:t=0,power:e=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:l=500,modifyTarget:u,min:h,max:f,restDelta:d=.5,restSpeed:g}){const x=n[0],y={done:!1,value:x},_=z=>h!==void 0&&z<h||f!==void 0&&z>f,b=z=>h===void 0?f:f===void 0||Math.abs(h-z)<Math.abs(f-z)?h:f;let E=e*t;const M=x+E,S=u===void 0?M:u(M);S!==M&&(E=S-x);const L=z=>-E*Math.exp(-z/s),w=z=>S+L(z),A=z=>{const U=L(z),C=w(z);y.done=Math.abs(U)<=d,y.value=y.done?S:C};let N,O;const I=z=>{_(y.value)&&(N=z,O=hh({keyframes:[y.value,b(y.value)],velocity:FM(w,z,y.value),damping:r,stiffness:l,restDelta:d,restSpeed:g}))};return I(0),{calculatedDuration:null,next:z=>{let U=!1;return!O&&N===void 0&&(U=!0,A(z),I(z)),N!==void 0&&z>=N?O.next(z-N):(!U&&A(z),y)}}}function XA(n,t,e){const s=[],r=e||As.mix||OM,l=n.length-1;for(let u=0;u<l;u++){let h=r(n[u],n[u+1]);if(t){const f=Array.isArray(t)?t[u]||Ti:t;h=nc(f,h)}s.push(h)}return s}function zM(n,t,{clamp:e=!0,ease:s,mixer:r}={}){const l=n.length;if(Qm(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const u=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),t=[...t].reverse());const h=XA(t,s,r),f=h.length,d=g=>{if(u&&g<n[0])return t[0];let x=0;if(f>1)for(;x<n.length-2&&!(g<n[x+1]);x++);const y=kl(n[x],n[x+1],g);return h[x](y)};return e?g=>d(Ts(n[0],n[l-1],g)):d}function qA(n,t){const e=n[n.length-1];for(let s=1;s<=t;s++){const r=kl(0,t,s);n.push($e(e,1,r))}}function YA(n){const t=[0];return qA(t,n.length-1),t}function KA(n,t){return n.map(e=>e*t)}function ZA(n,t){return n.map(()=>t||TM).splice(0,n.length-1)}function Nl({duration:n=300,keyframes:t,times:e,ease:s="easeInOut"}){const r=lA(s)?s.map(Ty):Ty(s),l={done:!1,value:t[0]},u=KA(e&&e.length===t.length?e:YA(t),n),h=zM(u,t,{ease:Array.isArray(r)?r:ZA(t,r)});return{calculatedDuration:n,next:f=>(l.value=h(f),l.done=f>=n,l)}}const QA=n=>n!==null;function lg(n,{repeat:t,repeatType:e="loop"},s,r=1){const l=n.filter(QA),h=r<0||t&&e!=="loop"&&t%2===1?0:l.length-1;return!h||s===void 0?l[h]:s}const JA={decay:Ip,inertia:Ip,tween:Nl,keyframes:Nl,spring:hh};function BM(n){typeof n.type=="string"&&(n.type=JA[n.type])}class cg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const $A=n=>n/100;class _h extends cg{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==ei.now()&&this.tick(ei.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;BM(t);const{type:e=Nl,repeat:s=0,repeatDelay:r=0,repeatType:l,velocity:u=0}=t;let{keyframes:h}=t;const f=e||Nl;f!==Nl&&typeof h[0]!="number"&&(this.mixKeyframes=nc($A,OM(h[0],h[1])),h=[0,100]);const d=f({...t,keyframes:h});l==="mirror"&&(this.mirroredGenerator=f({...t,keyframes:[...h].reverse(),velocity:-u})),d.calculatedDuration===null&&(d.calculatedDuration=og(d));const{calculatedDuration:g}=d;this.calculatedDuration=g,this.resolvedDuration=g+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=d}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:s,totalDuration:r,mixKeyframes:l,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return s.next(0);const{delay:d=0,keyframes:g,repeat:x,repeatType:y,repeatDelay:_,type:b,onUpdate:E,finalKeyframe:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const S=this.currentTime-d*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?S<0:S>r;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let w=this.currentTime,A=s;if(x){const z=Math.min(this.currentTime,r)/h;let U=Math.floor(z),C=z%1;!C&&z>=1&&(C=1),C===1&&U--,U=Math.min(U,x+1),!!(U%2)&&(y==="reverse"?(C=1-C,_&&(C-=_/h)):y==="mirror"&&(A=u)),w=Ts(0,1,C)*h}const N=L?{done:!1,value:g[0]}:A.next(w);l&&(N.value=l(N.value));let{done:O}=N;!L&&f!==null&&(O=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&b!==Ip&&(N.value=lg(g,this.options,M,this.speed)),E&&E(N.value),I&&this.finish(),N}then(t,e){return this.finished.then(t,e)}get duration(){return Xi(this.calculatedDuration)}get time(){return Xi(this.currentTime)}set time(t){t=Wi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ei.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Xi(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=FA,startTime:e}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=e??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ei.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function tw(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const Za=n=>n*180/Math.PI,Fp=n=>{const t=Za(Math.atan2(n[1],n[0]));return zp(t)},ew={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Fp,rotateZ:Fp,skewX:n=>Za(Math.atan(n[1])),skewY:n=>Za(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},zp=n=>(n=n%360,n<0&&(n+=360),n),Ly=Fp,Py=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Uy=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),nw={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Py,scaleY:Uy,scale:n=>(Py(n)+Uy(n))/2,rotateX:n=>zp(Za(Math.atan2(n[6],n[5]))),rotateY:n=>zp(Za(Math.atan2(-n[2],n[0]))),rotateZ:Ly,rotate:Ly,skewX:n=>Za(Math.atan(n[4])),skewY:n=>Za(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Bp(n){return n.includes("scale")?1:0}function Vp(n,t){if(!n||n==="none")return Bp(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(e)s=nw,r=e;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=ew,r=h}if(!r)return Bp(t);const l=s[t],u=r[1].split(",").map(sw);return typeof l=="function"?l(u):u[l]}const iw=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return Vp(e,t)};function sw(n){return parseFloat(n.trim())}const Mo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bo=new Set(Mo),Ny=n=>n===So||n===se,aw=new Set(["x","y","z"]),rw=Mo.filter(n=>!aw.has(n));function ow(n){const t=[];return rw.forEach(e=>{const s=n.getValue(e);s!==void 0&&(t.push([e,s.get()]),s.set(e.startsWith("scale")?1:0))}),t}const er={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>Vp(t,"x"),y:(n,{transform:t})=>Vp(t,"y")};er.translateX=er.x;er.translateY=er.y;const nr=new Set;let jp=!1,Hp=!1,kp=!1;function VM(){if(Hp){const n=Array.from(nr).filter(s=>s.needsMeasurement),t=new Set(n.map(s=>s.element)),e=new Map;t.forEach(s=>{const r=ow(s);r.length&&(e.set(s,r),s.render())}),n.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const r=e.get(s);r&&r.forEach(([l,u])=>{s.getValue(l)?.set(u)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Hp=!1,jp=!1,nr.forEach(n=>n.complete(kp)),nr.clear()}function jM(){nr.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Hp=!0)})}function lw(){kp=!0,jM(),VM(),kp=!1}class ug{constructor(t,e,s,r,l,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=s,this.motionValue=r,this.element=l,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(nr.add(this),jp||(jp=!0,Ye.read(jM),Ye.resolveKeyframes(VM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:s,motionValue:r}=this;if(t[0]===null){const l=r?.get(),u=t[t.length-1];if(l!==void 0)t[0]=l;else if(s&&e){const h=s.readValue(e,u);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=u),r&&l===void 0&&r.set(t[0])}tw(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),nr.delete(this)}cancel(){this.state==="scheduled"&&(nr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const cw=n=>n.startsWith("--");function uw(n,t,e){cw(t)?n.style.setProperty(t,e):n.style[t]=e}const hw=Jm(()=>window.ScrollTimeline!==void 0),fw={};function dw(n,t){const e=Jm(n);return()=>fw[t]??e()}const HM=dw(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ll=([n,t,e,s])=>`cubic-bezier(${n}, ${t}, ${e}, ${s})`,Oy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ll([0,.65,.55,1]),circOut:Ll([.55,0,1,.45]),backIn:Ll([.31,.01,.66,-.59]),backOut:Ll([.33,1.53,.69,.99])};function kM(n,t){if(n)return typeof n=="function"?HM()?IM(n,t):"ease-out":AM(n)?Ll(n):Array.isArray(n)?n.map(e=>kM(e,t)||Oy.easeOut):Oy[n]}function pw(n,t,e,{delay:s=0,duration:r=300,repeat:l=0,repeatType:u="loop",ease:h="easeOut",times:f}={},d=void 0){const g={[t]:e};f&&(g.offset=f);const x=kM(h,r);Array.isArray(x)&&(g.easing=x);const y={delay:s,duration:r,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"};return d&&(y.pseudoElement=d),n.animate(g,y)}function GM(n){return typeof n=="function"&&"applyToOptions"in n}function mw({type:n,...t}){return GM(n)&&HM()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class gw extends cg{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:s,keyframes:r,pseudoElement:l,allowFlatten:u=!1,finalKeyframe:h,onComplete:f}=t;this.isPseudoElement=!!l,this.allowFlatten=u,this.options=t,Qm(typeof t.type!="string");const d=mw(t);this.animation=pw(e,s,r,d,l),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=lg(r,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):uw(e,s,g),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Xi(Number(t))}get time(){return Xi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Wi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&hw()?(this.animation.timeline=t,Ti):e(this)}}const WM={anticipate:MM,backInOut:SM,circInOut:EM};function vw(n){return n in WM}function xw(n){typeof n.ease=="string"&&vw(n.ease)&&(n.ease=WM[n.ease])}const Iy=10;class yw extends gw{constructor(t){xw(t),BM(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:s,onComplete:r,element:l,...u}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const h=new _h({...u,autoplay:!1}),f=Wi(this.finishedTime??this.time);e.setWithVelocity(h.sample(f-Iy).value,h.sample(f).value,Iy),h.stop()}}const Fy=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(pa.test(n)||n==="0")&&!n.startsWith("url("));function _w(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function Sw(n,t,e,s){const r=n[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const l=n[n.length-1],u=Fy(r,t),h=Fy(l,t);return!u||!h?!1:_w(n)||(e==="spring"||GM(e))&&s}function hg(n){return pM(n)&&"offsetHeight"in n}const Mw=new Set(["opacity","clipPath","filter","transform"]),bw=Jm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ew(n){const{motionValue:t,name:e,repeatDelay:s,repeatType:r,damping:l,type:u}=n;if(!hg(t?.owner?.current))return!1;const{onUpdate:h,transformTemplate:f}=t.owner.getProps();return bw()&&e&&Mw.has(e)&&(e!=="transform"||!f)&&!h&&!s&&r!=="mirror"&&l!==0&&u!=="inertia"}const Tw=40;class Aw extends cg{constructor({autoplay:t=!0,delay:e=0,type:s="keyframes",repeat:r=0,repeatDelay:l=0,repeatType:u="loop",keyframes:h,name:f,motionValue:d,element:g,...x}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ei.now();const y={autoplay:t,delay:e,type:s,repeat:r,repeatDelay:l,repeatType:u,name:f,motionValue:d,element:g,...x},_=g?.KeyframeResolver||ug;this.keyframeResolver=new _(h,(b,E,M)=>this.onKeyframesResolved(b,E,y,!M),f,d,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,s,r){this.keyframeResolver=void 0;const{name:l,type:u,velocity:h,delay:f,isHandoff:d,onUpdate:g}=s;this.resolvedAt=ei.now(),Sw(t,l,u,h)||((As.instantAnimations||!f)&&g?.(lg(t,s,e)),t[0]=t[t.length-1],s.duration=0,s.repeat=0);const y={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>Tw?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...s,keyframes:t},_=!d&&Ew(y)?new yw({...y,element:y.motionValue.owner.current}):new _h(y);_.finished.then(()=>this.notifyFinished()).catch(Ti),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),lw()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const ww=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Rw(n){const t=ww.exec(n);if(!t)return[,];const[,e,s,r]=t;return[`--${e??s}`,r]}function XM(n,t,e=1){const[s,r]=Rw(n);if(!s)return;const l=window.getComputedStyle(t).getPropertyValue(s);if(l){const u=l.trim();return dM(u)?parseFloat(u):u}return ig(r)?XM(r,t,e+1):r}function fg(n,t){return n?.[t]??n?.default??n}const qM=new Set(["width","height","top","left","right","bottom",...Mo]),Cw={test:n=>n==="auto",parse:n=>n},YM=n=>t=>t.test(n),KM=[So,se,qi,oa,SA,_A,Cw],zy=n=>KM.find(YM(n));function Dw(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||mM(n):!0}const Lw=new Set(["brightness","contrast","saturate","opacity"]);function Pw(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[s]=e.match(sg)||[];if(!s)return n;const r=e.replace(s,"");let l=Lw.has(t)?1:0;return s!==e&&(l*=100),t+"("+l+r+")"}const Uw=/\b([a-z-]*)\(.*?\)/gu,Gp={...pa,getAnimatableNone:n=>{const t=n.match(Uw);return t?t.map(Pw).join(" "):n}},By={...So,transform:Math.round},Nw={rotate:oa,rotateX:oa,rotateY:oa,rotateZ:oa,scale:bu,scaleX:bu,scaleY:bu,scaleZ:bu,skew:oa,skewX:oa,skewY:oa,distance:se,translateX:se,translateY:se,translateZ:se,x:se,y:se,z:se,perspective:se,transformPerspective:se,opacity:Gl,originX:Ay,originY:Ay,originZ:se},dg={borderWidth:se,borderTopWidth:se,borderRightWidth:se,borderBottomWidth:se,borderLeftWidth:se,borderRadius:se,radius:se,borderTopLeftRadius:se,borderTopRightRadius:se,borderBottomRightRadius:se,borderBottomLeftRadius:se,width:se,maxWidth:se,height:se,maxHeight:se,top:se,right:se,bottom:se,left:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,backgroundPositionX:se,backgroundPositionY:se,...Nw,zIndex:By,fillOpacity:Gl,strokeOpacity:Gl,numOctaves:By},Ow={...dg,color:pn,backgroundColor:pn,outlineColor:pn,fill:pn,stroke:pn,borderColor:pn,borderTopColor:pn,borderRightColor:pn,borderBottomColor:pn,borderLeftColor:pn,filter:Gp,WebkitFilter:Gp},ZM=n=>Ow[n];function QM(n,t){let e=ZM(n);return e!==Gp&&(e=pa),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const Iw=new Set(["auto","none","0"]);function Fw(n,t,e){let s=0,r;for(;s<n.length&&!r;){const l=n[s];typeof l=="string"&&!Iw.has(l)&&Wl(l).values.length&&(r=n[s]),s++}if(r&&e)for(const l of t)n[l]=QM(e,r)}class zw extends ug{constructor(t,e,s,r,l){super(t,e,s,r,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:s}=this;if(!e||!e.current)return;super.readKeyframes();for(let f=0;f<t.length;f++){let d=t[f];if(typeof d=="string"&&(d=d.trim(),ig(d))){const g=XM(d,e.current);g!==void 0&&(t[f]=g),f===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!qM.has(s)||t.length!==2)return;const[r,l]=t,u=zy(r),h=zy(l);if(u!==h)if(Ny(u)&&Ny(h))for(let f=0;f<t.length;f++){const d=t[f];typeof d=="string"&&(t[f]=parseFloat(d))}else er[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,s=[];for(let r=0;r<t.length;r++)(t[r]===null||Dw(t[r]))&&s.push(r);s.length&&Fw(t,s,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=er[s](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];r!==void 0&&t.getValue(s,r).jump(r,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const r=t.getValue(e);r&&r.jump(this.measuredOrigin,!1);const l=s.length-1,u=s[l];s[l]=er[e](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,f])=>{t.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function Bw(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const r=e?.[n]??s.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const JM=(n,t)=>t&&typeof n=="number"?t.transform(n):n,Vy=30,Vw=n=>!isNaN(parseFloat(n)),Ol={current:void 0};class jw{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{const l=ei.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();r&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=ei.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Vw(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new $m);const s=this.events[t].add(e);return t==="change"?()=>{s(),Ye.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,s){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return Ol.current&&Ol.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=ei.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Vy)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,Vy);return gM(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ir(n,t){return new jw(n,t)}const{schedule:pg}=wM(queueMicrotask,!1),Pi={x:!1,y:!1};function $M(){return Pi.x||Pi.y}function Hw(n){return n==="x"||n==="y"?Pi[n]?null:(Pi[n]=!0,()=>{Pi[n]=!1}):Pi.x||Pi.y?null:(Pi.x=Pi.y=!0,()=>{Pi.x=Pi.y=!1})}function tb(n,t){const e=Bw(n),s=new AbortController,r={passive:!0,...t,signal:s.signal};return[e,r,()=>s.abort()]}function jy(n){return!(n.pointerType==="touch"||$M())}function kw(n,t,e={}){const[s,r,l]=tb(n,e),u=h=>{if(!jy(h))return;const{target:f}=h,d=t(f,h);if(typeof d!="function"||!f)return;const g=x=>{jy(x)&&(d(x),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,r)};return s.forEach(h=>{h.addEventListener("pointerenter",u,r)}),l}const eb=(n,t)=>t?n===t?!0:eb(n,t.parentElement):!1,mg=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Gw=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Ww(n){return Gw.has(n.tagName)||n.tabIndex!==-1}const th=new WeakSet;function Hy(n){return t=>{t.key==="Enter"&&n(t)}}function Vd(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Xw=(n,t)=>{const e=n.currentTarget;if(!e)return;const s=Hy(()=>{if(th.has(e))return;Vd(e,"down");const r=Hy(()=>{Vd(e,"up")}),l=()=>Vd(e,"cancel");e.addEventListener("keyup",r,t),e.addEventListener("blur",l,t)});e.addEventListener("keydown",s,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",s),t)};function ky(n){return mg(n)&&!$M()}function qw(n,t,e={}){const[s,r,l]=tb(n,e),u=h=>{const f=h.currentTarget;if(!ky(h))return;th.add(f);const d=t(f,h),g=(_,b)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",y),th.has(f)&&th.delete(f),ky(_)&&typeof d=="function"&&d(_,{success:b})},x=_=>{g(_,f===window||f===document||e.useGlobalTarget||eb(f,_.target))},y=_=>{g(_,!1)};window.addEventListener("pointerup",x,r),window.addEventListener("pointercancel",y,r)};return s.forEach(h=>{(e.useGlobalTarget?window:h).addEventListener("pointerdown",u,r),hg(h)&&(h.addEventListener("focus",d=>Xw(d,r)),!Ww(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function nb(n){return pM(n)&&"ownerSVGElement"in n}function Yw(n){return nb(n)&&n.tagName==="svg"}function Kw(...n){const t=!Array.isArray(n[0]),e=t?0:-1,s=n[0+e],r=n[1+e],l=n[2+e],u=n[3+e],h=zM(r,l,u);return t?h(s):h}const Dn=n=>!!(n&&n.getVelocity);function Zw(n,t,e){const s=n.get();let r=null,l=s,u;const h=typeof s=="string"?s.replace(/[\d.-]/g,""):void 0,f=()=>{r&&(r.stop(),r=null)},d=()=>{f(),r=new _h({keyframes:[Wy(n.get()),Wy(l)],velocity:n.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...e,onUpdate:u})};n.attach((x,y)=>(l=x,u=_=>y(Gy(_,h)),Ye.postRender(d),n.get()),f);let g;return Dn(t)&&(g=t.on("change",x=>n.set(Gy(x,h))),n.on("destroy",g)),g}function Gy(n,t){return t?n+t:n}function Wy(n){return typeof n=="number"?n:parseFloat(n)}const Qw=[...KM,pn,pa],Jw=n=>Qw.find(YM(n)),ac=xt.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class $w extends xt.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const s=e.offsetParent,r=hg(s)&&s.offsetWidth||0,l=this.props.sizeRef.current;l.height=e.offsetHeight||0,l.width=e.offsetWidth||0,l.top=e.offsetTop,l.left=e.offsetLeft,l.right=r-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function t2({children:n,isPresent:t,anchorX:e,root:s}){const r=xt.useId(),l=xt.useRef(null),u=xt.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=xt.useContext(ac);return xt.useInsertionEffect(()=>{const{width:f,height:d,top:g,left:x,right:y}=u.current;if(t||!l.current||!f||!d)return;const _=e==="left"?`left: ${x}`:`right: ${y}`;l.current.dataset.motionPopId=r;const b=document.createElement("style");h&&(b.nonce=h);const E=s??document.head;return E.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${d}px !important;
            ${_}px !important;
            top: ${g}px !important;
          }
        `),()=>{E.removeChild(b),E.contains(b)&&E.removeChild(b)}},[t]),m.jsx($w,{isPresent:t,childRef:l,sizeRef:u,children:xt.cloneElement(n,{ref:l})})}const e2=({children:n,initial:t,isPresent:e,onExitComplete:s,custom:r,presenceAffectsLayout:l,mode:u,anchorX:h,root:f})=>{const d=ec(n2),g=xt.useId();let x=!0,y=xt.useMemo(()=>(x=!1,{id:g,initial:t,isPresent:e,custom:r,onExitComplete:_=>{d.set(_,!0);for(const b of d.values())if(!b)return;s&&s()},register:_=>(d.set(_,!1),()=>d.delete(_))}),[e,d,s]);return l&&x&&(y={...y}),xt.useMemo(()=>{d.forEach((_,b)=>d.set(b,!1))},[e]),xt.useEffect(()=>{!e&&!d.size&&s&&s()},[e]),u==="popLayout"&&(n=m.jsx(t2,{isPresent:e,anchorX:h,root:f,children:n})),m.jsx(yh.Provider,{value:y,children:n})};function n2(){return new Map}function ib(n=!0){const t=xt.useContext(yh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:s,register:r}=t,l=xt.useId();xt.useEffect(()=>{if(n)return r(l)},[n]);const u=xt.useCallback(()=>n&&s&&s(l),[l,s,n]);return!e&&s?[!1,u]:[!0]}const Eu=n=>n.key||"";function Xy(n){const t=[];return xt.Children.forEach(n,e=>{xt.isValidElement(e)&&t.push(e)}),t}const qy=({children:n,custom:t,initial:e=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:l="sync",propagate:u=!1,anchorX:h="left",root:f})=>{const[d,g]=ib(u),x=xt.useMemo(()=>Xy(n),[n]),y=u&&!d?[]:x.map(Eu),_=xt.useRef(!0),b=xt.useRef(x),E=ec(()=>new Map),[M,S]=xt.useState(x),[L,w]=xt.useState(x);Ym(()=>{_.current=!1,b.current=x;for(let O=0;O<L.length;O++){const I=Eu(L[O]);y.includes(I)?E.delete(I):E.get(I)!==!0&&E.set(I,!1)}},[L,y.length,y.join("-")]);const A=[];if(x!==M){let O=[...x];for(let I=0;I<L.length;I++){const z=L[I],U=Eu(z);y.includes(U)||(O.splice(I,0,z),A.push(z))}return l==="wait"&&A.length&&(O=A),w(Xy(O)),S(x),null}const{forceRender:N}=xt.useContext(Xm);return m.jsx(m.Fragment,{children:L.map(O=>{const I=Eu(O),z=u&&!d?!1:x===L||y.includes(I),U=()=>{if(E.has(I))E.set(I,!0);else return;let C=!0;E.forEach(j=>{j||(C=!1)}),C&&(N?.(),w(b.current),u&&g?.(),s&&s())};return m.jsx(e2,{isPresent:z,initial:!_.current||e?void 0:!1,custom:t,presenceAffectsLayout:r,mode:l,root:f,onExitComplete:z?void 0:U,anchorX:h,children:O},I)})})},sb=xt.createContext({strict:!1}),Yy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mo={};for(const n in Yy)mo[n]={isEnabled:t=>Yy[n].some(e=>!!t[e])};function i2(n){for(const t in n)mo[t]={...mo[t],...n[t]}}const s2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||s2.has(n)}let ab=n=>!fh(n);function a2(n){typeof n=="function"&&(ab=t=>t.startsWith("on")?!fh(t):n(t))}try{a2(require("@emotion/is-prop-valid").default)}catch{}function r2(n,t,e){const s={};for(const r in n)r==="values"&&typeof n.values=="object"||(ab(r)||e===!0&&fh(r)||!t&&!fh(r)||n.draggable&&r.startsWith("onDrag"))&&(s[r]=n[r]);return s}function o2(n){if(typeof Proxy>"u")return n;const t=new Map,e=(...s)=>n(...s);return new Proxy(e,{get:(s,r)=>r==="create"?n:(t.has(r)||t.set(r,n(r)),t.get(r))})}const Sh=xt.createContext({});function Mh(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Xl(n){return typeof n=="string"||Array.isArray(n)}const gg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vg=["initial",...gg];function bh(n){return Mh(n.animate)||vg.some(t=>Xl(n[t]))}function rb(n){return!!(bh(n)||n.variants)}function l2(n,t){if(bh(n)){const{initial:e,animate:s}=n;return{initial:e===!1||Xl(e)?e:void 0,animate:Xl(s)?s:void 0}}return n.inherit!==!1?t:{}}function c2(n){const{initial:t,animate:e}=l2(n,xt.useContext(Sh));return xt.useMemo(()=>({initial:t,animate:e}),[Ky(t),Ky(e)])}function Ky(n){return Array.isArray(n)?n.join(" "):n}const u2=Symbol.for("motionComponentSymbol");function ao(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function h2(n,t,e){return xt.useCallback(s=>{s&&n.onMount&&n.onMount(s),t&&(s?t.mount(s):t.unmount()),e&&(typeof e=="function"?e(s):ao(e)&&(e.current=s))},[t])}const xg=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),f2="framerAppearId",ob="data-"+xg(f2),lb=xt.createContext({});function d2(n,t,e,s,r){const{visualElement:l}=xt.useContext(Sh),u=xt.useContext(sb),h=xt.useContext(yh),f=xt.useContext(ac).reducedMotion,d=xt.useRef(null);s=s||u.renderer,!d.current&&s&&(d.current=s(n,{visualState:t,parent:l,props:e,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const g=d.current,x=xt.useContext(lb);g&&!g.projection&&r&&(g.type==="html"||g.type==="svg")&&p2(d.current,e,r,x);const y=xt.useRef(!1);xt.useInsertionEffect(()=>{g&&y.current&&g.update(e,h)});const _=e[ob],b=xt.useRef(!!_&&!window.MotionHandoffIsComplete?.(_)&&window.MotionHasOptimisedAnimation?.(_));return Ym(()=>{g&&(y.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),pg.render(g.render),b.current&&g.animationState&&g.animationState.animateChanges())}),xt.useEffect(()=>{g&&(!b.current&&g.animationState&&g.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(_)}),b.current=!1))}),g}function p2(n,t,e,s){const{layoutId:r,layout:l,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:d,layoutCrossfade:g}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:cb(n.parent)),n.projection.setOptions({layoutId:r,layout:l,alwaysMeasureLayout:!!u||h&&ao(h),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:g,layoutScroll:f,layoutRoot:d})}function cb(n){if(n)return n.options.allowProjection!==!1?n.projection:cb(n.parent)}function m2({preloadedFeatures:n,createVisualElement:t,useRender:e,useVisualState:s,Component:r}){n&&i2(n);function l(h,f){let d;const g={...xt.useContext(ac),...h,layoutId:g2(h)},{isStatic:x}=g,y=c2(h),_=s(h,x);if(!x&&qm){v2();const b=x2(g);d=b.MeasureLayout,y.visualElement=d2(r,_,g,t,b.ProjectionNode)}return m.jsxs(Sh.Provider,{value:y,children:[d&&y.visualElement?m.jsx(d,{visualElement:y.visualElement,...g}):null,e(r,h,h2(_,y.visualElement,f),_,x,y.visualElement)]})}l.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const u=xt.forwardRef(l);return u[u2]=r,u}function g2({layoutId:n}){const t=xt.useContext(Xm).id;return t&&n!==void 0?t+"-"+n:n}function v2(n,t){xt.useContext(sb).strict}function x2(n){const{drag:t,layout:e}=mo;if(!t&&!e)return{};const s={...t,...e};return{MeasureLayout:t?.isEnabled(n)||e?.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const ql={};function y2(n){for(const t in n)ql[t]=n[t],ng(t)&&(ql[t].isCSSVariable=!0)}function ub(n,{layout:t,layoutId:e}){return bo.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!ql[n]||n==="opacity")}const _2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},S2=Mo.length;function M2(n,t,e){let s="",r=!0;for(let l=0;l<S2;l++){const u=Mo[l],h=n[u];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(u.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||e){const d=JM(h,dg[u]);if(!f){r=!1;const g=_2[u]||u;s+=`${g}(${d}) `}e&&(t[u]=d)}}return s=s.trim(),e?s=e(t,r?"":s):r&&(s="none"),s}function yg(n,t,e){const{style:s,vars:r,transformOrigin:l}=n;let u=!1,h=!1;for(const f in t){const d=t[f];if(bo.has(f)){u=!0;continue}else if(ng(f)){r[f]=d;continue}else{const g=JM(d,dg[f]);f.startsWith("origin")?(h=!0,l[f]=g):s[f]=g}}if(t.transform||(u||e?s.transform=M2(t,n.transform,e):s.transform&&(s.transform="none")),h){const{originX:f="50%",originY:d="50%",originZ:g=0}=l;s.transformOrigin=`${f} ${d} ${g}`}}const _g=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hb(n,t,e){for(const s in t)!Dn(t[s])&&!ub(s,e)&&(n[s]=t[s])}function b2({transformTemplate:n},t){return xt.useMemo(()=>{const e=_g();return yg(e,t,n),Object.assign({},e.vars,e.style)},[t])}function E2(n,t){const e=n.style||{},s={};return hb(s,e,n),Object.assign(s,b2(n,t)),s}function T2(n,t){const e={},s=E2(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=s,e}const A2={offset:"stroke-dashoffset",array:"stroke-dasharray"},w2={offset:"strokeDashoffset",array:"strokeDasharray"};function R2(n,t,e=1,s=0,r=!0){n.pathLength=1;const l=r?A2:w2;n[l.offset]=se.transform(-s);const u=se.transform(t),h=se.transform(e);n[l.array]=`${u} ${h}`}function fb(n,{attrX:t,attrY:e,attrScale:s,pathLength:r,pathSpacing:l=1,pathOffset:u=0,...h},f,d,g){if(yg(n,h,d),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:x,style:y}=n;x.transform&&(y.transform=x.transform,delete x.transform),(y.transform||x.transformOrigin)&&(y.transformOrigin=x.transformOrigin??"50% 50%",delete x.transformOrigin),y.transform&&(y.transformBox=g?.transformBox??"fill-box",delete x.transformBox),t!==void 0&&(x.x=t),e!==void 0&&(x.y=e),s!==void 0&&(x.scale=s),r!==void 0&&R2(x,r,l,u,!1)}const db=()=>({..._g(),attrs:{}}),pb=n=>typeof n=="string"&&n.toLowerCase()==="svg";function C2(n,t,e,s){const r=xt.useMemo(()=>{const l=db();return fb(l,t,pb(s),n.transformTemplate,n.style),{...l.attrs,style:{...l.style}}},[t]);if(n.style){const l={};hb(l,n.style,n),r.style={...l,...r.style}}return r}const D2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Sg(n){return typeof n!="string"||n.includes("-")?!1:!!(D2.indexOf(n)>-1||/[A-Z]/u.test(n))}function L2(n=!1){return(e,s,r,{latestValues:l},u)=>{const f=(Sg(e)?C2:T2)(s,l,u,e),d=r2(s,typeof e=="string",n),g=e!==xt.Fragment?{...d,...f,ref:r}:{},{children:x}=s,y=xt.useMemo(()=>Dn(x)?x.get():x,[x]);return xt.createElement(e,{...g,children:y})}}function Zy(n){const t=[{},{}];return n?.values.forEach((e,s)=>{t[0][s]=e.get(),t[1][s]=e.getVelocity()}),t}function Mg(n,t,e,s){if(typeof t=="function"){const[r,l]=Zy(s);t=t(e!==void 0?e:n.custom,r,l)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[r,l]=Zy(s);t=t(e!==void 0?e:n.custom,r,l)}return t}function eh(n){return Dn(n)?n.get():n}function P2({scrapeMotionValuesFromProps:n,createRenderState:t},e,s,r){return{latestValues:U2(e,s,r,n),renderState:t()}}const mb=n=>(t,e)=>{const s=xt.useContext(Sh),r=xt.useContext(yh),l=()=>P2(n,t,s,r);return e?l():ec(l)};function U2(n,t,e,s){const r={},l=s(n,{});for(const y in l)r[y]=eh(l[y]);let{initial:u,animate:h}=n;const f=bh(n),d=rb(n);t&&d&&!f&&n.inherit!==!1&&(u===void 0&&(u=t.initial),h===void 0&&(h=t.animate));let g=e?e.initial===!1:!1;g=g||u===!1;const x=g?h:u;if(x&&typeof x!="boolean"&&!Mh(x)){const y=Array.isArray(x)?x:[x];for(let _=0;_<y.length;_++){const b=Mg(n,y[_]);if(b){const{transitionEnd:E,transition:M,...S}=b;for(const L in S){let w=S[L];if(Array.isArray(w)){const A=g?w.length-1:0;w=w[A]}w!==null&&(r[L]=w)}for(const L in E)r[L]=E[L]}}}return r}function bg(n,t,e){const{style:s}=n,r={};for(const l in s)(Dn(s[l])||t.style&&Dn(t.style[l])||ub(l,n)||e?.getValue(l)?.liveStyle!==void 0)&&(r[l]=s[l]);return r}const N2={useVisualState:mb({scrapeMotionValuesFromProps:bg,createRenderState:_g})};function gb(n,t,e){const s=bg(n,t,e);for(const r in n)if(Dn(n[r])||Dn(t[r])){const l=Mo.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[l]=n[r]}return s}const O2={useVisualState:mb({scrapeMotionValuesFromProps:gb,createRenderState:db})};function I2(n,t){return function(s,{forwardMotionProps:r}={forwardMotionProps:!1}){const u={...Sg(s)?O2:N2,preloadedFeatures:n,useRender:L2(r),createVisualElement:t,Component:s};return m2(u)}}function Yl(n,t,e){const s=n.getProps();return Mg(s,t,e!==void 0?e:s.custom,n)}const Wp=n=>Array.isArray(n);function F2(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,ir(e))}function z2(n){return Wp(n)?n[n.length-1]||0:n}function B2(n,t){const e=Yl(n,t);let{transitionEnd:s={},transition:r={},...l}=e||{};l={...l,...s};for(const u in l){const h=z2(l[u]);F2(n,u,h)}}function V2(n){return!!(Dn(n)&&n.add)}function Xp(n,t){const e=n.getValue("willChange");if(V2(e))return e.add(t);if(!e&&As.WillChange){const s=new As.WillChange("auto");n.addValue("willChange",s),s.add(t)}}function vb(n){return n.props[ob]}const j2=n=>n!==null;function H2(n,{repeat:t,repeatType:e="loop"},s){const r=n.filter(j2),l=t&&e!=="loop"&&t%2===1?0:r.length-1;return r[l]}const k2={type:"spring",stiffness:500,damping:25,restSpeed:10},G2=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),W2={type:"keyframes",duration:.8},X2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},q2=(n,{keyframes:t})=>t.length>2?W2:bo.has(n)?n.startsWith("scale")?G2(t[1]):k2:X2;function Y2({when:n,delay:t,delayChildren:e,staggerChildren:s,staggerDirection:r,repeat:l,repeatType:u,repeatDelay:h,from:f,elapsed:d,...g}){return!!Object.keys(g).length}const Eg=(n,t,e,s={},r,l)=>u=>{const h=fg(s,n)||{},f=h.delay||s.delay||0;let{elapsed:d=0}=s;d=d-Wi(f);const g={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...h,delay:-d,onUpdate:y=>{t.set(y),h.onUpdate&&h.onUpdate(y)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:n,motionValue:t,element:l?void 0:r};Y2(h)||Object.assign(g,q2(n,g)),g.duration&&(g.duration=Wi(g.duration)),g.repeatDelay&&(g.repeatDelay=Wi(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let x=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(x=!0)),(As.instantAnimations||As.skipAnimations)&&(x=!0,g.duration=0,g.delay=0),g.allowFlatten=!h.type&&!h.ease,x&&!l&&t.get()!==void 0){const y=H2(g.keyframes,h);if(y!==void 0){Ye.update(()=>{g.onUpdate(y),g.onComplete()});return}}return h.isSync?new _h(g):new Aw(g)};function K2({protectedKeys:n,needsAnimating:t},e){const s=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,s}function xb(n,t,{delay:e=0,transitionOverride:s,type:r}={}){let{transition:l=n.getDefaultTransition(),transitionEnd:u,...h}=t;s&&(l=s);const f=[],d=r&&n.animationState&&n.animationState.getState()[r];for(const g in h){const x=n.getValue(g,n.latestValues[g]??null),y=h[g];if(y===void 0||d&&K2(d,g))continue;const _={delay:e,...fg(l||{},g)},b=x.get();if(b!==void 0&&!x.isAnimating&&!Array.isArray(y)&&y===b&&!_.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const S=vb(n);if(S){const L=window.MotionHandoffAnimation(S,g,Ye);L!==null&&(_.startTime=L,E=!0)}}Xp(n,g),x.start(Eg(g,x,y,n.shouldReduceMotion&&qM.has(g)?{type:!1}:_,n,E));const M=x.animation;M&&f.push(M)}return u&&Promise.all(f).then(()=>{Ye.update(()=>{u&&B2(n,u)})}),f}function qp(n,t,e={}){const s=Yl(n,t,e.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=s||{};e.transitionOverride&&(r=e.transitionOverride);const l=s?()=>Promise.all(xb(n,s,e)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:g,staggerDirection:x}=r;return Z2(n,t,f,d,g,x,e)}:()=>Promise.resolve(),{when:h}=r;if(h){const[f,d]=h==="beforeChildren"?[l,u]:[u,l];return f().then(()=>d())}else return Promise.all([l(),u(e.delay)])}function Z2(n,t,e=0,s=0,r=0,l=1,u){const h=[],f=n.variantChildren.size,d=(f-1)*r,g=typeof s=="function",x=g?y=>s(y,f):l===1?(y=0)=>y*r:(y=0)=>d-y*r;return Array.from(n.variantChildren).sort(Q2).forEach((y,_)=>{y.notify("AnimationStart",t),h.push(qp(y,t,{...u,delay:e+(g?0:s)+x(_)}).then(()=>y.notify("AnimationComplete",t)))}),Promise.all(h)}function Q2(n,t){return n.sortNodePosition(t)}function J2(n,t,e={}){n.notify("AnimationStart",t);let s;if(Array.isArray(t)){const r=t.map(l=>qp(n,l,e));s=Promise.all(r)}else if(typeof t=="string")s=qp(n,t,e);else{const r=typeof t=="function"?Yl(n,t,e.custom):t;s=Promise.all(xb(n,r,e))}return s.then(()=>{n.notify("AnimationComplete",t)})}function yb(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let s=0;s<e;s++)if(t[s]!==n[s])return!1;return!0}const $2=vg.length;function _b(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?_b(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<$2;e++){const s=vg[e],r=n.props[s];(Xl(r)||r===!1)&&(t[s]=r)}return t}const tR=[...gg].reverse(),eR=gg.length;function nR(n){return t=>Promise.all(t.map(({animation:e,options:s})=>J2(n,e,s)))}function iR(n){let t=nR(n),e=Qy(),s=!0;const r=f=>(d,g)=>{const x=Yl(n,g,f==="exit"?n.presenceContext?.custom:void 0);if(x){const{transition:y,transitionEnd:_,...b}=x;d={...d,...b,..._}}return d};function l(f){t=f(n)}function u(f){const{props:d}=n,g=_b(n.parent)||{},x=[],y=new Set;let _={},b=1/0;for(let M=0;M<eR;M++){const S=tR[M],L=e[S],w=d[S]!==void 0?d[S]:g[S],A=Xl(w),N=S===f?L.isActive:null;N===!1&&(b=M);let O=w===g[S]&&w!==d[S]&&A;if(O&&s&&n.manuallyAnimateOnMount&&(O=!1),L.protectedKeys={..._},!L.isActive&&N===null||!w&&!L.prevProp||Mh(w)||typeof w=="boolean")continue;const I=sR(L.prevProp,w);let z=I||S===f&&L.isActive&&!O&&A||M>b&&A,U=!1;const C=Array.isArray(w)?w:[w];let j=C.reduce(r(S),{});N===!1&&(j={});const{prevResolvedValues:it={}}=L,$={...it,...j},et=G=>{z=!0,y.has(G)&&(U=!0,y.delete(G)),L.needsAnimating[G]=!0;const q=n.getValue(G);q&&(q.liveStyle=!1)};for(const G in $){const q=j[G],yt=it[G];if(_.hasOwnProperty(G))continue;let F=!1;Wp(q)&&Wp(yt)?F=!yb(q,yt):F=q!==yt,F?q!=null?et(G):y.add(G):q!==void 0&&y.has(G)?et(G):L.protectedKeys[G]=!0}L.prevProp=w,L.prevResolvedValues=j,L.isActive&&(_={..._,...j}),s&&n.blockInitialAnimation&&(z=!1),z&&(!(O&&I)||U)&&x.push(...C.map(G=>({animation:G,options:{type:S}})))}if(y.size){const M={};if(typeof d.initial!="boolean"){const S=Yl(n,Array.isArray(d.initial)?d.initial[0]:d.initial);S&&S.transition&&(M.transition=S.transition)}y.forEach(S=>{const L=n.getBaseTarget(S),w=n.getValue(S);w&&(w.liveStyle=!0),M[S]=L??null}),x.push({animation:M})}let E=!!x.length;return s&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(E=!1),s=!1,E?t(x):Promise.resolve()}function h(f,d){if(e[f].isActive===d)return Promise.resolve();n.variantChildren?.forEach(x=>x.animationState?.setActive(f,d)),e[f].isActive=d;const g=u(f);for(const x in e)e[x].protectedKeys={};return g}return{animateChanges:u,setActive:h,setAnimateFunction:l,getState:()=>e,reset:()=>{e=Qy(),s=!0}}}function sR(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!yb(t,n):!1}function za(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Qy(){return{animate:za(!0),whileInView:za(),whileHover:za(),whileTap:za(),whileDrag:za(),whileFocus:za(),exit:za()}}class va{constructor(t){this.isMounted=!1,this.node=t}update(){}}class aR extends va{constructor(t){super(t),t.animationState||(t.animationState=iR(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Mh(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let rR=0;class oR extends va{constructor(){super(...arguments),this.id=rR++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const lR={animation:{Feature:aR},exit:{Feature:oR}};function Kl(n,t,e,s={passive:!0}){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e)}function rc(n){return{point:{x:n.pageX,y:n.pageY}}}const cR=n=>t=>mg(t)&&n(t,rc(t));function Il(n,t,e,s){return Kl(n,t,cR(e),s)}function Sb({top:n,left:t,right:e,bottom:s}){return{x:{min:t,max:e},y:{min:n,max:s}}}function uR({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function hR(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),s=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:s.y,right:s.x}}const Mb=1e-4,fR=1-Mb,dR=1+Mb,bb=.01,pR=0-bb,mR=0+bb;function qn(n){return n.max-n.min}function gR(n,t,e){return Math.abs(n-t)<=e}function Jy(n,t,e,s=.5){n.origin=s,n.originPoint=$e(t.min,t.max,n.origin),n.scale=qn(e)/qn(t),n.translate=$e(e.min,e.max,n.origin)-n.originPoint,(n.scale>=fR&&n.scale<=dR||isNaN(n.scale))&&(n.scale=1),(n.translate>=pR&&n.translate<=mR||isNaN(n.translate))&&(n.translate=0)}function Fl(n,t,e,s){Jy(n.x,t.x,e.x,s?s.originX:void 0),Jy(n.y,t.y,e.y,s?s.originY:void 0)}function $y(n,t,e){n.min=e.min+t.min,n.max=n.min+qn(t)}function vR(n,t,e){$y(n.x,t.x,e.x),$y(n.y,t.y,e.y)}function t_(n,t,e){n.min=t.min-e.min,n.max=n.min+qn(t)}function zl(n,t,e){t_(n.x,t.x,e.x),t_(n.y,t.y,e.y)}const e_=()=>({translate:0,scale:1,origin:0,originPoint:0}),ro=()=>({x:e_(),y:e_()}),n_=()=>({min:0,max:0}),cn=()=>({x:n_(),y:n_()});function Ei(n){return[n("x"),n("y")]}function jd(n){return n===void 0||n===1}function Yp({scale:n,scaleX:t,scaleY:e}){return!jd(n)||!jd(t)||!jd(e)}function Wa(n){return Yp(n)||Eb(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Eb(n){return i_(n.x)||i_(n.y)}function i_(n){return n&&n!=="0%"}function dh(n,t,e){const s=n-e,r=t*s;return e+r}function s_(n,t,e,s,r){return r!==void 0&&(n=dh(n,r,s)),dh(n,e,s)+t}function Kp(n,t=0,e=1,s,r){n.min=s_(n.min,t,e,s,r),n.max=s_(n.max,t,e,s,r)}function Tb(n,{x:t,y:e}){Kp(n.x,t.translate,t.scale,t.originPoint),Kp(n.y,e.translate,e.scale,e.originPoint)}const a_=.999999999999,r_=1.0000000000001;function xR(n,t,e,s=!1){const r=e.length;if(!r)return;t.x=t.y=1;let l,u;for(let h=0;h<r;h++){l=e[h],u=l.projectionDelta;const{visualElement:f}=l.options;f&&f.props.style&&f.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&lo(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,Tb(n,u)),s&&Wa(l.latestValues)&&lo(n,l.latestValues))}t.x<r_&&t.x>a_&&(t.x=1),t.y<r_&&t.y>a_&&(t.y=1)}function oo(n,t){n.min=n.min+t,n.max=n.max+t}function o_(n,t,e,s,r=.5){const l=$e(n.min,n.max,r);Kp(n,t,e,l,s)}function lo(n,t){o_(n.x,t.x,t.scaleX,t.scale,t.originX),o_(n.y,t.y,t.scaleY,t.scale,t.originY)}function Ab(n,t){return Sb(hR(n.getBoundingClientRect(),t))}function yR(n,t,e){const s=Ab(n,e),{scroll:r}=t;return r&&(oo(s.x,r.offset.x),oo(s.y,r.offset.y)),s}const wb=({current:n})=>n?n.ownerDocument.defaultView:null,l_=(n,t)=>Math.abs(n-t);function _R(n,t){const e=l_(n.x,t.x),s=l_(n.y,t.y);return Math.sqrt(e**2+s**2)}class Rb{constructor(t,e,{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:l=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=kd(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,b=_R(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!b)return;const{point:E}=y,{timestamp:M}=In;this.history.push({...E,timestamp:M});const{onStart:S,onMove:L}=this.handlers;_||(S&&S(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,y)},this.handlePointerMove=(y,_)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Hd(_,this.transformPagePoint),Ye.update(this.updatePoint,!0)},this.handlePointerUp=(y,_)=>{this.end();const{onEnd:b,onSessionEnd:E,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=kd(y.type==="pointercancel"?this.lastMoveEventInfo:Hd(_,this.transformPagePoint),this.history);this.startEvent&&b&&b(y,S),E&&E(y,S)},!mg(t))return;this.dragSnapToOrigin=l,this.handlers=e,this.transformPagePoint=s,this.distanceThreshold=u,this.contextWindow=r||window;const h=rc(t),f=Hd(h,this.transformPagePoint),{point:d}=f,{timestamp:g}=In;this.history=[{...d,timestamp:g}];const{onSessionStart:x}=e;x&&x(t,kd(f,this.history)),this.removeListeners=nc(Il(this.contextWindow,"pointermove",this.handlePointerMove),Il(this.contextWindow,"pointerup",this.handlePointerUp),Il(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ws(this.updatePoint)}}function Hd(n,t){return t?{point:t(n.point)}:n}function c_(n,t){return{x:n.x-t.x,y:n.y-t.y}}function kd({point:n},t){return{point:n,delta:c_(n,Cb(t)),offset:c_(n,SR(t)),velocity:MR(t,.1)}}function SR(n){return n[0]}function Cb(n){return n[n.length-1]}function MR(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,s=null;const r=Cb(n);for(;e>=0&&(s=n[e],!(r.timestamp-s.timestamp>Wi(t)));)e--;if(!s)return{x:0,y:0};const l=Xi(r.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const u={x:(r.x-s.x)/l,y:(r.y-s.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function bR(n,{min:t,max:e},s){return t!==void 0&&n<t?n=s?$e(t,n,s.min):Math.max(n,t):e!==void 0&&n>e&&(n=s?$e(e,n,s.max):Math.min(n,e)),n}function u_(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function ER(n,{top:t,left:e,bottom:s,right:r}){return{x:u_(n.x,e,r),y:u_(n.y,t,s)}}function h_(n,t){let e=t.min-n.min,s=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,s]=[s,e]),{min:e,max:s}}function TR(n,t){return{x:h_(n.x,t.x),y:h_(n.y,t.y)}}function AR(n,t){let e=.5;const s=qn(n),r=qn(t);return r>s?e=kl(t.min,t.max-s,n.min):s>r&&(e=kl(n.min,n.max-r,t.min)),Ts(0,1,e)}function wR(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const Zp=.35;function RR(n=Zp){return n===!1?n=0:n===!0&&(n=Zp),{x:f_(n,"left","right"),y:f_(n,"top","bottom")}}function f_(n,t,e){return{min:d_(n,t),max:d_(n,e)}}function d_(n,t){return typeof n=="number"?n:n[t]||0}const CR=new WeakMap;class DR{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=cn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:s}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const l=x=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(rc(x).point)},u=(x,y)=>{const{drag:_,dragPropagation:b,onDragStart:E}=this.getProps();if(_&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Hw(_),!this.openDragLock))return;this.latestPointerEvent=x,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ei(S=>{let L=this.getAxisMotionValue(S).get()||0;if(qi.test(L)){const{projection:w}=this.visualElement;if(w&&w.layout){const A=w.layout.layoutBox[S];A&&(L=qn(A)*(parseFloat(L)/100))}}this.originPoint[S]=L}),E&&Ye.postRender(()=>E(x,y)),Xp(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},h=(x,y)=>{this.latestPointerEvent=x,this.latestPanInfo=y;const{dragPropagation:_,dragDirectionLock:b,onDirectionLock:E,onDrag:M}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:S}=y;if(b&&this.currentDirection===null){this.currentDirection=LR(S),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",y.point,S),this.updateAxis("y",y.point,S),this.visualElement.render(),M&&M(x,y)},f=(x,y)=>{this.latestPointerEvent=x,this.latestPanInfo=y,this.stop(x,y),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Ei(x=>this.getAnimationState(x)==="paused"&&this.getAxisMotionValue(x).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new Rb(t,{onSessionStart:l,onStart:u,onMove:h,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:s,contextWindow:wb(this.visualElement)})}stop(t,e){const s=t||this.latestPointerEvent,r=e||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!r||!s)return;const{velocity:u}=r;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&Ye.postRender(()=>h(s,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,s){const{drag:r}=this.getProps();if(!s||!Tu(t,r,this.currentDirection))return;const l=this.getAxisMotionValue(t);let u=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(u=bR(u,this.constraints[t],this.elastic[t])),l.set(u)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;t&&ao(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=ER(s.layoutBox,t):this.constraints=!1,this.elastic=RR(e),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ei(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=wR(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!ao(t))return!1;const s=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const l=yR(s,r.root,this.visualElement.getTransformPagePoint());let u=TR(r.layout.layoutBox,l);if(e){const h=e(uR(u));this.hasMutatedConstraints=!!h,h&&(u=Sb(h))}return u}startAnimation(t){const{drag:e,dragMomentum:s,dragElastic:r,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},d=Ei(g=>{if(!Tu(g,e,this.currentDirection))return;let x=f&&f[g]||{};u&&(x={min:0,max:0});const y=r?200:1e6,_=r?40:1e7,b={type:"inertia",velocity:s?t[g]:0,bounceStiffness:y,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...l,...x};return this.startAxisValueAnimation(g,b)});return Promise.all(d).then(h)}startAxisValueAnimation(t,e){const s=this.getAxisMotionValue(t);return Xp(this.visualElement,t),s.start(Eg(t,s,0,e,this.visualElement,!1))}stopAnimation(){Ei(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ei(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),r=s[e];return r||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Ei(e=>{const{drag:s}=this.getProps();if(!Tu(e,s,this.currentDirection))return;const{projection:r}=this.visualElement,l=this.getAxisMotionValue(e);if(r&&r.layout){const{min:u,max:h}=r.layout.layoutBox[e];l.set(t[e]-$e(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:s}=this.visualElement;if(!ao(e)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ei(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();r[u]=AR({min:f,max:f},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ei(u=>{if(!Tu(u,t,null))return;const h=this.getAxisMotionValue(u),{min:f,max:d}=this.constraints[u];h.set($e(f,d,r[u]))})}addListeners(){if(!this.visualElement.current)return;CR.set(this.visualElement,this);const t=this.visualElement.current,e=Il(t,"pointerdown",f=>{const{drag:d,dragListener:g=!0}=this.getProps();d&&g&&this.start(f)}),s=()=>{const{dragConstraints:f}=this.getProps();ao(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,l=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ye.read(s);const u=Kl(window,"resize",()=>this.scalePositionWithinConstraints()),h=r.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ei(g=>{const x=this.getAxisMotionValue(g);x&&(this.originPoint[g]+=f[g].translate,x.set(x.get()+f[g].translate))}),this.visualElement.render())});return()=>{u(),e(),l(),h&&h()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:l=!1,dragElastic:u=Zp,dragMomentum:h=!0}=t;return{...t,drag:e,dragDirectionLock:s,dragPropagation:r,dragConstraints:l,dragElastic:u,dragMomentum:h}}}function Tu(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function LR(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class PR extends va{constructor(t){super(t),this.removeGroupControls=Ti,this.removeListeners=Ti,this.controls=new DR(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ti}unmount(){this.removeGroupControls(),this.removeListeners()}}const p_=n=>(t,e)=>{n&&Ye.postRender(()=>n(t,e))};class UR extends va{constructor(){super(...arguments),this.removePointerDownListener=Ti}onPointerDown(t){this.session=new Rb(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wb(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:p_(t),onStart:p_(e),onMove:s,onEnd:(l,u)=>{delete this.session,r&&Ye.postRender(()=>r(l,u))}}}mount(){this.removePointerDownListener=Il(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const nh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function m_(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Ml={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(se.test(n))n=parseFloat(n);else return n;const e=m_(n,t.target.x),s=m_(n,t.target.y);return`${e}% ${s}%`}},NR={correct:(n,{treeScale:t,projectionDelta:e})=>{const s=n,r=pa.parse(n);if(r.length>5)return s;const l=pa.createTransformer(n),u=typeof r[0]!="number"?1:0,h=e.x.scale*t.x,f=e.y.scale*t.y;r[0+u]/=h,r[1+u]/=f;const d=$e(h,f,.5);return typeof r[2+u]=="number"&&(r[2+u]/=d),typeof r[3+u]=="number"&&(r[3+u]/=d),l(r)}};let g_=!1;class OR extends xt.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:s,layoutId:r}=this.props,{projection:l}=t;y2(IR),l&&(e.group&&e.group.add(l),s&&s.register&&r&&s.register(l),g_&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),nh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:s,drag:r,isPresent:l}=this.props,{projection:u}=s;return u&&(u.isPresent=l,g_=!0,r||t.layoutDependency!==e||e===void 0||t.isPresent!==l?u.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?u.promote():u.relegate()||Ye.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),pg.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:s}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Db(n){const[t,e]=ib(),s=xt.useContext(Xm);return m.jsx(OR,{...n,layoutGroup:s,switchLayoutGroup:xt.useContext(lb),isPresent:t,safeToRemove:e})}const IR={borderRadius:{...Ml,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ml,borderTopRightRadius:Ml,borderBottomLeftRadius:Ml,borderBottomRightRadius:Ml,boxShadow:NR};function FR(n,t,e){const s=Dn(n)?n:ir(n);return s.start(Eg("",s,t,e)),s.animation}const zR=(n,t)=>n.depth-t.depth;class BR{constructor(){this.children=[],this.isDirty=!1}add(t){Km(this.children,t),this.isDirty=!0}remove(t){Zm(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(zR),this.isDirty=!1,this.children.forEach(t)}}function VR(n,t){const e=ei.now(),s=({timestamp:r})=>{const l=r-e;l>=t&&(ws(s),n(l-t))};return Ye.setup(s,!0),()=>ws(s)}const Lb=["TopLeft","TopRight","BottomLeft","BottomRight"],jR=Lb.length,v_=n=>typeof n=="string"?parseFloat(n):n,x_=n=>typeof n=="number"||se.test(n);function HR(n,t,e,s,r,l){r?(n.opacity=$e(0,e.opacity??1,kR(s)),n.opacityExit=$e(t.opacity??1,0,GR(s))):l&&(n.opacity=$e(t.opacity??1,e.opacity??1,s));for(let u=0;u<jR;u++){const h=`border${Lb[u]}Radius`;let f=y_(t,h),d=y_(e,h);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||x_(f)===x_(d)?(n[h]=Math.max($e(v_(f),v_(d),s),0),(qi.test(d)||qi.test(f))&&(n[h]+="%")):n[h]=d}(t.rotate||e.rotate)&&(n.rotate=$e(t.rotate||0,e.rotate||0,s))}function y_(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const kR=Pb(0,.5,bM),GR=Pb(.5,.95,Ti);function Pb(n,t,e){return s=>s<n?0:s>t?1:e(kl(n,t,s))}function __(n,t){n.min=t.min,n.max=t.max}function Mi(n,t){__(n.x,t.x),__(n.y,t.y)}function S_(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function M_(n,t,e,s,r){return n-=t,n=dh(n,1/e,s),r!==void 0&&(n=dh(n,1/r,s)),n}function WR(n,t=0,e=1,s=.5,r,l=n,u=n){if(qi.test(t)&&(t=parseFloat(t),t=$e(u.min,u.max,t/100)-u.min),typeof t!="number")return;let h=$e(l.min,l.max,s);n===l&&(h-=t),n.min=M_(n.min,t,e,h,r),n.max=M_(n.max,t,e,h,r)}function b_(n,t,[e,s,r],l,u){WR(n,t[e],t[s],t[r],t.scale,l,u)}const XR=["x","scaleX","originX"],qR=["y","scaleY","originY"];function E_(n,t,e,s){b_(n.x,t,XR,e?e.x:void 0,s?s.x:void 0),b_(n.y,t,qR,e?e.y:void 0,s?s.y:void 0)}function T_(n){return n.translate===0&&n.scale===1}function Ub(n){return T_(n.x)&&T_(n.y)}function A_(n,t){return n.min===t.min&&n.max===t.max}function YR(n,t){return A_(n.x,t.x)&&A_(n.y,t.y)}function w_(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function Nb(n,t){return w_(n.x,t.x)&&w_(n.y,t.y)}function R_(n){return qn(n.x)/qn(n.y)}function C_(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class KR{constructor(){this.members=[]}add(t){Km(this.members,t),t.scheduleRender()}remove(t){if(Zm(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(r=>t===r);if(e===0)return!1;let s;for(let r=e;r>=0;r--){const l=this.members[r];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(t,e){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,e&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:s}=t;e.onExitComplete&&e.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ZR(n,t,e){let s="";const r=n.x.translate/t.x,l=n.y.translate/t.y,u=e?.z||0;if((r||l||u)&&(s=`translate3d(${r}px, ${l}px, ${u}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:d,rotate:g,rotateX:x,rotateY:y,skewX:_,skewY:b}=e;d&&(s=`perspective(${d}px) ${s}`),g&&(s+=`rotate(${g}deg) `),x&&(s+=`rotateX(${x}deg) `),y&&(s+=`rotateY(${y}deg) `),_&&(s+=`skewX(${_}deg) `),b&&(s+=`skewY(${b}deg) `)}const h=n.x.scale*t.x,f=n.y.scale*t.y;return(h!==1||f!==1)&&(s+=`scale(${h}, ${f})`),s||"none"}const Gd=["","X","Y","Z"],QR=1e3;let JR=0;function Wd(n,t,e,s){const{latestValues:r}=t;r[n]&&(e[n]=r[n],t.setStaticValue(n,0),s&&(s[n]=0))}function Ob(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=vb(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:r,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",Ye,!(r||l))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&Ob(s)}function Ib({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(u={},h=t?.()){this.id=JR++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eC),this.nodes.forEach(aC),this.nodes.forEach(rC),this.nodes.forEach(nC)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new BR)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new $m),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=nb(u)&&!Yw(u),this.instance=u;const{layoutId:h,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),n){let g,x=0;const y=()=>this.root.updateBlockedByResize=!1;Ye.read(()=>{x=window.innerWidth}),n(u,()=>{const _=window.innerWidth;_!==x&&(x=_,this.root.updateBlockedByResize=!0,g&&g(),g=VR(y,250),nh.hasAnimatedSinceResize&&(nh.hasAnimatedSinceResize=!1,this.nodes.forEach(P_)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&d&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:x,hasRelativeLayoutChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||d.getDefaultTransition()||hC,{onLayoutAnimationStart:E,onLayoutAnimationComplete:M}=d.getProps(),S=!this.targetLayout||!Nb(this.targetLayout,_),L=!x&&y;if(this.options.layoutRoot||this.resumeFrom||L||x&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...fg(b,"layout"),onPlay:E,onComplete:M};(d.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(g,L)}else x||P_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ws(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oC),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ob(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const x=this.path[g];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(D_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(L_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(sC),this.nodes.forEach($R),this.nodes.forEach(tC)):this.nodes.forEach(L_),this.clearAllSnapshots();const h=ei.now();In.delta=Ts(0,1e3/60,h-In.timestamp),In.timestamp=h,In.isProcessing=!0,Od.update.process(In),Od.preRender.process(In),Od.render.process(In),In.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(iC),this.sharedNodes.forEach(lC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qn(this.snapshot.measuredBox.x)&&!qn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const f=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!r)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!Ub(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,g=d!==this.prevTransformTemplateValue;u&&this.instance&&(h||Wa(this.latestValues)||g)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),fC(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return cn();const h=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(dC))){const{scroll:d}=this.root;d&&(oo(h.x,d.offset.x),oo(h.y,d.offset.y))}return h}removeElementScroll(u){const h=cn();if(Mi(h,u),this.scroll?.wasRoot)return h;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:g,options:x}=d;d!==this.root&&g&&x.layoutScroll&&(g.wasRoot&&Mi(h,u),oo(h.x,g.offset.x),oo(h.y,g.offset.y))}return h}applyTransform(u,h=!1){const f=cn();Mi(f,u);for(let d=0;d<this.path.length;d++){const g=this.path[d];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&lo(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Wa(g.latestValues)&&lo(f,g.latestValues)}return Wa(this.latestValues)&&lo(f,this.latestValues),f}removeTransform(u){const h=cn();Mi(h,u);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!Wa(d.latestValues))continue;Yp(d.latestValues)&&d.updateSnapshot();const g=cn(),x=d.measurePageBox();Mi(g,x),E_(h,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,g)}return Wa(this.latestValues)&&E_(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==In.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:x}=this.options;if(!(!this.layout||!(g||x))){if(this.resolvedRelativeTargetAt=In.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),zl(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=cn(),this.targetWithTransforms=cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mi(this.target,this.layout.layoutBox),Tb(this.target,this.targetDelta)):Mi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),zl(this.relativeTargetOrigin,this.target,y.target),Mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Yp(this.parent.latestValues)||Eb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===In.timestamp&&(f=!1),f)return;const{layout:d,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||g))return;Mi(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,y=this.treeScale.y;xR(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=cn());const{target:_}=u;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(S_(this.prevProjectionDelta.x,this.projectionDelta.x),S_(this.prevProjectionDelta.y,this.projectionDelta.y)),Fl(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==y||!C_(this.projectionDelta.x,this.prevProjectionDelta.x)||!C_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ro(),this.projectionDelta=ro(),this.projectionDeltaWithTransform=ro()}setAnimationOrigin(u,h=!1){const f=this.snapshot,d=f?f.latestValues:{},g={...this.latestValues},x=ro();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const y=cn(),_=f?f.source:void 0,b=this.layout?this.layout.source:void 0,E=_!==b,M=this.getStack(),S=!M||M.members.length<=1,L=!!(E&&!S&&this.options.crossfade===!0&&!this.path.some(uC));this.animationProgress=0;let w;this.mixTargetDelta=A=>{const N=A/1e3;U_(x.x,u.x,N),U_(x.y,u.y,N),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zl(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cC(this.relativeTarget,this.relativeTargetOrigin,y,N),w&&YR(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=cn()),Mi(w,this.relativeTarget)),E&&(this.animationValues=g,HR(g,d,this.latestValues,N,L,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ws(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ye.update(()=>{nh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ir(0)),this.currentAnimation=FR(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:d,latestValues:g}=u;if(!(!h||!f||!d)){if(this!==u&&this.layout&&d&&Fb(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||cn();const x=qn(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+x;const y=qn(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+y}Mi(h,f),lo(h,g),Fl(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new KR),this.sharedNodes.get(u).add(h);const d=h.options.initialPromotionConfig;h.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const d={};f.z&&Wd("z",u,d,this.animationValues);for(let g=0;g<Gd.length;g++)Wd(`rotate${Gd[g]}`,u,d,this.animationValues),Wd(`skew${Gd[g]}`,u,d,this.animationValues);u.render();for(const g in d)u.setStaticValue(g,d[g]),this.animationValues&&(this.animationValues[g]=d[g]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=eh(h?.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=eh(h?.pointerEvents)||""),this.hasProjected&&!Wa(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const g=d.animationValues||d.latestValues;this.applyTransformsToTarget();let x=ZR(this.projectionDeltaWithTransform,this.treeScale,g);f&&(x=f(g,x)),u.transform=x;const{x:y,y:_}=this.projectionDelta;u.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,d.animationValues?u.opacity=d===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=d===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const b in ql){if(g[b]===void 0)continue;const{correct:E,applyTo:M,isCSSVariable:S}=ql[b],L=x==="none"?g[b]:E(g[b],d);if(M){const w=M.length;for(let A=0;A<w;A++)u[M[A]]=L}else S?this.options.visualElement.renderState.vars[b]=L:u[b]=L}this.options.layoutId&&(u.pointerEvents=d===this?eh(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(D_),this.root.sharedNodes.clear()}}}function $R(n){n.updateLayout()}function tC(n){const t=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:s}=n.layout,{animationType:r}=n.options,l=t.source!==n.layout.source;r==="size"?Ei(g=>{const x=l?t.measuredBox[g]:t.layoutBox[g],y=qn(x);x.min=e[g].min,x.max=x.min+y}):Fb(r,t.layoutBox,e)&&Ei(g=>{const x=l?t.measuredBox[g]:t.layoutBox[g],y=qn(e[g]);x.max=x.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+y)});const u=ro();Fl(u,e,t.layoutBox);const h=ro();l?Fl(h,n.applyTransform(s,!0),t.measuredBox):Fl(h,e,t.layoutBox);const f=!Ub(u);let d=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:x,layout:y}=g;if(x&&y){const _=cn();zl(_,t.layoutBox,x.layoutBox);const b=cn();zl(b,e,y.layoutBox),Nb(_,b)||(d=!0),g.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=_,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:e}=n.options;e&&e()}n.options.transition=void 0}function eC(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function nC(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function iC(n){n.clearSnapshot()}function D_(n){n.clearMeasurements()}function L_(n){n.isLayoutDirty=!1}function sC(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function P_(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function aC(n){n.resolveTargetDelta()}function rC(n){n.calcProjection()}function oC(n){n.resetSkewAndRotation()}function lC(n){n.removeLeadSnapshot()}function U_(n,t,e){n.translate=$e(t.translate,0,e),n.scale=$e(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function N_(n,t,e,s){n.min=$e(t.min,e.min,s),n.max=$e(t.max,e.max,s)}function cC(n,t,e,s){N_(n.x,t.x,e.x,s),N_(n.y,t.y,e.y,s)}function uC(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const hC={duration:.45,ease:[.4,0,.1,1]},O_=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),I_=O_("applewebkit/")&&!O_("chrome/")?Math.round:Ti;function F_(n){n.min=I_(n.min),n.max=I_(n.max)}function fC(n){F_(n.x),F_(n.y)}function Fb(n,t,e){return n==="position"||n==="preserve-aspect"&&!gR(R_(t),R_(e),.2)}function dC(n){return n!==n.root&&n.scroll?.wasRoot}const pC=Ib({attachResizeListener:(n,t)=>Kl(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xd={current:void 0},zb=Ib({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Xd.current){const n=new pC({});n.mount(window),n.setOptions({layoutScroll:!0}),Xd.current=n}return Xd.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),mC={pan:{Feature:UR},drag:{Feature:PR,ProjectionNode:zb,MeasureLayout:Db}};function z_(n,t,e){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",e==="Start");const r="onHover"+e,l=s[r];l&&Ye.postRender(()=>l(t,rc(t)))}class gC extends va{mount(){const{current:t}=this.node;t&&(this.unmount=kw(t,(e,s)=>(z_(this.node,s,"Start"),r=>z_(this.node,r,"End"))))}unmount(){}}class vC extends va{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nc(Kl(this.node.current,"focus",()=>this.onFocus()),Kl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function B_(n,t,e){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",e==="Start");const r="onTap"+(e==="End"?"":e),l=s[r];l&&Ye.postRender(()=>l(t,rc(t)))}class xC extends va{mount(){const{current:t}=this.node;t&&(this.unmount=qw(t,(e,s)=>(B_(this.node,s,"Start"),(r,{success:l})=>B_(this.node,r,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Qp=new WeakMap,qd=new WeakMap,yC=n=>{const t=Qp.get(n.target);t&&t(n)},_C=n=>{n.forEach(yC)};function SC({root:n,...t}){const e=n||document;qd.has(e)||qd.set(e,{});const s=qd.get(e),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(_C,{root:n,...t})),s[r]}function MC(n,t,e){const s=SC(t);return Qp.set(n,e),s.observe(n),()=>{Qp.delete(n),s.unobserve(n)}}const bC={some:0,all:1};class EC extends va{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:s,amount:r="some",once:l}=t,u={root:e?e.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:bC[r]},h=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,l&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:g,onViewportLeave:x}=this.node.getProps(),y=d?g:x;y&&y(f)};return MC(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(TC(t,e))&&this.startObserver()}unmount(){}}function TC({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const AC={inView:{Feature:EC},tap:{Feature:xC},focus:{Feature:vC},hover:{Feature:gC}},wC={layout:{ProjectionNode:zb,MeasureLayout:Db}},Jp={current:null},Bb={current:!1};function RC(){if(Bb.current=!0,!!qm)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>Jp.current=n.matches;n.addEventListener("change",t),t()}else Jp.current=!1}const CC=new WeakMap;function DC(n,t,e){for(const s in t){const r=t[s],l=e[s];if(Dn(r))n.addValue(s,r);else if(Dn(l))n.addValue(s,ir(r,{owner:n}));else if(l!==r)if(n.hasValue(s)){const u=n.getValue(s);u.liveStyle===!0?u.jump(r):u.hasAnimated||u.set(r)}else{const u=n.getStaticValue(s);n.addValue(s,ir(u!==void 0?u:r,{owner:n}))}}for(const s in e)t[s]===void 0&&n.removeValue(s);return t}const V_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class LC{scrapeMotionValuesFromProps(t,e,s){return{}}constructor({parent:t,props:e,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:l,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ug,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=ei.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Ye.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=e.initial?{...f}:{},this.renderState=d,this.parent=t,this.props=e,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=bh(e),this.isVariantNode=rb(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...x}=this.scrapeMotionValuesFromProps(e,{},this);for(const y in x){const _=x[y];f[y]!==void 0&&Dn(_)&&_.set(f[y],!1)}}mount(t){this.current=t,CC.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,s)=>this.bindToMotionValue(s,e)),Bb.current||RC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Jp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ws(this.notifyUpdate),ws(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=bo.has(t);s&&this.onBindTransform&&this.onBindTransform();const r=e.on("change",h=>{this.latestValues[t]=h,this.props.onUpdate&&Ye.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),l=e.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{r(),l(),u&&u(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in mo){const e=mo[t];if(!e)continue;const{isEnabled:s,Feature:r}=e;if(!this.features[t]&&r&&s(this.props)&&(this.features[t]=new r(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):cn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let s=0;s<V_.length;s++){const r=V_[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const l="on"+r,u=t[l];u&&(this.propEventSubscriptions[r]=this.on(r,u))}this.prevMotionValues=DC(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const s=this.values.get(t);e!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&e!==void 0&&(s=ir(e===null?void 0:e,{owner:this}),this.addValue(t,s)),s}readValue(t,e){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(dM(s)||mM(s))?s=parseFloat(s):!Jw(s)&&pa.test(e)&&(s=QM(t,e)),this.setBaseTarget(t,Dn(s)?s.get():s)),Dn(s)?s.get():s}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let s;if(typeof e=="string"||typeof e=="object"){const l=Mg(this.props,e,this.presenceContext?.custom);l&&(s=l[t])}if(e&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!Dn(r)?r:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new $m),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class Vb extends LC{constructor(){super(...arguments),this.KeyframeResolver=zw}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:s}){delete e[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Dn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function jb(n,{style:t,vars:e},s,r){const l=n.style;let u;for(u in t)l[u]=t[u];r?.applyProjectionStyles(l,s);for(u in e)l.setProperty(u,e[u])}function PC(n){return window.getComputedStyle(n)}class UC extends Vb{constructor(){super(...arguments),this.type="html",this.renderInstance=jb}readValueFromInstance(t,e){if(bo.has(e))return this.projection?.isProjecting?Bp(e):iw(t,e);{const s=PC(t),r=(ng(e)?s.getPropertyValue(e):s[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return Ab(t,e)}build(t,e,s){yg(t,e,s.transformTemplate)}scrapeMotionValuesFromProps(t,e,s){return bg(t,e,s)}}const Hb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function NC(n,t,e,s){jb(n,t,void 0,s);for(const r in t.attrs)n.setAttribute(Hb.has(r)?r:xg(r),t.attrs[r])}class OC extends Vb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=cn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(bo.has(e)){const s=ZM(e);return s&&s.default||0}return e=Hb.has(e)?e:xg(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,s){return gb(t,e,s)}build(t,e,s){fb(t,e,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,e,s,r){NC(t,e,s,r)}mount(t){this.isSVGTag=pb(t.tagName),super.mount(t)}}const IC=(n,t)=>Sg(n)?new OC(t):new UC(t,{allowProjection:n!==xt.Fragment}),FC=I2({...lR,...AC,...mC,...wC},IC),ua=o2(FC);function co(n){const t=ec(()=>ir(n)),{isStatic:e}=xt.useContext(ac);if(e){const[,s]=xt.useState(n);xt.useEffect(()=>t.on("change",s),[])}return t}function kb(n,t){const e=co(t()),s=()=>e.set(t());return s(),Ym(()=>{const r=()=>Ye.preRender(s,!1,!0),l=n.map(u=>u.on("change",r));return()=>{l.forEach(u=>u()),ws(s)}}),e}function zC(n){Ol.current=[],n();const t=kb(Ol.current,n);return Ol.current=void 0,t}function BC(n,t,e,s){if(typeof n=="function")return zC(n);const r=Kw(t,e,s);return Array.isArray(n)?j_(n,r):j_([n],([l])=>r(l))}function j_(n,t){const e=ec(()=>[]);return kb(n,()=>{e.length=0;const s=n.length;for(let r=0;r<s;r++)e[r]=n[r].get();return t(e)})}function bl(n,t={}){const{isStatic:e}=xt.useContext(ac),s=()=>Dn(n)?n.get():n;if(e)return BC(s);const r=co(s());return xt.useInsertionEffect(()=>Zw(r,n,t),[r,JSON.stringify(t)]),r}function Bl(n){let t=n[0],e=n[1],s=n[2];return Math.sqrt(t*t+e*e+s*s)}function $p(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function VC(n,t,e,s){return n[0]=t,n[1]=e,n[2]=s,n}function H_(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function k_(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function jC(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n}function HC(n,t,e){return n[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n}function Yd(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n}function kC(n,t){let e=t[0]-n[0],s=t[1]-n[1],r=t[2]-n[2];return Math.sqrt(e*e+s*s+r*r)}function GC(n,t){let e=t[0]-n[0],s=t[1]-n[1],r=t[2]-n[2];return e*e+s*s+r*r}function G_(n){let t=n[0],e=n[1],s=n[2];return t*t+e*e+s*s}function WC(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n}function XC(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n}function tm(n,t){let e=t[0],s=t[1],r=t[2],l=e*e+s*s+r*r;return l>0&&(l=1/Math.sqrt(l)),n[0]=t[0]*l,n[1]=t[1]*l,n[2]=t[2]*l,n}function Gb(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function W_(n,t,e){let s=t[0],r=t[1],l=t[2],u=e[0],h=e[1],f=e[2];return n[0]=r*f-l*h,n[1]=l*u-s*f,n[2]=s*h-r*u,n}function qC(n,t,e,s){let r=t[0],l=t[1],u=t[2];return n[0]=r+s*(e[0]-r),n[1]=l+s*(e[1]-l),n[2]=u+s*(e[2]-u),n}function YC(n,t,e,s,r){const l=Math.exp(-s*r);let u=t[0],h=t[1],f=t[2];return n[0]=e[0]+(u-e[0])*l,n[1]=e[1]+(h-e[1])*l,n[2]=e[2]+(f-e[2])*l,n}function KC(n,t,e){let s=t[0],r=t[1],l=t[2],u=e[3]*s+e[7]*r+e[11]*l+e[15];return u=u||1,n[0]=(e[0]*s+e[4]*r+e[8]*l+e[12])/u,n[1]=(e[1]*s+e[5]*r+e[9]*l+e[13])/u,n[2]=(e[2]*s+e[6]*r+e[10]*l+e[14])/u,n}function ZC(n,t,e){let s=t[0],r=t[1],l=t[2],u=e[3]*s+e[7]*r+e[11]*l+e[15];return u=u||1,n[0]=(e[0]*s+e[4]*r+e[8]*l)/u,n[1]=(e[1]*s+e[5]*r+e[9]*l)/u,n[2]=(e[2]*s+e[6]*r+e[10]*l)/u,n}function QC(n,t,e){let s=t[0],r=t[1],l=t[2];return n[0]=s*e[0]+r*e[3]+l*e[6],n[1]=s*e[1]+r*e[4]+l*e[7],n[2]=s*e[2]+r*e[5]+l*e[8],n}function JC(n,t,e){let s=t[0],r=t[1],l=t[2],u=e[0],h=e[1],f=e[2],d=e[3],g=h*l-f*r,x=f*s-u*l,y=u*r-h*s,_=h*y-f*x,b=f*g-u*y,E=u*x-h*g,M=d*2;return g*=M,x*=M,y*=M,_*=2,b*=2,E*=2,n[0]=s+g+_,n[1]=r+x+b,n[2]=l+y+E,n}const $C=function(){const n=[0,0,0],t=[0,0,0];return function(e,s){$p(n,e),$p(t,s),tm(n,n),tm(t,t);let r=Gb(n,t);return r>1?0:r<-1?Math.PI:Math.acos(r)}}();function t3(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}class Ze extends Array{constructor(t=0,e=t,s=t){return super(t,e,s),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,e=t,s=t){return t.length?this.copy(t):(VC(this,t,e,s),this)}copy(t){return $p(this,t),this}add(t,e){return e?H_(this,t,e):H_(this,this,t),this}sub(t,e){return e?k_(this,t,e):k_(this,this,t),this}multiply(t){return t.length?jC(this,this,t):Yd(this,this,t),this}divide(t){return t.length?HC(this,this,t):Yd(this,this,1/t),this}inverse(t=this){return XC(this,t),this}len(){return Bl(this)}distance(t){return t?kC(this,t):Bl(this)}squaredLen(){return G_(this)}squaredDistance(t){return t?GC(this,t):G_(this)}negate(t=this){return WC(this,t),this}cross(t,e){return e?W_(this,t,e):W_(this,this,t),this}scale(t){return Yd(this,this,t),this}normalize(){return tm(this,this),this}dot(t){return Gb(this,t)}equals(t){return t3(this,t)}applyMatrix3(t){return QC(this,this,t),this}applyMatrix4(t){return KC(this,this,t),this}scaleRotateMatrix4(t){return ZC(this,this,t),this}applyQuaternion(t){return JC(this,this,t),this}angle(t){return $C(this,t)}lerp(t,e){return qC(this,this,t,e),this}smoothLerp(t,e,s){return YC(this,this,t,e,s),this}clone(){return new Ze(this[0],this[1],this[2])}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}transformDirection(t){const e=this[0],s=this[1],r=this[2];return this[0]=t[0]*e+t[4]*s+t[8]*r,this[1]=t[1]*e+t[5]*s+t[9]*r,this[2]=t[2]*e+t[6]*s+t[10]*r,this.normalize()}}const X_=new Ze;let e3=1,n3=1,q_=!1;class Wb{constructor(t,e={}){t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=e,this.id=e3++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let s in e)this.addAttribute(s,e[s])}addAttribute(t,e){if(this.attributes[t]=e,e.id=n3++,e.size=e.size||1,e.type=e.type||(e.data.constructor===Float32Array?this.gl.FLOAT:e.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),e.target=t==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,e.normalized=e.normalized||!1,e.stride=e.stride||0,e.offset=e.offset||0,e.count=e.count||(e.stride?e.data.byteLength/e.stride:e.data.length/e.size),e.divisor=e.instanced||0,e.needsUpdate=!1,e.usage=e.usage||this.gl.STATIC_DRAW,e.buffer||this.updateAttribute(e),e.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==e.count*e.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,e.count*e.divisor);this.instancedCount=e.count*e.divisor}else t==="index"?this.drawRange.count=e.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,e.count))}updateAttribute(t){const e=!t.buffer;e&&(t.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),e?this.gl.bufferData(t.target,t.data,t.usage):this.gl.bufferSubData(t.target,0,t.data),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach((e,{name:s,type:r})=>{if(!this.attributes[s]){console.warn(`active attribute ${s} not being supplied`);return}const l=this.attributes[s];this.gl.bindBuffer(l.target,l.buffer),this.glState.boundBuffer=l.buffer;let u=1;r===35674&&(u=2),r===35675&&(u=3),r===35676&&(u=4);const h=l.size/u,f=u===1?0:u*u*4,d=u===1?0:u*4;for(let g=0;g<u;g++)this.gl.vertexAttribPointer(e+g,h,l.type,l.normalized,l.stride+f,l.offset+g*d),this.gl.enableVertexAttribArray(e+g),this.gl.renderer.vertexAttribDivisor(e+g,l.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:e=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach((r,{name:l})=>{const u=this.attributes[l];u.needsUpdate&&this.updateAttribute(u)});let s=2;this.attributes.index?.type===this.gl.UNSIGNED_INT&&(s=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*s,this.instancedCount):this.gl.renderer.drawArraysInstanced(e,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*s):this.gl.drawArrays(e,this.drawRange.start,this.drawRange.count)}getPosition(){const t=this.attributes.position;if(t.data)return t;if(!q_)return console.warn("No position buffer data found to compute bounds"),q_=!0}computeBoundingBox(t){t||(t=this.getPosition());const e=t.data,s=t.size;this.bounds||(this.bounds={min:new Ze,max:new Ze,center:new Ze,scale:new Ze,radius:1/0});const r=this.bounds.min,l=this.bounds.max,u=this.bounds.center,h=this.bounds.scale;r.set(1/0),l.set(-1/0);for(let f=0,d=e.length;f<d;f+=s){const g=e[f],x=e[f+1],y=e[f+2];r.x=Math.min(g,r.x),r.y=Math.min(x,r.y),r.z=Math.min(y,r.z),l.x=Math.max(g,l.x),l.y=Math.max(x,l.y),l.z=Math.max(y,l.z)}h.sub(l,r),u.add(r,l).divide(2)}computeBoundingSphere(t){t||(t=this.getPosition());const e=t.data,s=t.size;this.bounds||this.computeBoundingBox(t);let r=0;for(let l=0,u=e.length;l<u;l+=s)X_.fromArray(e,l),r=Math.max(r,this.bounds.center.squaredDistance(X_));this.bounds.radius=Math.sqrt(r)}remove(){for(let t in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[t]),delete this.VAOs[t];for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}let i3=1;const Y_={};class Xb{constructor(t,{vertex:e,fragment:s,uniforms:r={},transparent:l=!1,cullFace:u=t.BACK,frontFace:h=t.CCW,depthTest:f=!0,depthWrite:d=!0,depthFunc:g=t.LEQUAL}={}){t.canvas||console.error("gl not passed as first argument to Program"),this.gl=t,this.uniforms=r,this.id=i3++,e||console.warn("vertex shader not supplied"),s||console.warn("fragment shader not supplied"),this.transparent=l,this.cullFace=u,this.frontFace=h,this.depthTest=f,this.depthWrite=d,this.depthFunc=g,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=t.createShader(t.VERTEX_SHADER),this.fragmentShader=t.createShader(t.FRAGMENT_SHADER),this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:e,fragment:s})}setShaders({vertex:t,fragment:e}){if(t&&(this.gl.shaderSource(this.vertexShader,t),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${K_(t)}`)),e&&(this.gl.shaderSource(this.fragmentShader,e),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${K_(e)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let u=0;u<s;u++){let h=this.gl.getActiveUniform(this.program,u);this.uniformLocations.set(h,this.gl.getUniformLocation(this.program,h.name));const f=h.name.match(/(\w+)/g);h.uniformName=f[0],h.nameComponents=f.slice(1)}this.attributeLocations=new Map;const r=[],l=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let u=0;u<l;u++){const h=this.gl.getActiveAttrib(this.program,u),f=this.gl.getAttribLocation(this.program,h.name);f!==-1&&(r[f]=h.name,this.attributeLocations.set(h,f))}this.attributeOrder=r.join("")}setBlendFunc(t,e,s,r){this.blendFunc.src=t,this.blendFunc.dst=e,this.blendFunc.srcAlpha=s,this.blendFunc.dstAlpha=r,t&&(this.transparent=!0)}setBlendEquation(t,e){this.blendEquation.modeRGB=t,this.blendEquation.modeAlpha=e}setStencilFunc(t,e,s){this.stencilRef=e,this.stencilFunc.func=t,this.stencilFunc.ref=e,this.stencilFunc.mask=s}setStencilOp(t,e,s){this.stencilOp.stencilFail=t,this.stencilOp.depthFail=e,this.stencilOp.depthPass=s}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:t=!1}={}){let e=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((r,l)=>{let u=this.uniforms[l.uniformName];for(const h of l.nameComponents){if(!u)break;if(h in u)u=u[h];else{if(Array.isArray(u.value))break;u=void 0;break}}if(!u)return Z_(`Active uniform ${l.name} has not been supplied`);if(u&&u.value===void 0)return Z_(`${l.name} uniform is missing a value parameter`);if(u.value.texture)return e=e+1,u.value.update(e),Kd(this.gl,l.type,r,e);if(u.value.length&&u.value[0].texture){const h=[];return u.value.forEach(f=>{e=e+1,f.update(e),h.push(e)}),Kd(this.gl,l.type,r,h)}Kd(this.gl,l.type,r,u.value)}),this.applyState(),t&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Kd(n,t,e,s){s=s.length?s3(s):s;const r=n.renderer.state.uniformLocations.get(e);if(s.length)if(r===void 0||r.length!==s.length)n.renderer.state.uniformLocations.set(e,s.slice(0));else{if(a3(r,s))return;r.set?r.set(s):r3(r,s),n.renderer.state.uniformLocations.set(e,r)}else{if(r===s)return;n.renderer.state.uniformLocations.set(e,s)}switch(t){case 5126:return s.length?n.uniform1fv(e,s):n.uniform1f(e,s);case 35664:return n.uniform2fv(e,s);case 35665:return n.uniform3fv(e,s);case 35666:return n.uniform4fv(e,s);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return s.length?n.uniform1iv(e,s):n.uniform1i(e,s);case 35671:case 35667:return n.uniform2iv(e,s);case 35672:case 35668:return n.uniform3iv(e,s);case 35673:case 35669:return n.uniform4iv(e,s);case 35674:return n.uniformMatrix2fv(e,!1,s);case 35675:return n.uniformMatrix3fv(e,!1,s);case 35676:return n.uniformMatrix4fv(e,!1,s)}}function K_(n){let t=n.split(`
`);for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join(`
`)}function s3(n){const t=n.length,e=n[0].length;if(e===void 0)return n;const s=t*e;let r=Y_[s];r||(Y_[s]=r=new Float32Array(s));for(let l=0;l<t;l++)r.set(n[l],l*e);return r}function a3(n,t){if(n.length!==t.length)return!1;for(let e=0,s=n.length;e<s;e++)if(n[e]!==t[e])return!1;return!0}function r3(n,t){for(let e=0,s=n.length;e<s;e++)n[e]=t[e]}let Zd=0;function Z_(n){Zd>100||(console.warn(n),Zd++,Zd>100&&console.warn("More than 100 program warnings - stopping logs."))}const Qd=new Ze;let o3=1;class qb{constructor({canvas:t=document.createElement("canvas"),width:e=300,height:s=150,dpr:r=1,alpha:l=!1,depth:u=!0,stencil:h=!1,antialias:f=!1,premultipliedAlpha:d=!1,preserveDrawingBuffer:g=!1,powerPreference:x="default",autoClear:y=!0,webgl:_=2}={}){const b={alpha:l,depth:u,stencil:h,antialias:f,premultipliedAlpha:d,preserveDrawingBuffer:g,powerPreference:x};this.dpr=r,this.alpha=l,this.color=!0,this.depth=u,this.stencil=h,this.premultipliedAlpha=d,this.autoClear=y,this.id=o3++,_===2&&(this.gl=t.getContext("webgl2",b)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",b)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(e,s),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(t,e){this.width=t,this.height=e,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=e*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:t+"px",height:e+"px"})}setViewport(t,e,s=0,r=0){this.state.viewport.width===t&&this.state.viewport.height===e||(this.state.viewport.width=t,this.state.viewport.height=e,this.state.viewport.x=s,this.state.viewport.y=r,this.gl.viewport(s,r,t,e))}setScissor(t,e,s=0,r=0){this.gl.scissor(s,r,t,e)}enable(t){this.state[t]!==!0&&(this.gl.enable(t),this.state[t]=!0)}disable(t){this.state[t]!==!1&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,e,s,r){this.state.blendFunc.src===t&&this.state.blendFunc.dst===e&&this.state.blendFunc.srcAlpha===s&&this.state.blendFunc.dstAlpha===r||(this.state.blendFunc.src=t,this.state.blendFunc.dst=e,this.state.blendFunc.srcAlpha=s,this.state.blendFunc.dstAlpha=r,s!==void 0?this.gl.blendFuncSeparate(t,e,s,r):this.gl.blendFunc(t,e))}setBlendEquation(t,e){t=t||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===e)&&(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=e,e!==void 0?this.gl.blendEquationSeparate(t,e):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}setStencilMask(t){this.state.stencilMask!==t&&(this.state.stencilMask=t,this.gl.stencilMask(t))}setStencilFunc(t,e,s){this.state.stencilFunc===t&&this.state.stencilRef===e&&this.state.stencilFuncMask===s||(this.state.stencilFunc=t||this.gl.ALWAYS,this.state.stencilRef=e||0,this.state.stencilFuncMask=s||0,this.gl.stencilFunc(t||this.gl.ALWAYS,e||0,s||0))}setStencilOp(t,e,s){this.state.stencilFail===t&&this.state.stencilDepthFail===e&&this.state.stencilDepthPass===s||(this.state.stencilFail=t,this.state.stencilDepthFail=e,this.state.stencilDepthPass=s,this.gl.stencilOp(t,e,s))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:e=null}={}){this.state.framebuffer!==e&&(this.state.framebuffer=e,this.gl.bindFramebuffer(t,e))}getExtension(t,e,s){return e&&this.gl[e]?this.gl[e].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),e?this.extensions[t]?this.extensions[t][s].bind(this.extensions[t]):null:this.extensions[t])}sortOpaque(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:t.zDepth!==e.zDepth?t.zDepth-e.zDepth:e.id-t.id}sortTransparent(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.zDepth!==e.zDepth?e.zDepth-t.zDepth:e.id-t.id}sortUI(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:e.id-t.id}getRenderList({scene:t,camera:e,frustumCull:s,sort:r}){let l=[];if(e&&s&&e.updateFrustum(),t.traverse(u=>{if(!u.visible)return!0;u.draw&&(s&&u.frustumCulled&&e&&!e.frustumIntersectsMesh(u)||l.push(u))}),r){const u=[],h=[],f=[];l.forEach(d=>{d.program.transparent?d.program.depthTest?h.push(d):f.push(d):u.push(d),d.zDepth=0,!(d.renderOrder!==0||!d.program.depthTest||!e)&&(d.worldMatrix.getTranslation(Qd),Qd.applyMatrix4(e.projectionViewMatrix),d.zDepth=Qd.z)}),u.sort(this.sortOpaque),h.sort(this.sortTransparent),f.sort(this.sortUI),l=u.concat(h,f)}return l}render({scene:t,camera:e,target:s=null,update:r=!0,sort:l=!0,frustumCull:u=!0,clear:h}){s===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(s),this.setViewport(s.width,s.height)),(h||this.autoClear&&h!==!1)&&(this.depth&&(!s||s.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!s||s.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),r&&t.updateMatrixWorld(),e&&e.updateMatrixWorld(),this.getRenderList({scene:t,camera:e,frustumCull:u,sort:l}).forEach(d=>{d.draw({camera:e})})}}function l3(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function c3(n,t,e,s,r){return n[0]=t,n[1]=e,n[2]=s,n[3]=r,n}function u3(n,t){let e=t[0],s=t[1],r=t[2],l=t[3],u=e*e+s*s+r*r+l*l;return u>0&&(u=1/Math.sqrt(u)),n[0]=e*u,n[1]=s*u,n[2]=r*u,n[3]=l*u,n}function h3(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function f3(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function d3(n,t,e){e=e*.5;let s=Math.sin(e);return n[0]=s*t[0],n[1]=s*t[1],n[2]=s*t[2],n[3]=Math.cos(e),n}function Q_(n,t,e){let s=t[0],r=t[1],l=t[2],u=t[3],h=e[0],f=e[1],d=e[2],g=e[3];return n[0]=s*g+u*h+r*d-l*f,n[1]=r*g+u*f+l*h-s*d,n[2]=l*g+u*d+s*f-r*h,n[3]=u*g-s*h-r*f-l*d,n}function p3(n,t,e){e*=.5;let s=t[0],r=t[1],l=t[2],u=t[3],h=Math.sin(e),f=Math.cos(e);return n[0]=s*f+u*h,n[1]=r*f+l*h,n[2]=l*f-r*h,n[3]=u*f-s*h,n}function m3(n,t,e){e*=.5;let s=t[0],r=t[1],l=t[2],u=t[3],h=Math.sin(e),f=Math.cos(e);return n[0]=s*f-l*h,n[1]=r*f+u*h,n[2]=l*f+s*h,n[3]=u*f-r*h,n}function g3(n,t,e){e*=.5;let s=t[0],r=t[1],l=t[2],u=t[3],h=Math.sin(e),f=Math.cos(e);return n[0]=s*f+r*h,n[1]=r*f-s*h,n[2]=l*f+u*h,n[3]=u*f-l*h,n}function v3(n,t,e,s){let r=t[0],l=t[1],u=t[2],h=t[3],f=e[0],d=e[1],g=e[2],x=e[3],y,_,b,E,M;return _=r*f+l*d+u*g+h*x,_<0&&(_=-_,f=-f,d=-d,g=-g,x=-x),1-_>1e-6?(y=Math.acos(_),b=Math.sin(y),E=Math.sin((1-s)*y)/b,M=Math.sin(s*y)/b):(E=1-s,M=s),n[0]=E*r+M*f,n[1]=E*l+M*d,n[2]=E*u+M*g,n[3]=E*h+M*x,n}function x3(n,t){let e=t[0],s=t[1],r=t[2],l=t[3],u=e*e+s*s+r*r+l*l,h=u?1/u:0;return n[0]=-e*h,n[1]=-s*h,n[2]=-r*h,n[3]=l*h,n}function y3(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n}function _3(n,t){let e=t[0]+t[4]+t[8],s;if(e>0)s=Math.sqrt(e+1),n[3]=.5*s,s=.5/s,n[0]=(t[5]-t[7])*s,n[1]=(t[6]-t[2])*s,n[2]=(t[1]-t[3])*s;else{let r=0;t[4]>t[0]&&(r=1),t[8]>t[r*3+r]&&(r=2);let l=(r+1)%3,u=(r+2)%3;s=Math.sqrt(t[r*3+r]-t[l*3+l]-t[u*3+u]+1),n[r]=.5*s,s=.5/s,n[3]=(t[l*3+u]-t[u*3+l])*s,n[l]=(t[l*3+r]+t[r*3+l])*s,n[u]=(t[u*3+r]+t[r*3+u])*s}return n}function S3(n,t,e="YXZ"){let s=Math.sin(t[0]*.5),r=Math.cos(t[0]*.5),l=Math.sin(t[1]*.5),u=Math.cos(t[1]*.5),h=Math.sin(t[2]*.5),f=Math.cos(t[2]*.5);return e==="XYZ"?(n[0]=s*u*f+r*l*h,n[1]=r*l*f-s*u*h,n[2]=r*u*h+s*l*f,n[3]=r*u*f-s*l*h):e==="YXZ"?(n[0]=s*u*f+r*l*h,n[1]=r*l*f-s*u*h,n[2]=r*u*h-s*l*f,n[3]=r*u*f+s*l*h):e==="ZXY"?(n[0]=s*u*f-r*l*h,n[1]=r*l*f+s*u*h,n[2]=r*u*h+s*l*f,n[3]=r*u*f-s*l*h):e==="ZYX"?(n[0]=s*u*f-r*l*h,n[1]=r*l*f+s*u*h,n[2]=r*u*h-s*l*f,n[3]=r*u*f+s*l*h):e==="YZX"?(n[0]=s*u*f+r*l*h,n[1]=r*l*f+s*u*h,n[2]=r*u*h-s*l*f,n[3]=r*u*f-s*l*h):e==="XZY"&&(n[0]=s*u*f-r*l*h,n[1]=r*l*f-s*u*h,n[2]=r*u*h+s*l*f,n[3]=r*u*f+s*l*h),n}const M3=l3,b3=c3,E3=h3,T3=u3;class A3 extends Array{constructor(t=0,e=0,s=0,r=1){super(t,e,s,r),this.onChange=()=>{},this._target=this;const l=["0","1","2","3"];return new Proxy(this,{set(u,h){const f=Reflect.set(...arguments);return f&&l.includes(h)&&u.onChange(),f}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set w(t){this._target[3]=t,this.onChange()}identity(){return f3(this._target),this.onChange(),this}set(t,e,s,r){return t.length?this.copy(t):(b3(this._target,t,e,s,r),this.onChange(),this)}rotateX(t){return p3(this._target,this._target,t),this.onChange(),this}rotateY(t){return m3(this._target,this._target,t),this.onChange(),this}rotateZ(t){return g3(this._target,this._target,t),this.onChange(),this}inverse(t=this._target){return x3(this._target,t),this.onChange(),this}conjugate(t=this._target){return y3(this._target,t),this.onChange(),this}copy(t){return M3(this._target,t),this.onChange(),this}normalize(t=this._target){return T3(this._target,t),this.onChange(),this}multiply(t,e){return e?Q_(this._target,t,e):Q_(this._target,this._target,t),this.onChange(),this}dot(t){return E3(this._target,t)}fromMatrix3(t){return _3(this._target,t),this.onChange(),this}fromEuler(t,e){return S3(this._target,t,t.order),e||this.onChange(),this}fromAxisAngle(t,e){return d3(this._target,t,e),this.onChange(),this}slerp(t,e){return v3(this._target,this._target,t,e),this.onChange(),this}fromArray(t,e=0){return this._target[0]=t[e],this._target[1]=t[e+1],this._target[2]=t[e+2],this._target[3]=t[e+3],this.onChange(),this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}}const w3=1e-6;function R3(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function C3(n,t,e,s,r,l,u,h,f,d,g,x,y,_,b,E,M){return n[0]=t,n[1]=e,n[2]=s,n[3]=r,n[4]=l,n[5]=u,n[6]=h,n[7]=f,n[8]=d,n[9]=g,n[10]=x,n[11]=y,n[12]=_,n[13]=b,n[14]=E,n[15]=M,n}function D3(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function L3(n,t){let e=t[0],s=t[1],r=t[2],l=t[3],u=t[4],h=t[5],f=t[6],d=t[7],g=t[8],x=t[9],y=t[10],_=t[11],b=t[12],E=t[13],M=t[14],S=t[15],L=e*h-s*u,w=e*f-r*u,A=e*d-l*u,N=s*f-r*h,O=s*d-l*h,I=r*d-l*f,z=g*E-x*b,U=g*M-y*b,C=g*S-_*b,j=x*M-y*E,it=x*S-_*E,$=y*S-_*M,et=L*$-w*it+A*j+N*C-O*U+I*z;return et?(et=1/et,n[0]=(h*$-f*it+d*j)*et,n[1]=(r*it-s*$-l*j)*et,n[2]=(E*I-M*O+S*N)*et,n[3]=(y*O-x*I-_*N)*et,n[4]=(f*C-u*$-d*U)*et,n[5]=(e*$-r*C+l*U)*et,n[6]=(M*A-b*I-S*w)*et,n[7]=(g*I-y*A+_*w)*et,n[8]=(u*it-h*C+d*z)*et,n[9]=(s*C-e*it-l*z)*et,n[10]=(b*O-E*A+S*L)*et,n[11]=(x*A-g*O-_*L)*et,n[12]=(h*U-u*j-f*z)*et,n[13]=(e*j-s*U+r*z)*et,n[14]=(E*w-b*N-M*L)*et,n[15]=(g*N-x*w+y*L)*et,n):null}function Yb(n){let t=n[0],e=n[1],s=n[2],r=n[3],l=n[4],u=n[5],h=n[6],f=n[7],d=n[8],g=n[9],x=n[10],y=n[11],_=n[12],b=n[13],E=n[14],M=n[15],S=t*u-e*l,L=t*h-s*l,w=t*f-r*l,A=e*h-s*u,N=e*f-r*u,O=s*f-r*h,I=d*b-g*_,z=d*E-x*_,U=d*M-y*_,C=g*E-x*b,j=g*M-y*b,it=x*M-y*E;return S*it-L*j+w*C+A*U-N*z+O*I}function J_(n,t,e){let s=t[0],r=t[1],l=t[2],u=t[3],h=t[4],f=t[5],d=t[6],g=t[7],x=t[8],y=t[9],_=t[10],b=t[11],E=t[12],M=t[13],S=t[14],L=t[15],w=e[0],A=e[1],N=e[2],O=e[3];return n[0]=w*s+A*h+N*x+O*E,n[1]=w*r+A*f+N*y+O*M,n[2]=w*l+A*d+N*_+O*S,n[3]=w*u+A*g+N*b+O*L,w=e[4],A=e[5],N=e[6],O=e[7],n[4]=w*s+A*h+N*x+O*E,n[5]=w*r+A*f+N*y+O*M,n[6]=w*l+A*d+N*_+O*S,n[7]=w*u+A*g+N*b+O*L,w=e[8],A=e[9],N=e[10],O=e[11],n[8]=w*s+A*h+N*x+O*E,n[9]=w*r+A*f+N*y+O*M,n[10]=w*l+A*d+N*_+O*S,n[11]=w*u+A*g+N*b+O*L,w=e[12],A=e[13],N=e[14],O=e[15],n[12]=w*s+A*h+N*x+O*E,n[13]=w*r+A*f+N*y+O*M,n[14]=w*l+A*d+N*_+O*S,n[15]=w*u+A*g+N*b+O*L,n}function P3(n,t,e){let s=e[0],r=e[1],l=e[2],u,h,f,d,g,x,y,_,b,E,M,S;return t===n?(n[12]=t[0]*s+t[4]*r+t[8]*l+t[12],n[13]=t[1]*s+t[5]*r+t[9]*l+t[13],n[14]=t[2]*s+t[6]*r+t[10]*l+t[14],n[15]=t[3]*s+t[7]*r+t[11]*l+t[15]):(u=t[0],h=t[1],f=t[2],d=t[3],g=t[4],x=t[5],y=t[6],_=t[7],b=t[8],E=t[9],M=t[10],S=t[11],n[0]=u,n[1]=h,n[2]=f,n[3]=d,n[4]=g,n[5]=x,n[6]=y,n[7]=_,n[8]=b,n[9]=E,n[10]=M,n[11]=S,n[12]=u*s+g*r+b*l+t[12],n[13]=h*s+x*r+E*l+t[13],n[14]=f*s+y*r+M*l+t[14],n[15]=d*s+_*r+S*l+t[15]),n}function U3(n,t,e){let s=e[0],r=e[1],l=e[2];return n[0]=t[0]*s,n[1]=t[1]*s,n[2]=t[2]*s,n[3]=t[3]*s,n[4]=t[4]*r,n[5]=t[5]*r,n[6]=t[6]*r,n[7]=t[7]*r,n[8]=t[8]*l,n[9]=t[9]*l,n[10]=t[10]*l,n[11]=t[11]*l,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function N3(n,t,e,s){let r=s[0],l=s[1],u=s[2],h=Math.hypot(r,l,u),f,d,g,x,y,_,b,E,M,S,L,w,A,N,O,I,z,U,C,j,it,$,et,ut;return Math.abs(h)<w3?null:(h=1/h,r*=h,l*=h,u*=h,f=Math.sin(e),d=Math.cos(e),g=1-d,x=t[0],y=t[1],_=t[2],b=t[3],E=t[4],M=t[5],S=t[6],L=t[7],w=t[8],A=t[9],N=t[10],O=t[11],I=r*r*g+d,z=l*r*g+u*f,U=u*r*g-l*f,C=r*l*g-u*f,j=l*l*g+d,it=u*l*g+r*f,$=r*u*g+l*f,et=l*u*g-r*f,ut=u*u*g+d,n[0]=x*I+E*z+w*U,n[1]=y*I+M*z+A*U,n[2]=_*I+S*z+N*U,n[3]=b*I+L*z+O*U,n[4]=x*C+E*j+w*it,n[5]=y*C+M*j+A*it,n[6]=_*C+S*j+N*it,n[7]=b*C+L*j+O*it,n[8]=x*$+E*et+w*ut,n[9]=y*$+M*et+A*ut,n[10]=_*$+S*et+N*ut,n[11]=b*$+L*et+O*ut,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n)}function O3(n,t){return n[0]=t[12],n[1]=t[13],n[2]=t[14],n}function Kb(n,t){let e=t[0],s=t[1],r=t[2],l=t[4],u=t[5],h=t[6],f=t[8],d=t[9],g=t[10];return n[0]=Math.hypot(e,s,r),n[1]=Math.hypot(l,u,h),n[2]=Math.hypot(f,d,g),n}function I3(n){let t=n[0],e=n[1],s=n[2],r=n[4],l=n[5],u=n[6],h=n[8],f=n[9],d=n[10];const g=t*t+e*e+s*s,x=r*r+l*l+u*u,y=h*h+f*f+d*d;return Math.sqrt(Math.max(g,x,y))}const Zb=function(){const n=[1,1,1];return function(t,e){let s=n;Kb(s,e);let r=1/s[0],l=1/s[1],u=1/s[2],h=e[0]*r,f=e[1]*l,d=e[2]*u,g=e[4]*r,x=e[5]*l,y=e[6]*u,_=e[8]*r,b=e[9]*l,E=e[10]*u,M=h+x+E,S=0;return M>0?(S=Math.sqrt(M+1)*2,t[3]=.25*S,t[0]=(y-b)/S,t[1]=(_-d)/S,t[2]=(f-g)/S):h>x&&h>E?(S=Math.sqrt(1+h-x-E)*2,t[3]=(y-b)/S,t[0]=.25*S,t[1]=(f+g)/S,t[2]=(_+d)/S):x>E?(S=Math.sqrt(1+x-h-E)*2,t[3]=(_-d)/S,t[0]=(f+g)/S,t[1]=.25*S,t[2]=(y+b)/S):(S=Math.sqrt(1+E-h-x)*2,t[3]=(f-g)/S,t[0]=(_+d)/S,t[1]=(y+b)/S,t[2]=.25*S),t}}();function F3(n,t,e,s){let r=Bl([n[0],n[1],n[2]]);const l=Bl([n[4],n[5],n[6]]),u=Bl([n[8],n[9],n[10]]);Yb(n)<0&&(r=-r),e[0]=n[12],e[1]=n[13],e[2]=n[14];const f=n.slice(),d=1/r,g=1/l,x=1/u;f[0]*=d,f[1]*=d,f[2]*=d,f[4]*=g,f[5]*=g,f[6]*=g,f[8]*=x,f[9]*=x,f[10]*=x,Zb(t,f),s[0]=r,s[1]=l,s[2]=u}function z3(n,t,e,s){const r=n,l=t[0],u=t[1],h=t[2],f=t[3],d=l+l,g=u+u,x=h+h,y=l*d,_=l*g,b=l*x,E=u*g,M=u*x,S=h*x,L=f*d,w=f*g,A=f*x,N=s[0],O=s[1],I=s[2];return r[0]=(1-(E+S))*N,r[1]=(_+A)*N,r[2]=(b-w)*N,r[3]=0,r[4]=(_-A)*O,r[5]=(1-(y+S))*O,r[6]=(M+L)*O,r[7]=0,r[8]=(b+w)*I,r[9]=(M-L)*I,r[10]=(1-(y+E))*I,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function B3(n,t){let e=t[0],s=t[1],r=t[2],l=t[3],u=e+e,h=s+s,f=r+r,d=e*u,g=s*u,x=s*h,y=r*u,_=r*h,b=r*f,E=l*u,M=l*h,S=l*f;return n[0]=1-x-b,n[1]=g+S,n[2]=y-M,n[3]=0,n[4]=g-S,n[5]=1-d-b,n[6]=_+E,n[7]=0,n[8]=y+M,n[9]=_-E,n[10]=1-d-x,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function V3(n,t,e,s,r){let l=1/Math.tan(t/2),u=1/(s-r);return n[0]=l/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(r+s)*u,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*r*s*u,n[15]=0,n}function j3(n,t,e,s,r,l,u){let h=1/(t-e),f=1/(s-r),d=1/(l-u);return n[0]=-2*h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*f,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*d,n[11]=0,n[12]=(t+e)*h,n[13]=(r+s)*f,n[14]=(u+l)*d,n[15]=1,n}function H3(n,t,e,s){let r=t[0],l=t[1],u=t[2],h=s[0],f=s[1],d=s[2],g=r-e[0],x=l-e[1],y=u-e[2],_=g*g+x*x+y*y;_===0?y=1:(_=1/Math.sqrt(_),g*=_,x*=_,y*=_);let b=f*y-d*x,E=d*g-h*y,M=h*x-f*g;return _=b*b+E*E+M*M,_===0&&(d?h+=1e-6:f?d+=1e-6:f+=1e-6,b=f*y-d*x,E=d*g-h*y,M=h*x-f*g,_=b*b+E*E+M*M),_=1/Math.sqrt(_),b*=_,E*=_,M*=_,n[0]=b,n[1]=E,n[2]=M,n[3]=0,n[4]=x*M-y*E,n[5]=y*b-g*M,n[6]=g*E-x*b,n[7]=0,n[8]=g,n[9]=x,n[10]=y,n[11]=0,n[12]=r,n[13]=l,n[14]=u,n[15]=1,n}function $_(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n[9]=t[9]+e[9],n[10]=t[10]+e[10],n[11]=t[11]+e[11],n[12]=t[12]+e[12],n[13]=t[13]+e[13],n[14]=t[14]+e[14],n[15]=t[15]+e[15],n}function tS(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n[9]=t[9]-e[9],n[10]=t[10]-e[10],n[11]=t[11]-e[11],n[12]=t[12]-e[12],n[13]=t[13]-e[13],n[14]=t[14]-e[14],n[15]=t[15]-e[15],n}function k3(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n[9]=t[9]*e,n[10]=t[10]*e,n[11]=t[11]*e,n[12]=t[12]*e,n[13]=t[13]*e,n[14]=t[14]*e,n[15]=t[15]*e,n}class ha extends Array{constructor(t=1,e=0,s=0,r=0,l=0,u=1,h=0,f=0,d=0,g=0,x=1,y=0,_=0,b=0,E=0,M=1){return super(t,e,s,r,l,u,h,f,d,g,x,y,_,b,E,M),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(t){this[12]=t}set y(t){this[13]=t}set z(t){this[14]=t}set w(t){this[15]=t}set(t,e,s,r,l,u,h,f,d,g,x,y,_,b,E,M){return t.length?this.copy(t):(C3(this,t,e,s,r,l,u,h,f,d,g,x,y,_,b,E,M),this)}translate(t,e=this){return P3(this,e,t),this}rotate(t,e,s=this){return N3(this,s,t,e),this}scale(t,e=this){return U3(this,e,typeof t=="number"?[t,t,t]:t),this}add(t,e){return e?$_(this,t,e):$_(this,this,t),this}sub(t,e){return e?tS(this,t,e):tS(this,this,t),this}multiply(t,e){return t.length?e?J_(this,t,e):J_(this,this,t):k3(this,this,t),this}identity(){return D3(this),this}copy(t){return R3(this,t),this}fromPerspective({fov:t,aspect:e,near:s,far:r}={}){return V3(this,t,e,s,r),this}fromOrthogonal({left:t,right:e,bottom:s,top:r,near:l,far:u}){return j3(this,t,e,s,r,l,u),this}fromQuaternion(t){return B3(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return L3(this,t),this}compose(t,e,s){return z3(this,t,e,s),this}decompose(t,e,s){return F3(this,t,e,s),this}getRotation(t){return Zb(t,this),this}getTranslation(t){return O3(t,this),this}getScaling(t){return Kb(t,this),this}getMaxScaleOnAxis(){return I3(this)}lookAt(t,e,s){return H3(this,t,e,s),this}determinant(){return Yb(this)}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this[3]=t[e+3],this[4]=t[e+4],this[5]=t[e+5],this[6]=t[e+6],this[7]=t[e+7],this[8]=t[e+8],this[9]=t[e+9],this[10]=t[e+10],this[11]=t[e+11],this[12]=t[e+12],this[13]=t[e+13],this[14]=t[e+14],this[15]=t[e+15],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t[e+4]=this[4],t[e+5]=this[5],t[e+6]=this[6],t[e+7]=this[7],t[e+8]=this[8],t[e+9]=this[9],t[e+10]=this[10],t[e+11]=this[11],t[e+12]=this[12],t[e+13]=this[13],t[e+14]=this[14],t[e+15]=this[15],t}}function G3(n,t,e="YXZ"){return e==="XYZ"?(n[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(n[0]=Math.atan2(-t[9],t[10]),n[2]=Math.atan2(-t[4],t[0])):(n[0]=Math.atan2(t[6],t[5]),n[2]=0)):e==="YXZ"?(n[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(n[1]=Math.atan2(t[8],t[10]),n[2]=Math.atan2(t[1],t[5])):(n[1]=Math.atan2(-t[2],t[0]),n[2]=0)):e==="ZXY"?(n[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(n[1]=Math.atan2(-t[2],t[10]),n[2]=Math.atan2(-t[4],t[5])):(n[1]=0,n[2]=Math.atan2(t[1],t[0]))):e==="ZYX"?(n[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(n[0]=Math.atan2(t[6],t[10]),n[2]=Math.atan2(t[1],t[0])):(n[0]=0,n[2]=Math.atan2(-t[4],t[5]))):e==="YZX"?(n[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(n[0]=Math.atan2(-t[9],t[5]),n[1]=Math.atan2(-t[2],t[0])):(n[0]=0,n[1]=Math.atan2(t[8],t[10]))):e==="XZY"&&(n[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(n[0]=Math.atan2(t[6],t[5]),n[1]=Math.atan2(t[8],t[0])):(n[0]=Math.atan2(-t[9],t[10]),n[1]=0)),n}const eS=new ha;let W3=class extends Array{constructor(t=0,e=t,s=t,r="YXZ"){super(t,e,s),this.order=r,this.onChange=()=>{},this._target=this;const l=["0","1","2"];return new Proxy(this,{set(u,h){const f=Reflect.set(...arguments);return f&&l.includes(h)&&u.onChange(),f}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set(t,e=t,s=t){return t.length?this.copy(t):(this._target[0]=t,this._target[1]=e,this._target[2]=s,this.onChange(),this)}copy(t){return this._target[0]=t[0],this._target[1]=t[1],this._target[2]=t[2],this.onChange(),this}reorder(t){return this._target.order=t,this.onChange(),this}fromRotationMatrix(t,e=this.order){return G3(this._target,t,e),this.onChange(),this}fromQuaternion(t,e=this.order,s){return eS.fromQuaternion(t),this._target.fromRotationMatrix(eS,e),s||this.onChange(),this}fromArray(t,e=0){return this._target[0]=t[e],this._target[1]=t[e+1],this._target[2]=t[e+2],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}};class Tg{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new ha,this.worldMatrix=new ha,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new Ze,this.quaternion=new A3,this.scale=new Ze(1),this.rotation=new W3,this.up=new Ze(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(t,e=!0){this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,e&&t&&t.addChild(this,!1)}addChild(t,e=!0){~this.children.indexOf(t)||this.children.push(t),e&&t.setParent(this,!1)}removeChild(t,e=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),e&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let e=0,s=this.children.length;e<s;e++)this.children[e].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let e=0,s=this.children.length;e<s;e++)this.children[e].traverse(t)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,e=!1){e?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}const X3=new ha,q3=new Ze,Y3=new Ze;let Qb=class extends Tg{constructor(t,{near:e=.1,far:s=100,fov:r=45,aspect:l=1,left:u,right:h,bottom:f,top:d,zoom:g=1}={}){super(),Object.assign(this,{near:e,far:s,fov:r,aspect:l,left:u,right:h,bottom:f,top:d,zoom:g}),this.projectionMatrix=new ha,this.viewMatrix=new ha,this.projectionViewMatrix=new ha,this.worldPosition=new Ze,this.type=u||h?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:t=this.near,far:e=this.far,fov:s=this.fov,aspect:r=this.aspect}={}){return Object.assign(this,{near:t,far:e,fov:s,aspect:r}),this.projectionMatrix.fromPerspective({fov:s*(Math.PI/180),aspect:r,near:t,far:e}),this.type="perspective",this}orthographic({near:t=this.near,far:e=this.far,left:s=this.left||-1,right:r=this.right||1,bottom:l=this.bottom||-1,top:u=this.top||1,zoom:h=this.zoom}={}){return Object.assign(this,{near:t,far:e,left:s,right:r,bottom:l,top:u,zoom:h}),s/=h,r/=h,l/=h,u/=h,this.projectionMatrix.fromOrthogonal({left:s,right:r,bottom:l,top:u,near:t,far:e}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}updateProjectionMatrix(){return this.type==="perspective"?this.perspective():this.orthographic()}lookAt(t){return super.lookAt(t,!0),this}project(t){return t.applyMatrix4(this.viewMatrix),t.applyMatrix4(this.projectionMatrix),this}unproject(t){return t.applyMatrix4(X3.inverse(this.projectionMatrix)),t.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new Ze,new Ze,new Ze,new Ze,new Ze,new Ze]);const t=this.projectionViewMatrix;this.frustum[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).constant=t[15]-t[12],this.frustum[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).constant=t[15]+t[12],this.frustum[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).constant=t[15]+t[13],this.frustum[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).constant=t[15]-t[13],this.frustum[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).constant=t[15]-t[14],this.frustum[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).constant=t[15]+t[14];for(let e=0;e<6;e++){const s=1/this.frustum[e].distance();this.frustum[e].multiply(s),this.frustum[e].constant*=s}}frustumIntersectsMesh(t,e=t.worldMatrix){if(!t.geometry.attributes.position||((!t.geometry.bounds||t.geometry.bounds.radius===1/0)&&t.geometry.computeBoundingSphere(),!t.geometry.bounds))return!0;const s=q3;s.copy(t.geometry.bounds.center),s.applyMatrix4(e);const r=t.geometry.bounds.radius*e.getMaxScaleOnAxis();return this.frustumIntersectsSphere(s,r)}frustumIntersectsSphere(t,e){const s=Y3;for(let r=0;r<6;r++){const l=this.frustum[r];if(s.copy(l).dot(t)+l.constant<-e)return!1}return!0}};function K3(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[4],n[4]=t[5],n[5]=t[6],n[6]=t[8],n[7]=t[9],n[8]=t[10],n}function Z3(n,t){let e=t[0],s=t[1],r=t[2],l=t[3],u=e+e,h=s+s,f=r+r,d=e*u,g=s*u,x=s*h,y=r*u,_=r*h,b=r*f,E=l*u,M=l*h,S=l*f;return n[0]=1-x-b,n[3]=g-S,n[6]=y+M,n[1]=g+S,n[4]=1-d-b,n[7]=_-E,n[2]=y-M,n[5]=_+E,n[8]=1-d-x,n}function Q3(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function J3(n,t,e,s,r,l,u,h,f,d){return n[0]=t,n[1]=e,n[2]=s,n[3]=r,n[4]=l,n[5]=u,n[6]=h,n[7]=f,n[8]=d,n}function $3(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function tD(n,t){let e=t[0],s=t[1],r=t[2],l=t[3],u=t[4],h=t[5],f=t[6],d=t[7],g=t[8],x=g*u-h*d,y=-g*l+h*f,_=d*l-u*f,b=e*x+s*y+r*_;return b?(b=1/b,n[0]=x*b,n[1]=(-g*s+r*d)*b,n[2]=(h*s-r*u)*b,n[3]=y*b,n[4]=(g*e-r*f)*b,n[5]=(-h*e+r*l)*b,n[6]=_*b,n[7]=(-d*e+s*f)*b,n[8]=(u*e-s*l)*b,n):null}function nS(n,t,e){let s=t[0],r=t[1],l=t[2],u=t[3],h=t[4],f=t[5],d=t[6],g=t[7],x=t[8],y=e[0],_=e[1],b=e[2],E=e[3],M=e[4],S=e[5],L=e[6],w=e[7],A=e[8];return n[0]=y*s+_*u+b*d,n[1]=y*r+_*h+b*g,n[2]=y*l+_*f+b*x,n[3]=E*s+M*u+S*d,n[4]=E*r+M*h+S*g,n[5]=E*l+M*f+S*x,n[6]=L*s+w*u+A*d,n[7]=L*r+w*h+A*g,n[8]=L*l+w*f+A*x,n}function eD(n,t,e){let s=t[0],r=t[1],l=t[2],u=t[3],h=t[4],f=t[5],d=t[6],g=t[7],x=t[8],y=e[0],_=e[1];return n[0]=s,n[1]=r,n[2]=l,n[3]=u,n[4]=h,n[5]=f,n[6]=y*s+_*u+d,n[7]=y*r+_*h+g,n[8]=y*l+_*f+x,n}function nD(n,t,e){let s=t[0],r=t[1],l=t[2],u=t[3],h=t[4],f=t[5],d=t[6],g=t[7],x=t[8],y=Math.sin(e),_=Math.cos(e);return n[0]=_*s+y*u,n[1]=_*r+y*h,n[2]=_*l+y*f,n[3]=_*u-y*s,n[4]=_*h-y*r,n[5]=_*f-y*l,n[6]=d,n[7]=g,n[8]=x,n}function iD(n,t,e){let s=e[0],r=e[1];return n[0]=s*t[0],n[1]=s*t[1],n[2]=s*t[2],n[3]=r*t[3],n[4]=r*t[4],n[5]=r*t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function sD(n,t){let e=t[0],s=t[1],r=t[2],l=t[3],u=t[4],h=t[5],f=t[6],d=t[7],g=t[8],x=t[9],y=t[10],_=t[11],b=t[12],E=t[13],M=t[14],S=t[15],L=e*h-s*u,w=e*f-r*u,A=e*d-l*u,N=s*f-r*h,O=s*d-l*h,I=r*d-l*f,z=g*E-x*b,U=g*M-y*b,C=g*S-_*b,j=x*M-y*E,it=x*S-_*E,$=y*S-_*M,et=L*$-w*it+A*j+N*C-O*U+I*z;return et?(et=1/et,n[0]=(h*$-f*it+d*j)*et,n[1]=(f*C-u*$-d*U)*et,n[2]=(u*it-h*C+d*z)*et,n[3]=(r*it-s*$-l*j)*et,n[4]=(e*$-r*C+l*U)*et,n[5]=(s*C-e*it-l*z)*et,n[6]=(E*I-M*O+S*N)*et,n[7]=(M*A-b*I-S*w)*et,n[8]=(b*O-E*A+S*L)*et,n):null}class aD extends Array{constructor(t=1,e=0,s=0,r=0,l=1,u=0,h=0,f=0,d=1){return super(t,e,s,r,l,u,h,f,d),this}set(t,e,s,r,l,u,h,f,d){return t.length?this.copy(t):(J3(this,t,e,s,r,l,u,h,f,d),this)}translate(t,e=this){return eD(this,e,t),this}rotate(t,e=this){return nD(this,e,t),this}scale(t,e=this){return iD(this,e,t),this}multiply(t,e){return e?nS(this,t,e):nS(this,this,t),this}identity(){return $3(this),this}copy(t){return Q3(this,t),this}fromMatrix4(t){return K3(this,t),this}fromQuaternion(t){return Z3(this,t),this}fromBasis(t,e,s){return this.set(t[0],t[1],t[2],e[0],e[1],e[2],s[0],s[1],s[2]),this}inverse(t=this){return tD(this,t),this}getNormalMatrix(t){return sD(this,t),this}}let rD=0,Jb=class extends Tg{constructor(t,{geometry:e,program:s,mode:r=t.TRIANGLES,frustumCulled:l=!0,renderOrder:u=0}={}){super(),t.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=t,this.id=rD++,this.geometry=e,this.program=s,this.mode=r,this.frustumCulled=l,this.renderOrder=u,this.modelViewMatrix=new ha,this.normalMatrix=new aD,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(t){return this.beforeRenderCallbacks.push(t),this}onAfterRender(t){return this.afterRenderCallbacks.push(t),this}draw({camera:t}={}){t&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=t.projectionMatrix,this.program.uniforms.cameraPosition.value=t.worldPosition,this.program.uniforms.viewMatrix.value=t.viewMatrix,this.modelViewMatrix.multiply(t.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(s=>s&&s({mesh:this,camera:t}));let e=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:e}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(s=>s&&s({mesh:this,camera:t}))}},oD=class extends Wb{constructor(t,{attributes:e={}}={}){Object.assign(e,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(t,e)}};const lD=["#ffffff","#ffffff","#ffffff"],cD=n=>{n=n.replace(/^#/,""),n.length===3&&(n=n.split("").map(l=>l+l).join(""));const t=parseInt(n,16),e=(t>>16&255)/255,s=(t>>8&255)/255,r=(t&255)/255;return[e,s,r]},uD=`
  attribute vec3 position;
  attribute vec4 random;
  attribute vec3 color;
  
  uniform mat4 modelMatrix;
  uniform mat4 viewMatrix;
  uniform mat4 projectionMatrix;
  uniform float uTime;
  uniform float uSpread;
  uniform float uBaseSize;
  uniform float uSizeRandomness;
  
  varying vec4 vRandom;
  varying vec3 vColor;
  
  void main() {
    vRandom = random;
    vColor = color;
    
    vec3 pos = position * uSpread;
    pos.z *= 10.0;
    
    vec4 mPos = modelMatrix * vec4(pos, 1.0);
    float t = uTime;
    mPos.x += sin(t * random.z + 6.28 * random.w) * mix(0.1, 1.5, random.x);
    mPos.y += sin(t * random.y + 6.28 * random.x) * mix(0.1, 1.5, random.w);
    mPos.z += sin(t * random.w + 6.28 * random.y) * mix(0.1, 1.5, random.z);
    
    vec4 mvPos = viewMatrix * mPos;
    gl_PointSize = (uBaseSize * (1.0 + uSizeRandomness * (random.x - 0.5))) / length(mvPos.xyz);
    gl_Position = projectionMatrix * mvPos;
  }
`,hD=`
  precision highp float;
  
  uniform float uTime;
  uniform float uAlphaParticles;
  varying vec4 vRandom;
  varying vec3 vColor;
  
  void main() {
    vec2 uv = gl_PointCoord.xy;
    float d = length(uv - vec2(0.5));
    
    if(uAlphaParticles < 0.5) {
      if(d > 0.5) {
        discard;
      }
      gl_FragColor = vec4(vColor + 0.2 * sin(uv.yxx + uTime + vRandom.y * 6.28), 1.0);
    } else {
      float circle = smoothstep(0.5, 0.4, d) * 0.8;
      gl_FragColor = vec4(vColor + 0.2 * sin(uv.yxx + uTime + vRandom.y * 6.28), circle);
    }
  }
`,fD=({particleCount:n=200,particleSpread:t=10,speed:e=.1,particleColors:s,moveParticlesOnHover:r=!1,particleHoverFactor:l=1,alphaParticles:u=!1,particleBaseSize:h=100,sizeRandomness:f=1,cameraDistance:d=20,disableRotation:g=!1,className:x})=>{const y=xt.useRef(null),_=xt.useRef({x:0,y:0});return xt.useEffect(()=>{const b=y.current;if(!b)return;const E=new qb({depth:!1,alpha:!0}),M=E.gl;b.appendChild(M.canvas),M.clearColor(0,0,0,0);const S=new Qb(M,{fov:15});S.position.set(0,0,d);const L=()=>{const V=b.clientWidth,G=b.clientHeight;E.setSize(V,G),S.perspective({aspect:M.canvas.width/M.canvas.height})};window.addEventListener("resize",L,!1),L();const w=V=>{const G=b.getBoundingClientRect(),q=(V.clientX-G.left)/G.width*2-1,yt=-((V.clientY-G.top)/G.height*2-1);_.current={x:q,y:yt}};r&&b.addEventListener("mousemove",w);const A=n,N=new Float32Array(A*3),O=new Float32Array(A*4),I=new Float32Array(A*3),z=s&&s.length>0?s:lD;for(let V=0;V<A;V++){let G,q,yt,F;do G=Math.random()*2-1,q=Math.random()*2-1,yt=Math.random()*2-1,F=G*G+q*q+yt*yt;while(F>1||F===0);const nt=Math.cbrt(Math.random());N.set([G*nt,q*nt,yt*nt],V*3),O.set([Math.random(),Math.random(),Math.random(),Math.random()],V*4);const Mt=cD(z[Math.floor(Math.random()*z.length)]);I.set(Mt,V*3)}const U=new Wb(M,{position:{size:3,data:N},random:{size:4,data:O},color:{size:3,data:I}}),C=new Xb(M,{vertex:uD,fragment:hD,uniforms:{uTime:{value:0},uSpread:{value:t},uBaseSize:{value:h},uSizeRandomness:{value:f},uAlphaParticles:{value:u?1:0}},transparent:!0,depthTest:!1}),j=new Jb(M,{mode:M.POINTS,geometry:U,program:C});let it,$=performance.now(),et=0;const ut=V=>{it=requestAnimationFrame(ut);const G=V-$;$=V,et+=G*e,C.uniforms.uTime.value=et*.001,r?(j.position.x=-_.current.x*l,j.position.y=-_.current.y*l):(j.position.x=0,j.position.y=0),g||(j.rotation.x=Math.sin(et*2e-4)*.1,j.rotation.y=Math.cos(et*5e-4)*.15,j.rotation.z+=.01*e),E.render({scene:j,camera:S})};return it=requestAnimationFrame(ut),()=>{window.removeEventListener("resize",L),r&&b.removeEventListener("mousemove",w),cancelAnimationFrame(it),b.contains(M.canvas)&&b.removeChild(M.canvas)}},[n,t,e,r,l,u,h,f,d,g]),m.jsx("div",{ref:y,className:`relative w-full h-full ${x}`})},Jd={damping:30,stiffness:100,mass:2};function dD({containerHeight:n="300px",containerWidth:t="100%",scaleOnHover:e=1.05,rotateAmplitude:s=12,overlayHeader:r="Project Title",overlayText:l="This is a featured AI project. Learn more at",overlayLink:u="https://example.com",overlayLinkText:h="Project Link",gradientColors:f=["#3A0CA3","#7209B7","#4361EE"]}){const d=xt.useRef(null),g=co(0),x=co(0),y=bl(co(0),Jd),_=bl(co(0),Jd),b=bl(1,Jd),E=bl(0),M=bl(0,{stiffness:350,damping:30,mass:1}),[S,L]=xt.useState(0);function w(I){if(!d.current)return;const z=d.current.getBoundingClientRect(),U=I.clientX-z.left-z.width/2,C=I.clientY-z.top-z.height/2,j=C/(z.height/2)*-s,it=U/(z.width/2)*s;y.set(j),_.set(it),g.set(I.clientX-z.left),x.set(I.clientY-z.top);const $=C-S;M.set(-$*.6),L(C)}function A(){b.set(e),E.set(1)}function N(){E.set(0),b.set(1),y.set(0),_.set(0),M.set(0)}const O=`linear-gradient(135deg, ${f.join(", ")})`;return m.jsx("figure",{ref:d,className:"relative w-full h-full [perspective:800px] flex flex-col items-center justify-center",style:{height:n,width:t},onMouseMove:w,onMouseEnter:A,onMouseLeave:N,children:m.jsxs(ua.div,{className:"relative rounded-[15px] overflow-hidden text-white [transform-style:preserve-3d]",style:{width:"100%",height:"100%",background:O,rotateX:y,rotateY:_,scale:b},children:[m.jsx(ua.div,{className:"absolute top-4 left-4 z-[2] bg-white/10 px-4 py-1 text-sm font-semibold rounded-md backdrop-blur-md",style:{transform:"translateZ(30px)"},children:r}),m.jsxs(ua.div,{className:"absolute bottom-0 left-0 z-[1] w-full px-4 py-3 text-sm bg-black/40 backdrop-blur-sm",style:{transform:"translateZ(20px)"},children:[l,m.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-cyan-300 hover:underline",children:h})]})]})})}const pD=[{title:"About Me",text:"Curious technologist, passionate about building meaningful tools with ML and design. Learn about my story, philosophy, and values.",link:"#about",gradient:["#8B5CF6","#4F46E5","#312E81"]},{title:"Projects",text:"Dive into projects built with React, Python, Swift, and AI/ML  including OCR tools, RAG chatbots, emotion-aware UIs, and full-stack dashboards.",link:"#projects",gradient:["#06B6D4","#0E7490","#164E63"]},{title:"Experience",text:"Internships and fellowships in GenAI, CV, forecasting, and frontend at Infinite Uptime, EY, ASU, JSPL, Ripik.AI, and Headstarter.",link:"#experience",gradient:["#F59E0B","#B45309","#78350F"]},{title:"Contact Me",text:"I'm always open to meaningful conversations, freelance work, or collaborating on impactful AI projects. Feel free to drop a message!",link:"#contact",gradient:["#EC4899","#DB2777","#831843"]}],mD=()=>m.jsxs("section",{className:"relative h-screen flex items-center justify-center bg-[#f7f8f9] text-gray-800 ",id:"home",children:[m.jsx("div",{className:"absolute inset-0 z-0",children:m.jsx(fD,{particleColors:["#a78bfa","#c084fc","#d8b4fe"],particleCount:5e3,particleSpread:10,speed:.1,particleBaseSize:100,moveParticlesOnHover:!0,alphaParticles:!0,disableRotation:!1})}),m.jsxs(ua.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1},className:"relative z-10 text-center px-4",children:[m.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900",children:"Hi, I'm Syna"}),m.jsx("p",{className:"mt-4 text-lg text-gray-700 max-w-xl mx-auto",children:"I build AI, data science, and full-stack apps - blending tech with life"}),m.jsx("div",{className:"hidden sm:grid mt-12 grid-cols-1 sm:grid-cols-2 gap-8 px-4",children:pD.map((n,t)=>m.jsx("a",{href:n.link,className:"block",children:m.jsx(dD,{containerHeight:"240px",containerWidth:"100%",overlayHeader:n.title,overlayText:n.text,overlayLink:n.link,overlayLinkText:"Explore ",gradientColors:n.gradient,scaleOnHover:1.15,rotateAmplitude:30})},t))}),m.jsxs("div",{className:"sm:hidden mt-10 text-center px-6",children:[m.jsx("p",{className:"text-md text-gray-600",children:"Explore my story, projects, and experience  optimized for desktop "}),m.jsx("a",{href:"#about",className:"inline-block mt-4 px-6 py-2 text-white bg-purple-600 rounded-xl hover:bg-purple-700 transition",children:"Jump to About"})]})]})]});function gD({title:n,titleId:t,...e},s){return xt.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},e),n?xt.createElement("title",{id:t},n):null,xt.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const vD=xt.forwardRef(gD);function xD({title:n,titleId:t,...e},s){return xt.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},e),n?xt.createElement("title",{id:t},n):null,xt.createElement("path",{fillRule:"evenodd",d:"M12 6.75a5.25 5.25 0 0 1 6.775-5.025.75.75 0 0 1 .313 1.248l-3.32 3.319c.063.475.276.934.641 1.299.365.365.824.578 1.3.64l3.318-3.319a.75.75 0 0 1 1.248.313 5.25 5.25 0 0 1-5.472 6.756c-1.018-.086-1.87.1-2.309.634L7.344 21.3A3.298 3.298 0 1 1 2.7 16.657l8.684-7.151c.533-.44.72-1.291.634-2.309A5.342 5.342 0 0 1 12 6.75ZM4.117 19.125a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Z",clipRule:"evenodd"}),xt.createElement("path",{d:"m10.076 8.64-2.201-2.2V4.874a.75.75 0 0 0-.364-.643l-3.75-2.25a.75.75 0 0 0-.916.113l-.75.75a.75.75 0 0 0-.113.916l2.25 3.75a.75.75 0 0 0 .643.364h1.564l2.062 2.062 1.575-1.297Z"}),xt.createElement("path",{fillRule:"evenodd",d:"m12.556 17.329 4.183 4.182a3.375 3.375 0 0 0 4.773-4.773l-3.306-3.305a6.803 6.803 0 0 1-1.53.043c-.394-.034-.682-.006-.867.042a.589.589 0 0 0-.167.063l-3.086 3.748Zm3.414-1.36a.75.75 0 0 1 1.06 0l1.875 1.876a.75.75 0 1 1-1.06 1.06L15.97 17.03a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const yD=xt.forwardRef(xD);function _D({title:n,titleId:t,...e},s){return xt.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},e),n?xt.createElement("title",{id:t},n):null,xt.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const SD=xt.forwardRef(_D),MD=()=>{const[n,t]=xt.useState(!1),e=[{label:"About",href:"#about"},{label:"Experience",href:"#experience"},{label:"Projects",href:"#projects"},{label:"Contact",href:"#contact"}];return m.jsxs("nav",{className:"fixed top-0 w-full backdrop-blur bg-white/70 border-b border-gray-200 z-50",children:[m.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center",children:[m.jsx("h1",{className:"text-xl font-bold tracking-tight text-purple-700",children:"Syna Malhan"}),m.jsx("ul",{className:"hidden md:flex space-x-6 text-sm font-medium",children:e.map(s=>m.jsx("li",{children:m.jsx("a",{href:s.href,className:"hover:text-purple-600 transition",children:s.label})},s.href))}),m.jsx("div",{className:"md:hidden",children:m.jsx("button",{onClick:()=>t(!n),className:"text-purple-700",children:n?m.jsx(SD,{className:"w-6 h-6"}):m.jsx(vD,{className:"w-6 h-6"})})})]}),n&&m.jsx("div",{className:"md:hidden bg-white/90 backdrop-blur-sm border-t border-gray-200 px-4 pb-4",children:m.jsx("ul",{className:"flex flex-col gap-3 text-sm font-medium",children:e.map(s=>m.jsx("li",{children:m.jsx("a",{href:s.href,onClick:()=>t(!1),className:"block py-2 text-gray-800 hover:text-purple-600 transition",children:s.label})},s.href))})})]})},bD="/website/assets/jspl-CJ6a5K4w.png",ED="/website/assets/asu-uITMCR3E.png",TD="/website/assets/iuLogo-mUrwUMEs.png",AD="/website/assets/ripik-WEkjzfpJ.svg",wD="/website/assets/headstarter-DD9aCjCV.png",RD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAA0lBMVEUuLjj/////5QAQECEpKTTe3t/6+vpQUFb/6QD/5wAYGCbAwMIXGzr/6gAMDB7p6epISFDGsh1cXGIfHywkJjkeITm5ubqbm54iJDkjIy8qKzgoKTklJTD/7gAaHjlhWjPt1RGsrK49OzfbxRh1azAIEjrkzRURFzr43wplZWrT09TKyst3d3uJfS03Njh7cC9IRDZpYTJQSzWUhisABzuzoiSgkSjPux2RhCxUTjU4OEGCgoZxcXWunSa+rCGwoCWGei3VvxpbVTRBPjZvZjKRkZS7frIIAAAGCElEQVR4nO2af1vaPBSGKwJrEUSk3UoDhQkKwwmIA5w/2Ob0+3+lNynqKJyUAu+Wptdz/7l2XL05OXnSg4YBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACA3fDcblH1M/xFPLt7dtWepVaR+YNhpWc2Kuk09Byj+aNlmVbGTKOh57qDadsqWRlO+gw9u8iuZmbJDPzSZ8h8bzjPmG96aTP0HPb02Mos6aXL0LZHN+1MKaSXIkO7eD6cZRrmql9KDJnvd+akXioMPcdtPgbJR6O5oRc0X2+t+dJiaDseP5dJVqf+hszvXk826elr6DlF3nzmRj1NDT3bGW9oPq0NmTPoVHqlOOXT0ZA535qT1ubm09TQc7vfp61GzNWpnSF/KRrfEsfOtBgy/2yr5tPMkJ/LxpPWTno6GHru+Wh6sW3zaWPo2d3RVTtWsEuwrCTP2pgvks80d3WzzJLZa7VvXNUiNJ5jPP242LH5uJuV6V1UboZPv7uJFOTJZ0zbpR2aj7uVGo3W7PFn0zgvOjbzVLsQBLP4X9vuLXxNmqWG1ZpNbpvdxLoJWHHQmfesLZovaLhGptWu3HR+D5jvMtUOESyaLxO/+UThMj2+KIfNEeOF85JauAWue0aNA+Wr0rR67cnt89jpJnhRvmMX3Z8zqxRjdQaLspFpz6fD0XnXd+3Euxki+Rhvvo3JvthNehd8pxwx23G0cDNE83nNtVn8mttrfM9vn8YDVxs3gW0PNjSfcBPxPe00z4p8p0z4bhLGLnaHFdmw+j2+fz1eXSc3viNgvv8smcUvIs5s/eLx7Zx3HVc3N0M0nyOab211vsf3fPo8GhjJju8IbHd0uz4OXI5vI/nxLcd2WGcWHla/x/dN57vf9bVruGWYE57Fv8b3BY/v8Tdd4luO5/hP07dZ/Ft8VybDMWP6xLec91m89Se+b65HZ46vv5uAOYNhRczLdI5vOcw5H09aDUFvxuN7oGN8y+Gv7Lz5xNFkfnvN3759HeM7kqerSns25W/fnqNrfEdz9vz8Xev43gxL26IEAAAAAAAAAABABNltr2XJf737Xx5mO7IfDuJwVOD3Vj+T1z4XiM89JG8tH/5rP2GYj6V4Wuf33pWpS/kP6/Wq0V/Gl3pyDfvi5uo9ee3jWhGzJ+SnHlHV/tvENTy4r4q7+9Sl/OlqEen1TBU7QYblO/549VPy2seV9pKU8JOKEsY3XGwohY/ktZUiHh+R35GKCm5jGKyx7B15++Vx6DNPyZseFGwzWxkeXIq1WPhEXgt12CFZwr6CpNjS8HWvJxPjqLb0kXSzrm1HCTTMiWesfY2wD6heUjes7kaJNDx4EYlRIwX674b0fls+UVTC7QyDx5Qswoe3dVonv4Hgy0m+4SIx6Djvv4Zd/YG6mlPlt61hcHrJ1slr94siFshjz5fahudIiuFBTuwX1RfqUjnIRHojulRymokwzJ1ICfaLWo7SCIpYJS8p22akhrWsjOA/0YXK8e20Rr59kG+Qag03na/oxOBFPKbOA8GhXRm7GdInz/Id/QJ5rywpgmfdyVByPH2pUiXsq6zgzoZZ8nhaJr1VjC6WH3U3Q6NGJgbFkbooDNjV0DgmY4FA6TZj7GFY/xJPUM3oYgnasBqVhq8UyPfcVcpqm9CQGJZPaUJHk3jnvXvFXbjlufRTKNiq9EAjRF95CfcxlAw0QpzqbSgZaCzxWelpZsFeNTwk3wX/kFedFIK9DDclxur9StjLUDLcfqOsOgoD9jPMnkRtNl+VJ4VgP8PIxFA5ulhiT8OsIT2erv/mpoY9DY0aOTwUJCEpBPsaGgVyoMG3mci/bviH7G0o+1MH9QfSV/Y2NA7JH01zqn6IWYM0zOdoyLrQP5o+JKWEkvfD40MS+qmpCWJe5Qw4zM7v+H+AoWJgGAMYKgaGMYChYiSJX4gmFP06GuaPNvCyrKij4UZCfzMLQ8XAEIYGDJUDQxgaMFQODGFoaGC4g6BehieS+XYkofF+4ZK4IzmGRpYeb0cT/v2iQNyRHEEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACASP4D0JKopb/sIC0AAAAASUVORK5CYII=",CD=[{title:"Data Science Intern",company:"Infinite Uptime",duration:"Jul 2025 - Present",summary:"Analyzing real-world process and sensor data to generate actionable insights for predictive maintenance and manufacturing optimization.",details:m.jsx(m.Fragment,{children:m.jsxs("ul",{children:[m.jsx("li",{children:"Explored time-series sensor data to detect anomalies and inefficiencies in industrial equipment using Python and Pandas."}),m.jsx("li",{children:"Applied statistical methods and machine learning (scikit-learn) to model performance trends and identify early warning signs of failure."}),m.jsx("li",{children:"Built interactive visualizations and KPI dashboards using Matplotlib and Power BI to support operational decision-making."})]})}),logo:TD},{title:"Gen AI Intern",company:"Ernst & Young",duration:"Jun 2025 - Present",summary:"Working on agentic retrieval-augmented generation (RAG) leveraging graph databases and optimizing image generation models for textual imagery.",details:m.jsx(m.Fragment,{children:m.jsxs("ul",{children:[m.jsx("li",{children:" Collaborated on building visualization-based AI systems for enterprise applications using Retrieval-Augmented Generation (RAG)."}),m.jsx("li",{children:" Utilized Neo4j for graph-based data modeling and relationship mapping to improve spatial and contextual insights."}),m.jsx("li",{children:" Developed interactive dashboards and visual workflows to demonstrate AI outputs and knowledge graph structures."}),m.jsx("li",{children:" Participated in virtual sprint planning and team reviews, contributing to project documentation and technical presentations. "}),"    "]})}),logo:RD},{title:"Cloud Front End Developer",company:"Arizona State University AI Cloud Innovation Center",duration:"Aug 2024 - Present",summary:"Built cloud infrastructure with AWS and UI, improving user experience for public sector solutions.",details:m.jsx(m.Fragment,{children:m.jsxs("ul",{children:[m.jsx("li",{children:" Collaborated with cross-functional teams to design UI for public sector applications. "}),m.jsx("li",{children:" Created wireframes and data visualizations to illustrate spatial usage and cloud workflows. "}),m.jsx("li",{children:" Regularly reported progress via virtual meetings and managed tasks using cloud-based tools. "})]})}),logo:ED},{title:"Intern in Digitalization",company:"Jindal Steel and Power Ltd",duration:"May 2024 - July 2024",summary:"Developed full-stack app with AngularJS, Spring Boot, and SQL, improving data retrieval speed by 15%.",details:m.jsx(m.Fragment,{children:m.jsxs("ul",{children:[m.jsx("li",{children:"  Developed internal data dashboards with AngularJS and Spring Boot. "}),m.jsx("li",{children:" Enhanced visual clarity of operational layouts by redesigning space-related UI elements. "}),m.jsx("li",{children:"Integrated performance metrics and reports into stakeholder presentations. "})]})}),logo:bD},{title:"Intern in Machine Learning and Data Analytics",company:"Ripik.AI",duration:"July 2024  Aug 2024",summary:"Engineered algorithms using YOLO and Ultralytics, improving accuracy by 80%.",details:m.jsx(m.Fragment,{children:m.jsxs("ul",{children:[m.jsx("li",{children:"  Trained object detection models (YOLO), improving accuracy for industrial use cases. "}),m.jsx("li",{children:"  Developed OCR models and boosted form recognition performance by 25%. "}),m.jsx("li",{children:"  Produced dashboards and visual analytics for client reports. "})]})}),logo:AD},{title:"Software Engineering Fellow",company:"Headstarter AI",duration:"July 2024  Sept 2024",summary:"Built 5+ AI apps using NextJS, OpenAI, Pinecone, StripeAPI, achieving 98% accuracy.",details:m.jsx(m.Fragment,{children:m.jsxs("ul",{children:[m.jsx("li",{children:"  Built data-rich, interactive AI apps using React, OpenAI APIs, and visualization libraries."}),m.jsx("li",{children:" Led peer reviews and presentation sessions via Zoom, enhancing team collaboration remotely."}),m.jsx("li",{children:"  Led 4+ engineering fellows in full-stack development, with coaching from Amazon, Bloomberg, and Capital One engineers."})]})}),logo:wD}],DD=({children:n,className:t="",spotlightColor:e="rgba(255, 255, 255, 0.25)"})=>{const s=xt.useRef(null),[r,l]=xt.useState(!1),[u,h]=xt.useState({x:0,y:0}),[f,d]=xt.useState(0),g=E=>{if(!s.current||r)return;const M=s.current.getBoundingClientRect();h({x:E.clientX-M.left,y:E.clientY-M.top})},x=()=>{l(!0),d(1)},y=()=>{l(!1),d(0)},_=()=>{d(1)},b=()=>{d(0)};return m.jsxs("div",{ref:s,onMouseMove:g,onFocus:x,onBlur:y,onMouseEnter:_,onMouseLeave:b,className:`relative rounded-2xl border border-gray-200 bg-white overflow-hidden p-6 transition-shadow hover:shadow-xl ${t}`,children:[m.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-500 ease-in-out",style:{opacity:f,background:`radial-gradient(circle at ${u.x}px ${u.y}px, ${e}, transparent 80%)`}}),n]})},iS=["rgba(167, 139, 250, 0.2)","rgba(99, 102, 241, 0.2)","rgba(34, 211, 238, 0.2)","rgba(251, 191, 36, 0.2)","rgba(244, 114, 182, 0.2)","rgba(16, 185, 129, 0.2)"];function LD(){return m.jsx("section",{id:"experience",className:"py-16 sm:py-20 bg-white",children:m.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-10 space-y-12",children:[m.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-center text-purple-600",children:"Work Experience"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:CD.map((n,t)=>{const e=iS[t%iS.length];return m.jsx(ua.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:t*.05},children:m.jsx(DD,{spotlightColor:e,children:m.jsxs("div",{className:"flex flex-col items-start gap-4",children:[n.logo&&m.jsx("img",{src:n.logo,alt:n.company,className:"w-16 sm:w-20 object-contain"}),m.jsxs("div",{children:[m.jsxs("h3",{className:"text-md sm:text-lg font-semibold leading-tight",children:[n.title," ",m.jsxs("span",{className:"text-sm text-gray-500",children:[" ",n.company]})]}),m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:n.duration}),m.jsx("p",{className:"text-sm text-gray-700",children:n.summary}),m.jsx("div",{className:"mt-2 text-sm text-gray-700 leading-snug space-y-1",children:n.details})]})]})})},t)})})]})})}const PD=[{title:"Machine Learning & AI",projects:["FrozenLake Q-Learning Agent","K-Means Image Compressor","Credit Risk RAG Model","Text-Optimized Image Generation Model","Emotion Detection from Images","Medical Image Analysis for Early Brain Tumor Detection","Portfolio Analyzer and Stock Prediction Dashboard","CropGenius","Wildlife Monitoring and Conservation","Slab Sizing","Customer Segmentation via K-Means","Options Pricing and Risk Assessment Tool","Portfolio Optimizer with ESG Integration","OCR Training","Finance Helper","AI-Powered Symptom Checker"]},{title:"Full Stack Applications",projects:["FaceTrack - Advanced Facial Recognition Attendance System","EduFlex+ Educational Learning Platform","CuraMind - AI-Powered Mental Health Support","MediHub Platform","GitHub LinkedIn Post Generator","Project Creator with Local LLM Integration","Career Pilot","Mental Health Bridge","Ocean Pollution Tracker","MindScape  Your Personalized Wellness Companion","Chatbot Referral Agent","Specialized Chatbot","Front-end Portal"]},{title:"Data Visualization & Analytics",projects:["Last Point Distribution Analysis","US Census Data Project","Blast Furnace Lab Automation","Plate Mill FG Forecasting","Portfolio Performance Analyzer"]},{title:"Healthcare & Wellness",projects:["CareSketch","AI-Powered Symptom Checker","Mental Health Bridge","CuraMind - AI-Powered Mental Health Support","MindScape  Your Personalized Wellness Companion","Wellness Journal","PulseGuardian: Real-Time Stress Monitor","MoodSync: Voice Journal with Emotion Detection"]},{title:"Computer Vision",projects:["Slab Sizing","OCR Training","LensOCR: AI-Enhanced Document Scanner","Wildlife Monitoring and Conservation","NutriSnap Food Nutrition Database","Medical Image Analysis for Early Brain Tumor Detection"]},{title:"iOS/Swift Projects",projects:["Wellness Journal","NeuroTrack","PulseGuardian: Real-Time Stress Monitor","MoodSync: Voice Journal with Emotion Detection","TapFast  A Rapid Tapping Game for Apple Watch","LensOCR: AI-Enhanced Document Scanner"]},{title:"Hackathon Winners",projects:["EduFlex+ Educational Learning Platform","CareSketch","CropGenius"]},{title:"Creative / Fun / Games",projects:["Haunted Escape Room (React)","The Ten Dollar Founding Father Without a Father","The Untold Legacy of Bayard Rustin","Gamify Life  Productivity To-Do App"]},{title:"Utilities & Tools",projects:["Drag & Drop JSON Editor","GitHub LinkedIn Post Generator","Streamlit Resume Builder with PDF Export","Project Creator with Local LLM Integration"]}],UD=[{badge:"",title:"FrozenLake Q-Learning Agent",summary:"A simple yet effective reinforcement learning agent that learns to navigate the FrozenLake environment using Q-Learning.",techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("b",{children:"Situation:"})," A simple yet effective reinforcement learning agent was trained to navigate a frozen 4x4 grid and reach the goal while avoiding holes."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Problem:"})," The agent had to learn to balance exploration vs exploitation to successfully solve the FrozenLake environment using the Q-Learning algorithm."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Action:"})," The agent used a Q-table based learning loop to train an optimal policy for navigating the grid and reaching the goal."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Result:"})," The agent successfully learned to reach the goal with near-perfect consistency after training on 20,000 episodes."]}),m.jsxs("p",{children:[m.jsx("b",{children:"What I Learned:"})," How Q-learning works under the hood, the importance of balancing exploration vs exploitation, how to tune hyperparameters for convergence, and visualizing RL performance using reward curves."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Tech Stack:"})," React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/frozenlake-q-learning.git"}]},{badge:"",title:"K-Means Image Compressor",summary:"A Streamlit app that compresses images using K-Means clustering by reducing the number of unique colors. Perfect for visualizing how unsupervised learning works!",techStack:["Streamlit","scikit-learn","PIL","NumPy"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("b",{children:"Situation:"})," A Streamlit app that compresses images using K-Means clustering by reducing the number of unique colors."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Problem:"})," Each pixel is treated as a point in 3D RGB space. K-Means groups pixels into k clusters based on color similarity."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Action:"})," Each pixel is replaced by the centroid color of its cluster. The image is reconstructed with fewer unique colors, reducing file size."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Result:"})," Perfect for visualizing how unsupervised learning works!"]}),m.jsxs("p",{children:[m.jsx("b",{children:"What I Learned:"})," Built with  using Streamlit, scikit-learn, PIL, and NumPy."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Tech Stack:"})," React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/k-means-image-compressor.git"}]},{badge:"",title:"GitHub LinkedIn Post Generator",summary:"Transform your GitHub activity into engaging LinkedIn posts using AI! This Streamlit application fetches your recent GitHub repositories and commits, then uses Ollama (local LLM) to generate professional LinkedIn posts.",techStack:["Python","Ollama"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("b",{children:"Situation:"})," Fetches repositories, commits, and README content"]}),m.jsxs("p",{children:[m.jsx("b",{children:"Problem:"})," Analyze activity within any date range"]}),m.jsxs("p",{children:[m.jsx("b",{children:"Action:"})," Select spotlight vs supporting projects"]}),m.jsxs("p",{children:[m.jsx("b",{children:"Result:"})," Uses Ollama for human-sounding LinkedIn posts"]}),m.jsxs("p",{children:[m.jsx("b",{children:"What I Learned:"})," Includes emojis, highlights, links, and hashtags"]}),m.jsxs("p",{children:[m.jsx("b",{children:"Tech Stack:"})," Python 3.8+, Ollama"]})]}),links:[{label:"GitHub Repository",url:"https://github.com/synamalhan/git-post"}]},{badge:"",title:"FaceTrack - Advanced Facial Recognition Attendance System",summary:"A cutting-edge facial recognition attendance management system combining modern web technologies with AI-powered biometric identification.",techStack:["React","TypeScript","Tailwind CSS","Vite"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("b",{children:"Situation:"})," A need for a reliable and efficient attendance tracking solution."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Problem:"})," Traditional methods of attendance tracking were time-consuming, error-prone, and lacked real-time analytics."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Action:"})," Developed an AI-powered facial recognition attendance management system with a stunning dark purple interface designed for professional environments."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Result:"})," Achieved accurate, real-time attendance tracking, comprehensive reporting, and enhanced employee experience."]}),m.jsxs("p",{children:[m.jsx("b",{children:"What I Learned:"})," New skills in AI-powered biometric identification, TypeScript development, and responsive design."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Tech Stack:"})," React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/facial-attendance"}]},{badge:"",title:"Drag & Drop JSON Editor",summary:"A simple React application for visually editing JSON data using drag-and-drop. Easily rearrange, add, or remove fields in your JSON structure.",techStack:["React","Node.js"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("b",{children:"Situation:"})," A simple React application for visually editing JSON data."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Problem:"})," To provide an intuitive way to create, edit, and manage JSON data."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Action:"})," Built a React app that allows users to drag and drop fields, add or remove fields dynamically, and preview the JSON in real-time."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Result:"})," A user-friendly application for editing JSON data, making it easier for developers to manage their project's configuration files."]}),m.jsxs("p",{children:[m.jsx("b",{children:"What I Learned:"})," React, Node.js, npm"]}),m.jsxs("p",{children:[m.jsx("b",{children:"Tech Stack:"})," React, Node.js, npm"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/drag-drop-json"}]},{badge:" Hackathon Winner ",title:"EduFlex+ Educational Learning Platform",summary:"A modern, AI-powered educational platform that adapts to your emotional state and learning style. Built with React, TypeScript, and integrated with Ollama for local AI processing.",techStack:["React","TypeScript"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("b",{children:"Situation:"})," A modern, AI-powered educational platform."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Problem:"})," None mentioned."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Action:"})," Built with React, TypeScript, and integrated with Ollama for local AI processing."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Result:"})," Adapts to your emotional state and learning style."]}),m.jsxs("p",{children:[m.jsx("b",{children:"What I Learned:"})," New skills or tools not mentioned."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Tech Stack:"})," React, TypeScript, Tailwind CSS, Framer Motion, React Router, Lucide React"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/eduflex-plus"}]},{badge:"",title:"CuraMind - AI-Powered Mental Health Support",summary:"Empathetic, multilingual mental health chatbot that works offline",techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("b",{children:"Situation:"})," Empathetic, multilingual mental health chatbot designed to provide accessible, empathetic mental health assistance to users worldwide."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Problem:"})," Mental health support is expensive and not available 24/7, language barriers exist, offline limitations hinder access, immediate help is needed for crisis situations, and users need to track their emotional wellbeing over time."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Action:"})," Built an innovative mental health support chatbot that works offline, supports multiple languages, and provides empathetic responses tailored to user's emotional state."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Result:"})," Provides accessible, inclusive, and personalized mental health assistance to users worldwide."]}),m.jsxs("p",{children:[m.jsx("b",{children:"What I Learned:"})," New skills in AI/ML, natural language processing, and human-computer interaction."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Tech Stack:"})," React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/curamind"}]},{badge:" Hackathon Winner ",title:"CareSketch",summary:"AI-powered care planning assistant built for social good.",duration:void 0,techStack:["Streamlit","Ollama","Plotly","FPDF/ReportLab","Custom rule-based logic"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  An AI-powered care planning assistant built for social good."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Helps caregivers create personalized, goal-based daily care plans from natural language descriptions, enriched with emotion-aware context, risk detection, interactive scheduling, and exportable summaries."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built during the Hack the Vibe 2025 hackathon, CareSketch focuses on empowering non-technical caregivers to deliver thoughtful, informed, and emotionally supportive care."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  CareSketch generates detailed care plans from simple English descriptions, customizable based on goals (e.g., pain relief, mobility) and emotional state."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  New skills or tools include conversational emotional support, risk detection, interactive timeline, PDF export, and a beautiful UI."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/care-sketch"}]},{badge:" Internship Project ",title:"Text-Optimized Image Generation Model",summary:"Custom-trained diffusion model optimized for rendering clean text in images.",duration:void 0,techStack:["Python","HuggingFace","Diffusers","PyTorch","LoRA","Stable Diffusion"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Most generative models struggle to render readable text, especially for posters, infographics, or form layouts."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Needed a model that could reliably generate images with embedded text (labels, signs, form fields) without visual artifacts."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Fine-tuned a Stable Diffusion model with LoRA on a curated dataset of labeled visuals, including mock forms and text-heavy UI components. Implemented specialized loss functions to prioritize text clarity."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Achieved significantly higher OCR accuracy and visual clarity in generated samples compared to baseline SD models, useful for OCR training data and UI prototyping."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Gained hands-on experience with diffusion model finetuning, LoRA adapters, and domain-specific prompt engineering for visual clarity."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Python, HuggingFace, Diffusers, PyTorch, LoRA, Stable Diffusion"]})]}),links:[]},{badge:" Internship Project ",title:"Credit Risk RAG Model",summary:"RAG-based credit risk assessment system using LangGraph and Neo4j.",duration:void 0,techStack:["Python","Streamlit","Neo4j","LangGraph","Ollama","Pandas"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Financial institutions need contextual credit insights combining structured data and regulatory knowledge."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Traditional ML models lack explainability and fail to incorporate dynamic knowledge like economic updates or policy changes."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built a Retrieval-Augmented Generation (RAG) system using LangGraph for reasoning, Ollama for LLM inference, Neo4j for a knowledge graph of credit rules and relationships, and Streamlit for an interactive UI."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Delivered explainable credit decisions with dynamic reasoning paths and interactive inspection of graph-based factors."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Learned how to design modular RAG workflows using LangGraph, build domain-specific graph schemas in Neo4j, and connect them to LLM pipelines."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Python, Streamlit, Neo4j, LangGraph, Ollama, Pandas"]})]}),links:[]},{badge:"",title:"AI Research Paper Summarizer",summary:"An interactive web app to generate concise summaries of research papers in PDF format using state-of-the-art AI models.",duration:void 0,techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  An interactive web app to generate concise summaries of research papers in PDF format using state-of-the-art AI models."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Extracting full text from large documents for reliable summarization."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Generate abstractive summaries using HuggingFace's BART model and adjustable summary length and chunk size via sidebar controls."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Preview extracted text and generated summary within the app, and download the summary as a plain text file."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Built with Streamlit for a responsive and clean UI."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/research-paper-summarizer"}]},{badge:"",title:"MediHub Platform",summary:"The Future of Medical Education",duration:void 0,techStack:["React","TypeScript","Vite","Tailwind CSS","Zustand","Supabase"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  The MediHub platform is a modern, AI-powered web platform designed for medical students and professionals."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  The platform consolidates patient simulators, adaptive flashcards, research summarization, mnemonics, deadline tracking, and advanced analytics into a single, intelligent system."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built with React, TypeScript, Vite, Tailwind CSS, Zustand, and Supabase, MediHub leverages state-of-the-art AI/ML models and a robust subscription/paywall system to deliver a best-in-class learning experience."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  The platform provides a comprehensive and engaging educational experience for medical professionals and students."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Developed new skills in AI/ML, React, and Supabase."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, TypeScript, Vite, Tailwind CSS, Zustand, Supabase"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/medi-hub.git"}]},{badge:" Internship Project ",title:"Last Point Distribution Analysis",summary:"Optimized dispatch operations with K-means clustering and real-time cost calculations, improving delivery efficiency.",duration:"May 2024  July 2024",techStack:["Python","Streamlit","K-means Clustering","Folium"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  The dispatch team faced inefficient routing and unclear clustering of delivery points."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Poorly defined last-mile delivery zones caused high delivery times and costs."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  I applied K-means clustering to optimize distribution zones, used Folium for geospatial visualizations, and integrated cost calculators in a Streamlit dashboard."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Reduced average delivery path overlap and improved logistical efficiency."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Real-world clustering application, map-based insights using Folium, and integrating business cost metrics with ML pipelines."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Python, Streamlit, K-means, Folium"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/dispatch_optimization_FG_forecasting"}]},{badge:" Internship Project ",title:"Blast Furnace Lab Automation",summary:"Developed a full-stack web portal to automate and streamline lab processes, improving data management and operational efficiency.",duration:"Add project duration here",techStack:["AngularJS","Spring Boot","SQL","Apache Tomcat"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Lab processes in a blast furnace environment were manual and fragmented, causing inefficiencies."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Lack of centralized data management and real-time connectivity across lab operations."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built a comprehensive web portal using AngularJS and Spring Boot, integrated multiple lab workflows, and deployed on scalable cloud platforms."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Improved operational efficiency, centralized data access, and enabled scalable, high-performance lab automation."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Full-stack web development for industrial applications, system integration, scalable backend architecture, and the importance of collaboration and rigorous testing."]})]}),links:void 0},{badge:" Internship Project ",title:"Plate Mill FG Forecasting",summary:"Deployed predictive models to forecast finished goods, improving dispatch planning.",duration:"May 2024  July 2024",techStack:["Python","XGBoost","ARIMA","Prophet","Random Forest"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Forecasting was done manually, leading to inefficiencies."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Dispatch planning lacked accurate predictive backing."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Trained time series models (ARIMA, Prophet) and ensemble methods (XGBoost, RF) to forecast weekly finished goods inventory."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Improved forecast accuracy by 30%, enabling better production scheduling."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Handling seasonality in time series, comparing predictive model performance, and delivering actionable insights for supply chain teams."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Python, XGBoost, ARIMA, Prophet, Random Forest"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/dispatch_optimization_FG_forecasting"}]},{badge:" Hackathon Winner ",title:"CropGenius",summary:"Developed CropGenius to provide 100% accurate crop recommendations using XGBoost and Random Forest.",duration:"July 2024",techStack:["XGBoost","Random Forest","Streamlit","Weather API"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Farmers needed region-specific crop recommendations based on soil and weather data."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Traditional recommendation systems lacked accuracy and context."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Trained ML models using agri-datasets and weather API data, deployed via Streamlit app."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Achieved 100% recommendation accuracy on validation datasets and real use cases."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  API integration in ML apps, agriculture-specific ML pipelines, and building explainable UIs for domain experts."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  XGBoost, Random Forest, Streamlit, Weather API"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/ai-crop-optimizer"},{label:"Demo",url:"https://youtu.be/030IplDlcBU"}]},{badge:"",title:"NutriSnap Food Nutrition Database",summary:"A simple and structured database mapping common food items to their average macronutrient values per 100 grams, designed to work with object detection outputs from a custom-trained YOLOv8 model that recognizes 43 different food classes.",techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("b",{children:"Situation:"})," This repository contains `food_db.csv`, a simple and structured database mapping common food items to their average macronutrient values per 100 grams."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Problem:"})," It is designed to work with object detection outputs from a custom-trained YOLOv8 model that recognizes 43 different food classes."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Action:"})," The database contains the following columns: `name`, `calories`, `protein`, `carbs`, and `fat`."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Result:"})," This allows for enrichment of YOLO detection results with nutritional values in the NutriSnap app."]}),m.jsxs("p",{children:[m.jsx("b",{children:"What I Learned:"})," New skills or tools learned during this project include training a custom YOLOv8 model using Ultralytics and evaluating precision, recall, and mAP."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Tech Stack:"})," React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/nutri-snap"},{label:"Colab Notebook",url:"https://colab.research.google.com/drive/1Y5GDv7qWGL0madaaDbmPs7X2Bj17yo0x?usp=sharing"}]},{badge:" Internship Project ",title:"Slab Sizing",summary:"Optimized computer vision algorithms using YOLO, increasing measurement accuracy by 80%.",duration:"June 2024  Aug 2024",techStack:["Ultralytics","YOLO","Python","FastSAM"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Manual measurement of steel slabs was time-consuming and inconsistent."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Automated image-based sizing models lacked precision under different lighting and angle conditions."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Fine-tuned YOLO and FastSAM models for precise object detection, ran benchmarking tests across multiple conditions."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Boosted measurement accuracy by 80% and reduced time-to-insight drastically."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Real-world edge cases in CV, model fine-tuning and dataset augmentation techniques for YOLO pipelines."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  YOLO, Ultralytics, Python, FastSAM"]})]}),links:void 0},{badge:"",title:"Options Pricing and Risk Assessment Tool",summary:"Developed financial tool to calculate option pricing using Monte Carlo simulations and Black-Scholes.",duration:"Dec 2024",techStack:["Python","Streamlit","Monte Carlo","Black-Scholes"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Finance students and analysts needed a simulation-based learning and risk evaluation tool."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Existing tools were either non-interactive or lacked risk measures."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built a Streamlit dashboard to price options using Monte Carlo & Black-Scholes, added VaR/ES risk metrics."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Helped users visualize pricing dynamics and perform scenario-based risk analysis."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Applied quantitative finance concepts programmatically and learned to simplify financial modeling for UI/UX."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Python, Monte Carlo, Black-Scholes, Streamlit"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/option-pricing.git"},{label:"Demo",url:"https://youtu.be/HZKh0vNGbHU"}]},{badge:"",title:"Wildlife Monitoring and Conservation",summary:"Automated detection and monitoring of wildlife using YOLO/Faster R-CNN and SAM/FastSAM for segmentation.",duration:"Dec 2024",techStack:["YOLO","Faster R-CNN","SAM","FastSAM","Python"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Manual tracking of endangered species was inefficient and prone to error."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Needed automated monitoring using satellite and camera trap imagery."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Used YOLO/Faster R-CNN for detection, SAM-based models for segmentation, integrated with movement analysis system."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Enabled 24/7 monitoring of remote wildlife zones with over 92% accuracy."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Model ensemble in CV tasks, wildlife-specific edge cases, importance of scalable ecological solutions."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  YOLO, Faster R-CNN, SAM, FastSAM, Python"]})]}),links:void 0},{badge:"",title:"Medical Image Analysis for Early Brain Tumor Detection",summary:"Developed CNN model to detect anomalies in medical images (Brain Tumor) using U-Net for segmentation.",duration:"Jan 2025",techStack:["TensorFlow","Keras","U-Net","ResNet","VGG"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Early detection of tumors and fractures in radiology scans was inconsistent."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  High false negatives in automated diagnosis models."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Trained U-Net for segmentation and ResNet/VGG for classification on MRI and X-ray datasets."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Reduced false negative rate by 35% while maintaining over 90% precision."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Importance of segmentation before classification, medical data preprocessing challenges, and evaluation techniques."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  TensorFlow, Keras, U-Net, ResNet, VGG"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/brain-tumor-cnn.git"}]},{badge:"",title:"Portfolio Analyzer and Stock Prediction Dashboard",summary:"Streamlit app for portfolio management with real-time tracking and ML-driven stock price predictions.",duration:"Dec 2024",techStack:["Python","Streamlit","Random Forest","LSTM","Plotly"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Investors wanted a tool that combined analytics with price forecasting."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Most dashboards lacked predictive capability or usable UI."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built frontend in Streamlit, backend with LSTM/Random Forest models and integrated real-time stock APIs and financial metrics."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Delivered daily insights and forecasts with 87% accuracy."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  End-to-end dashboarding, combining ML forecasts with financial KPIs, user-focused design."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Python, Streamlit, LSTM, Random Forest, Plotly"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/stock_pred.git"},{label:"Demo",url:"https://youtu.be/BNgE11T8JC0"}]},{badge:" Internship Project ",title:"OCR Training",summary:"Trained custom OCR models, improving recognition accuracy with Donut model fine-tuning.",duration:"July 2024  Aug 2024",techStack:["Python","Donut Model","AWS OCR","Azure OCR"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Existing OCR tools were failing on industry-specific formats like log sheets."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Poor recognition accuracy of critical text fields and symbols."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Fine-tuned the Donut transformer-based OCR model, and benchmarked against AWS/Azure OCR APIs."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Increased accuracy by over 25% on key form fields."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Custom transformer model training, OCR-specific metrics, and evaluation of commercial APIs."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Python, Donut Model, AWS OCR, Azure OCR"]})]}),links:void 0},{badge:"",title:"Emotion Detection from Images",summary:"Built emotion detection app using Hugging Face RoBERTa model with real-time Streamlit visualization.",duration:"Dec 2024",techStack:["Hugging Face","RoBERTa","Streamlit","Python"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Needed a real-time tool to detect and quantify user sentiment during feedback collection."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Emotion detection models lacked real-time interactivity and multi-modal feedback."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Used RoBERTa for text emotion classification, added image-based emotion scoring, and built an interactive dashboard in Streamlit."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Enabled real-time analysis of user mood and engagement from live sessions."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Multi-modal analysis, transformer-based NLP, UX design for real-time interaction."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Hugging Face, RoBERTa, Python, Streamlit"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/emotion-detect.git"},{label:"Demo",url:"https://youtu.be/bKAJgkphZus?si=04CCDq-yPc_1qBbv"}]},{badge:"",title:"AI-Powered Symptom Checker",summary:"An interactive, AI-enhanced health tool that allows users to input symptoms and receive potential condition predictions, care advice, and real-time guidance through an integrated chatbot powered by Ollama.",techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("b",{children:"Situation:"})," An interactive, AI-enhanced health tool that allows users to input symptoms and receive potential condition predictions, care advice, and real-time guidance through an integrated chatbot powered by Ollama."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Problem:"})," Users can't easily get accurate symptom-based condition predictions without consulting a doctor."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Action:"})," Built an interactive, AI-enhanced health tool that allows users to input symptoms and receive potential condition predictions, care advice, and real-time guidance through an integrated chatbot powered by Ollama."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Result:"})," Users can get accurate symptom-based condition predictions without consulting a doctor."]}),m.jsxs("p",{children:[m.jsx("b",{children:"What I Learned:"})," New skills or tools used."]}),m.jsxs("p",{children:[m.jsx("b",{children:"Tech Stack:"})," React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/symptom-checker"}]},{badge:"",title:"Front-end Portal",summary:"Built a React portal with reusable components, dynamic filters, and video previews, integrated with REST APIs and deployed on AWS Amplify.",duration:"Add duration here",techStack:["React","AWS Amplify","REST API","JavaScript","CSS"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Needed a scalable portal with rich UX features for data display and video previews."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Existing solutions lacked dynamic filtering and efficient video integration."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Developed custom React components, integrated multiple REST endpoints, and deployed on AWS Amplify."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Improved user engagement with dynamic data visualization and faster video access."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Advanced React component design, API integration, and AWS Amplify deployment."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, AWS Amplify, REST API"]})]}),links:void 0},{badge:"",title:"Specialized Chatbot",summary:"Created a React-based chatbot integrated with AWS Amplify and Cognito, with admin flow for DB management and analytics.",duration:"Add duration here",techStack:["React","AWS Amplify","AWS Cognito","AWS Chatbot"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Needed an intelligent chatbot for customer interaction with admin controls."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Lack of easy admin interface to manage chatbot data and monitor usage analytics."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built chatbot frontend with React and AWS Amplify, implemented Cognito authentication, and created admin flows."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Enabled seamless user-chatbot interaction and real-time analytics monitoring."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  AWS Amplify authentication, chatbot integration, and admin dashboard design."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, AWS Amplify, AWS Cognito"]})]}),links:void 0},{badge:"",title:"Chatbot Referral Agent",summary:"Developed a referral chatbot in React with AWS Amplify and Cognito, including an admin portal for referral and data management.",duration:"Add duration here",techStack:["React","AWS Amplify","AWS Cognito","AWS Chatbot"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Needed a chatbot for referral collection and tracking."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  No scalable solution for referral data management and analytics."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built React chatbot with Cognito authentication, created admin portal for referral tracking and analytics."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Streamlined referral process with secure data handling and insight generation."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Integration of authentication, chatbot UI, and backend analytics."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, AWS Amplify, AWS Cognito"]})]}),links:void 0},{badge:"",title:"GitHub LinkedIn Post Generator",summary:"Transform your GitHub activity into engaging LinkedIn posts using AI! This Streamlit application fetches your recent GitHub repositories and commits, then uses Ollama (local LLM) to generate professional LinkedIn posts.",techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("b",{children:"Situation:"})," Fetches repositories, commits, and README content"]}),m.jsxs("p",{children:[m.jsx("b",{children:"Problem:"})," Analyze activity within any date range"]}),m.jsxs("p",{children:[m.jsx("b",{children:"Action:"})," Select spotlight vs supporting projects"]}),m.jsxs("p",{children:[m.jsx("b",{children:"Result:"})," Uses Ollama for human-sounding LinkedIn posts"]}),m.jsxs("p",{children:[m.jsx("b",{children:"What I Learned:"})," Includes emojis, highlights, links, and hashtags"]}),m.jsxs("p",{children:[m.jsx("b",{children:"Tech Stack:"})," React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/git-post"}]},{badge:"",title:"Content Censoring Solution",summary:"Implemented NLP-based content filtering for text, audio, and video using speech-to-text and Python backend for automated moderation.",duration:"Add duration here",techStack:["Python","NLP","Speech-to-Text APIs","Flask/Django"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Needed to automatically moderate user-generated content across multiple media types."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Manual moderation was slow and inconsistent."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Developed backend with speech-to-text for audio/video, text NLP filters, and customizable rules."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Enabled scalable, consistent content moderation with configurable censoring."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  NLP techniques, audio processing, and building flexible moderation pipelines."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Python, NLP, Speech-to-Text APIs"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/PratGit1606/WhatTheBleep-AutomaticCensor.git"}]},{badge:"",title:"Portfolio Performance Analyzer",summary:"Built a Streamlit app to input, validate, and visualize stock portfolios with risk-return plots and sector allocation.",duration:"Add duration here",techStack:["Python","Streamlit","yFinance API","Plotly"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Investors needed a simple tool for portfolio performance visualization."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Lack of interactive, easy-to-use portfolio analysis tools."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Developed Streamlit dashboard with CSV/manual input, integrated yFinance, and interactive Plotly charts."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Improved user insights into portfolio risk, returns, and sector exposures."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  API integration, interactive visualization, and Streamlit app deployment."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Python, Streamlit, yFinance, Plotly"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/portfolio_analyzer"}]},{badge:"",title:"Customer Segmentation via K-Means",summary:"Applied K-Means clustering on mall customer data to identify marketing segments, visualized clusters with Matplotlib and Plotly.",duration:"Add duration here",techStack:["Python","K-Means Clustering","Matplotlib","Seaborn","Plotly"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Marketing team needed to segment customers for targeted campaigns."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Existing segmentation was manual and imprecise."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Used K-Means clustering, elbow method for optimal clusters, and generated cluster visualizations."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Enhanced targeted marketing strategies and campaign ROI."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Clustering algorithms, cluster evaluation methods, and visualization best practices."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Python, K-Means, Matplotlib, Seaborn, Plotly"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/customer-segmentation"}]},{badge:"",title:"Portfolio Optimizer with ESG Integration",summary:"Created a Streamlit app for portfolio optimization under ESG score constraints with interactive visualizations and modern portfolio theory.",duration:"Add duration here",techStack:["Python","Streamlit","Pandas","NumPy","ESG Data"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Investors wanted to optimize portfolios balancing financial returns and ESG scores."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  No simple tools to incorporate ESG constraints in portfolio optimization."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Developed an app to input portfolios, fetch historical data, optimize using mean-variance, and visualize results."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Enabled sustainable investing with quantified risk-return tradeoffs."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Portfolio theory application, ESG data integration, and UI for complex financial modeling."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Python, Streamlit, Pandas, NumPy"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/esg-score-optimizer.git"}]},{badge:"",title:"Personal Portfolio Website",summary:"Designed and developed a responsive portfolio website to showcase my projects, skills, and creative identity.",duration:"March 2025  April 2025",techStack:["React","Lottie","JavaScript","GitHub Pages","CSS Modules"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  I needed a centralized, professional platform to present my projects, background, and technical capabilities in a personalized and interactive way."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Traditional resumes and static sites felt too limiting for conveying creativity, technical depth, and dynamic content."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built a fully responsive React-based website, integrated Lottie animations for interactive visuals, and deployed via GitHub Pages for easy public access."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Created a dynamic, engaging online presence that reflects both my personality and skillset, while making it easy for collaborators and recruiters to explore my work."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Component-based UI design, animation integration using Lottie, cross-device responsiveness, and deploying React apps on static hosting platforms like GitHub Pages."]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/website.git"},{label:"Live demo",url:"https://synamalhan.github.io/website/"}]},{badge:"",title:"Gamify Life  Productivity To-Do App",summary:"Built a personal productivity tracker with a reward system to gamify daily tasks and monitor indulgences.",duration:"February 2025  March 2025",techStack:["Python","Streamlit","Supabase","PostgreSQL"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  I wanted a simple yet motivating way to track my productivity, habits, and indulgences without relying on generic apps."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Existing to-do list apps lacked personalization and reward systems tailored to my daily routines and goals."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Developed a lightweight Streamlit app backed by Supabase to manage tasks and assign reward points based on task completion, penalties for indulgences, and daily summaries."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Improved self-awareness and task consistency through a personalized, gamified approach to productivity tracking."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Backend integration using Supabase, state management in Streamlit, user interface design for utility-focused apps, and balancing personal goals with behavioral feedback systems."]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/gamify-life.git"},{label:"Live demo",url:"https://youtu.be/yQi9CLcjFig"}]},{badge:"",title:"Project Creator with Local LLM Integration",summary:"Automates the creation of formatted project entries for a portfolio website, using a local language model to generate summaries in JSX format.",duration:void 0,techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  This is a personal learning project designed to automate the creation of formatted project entries for a portfolio website."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  The tool uses a free local LLM (via Ollama or similar) for generating project summaries in a consistent JSX format, ensuring minimal manual formatting required."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Given a project README or description text, the tool takes raw input and exports the generated project entry ready to be added into a React projects array."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  The result is a well-structured project object that can be directly appended to a React/JSX projects list, maintaining personal portfolio project lists with minimal manual formatting."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  New skills or tools learned through this project include integrating local LLMs for generating summaries in JSX format."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/project-formatter.git"}]},{badge:"",title:"US Census Data Project",summary:"Analyzing and visualizing data from the US Census to provide insights into demographic, economic, and geographic trends across the United States.",duration:void 0,techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  This project is focused on analyzing and visualizing data from the US Census."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  To provide insights into demographic, economic, and geographic trends across the United States."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Data collection and preprocessing, exploratory data analysis, interactive visualizations, and customizable reports were built to achieve this goal."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  The project provides valuable insights into demographic, economic, and geographic trends across the United States."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  New skills and tools were acquired through this project."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"})," Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/us-census-stats"}]},{badge:"",title:"The Untold Legacy of Bayard Rustin",summary:"A digital tribute to one of the most influential yet overlooked figures in the American civil rights movement.",duration:void 0,techStack:["React","Javacript","Vercel","Tailwind CSS"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Hackathon focused on exploring and celebrating history."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Highlighting lesser-known figures who have made significant contributions to society."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Created a digital tribute to Bayard Rustin, an unsung hero of the civil rights movement."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Shed light on the importance of recognizing all voices in history, especially those who have been marginalized."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  New skills and tools gained through using React for a dynamic and interactive user experience, Tailwind CSS for rapid and responsive design, and JavaScript (ES6+) for logic and interactivity."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, Javascript"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/hackstory.git"}]},{badge:"",title:"Finance Helper",summary:"A personal project designed to simplify and automate common financial tasks.",duration:void 0,techStack:["Streamlit","Python","LLM","FRED API"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Many people struggle to keep track of their spending and savings."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Manual financial management can be challenging."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Finance Helper provides an easy-to-use tool to automate expense tracking, budget management, and financial analytics."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Empowering users to make informed financial decisions and achieve their financial goals."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Created a project for a new demographic"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Streamlit, Python, LLM, FRED API"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/finance-assist"}]},{badge:"",title:"Career Pilot",summary:"A personal project designed to help users navigate and manage their career growth, job applications, and professional development.",duration:void 0,techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  As a professional looking to advance in my career, I wanted to create a tool that helps me stay organized and focused."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Managing job applications, setting career goals, and keeping track of progress can be overwhelming without a centralized system."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  I built Career Pilot, a web application that allows users to track job applications and interviews, set career goals and milestones, organize professional documents and notes, and visualize progress with charts and timelines."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  With Career Pilot, users can gain clarity on their career path, streamline their job search process, and make data-driven decisions for future growth."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  I learned about the importance of user-centered design, the value of project management tools, and the power of data visualization in helping professionals achieve their goals."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/career-pilot"}]},{badge:"",title:"Haunted Escape Room (React)",summary:"A silly little horror escape room game built with React  full of creaky doors, creepy riddles, and a time limit thatll trap you forever... or at least until you refresh.",duration:void 0,techStack:["React","CSS","MP3 sound effects","Local images"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Youre trapped in a haunted house and must solve a series of eerie puzzles before time runs out."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  If you guess wrong, the ghosts get louder. If you guess right, the door creaks open and you move on."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Finish all rooms to escape... or join the spirits."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  A final You Escaped! screen"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Just a fun project to pass time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, CSS, MP3 sound effects, Local images"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/escape-room"}]},{badge:"",title:"The Ten Dollar Founding Father Without a Father",summary:"An agentic Retrieval-Augmented Generation (RAG) system built for fun, using the characters from Hamilton: The Musical as its knowledge base.",duration:void 0,techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  This project is an agentic Retrieval-Augmented Generation (RAG) system built for fun, using the characters from *Hamilton: The Musical* as its knowledge base."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  None specified"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built using Neo4j Database, Streamlit, Ollama, and LangGraph."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Provided an interactive web interface for agentic workflows and RAG pipelines."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  New skills or tools not specified"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/the-ten-dollar-founding-father-without-a-father-got-a-lot-further-by-working-a-lot-harder.git"}]},{badge:"",title:"MindScape  Your Personalized Wellness Companion",summary:"A full-stack AI-powered wellness journal built by students, for students. It uses sentiment analysis and local LLMs (via Ollama) to suggest personalized, mindful actions to help you navigate your emotional landscape.",duration:void 0,techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Students built a full-stack AI-powered wellness journal."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  To provide students with a personalized wellness companion that utilizes sentiment analysis and local LLMs to suggest mindful actions."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built a full-stack AI-powered wellness journal using React for the frontend, FastAPI for the backend, HuggingFace Transformers for sentiment detection, Ollama + Mistral LLM for agentic suggestions, and Python for overall development."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  A personalized wellness companion that suggests mindful actions based on user entries and sentiments."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  New skills in React, FastAPI, HuggingFace Transformers, Ollama + Mistral LLM, and Python."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/mind-scape"}]},{badge:"",title:"Wellness Journal",summary:"A simple and colorful iOS app to track your daily mood and thoughts.",duration:void 0,techStack:["SwiftUI","Xcode"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Built with SwiftUI, this app helps you journal your feelings easily and keep past entries organized."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  None specified"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Allows users to select their mood using emoji buttons, write notes in a clean text editor, save entries locally on the device, view past entries in a colorful list, and more."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Users can easily track their daily moods and thoughts, with features like responsive UI and customizable colors."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Not specified"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  SwiftUI, Xcode"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/wellness-journal-ios.git"}]},{badge:"",title:"TapFast  A Rapid Tapping Game for Apple Watch",summary:"A lightweight, fast-paced tapping game designed for watchOS. The goal is simple: tap the circle as many times as you can in 5 seconds. It's a fun way to test your reaction speed and challenge your friends  right from your wrist!",duration:void 0,techStack:["SwiftUI","WatchKit","Xcode 15+"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  A rapid tapping game designed for watchOS."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  None mentioned."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built with SwiftUI, WatchKit, and Xcode 15+."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  A fun way to test your reaction speed and challenge your friends  right from your wrist!"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Building a watchOS game using SwiftUI and WatchKit."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  SwiftUI, WatchKit, Xcode 15+"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/tap-fast-watch-OS.git"}]},{badge:"",title:"Mental Health Bridge",summary:"A Streamlit app to help simulate and improve sensitive conversations about mental health between children and their parents.",duration:void 0,techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Many parents and children struggle to talk about mental health due to generational gaps, emotional barriers, and different communication styles."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  This tool helps you practice, prepare, and improve those difficult conversations with empathy and realism."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Uses Ollama to run the Mistral model locally, providing real-time responses powered by a prompt-based interaction with the model."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Enhances emotional understanding using AI."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  New skills or tools include fine-tuning the simulated behavior using sensitivity level, common reactions, and preferred tone."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/mental-bridge"}]},{badge:"",title:"Streamlit Resume Builder with PDF Export",summary:"A clean, no-fuss interface to build, edit, organize, and export your resume without the hassle of formatting issues or clunky document editors.",duration:void 0,techStack:["Streamlit","fpdf","streamlit-pdf-viewer","Python"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  A clean, no-fuss interface to build, edit, organize, and export your resume without the hassle of formatting issues or clunky document editors."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  I always dreaded the process of updating my resume  messing with formatting, spacing, ordering, and layout in Word or LaTeX."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  This app was built as a better way to manage resume content: No worrying about line breaks or alignment. Just enter your details, adjust order, and export a clean, professional PDF. Update JSON once and reuse forever."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  A simple, intuitive interface that makes updating your resume a breeze!"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  The importance of streamlining the resume-building process and providing users with a seamless experience."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Streamlit, fpdf, streamlit-pdf-viewer, Python"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/resume-formatter"}]},{badge:"",title:"Ocean Pollution Tracker",summary:"A project aimed at monitoring, visualizing, and raising awareness about pollution in the world's oceans.",duration:void 0,techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  The ocean is facing a significant problem due to human activities."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Pollution in the ocean has severe impacts on marine life, ecosystems, and ultimately, our planet."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  This project collects, analyzes, and displays data related to various types of ocean pollutants, helping users understand the impact and distribution of pollution globally."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  The application provides interactive maps, analytics dashboards, and educational resources to raise awareness and promote action against ocean pollution."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  This project taught me about data collection, API integration, and the importance of visualization in understanding complex environmental issues."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/ocean-pollution-tracker"}]},{badge:"",title:"NeuroTrack",summary:"A SwiftUI-based cognitive training app that helps users improve their memory and focus through a fun memory-matching game, integrating with Apple HealthKit to log mindful sessions and track cognitive activity over time.",duration:void 0,techStack:["Swift","SwiftUI","HealthKit","Xcode"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  A cognitive training app that helps users improve their memory and focus."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Users were struggling to find engaging and effective brain-training tools."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built a SwiftUI-based app with interactive memory match games, HealthKit integration for logging mindfulness sessions, and adaptive game logic with score tracking."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Users can track their cognitive activity over time, improving focus and memory skills."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Developed expertise in SwiftUI, HealthKit, and Xcode."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/neurotrack"}]},{badge:"",title:"PulseGuardian: Real-Time Stress Monitor",summary:"Heart rate variability-based stress detection app for Apple Watch and iPhone.",duration:void 0,techStack:["Swift","WatchKit","HealthKit","SwiftUI"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  With rising stress levels and wearable health tech adoption, I aimed to build a real-time stress monitoring solution."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Users lacked an accessible, continuous method to detect stress and respond with guided relief strategies."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built a watchOS and iOS app that used HealthKit to monitor HRV, detected stress patterns, and sent alerts to trigger guided breathing sessions."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Enabled seamless Watch-to-iPhone communication with a 92% stress detection accuracy during tests, and real-time biometric feedback for users."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Deepened experience with HealthKit, WatchConnectivity, and building real-time, cross-device Apple health solutions."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Swift, WatchKit, HealthKit, SwiftUI"]})]}),links:[]},{badge:"",title:"MoodSync: Voice Journal with Emotion Detection",summary:"Voice journaling app with CoreML-powered emotion detection and mood tracking.",duration:void 0,techStack:["Swift","CoreML","AVFoundation","Speech"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Emotional wellness journaling apps often lack natural input methods and intelligent mood analysis."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Users found traditional journaling tedious and emotion tracking inconsistent or non-personalized."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built an iOS app that uses AVFoundation for voice recording, Speech framework for transcription, and CoreML for sentiment classification."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Delivered a hands-free journaling experience with auto-tagged moods and visual emotional trends over time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Gained practical knowledge in CoreML integration, audio preprocessing, and user-friendly visualization of emotion data."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Swift, CoreML, AVFoundation, Speech"]})]}),links:[]},{badge:"",title:"LensOCR: AI-Enhanced Document Scanner",summary:"iOS document scanner with real-time OCR and table extraction using Vision.",duration:void 0,techStack:["Swift","Vision","CoreML","UIKit"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  Many mobile scanners fail with non-standard documents like tables or require heavy post-processing."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Needed a lightweight, on-device solution for scanning, correcting, and extracting structured data from physical documents."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built a UIKit-based scanner app using Vision for real-time edge detection and OCR, and CoreML for table structure inference and export formatting."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Achieved high OCR accuracy across varied lighting and angles, with PDF export and table-friendly outputs."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Gained expertise in Apple Vision framework, custom CoreML OCR models, and camera pipeline optimization."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  Swift, Vision, CoreML, UIKit"]})]}),links:[]},{badge:"",title:"AI-Powered Symptom Checker",summary:"Streamlit web app that uses a machine learning model to predict possible diseases based on user-selected symptoms.",duration:void 0,techStack:["React","Python","Flask"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  AI-powered symptom checker for predicting possible diseases."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  Develop a web app that uses machine learning to predict possible diseases based on user-selected symptoms."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  Built a Streamlit web app that integrates a RandomForestClassifier model to suggest top 3 possible conditions with confidence scores, and displays disease descriptions and precautions."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  A functional web app that provides users with a list of symptoms, predicted diseases, and relevant information."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Implemented machine learning in Python using scikit-learn, and learned to integrate it with Streamlit for web application development."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  React, Python, Flask"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/synamalhan/symptom-checker"}]},{badge:"",title:"Solar System Simulation in A-Frame",summary:"Created an interactive 3D solar system model using A-Frame to understand WebXR concepts and entity-component design.",duration:"May 2025",techStack:["HTML","A-Frame","WebGL","Three.js"],details:m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Situation:"}),"  I wanted to explore 3D web development and understand how VR/AR environments are constructed."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Problem:"}),"  I had no prior experience with A-Frame or spatial rendering techniques."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Action:"}),"  I created a model of the solar system where each planet rotates and orbits the sun, mapped textures using A-Frame assets, and adjusted scaling/camera controls for realism."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Result:"}),"  Successfully developed a browser-based simulation that visually represents orbital mechanics and planetary rotation."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"What I Learned:"}),"  Basics of 3D entity hierarchies, texture loading, orbital animation, and component-based architecture in A-Frame."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Tech Stack:"}),"  HTML, A-Frame, WebGL, Three.js"]})]}),links:[{label:"GitHub Repo",url:"https://github.com/yourusername/a-frame-vr.git"}]}];function ND({title:n,titleId:t,...e},s){return xt.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},e),n?xt.createElement("title",{id:t},n):null,xt.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"}))}const OD=xt.forwardRef(ND);function ID({title:n,titleId:t,...e},s){return xt.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},e),n?xt.createElement("title",{id:t},n):null,xt.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const FD=xt.forwardRef(ID);function zD(){const[n,t]=xt.useState({}),[e,s]=xt.useState(null),r=l=>{t(u=>({...u,[l]:!u[l]}))};return m.jsx("section",{id:"projects",className:"py-16 sm:py-20 bg-white",children:m.jsxs("div",{className:"space-y-10 px-4 sm:px-6 lg:px-10",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center text-purple-600",children:"Projects"}),m.jsx("div",{className:"grid gap-8 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:PD.map(l=>{const u=l.projects.map(h=>UD.find(f=>f.title===h)).filter(Boolean);return u.length?m.jsxs("div",{className:"bg-white rounded-xl shadow p-4 transition hover:shadow-md",children:[m.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group mb-2",onClick:()=>r(l.title),children:[n[l.title]?m.jsx(OD,{className:"w-6 h-6 text-purple-600 group-hover:scale-105 transition"}):m.jsx(FD,{className:"w-6 h-6 text-gray-500 group-hover:text-purple-500"}),m.jsx("h3",{className:"text-lg font-semibold",children:l.title})]}),m.jsx(qy,{children:n[l.title]&&m.jsx(ua.div,{className:"mt-4 grid gap-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.4},children:u.map((h,f)=>{const d=e?.title===h.title;return m.jsxs(ua.div,{className:`bg-gray-50 rounded-lg p-4 cursor-pointer transition-all duration-300 ${d?"shadow-xl border border-purple-200":"hover:bg-gray-100"}`,onClick:()=>s(d?null:h),initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:f*.05},children:[m.jsx("h4",{className:"text-md sm:text-lg font-semibold",children:h.title}),m.jsx("p",{className:"text-gray-500 text-sm mt-1",children:h.summary}),m.jsx(qy,{children:d&&m.jsxs(ua.div,{className:"mt-3 text-sm text-gray-700",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[m.jsx("p",{children:h.details}),h.links?.length>0&&m.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:h.links.map((g,x)=>m.jsx("a",{href:g.url,target:"_blank",rel:"noreferrer",className:"text-purple-600 underline hover:text-purple-800",children:g.label},x))})]})})]},f)})})})]},l.title):null})})]})})}const BD=()=>m.jsx("footer",{className:"text-center py-10 text-gray-500 text-sm",id:"contact",children:m.jsxs("p",{children:[" ",new Date().getFullYear()," Syna Malhan. All rights reserved."]})});function Au({children:n}){return m.jsx("div",{className:"w-full max-w-7xl mx-auto mt-8 sm:mt-10 mb-16 sm:mb-20 px-4 sm:px-6 md:px-12",children:m.jsxs("div",{className:"rounded-2xl sm:rounded-3xl shadow-2xl border-[10px] sm:border-[14px] border-gray-300 bg-black/30 backdrop-blur-lg overflow-hidden relative",children:[m.jsxs("div",{className:"absolute top-2 left-4 flex space-x-2 z-10",children:[m.jsx("span",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-red-500"}),m.jsx("span",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-yellow-500"}),m.jsx("span",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-green-500"})]}),m.jsx("div",{className:"bg-white rounded-t-none rounded-b-2xl sm:rounded-b-3xl p-4 sm:p-6 md:p-10",children:n})]})})}const VD="/website/assets/profile-Dv9z6yS4.jpeg",jD="/website/assets/resume-DRaH8Dvp.pdf",HD=()=>m.jsx("section",{className:"relative py-16 sm:py-20 bg-white text-gray-800",id:"about",children:m.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-10 grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-3xl sm:text-4xl font-bold mb-6 text-purple-600",children:"About Me"}),m.jsxs("p",{className:"text-base sm:text-lg leading-relaxed text-gray-700",children:["I'm ",m.jsx("span",{className:"font-semibold text-gray-900",children:"Syna Malhan"}),", a passionate developer and problem-solver driven by curiosity and creativity. With a strong background in ",m.jsx("span",{className:"text-purple-600 font-medium",children:"AI, data science, and full-stack development"}),", I love building intelligent systems that are both functional and beautiful."]}),m.jsx("p",{className:"text-base sm:text-lg leading-relaxed text-gray-700 mt-4",children:"Outside of code, I explore ways to bring ideas to life  through research, hackathons, or passion projects. I believe in building tools that are accessible, empathetic, and human."}),m.jsxs("div",{className:"mt-6 flex items-start gap-2 text-sm text-purple-700 bg-purple-50 px-4 py-3 rounded-lg shadow-sm",children:[m.jsx(yD,{className:"w-5 h-5 text-purple-500 mt-[2px]"}),m.jsxs("p",{children:[m.jsx("strong",{children:"Fun Fact:"})," I like to build Metal Earth models  tiny, intricate 3D puzzles made from laser-cut metal sheets "]})]}),m.jsx("a",{href:jD,download:!0,className:"inline-block mt-6 px-6 py-3 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition",children:"Download My Resume"})]}),m.jsxs("div",{className:"flex flex-col items-center gap-6",children:[m.jsx("div",{className:"w-40 h-40 sm:w-48 sm:h-48 rounded-full overflow-hidden shadow-lg border-4 border-purple-200",children:m.jsx("img",{src:VD,alt:"Syna Malhan",className:"object-cover w-full h-full"})}),m.jsx("div",{className:"w-full max-w-md rounded-lg overflow-hidden shadow-md",children:m.jsx("iframe",{title:"Spotify",src:"https://open.spotify.com/embed/playlist/4Z9i9PdzJUoAsDzeXZZnyy?utm_source=generator",width:"100%",height:"152",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"rounded-xl"})})]})]})});class oc{constructor(t=0,e="Network Error"){this.status=t,this.text=e}}const kD=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,t)=>Promise.resolve(localStorage.setItem(n,t)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},Fn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:kD()},Ag=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},GD=(n,t="https://api.emailjs.com")=>{if(!n)return;const e=Ag(n);Fn.publicKey=e.publicKey,Fn.blockHeadless=e.blockHeadless,Fn.storageProvider=e.storageProvider,Fn.blockList=e.blockList,Fn.limitRate=e.limitRate,Fn.origin=e.origin||t},$b=async(n,t,e={})=>{const s=await fetch(Fn.origin+n,{method:"POST",headers:e,body:t}),r=await s.text(),l=new oc(s.status,r);if(s.ok)return l;throw l},t1=(n,t,e)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e||typeof e!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},WD=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},e1=n=>n.webdriver||!n.languages||n.languages.length===0,n1=()=>new oc(451,"Unavailable For Headless Browser"),XD=(n,t)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},qD=n=>!n.list?.length||!n.watchVariable,YD=(n,t)=>n instanceof FormData?n.get(t):n[t],i1=(n,t)=>{if(qD(n))return!1;XD(n.list,n.watchVariable);const e=YD(t,n.watchVariable);return typeof e!="string"?!1:n.list.includes(e)},s1=()=>new oc(403,"Forbidden"),KD=(n,t)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},ZD=async(n,t,e)=>{const s=Number(await e.get(n)||0);return t-Date.now()+s},a1=async(n,t,e)=>{if(!t.throttle||!e)return!1;KD(t.throttle,t.id);const s=t.id||n;return await ZD(s,t.throttle,e)>0?!0:(await e.set(s,Date.now().toString()),!1)},r1=()=>new oc(429,"Too Many Requests"),QD=async(n,t,e,s)=>{const r=Ag(s),l=r.publicKey||Fn.publicKey,u=r.blockHeadless||Fn.blockHeadless,h=r.storageProvider||Fn.storageProvider,f={...Fn.blockList,...r.blockList},d={...Fn.limitRate,...r.limitRate};return u&&e1(navigator)?Promise.reject(n1()):(t1(l,n,t),WD(e),e&&i1(f,e)?Promise.reject(s1()):await a1(location.pathname,d,h)?Promise.reject(r1()):$b("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:n,template_id:t,template_params:e}),{"Content-type":"application/json"}))},JD=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},$D=n=>typeof n=="string"?document.querySelector(n):n,tL=async(n,t,e,s)=>{const r=Ag(s),l=r.publicKey||Fn.publicKey,u=r.blockHeadless||Fn.blockHeadless,h=Fn.storageProvider||r.storageProvider,f={...Fn.blockList,...r.blockList},d={...Fn.limitRate,...r.limitRate};if(u&&e1(navigator))return Promise.reject(n1());const g=$D(e);t1(l,n,t),JD(g);const x=new FormData(g);return i1(f,x)?Promise.reject(s1()):await a1(location.pathname,d,h)?Promise.reject(r1()):(x.append("lib_version","4.4.1"),x.append("service_id",n),x.append("template_id",t),x.append("user_id",l),$b("/api/v1.0/email/send-form",x))},eL={init:GD,send:QD,sendForm:tL,EmailJSResponseStatus:oc};var o1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sS=tr.createContext&&tr.createContext(o1),nL=["attr","size","title"];function iL(n,t){if(n==null)return{};var e=sL(n,t),s,r;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)s=l[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(e[s]=n[s])}return e}function sL(n,t){if(n==null)return{};var e={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(t.indexOf(s)>=0)continue;e[s]=n[s]}return e}function ph(){return ph=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},ph.apply(this,arguments)}function aS(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,s)}return e}function mh(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?aS(Object(e),!0).forEach(function(s){aL(n,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):aS(Object(e)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(e,s))})}return n}function aL(n,t,e){return t=rL(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function rL(n){var t=oL(n,"string");return typeof t=="symbol"?t:t+""}function oL(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var s=e.call(n,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function l1(n){return n&&n.map((t,e)=>tr.createElement(t.tag,mh({key:e},t.attr),l1(t.child)))}function wg(n){return t=>tr.createElement(lL,ph({attr:mh({},n.attr)},t),l1(n.child))}function lL(n){var t=e=>{var{attr:s,size:r,title:l}=n,u=iL(n,nL),h=r||e.size||"1em",f;return e.className&&(f=e.className),n.className&&(f=(f?f+" ":"")+n.className),tr.createElement("svg",ph({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,s,u,{className:f,style:mh(mh({color:n.color||e.color},e.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&tr.createElement("title",null,l),n.children)};return sS!==void 0?tr.createElement(sS.Consumer,null,e=>t(e)):t(o1)}function cL(n){return wg({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function uL(n){return wg({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function hL(n){return wg({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(n)}const fL=()=>{const n=xt.useRef(),[t,e]=xt.useState(null),s=r=>{r.preventDefault(),eL.sendForm("service_ydj60aw","template_gnu5a3n",n.current,"bKGFBCk4iqiq0wy-u").then(()=>{e("success"),n.current.reset()},()=>{e("error")})};return m.jsx("section",{id:"contact",className:"py-20 bg-[#f7f8f9] text-gray-800",children:m.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-8 text-purple-700",children:"Let's Connect"}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-12 items-start",children:[m.jsxs("form",{ref:n,onSubmit:s,className:"w-full md:w-2/3 space-y-4",children:[m.jsx("input",{type:"text",name:"user_name",placeholder:"Your Name",required:!0,className:"w-full p-3 border border-gray-300 rounded-lg"}),m.jsx("input",{type:"email",name:"user_email",placeholder:"Your Email",required:!0,className:"w-full p-3 border border-gray-300 rounded-lg"}),m.jsx("textarea",{name:"message",rows:"5",placeholder:"Your Message",required:!0,className:"w-full p-3 border border-gray-300 rounded-lg"}),m.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition",children:"Send Message"}),t==="success"&&m.jsx("p",{className:"text-green-600 mt-2",children:"Message sent successfully!"}),t==="error"&&m.jsx("p",{className:"text-red-600 mt-2",children:"Oops! Something went wrong."})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("p",{className:"text-lg font-medium",children:"Reach out:"}),m.jsxs("div",{className:"flex flex-col space-y-3 text-purple-700",children:[m.jsxs("a",{href:"mailto:synamalhan22@gmail.com",className:"flex items-center space-x-2 hover:underline",children:[m.jsx(hL,{})," ",m.jsx("span",{children:"synamalhan22@gmail.com"})]}),m.jsxs("a",{href:"https://linkedin.com/in/synamalhan",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 hover:underline",children:[m.jsx(uL,{})," ",m.jsx("span",{children:"LinkedIn"})]}),m.jsxs("a",{href:"https://github.com/synamalhan",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 hover:underline",children:[m.jsx(cL,{})," ",m.jsx("span",{children:"GitHub"})]})]})]})]})]})})},dL=({sparkColor:n="#fff",sparkSize:t=10,sparkRadius:e=15,sparkCount:s=8,duration:r=400,easing:l="ease-out",extraScale:u=1,children:h})=>{const f=xt.useRef(null),d=xt.useRef([]),g=xt.useRef(null);xt.useEffect(()=>{const _=f.current;if(!_)return;const b=_.parentElement;if(!b)return;let E;const M=()=>{const{width:w,height:A}=b.getBoundingClientRect();(_.width!==w||_.height!==A)&&(_.width=w,_.height=A)},S=()=>{clearTimeout(E),E=setTimeout(M,100)},L=new ResizeObserver(S);return L.observe(b),M(),()=>{L.disconnect(),clearTimeout(E)}},[]);const x=xt.useCallback(_=>{switch(l){case"linear":return _;case"ease-in":return _*_;case"ease-in-out":return _<.5?2*_*_:-1+(4-2*_)*_;default:return _*(2-_)}},[l]);xt.useEffect(()=>{const _=f.current;if(!_)return;const b=_.getContext("2d");let E;const M=S=>{g.current||(g.current=S),b.clearRect(0,0,_.width,_.height),d.current=d.current.filter(L=>{const w=S-L.startTime;if(w>=r)return!1;const A=w/r,N=x(A),O=N*e*u,I=t*(1-N),z=L.x+O*Math.cos(L.angle),U=L.y+O*Math.sin(L.angle),C=L.x+(O+I)*Math.cos(L.angle),j=L.y+(O+I)*Math.sin(L.angle);return b.strokeStyle=n,b.lineWidth=2,b.beginPath(),b.moveTo(z,U),b.lineTo(C,j),b.stroke(),!0}),E=requestAnimationFrame(M)};return E=requestAnimationFrame(M),()=>{cancelAnimationFrame(E)}},[n,t,e,s,r,x,u]);const y=_=>{const b=f.current;if(!b)return;const E=b.getBoundingClientRect(),M=_.clientX-E.left,S=_.clientY-E.top,L=performance.now(),w=Array.from({length:s},(A,N)=>({x:M,y:S,angle:2*Math.PI*N/s,startTime:L}));d.current.push(...w)};return m.jsxs("div",{className:"relative w-full h-full",onClick:y,children:[m.jsx("canvas",{ref:f,className:"w-full h-full block absolute top-0 left-0 z-[999] select-none pointer-events-none"}),h]})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Rg="178",pL=0,rS=1,mL=2,c1=1,gL=2,Ss=3,ma=0,Yn=1,Ms=2,fa=0,ho=1,oS=2,lS=3,cS=4,vL=5,qa=100,xL=101,yL=102,_L=103,SL=104,ML=200,bL=201,EL=202,TL=203,em=204,nm=205,AL=206,wL=207,RL=208,CL=209,DL=210,LL=211,PL=212,UL=213,NL=214,im=0,sm=1,am=2,go=3,rm=4,om=5,lm=6,cm=7,u1=0,OL=1,IL=2,da=0,FL=1,zL=2,BL=3,h1=4,VL=5,jL=6,HL=7,f1=300,vo=301,xo=302,um=303,hm=304,Eh=306,fm=1e3,Qa=1001,dm=1002,pi=1003,kL=1004,wu=1005,ki=1006,$d=1007,Ja=1008,Ki=1009,d1=1010,p1=1011,Zl=1012,Cg=1013,sr=1014,Gi=1015,lc=1016,Dg=1017,Lg=1018,Ql=1020,m1=35902,g1=1021,v1=1022,Ni=1023,Jl=1026,$l=1027,Pg=1028,Ug=1029,x1=1030,Ng=1031,Og=1033,ih=33776,sh=33777,ah=33778,rh=33779,pm=35840,mm=35841,gm=35842,vm=35843,xm=36196,ym=37492,_m=37496,Sm=37808,Mm=37809,bm=37810,Em=37811,Tm=37812,Am=37813,wm=37814,Rm=37815,Cm=37816,Dm=37817,Lm=37818,Pm=37819,Um=37820,Nm=37821,oh=36492,Om=36494,Im=36495,y1=36283,Fm=36284,zm=36285,Bm=36286,GL=3200,WL=3201,_1=0,XL=1,ca="",fi="srgb",yo="srgb-linear",gh="linear",je="srgb",Br=7680,uS=519,qL=512,YL=513,KL=514,S1=515,ZL=516,QL=517,JL=518,$L=519,hS=35044,fS="300 es",bs=2e3,vh=2001;class Eo{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[t]===void 0&&(s[t]=[]),s[t].indexOf(e)===-1&&s[t].push(e)}hasEventListener(t,e){const s=this._listeners;return s===void 0?!1:s[t]!==void 0&&s[t].indexOf(e)!==-1}removeEventListener(t,e){const s=this._listeners;if(s===void 0)return;const r=s[t];if(r!==void 0){const l=r.indexOf(e);l!==-1&&r.splice(l,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const s=e[t.type];if(s!==void 0){t.target=this;const r=s.slice(0);for(let l=0,u=r.length;l<u;l++)r[l].call(this,t);t.target=null}}}const jn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let dS=1234567;const Vl=Math.PI/180,tc=180/Math.PI;function To(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(jn[n&255]+jn[n>>8&255]+jn[n>>16&255]+jn[n>>24&255]+"-"+jn[t&255]+jn[t>>8&255]+"-"+jn[t>>16&15|64]+jn[t>>24&255]+"-"+jn[e&63|128]+jn[e>>8&255]+"-"+jn[e>>16&255]+jn[e>>24&255]+jn[s&255]+jn[s>>8&255]+jn[s>>16&255]+jn[s>>24&255]).toLowerCase()}function ye(n,t,e){return Math.max(t,Math.min(e,n))}function Ig(n,t){return(n%t+t)%t}function tP(n,t,e,s,r){return s+(n-t)*(r-s)/(e-t)}function eP(n,t,e){return n!==t?(e-n)/(t-n):0}function jl(n,t,e){return(1-e)*n+e*t}function nP(n,t,e,s){return jl(n,t,1-Math.exp(-e*s))}function iP(n,t=1){return t-Math.abs(Ig(n,t*2)-t)}function sP(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function aP(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function rP(n,t){return n+Math.floor(Math.random()*(t-n+1))}function oP(n,t){return n+Math.random()*(t-n)}function lP(n){return n*(.5-Math.random())}function cP(n){n!==void 0&&(dS=n);let t=dS+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function uP(n){return n*Vl}function hP(n){return n*tc}function fP(n){return(n&n-1)===0&&n!==0}function dP(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function pP(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function mP(n,t,e,s,r){const l=Math.cos,u=Math.sin,h=l(e/2),f=u(e/2),d=l((t+s)/2),g=u((t+s)/2),x=l((t-s)/2),y=u((t-s)/2),_=l((s-t)/2),b=u((s-t)/2);switch(r){case"XYX":n.set(h*g,f*x,f*y,h*d);break;case"YZY":n.set(f*y,h*g,f*x,h*d);break;case"ZXZ":n.set(f*x,f*y,h*g,h*d);break;case"XZX":n.set(h*g,f*b,f*_,h*d);break;case"YXY":n.set(f*_,h*g,f*b,h*d);break;case"ZYZ":n.set(f*b,f*_,h*g,h*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function io(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Wn(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Vm={DEG2RAD:Vl,RAD2DEG:tc,generateUUID:To,clamp:ye,euclideanModulo:Ig,mapLinear:tP,inverseLerp:eP,lerp:jl,damp:nP,pingpong:iP,smoothstep:sP,smootherstep:aP,randInt:rP,randFloat:oP,randFloatSpread:lP,seededRandom:cP,degToRad:uP,radToDeg:hP,isPowerOfTwo:fP,ceilPowerOfTwo:dP,floorPowerOfTwo:pP,setQuaternionFromProperEuler:mP,normalize:Wn,denormalize:io};class Me{constructor(t=0,e=0){Me.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,s=this.y,r=t.elements;return this.x=r[0]*e+r[3]*s+r[6],this.y=r[1]*e+r[4]*s+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=ye(this.x,t.x,e.x),this.y=ye(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=ye(this.x,t,e),this.y=ye(this.y,t,e),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(ye(s,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const s=this.dot(t)/e;return Math.acos(ye(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,s=this.y-t.y;return e*e+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const s=Math.cos(e),r=Math.sin(e),l=this.x-t.x,u=this.y-t.y;return this.x=l*s-u*r+t.x,this.y=l*r+u*s+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class cc{constructor(t=0,e=0,s=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=s,this._w=r}static slerpFlat(t,e,s,r,l,u,h){let f=s[r+0],d=s[r+1],g=s[r+2],x=s[r+3];const y=l[u+0],_=l[u+1],b=l[u+2],E=l[u+3];if(h===0){t[e+0]=f,t[e+1]=d,t[e+2]=g,t[e+3]=x;return}if(h===1){t[e+0]=y,t[e+1]=_,t[e+2]=b,t[e+3]=E;return}if(x!==E||f!==y||d!==_||g!==b){let M=1-h;const S=f*y+d*_+g*b+x*E,L=S>=0?1:-1,w=1-S*S;if(w>Number.EPSILON){const N=Math.sqrt(w),O=Math.atan2(N,S*L);M=Math.sin(M*O)/N,h=Math.sin(h*O)/N}const A=h*L;if(f=f*M+y*A,d=d*M+_*A,g=g*M+b*A,x=x*M+E*A,M===1-h){const N=1/Math.sqrt(f*f+d*d+g*g+x*x);f*=N,d*=N,g*=N,x*=N}}t[e]=f,t[e+1]=d,t[e+2]=g,t[e+3]=x}static multiplyQuaternionsFlat(t,e,s,r,l,u){const h=s[r],f=s[r+1],d=s[r+2],g=s[r+3],x=l[u],y=l[u+1],_=l[u+2],b=l[u+3];return t[e]=h*b+g*x+f*_-d*y,t[e+1]=f*b+g*y+d*x-h*_,t[e+2]=d*b+g*_+h*y-f*x,t[e+3]=g*b-h*x-f*y-d*_,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,s,r){return this._x=t,this._y=e,this._z=s,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const s=t._x,r=t._y,l=t._z,u=t._order,h=Math.cos,f=Math.sin,d=h(s/2),g=h(r/2),x=h(l/2),y=f(s/2),_=f(r/2),b=f(l/2);switch(u){case"XYZ":this._x=y*g*x+d*_*b,this._y=d*_*x-y*g*b,this._z=d*g*b+y*_*x,this._w=d*g*x-y*_*b;break;case"YXZ":this._x=y*g*x+d*_*b,this._y=d*_*x-y*g*b,this._z=d*g*b-y*_*x,this._w=d*g*x+y*_*b;break;case"ZXY":this._x=y*g*x-d*_*b,this._y=d*_*x+y*g*b,this._z=d*g*b+y*_*x,this._w=d*g*x-y*_*b;break;case"ZYX":this._x=y*g*x-d*_*b,this._y=d*_*x+y*g*b,this._z=d*g*b-y*_*x,this._w=d*g*x+y*_*b;break;case"YZX":this._x=y*g*x+d*_*b,this._y=d*_*x+y*g*b,this._z=d*g*b-y*_*x,this._w=d*g*x-y*_*b;break;case"XZY":this._x=y*g*x-d*_*b,this._y=d*_*x-y*g*b,this._z=d*g*b+y*_*x,this._w=d*g*x+y*_*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const s=e/2,r=Math.sin(s);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,s=e[0],r=e[4],l=e[8],u=e[1],h=e[5],f=e[9],d=e[2],g=e[6],x=e[10],y=s+h+x;if(y>0){const _=.5/Math.sqrt(y+1);this._w=.25/_,this._x=(g-f)*_,this._y=(l-d)*_,this._z=(u-r)*_}else if(s>h&&s>x){const _=2*Math.sqrt(1+s-h-x);this._w=(g-f)/_,this._x=.25*_,this._y=(r+u)/_,this._z=(l+d)/_}else if(h>x){const _=2*Math.sqrt(1+h-s-x);this._w=(l-d)/_,this._x=(r+u)/_,this._y=.25*_,this._z=(f+g)/_}else{const _=2*Math.sqrt(1+x-s-h);this._w=(u-r)/_,this._x=(l+d)/_,this._y=(f+g)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let s=t.dot(e)+1;return s<1e-8?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(ye(this.dot(t),-1,1)))}rotateTowards(t,e){const s=this.angleTo(t);if(s===0)return this;const r=Math.min(1,e/s);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const s=t._x,r=t._y,l=t._z,u=t._w,h=e._x,f=e._y,d=e._z,g=e._w;return this._x=s*g+u*h+r*d-l*f,this._y=r*g+u*f+l*h-s*d,this._z=l*g+u*d+s*f-r*h,this._w=u*g-s*h-r*f-l*d,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const s=this._x,r=this._y,l=this._z,u=this._w;let h=u*t._w+s*t._x+r*t._y+l*t._z;if(h<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,h=-h):this.copy(t),h>=1)return this._w=u,this._x=s,this._y=r,this._z=l,this;const f=1-h*h;if(f<=Number.EPSILON){const _=1-e;return this._w=_*u+e*this._w,this._x=_*s+e*this._x,this._y=_*r+e*this._y,this._z=_*l+e*this._z,this.normalize(),this}const d=Math.sqrt(f),g=Math.atan2(d,h),x=Math.sin((1-e)*g)/d,y=Math.sin(e*g)/d;return this._w=u*x+this._w*y,this._x=s*x+this._x*y,this._y=r*x+this._y*y,this._z=l*x+this._z*y,this._onChangeCallback(),this}slerpQuaternions(t,e,s){return this.copy(t).slerp(e,s)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),s=Math.random(),r=Math.sqrt(1-s),l=Math.sqrt(s);return this.set(r*Math.sin(t),r*Math.cos(t),l*Math.sin(e),l*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Q{constructor(t=0,e=0,s=0){Q.prototype.isVector3=!0,this.x=t,this.y=e,this.z=s}set(t,e,s){return s===void 0&&(s=this.z),this.x=t,this.y=e,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(pS.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(pS.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,s=this.y,r=this.z,l=t.elements;return this.x=l[0]*e+l[3]*s+l[6]*r,this.y=l[1]*e+l[4]*s+l[7]*r,this.z=l[2]*e+l[5]*s+l[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,s=this.y,r=this.z,l=t.elements,u=1/(l[3]*e+l[7]*s+l[11]*r+l[15]);return this.x=(l[0]*e+l[4]*s+l[8]*r+l[12])*u,this.y=(l[1]*e+l[5]*s+l[9]*r+l[13])*u,this.z=(l[2]*e+l[6]*s+l[10]*r+l[14])*u,this}applyQuaternion(t){const e=this.x,s=this.y,r=this.z,l=t.x,u=t.y,h=t.z,f=t.w,d=2*(u*r-h*s),g=2*(h*e-l*r),x=2*(l*s-u*e);return this.x=e+f*d+u*x-h*g,this.y=s+f*g+h*d-l*x,this.z=r+f*x+l*g-u*d,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,s=this.y,r=this.z,l=t.elements;return this.x=l[0]*e+l[4]*s+l[8]*r,this.y=l[1]*e+l[5]*s+l[9]*r,this.z=l[2]*e+l[6]*s+l[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=ye(this.x,t.x,e.x),this.y=ye(this.y,t.y,e.y),this.z=ye(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=ye(this.x,t,e),this.y=ye(this.y,t,e),this.z=ye(this.z,t,e),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(ye(s,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this.z=t.z+(e.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const s=t.x,r=t.y,l=t.z,u=e.x,h=e.y,f=e.z;return this.x=r*f-l*h,this.y=l*u-s*f,this.z=s*h-r*u,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const s=t.dot(this)/e;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return tp.copy(this).projectOnVector(t),this.sub(tp)}reflect(t){return this.sub(tp.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const s=this.dot(t)/e;return Math.acos(ye(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,s=this.y-t.y,r=this.z-t.z;return e*e+s*s+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,s){const r=Math.sin(e)*t;return this.x=r*Math.sin(s),this.y=Math.cos(e)*t,this.z=r*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,s){return this.x=t*Math.sin(e),this.y=s,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=s,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,s=Math.sqrt(1-e*e);return this.x=s*Math.cos(t),this.y=e,this.z=s*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const tp=new Q,pS=new cc;class ue{constructor(t,e,s,r,l,u,h,f,d){ue.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,s,r,l,u,h,f,d)}set(t,e,s,r,l,u,h,f,d){const g=this.elements;return g[0]=t,g[1]=r,g[2]=h,g[3]=e,g[4]=l,g[5]=f,g[6]=s,g[7]=u,g[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],this}extractBasis(t,e,s){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,r=e.elements,l=this.elements,u=s[0],h=s[3],f=s[6],d=s[1],g=s[4],x=s[7],y=s[2],_=s[5],b=s[8],E=r[0],M=r[3],S=r[6],L=r[1],w=r[4],A=r[7],N=r[2],O=r[5],I=r[8];return l[0]=u*E+h*L+f*N,l[3]=u*M+h*w+f*O,l[6]=u*S+h*A+f*I,l[1]=d*E+g*L+x*N,l[4]=d*M+g*w+x*O,l[7]=d*S+g*A+x*I,l[2]=y*E+_*L+b*N,l[5]=y*M+_*w+b*O,l[8]=y*S+_*A+b*I,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[1],r=t[2],l=t[3],u=t[4],h=t[5],f=t[6],d=t[7],g=t[8];return e*u*g-e*h*d-s*l*g+s*h*f+r*l*d-r*u*f}invert(){const t=this.elements,e=t[0],s=t[1],r=t[2],l=t[3],u=t[4],h=t[5],f=t[6],d=t[7],g=t[8],x=g*u-h*d,y=h*f-g*l,_=d*l-u*f,b=e*x+s*y+r*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/b;return t[0]=x*E,t[1]=(r*d-g*s)*E,t[2]=(h*s-r*u)*E,t[3]=y*E,t[4]=(g*e-r*f)*E,t[5]=(r*l-h*e)*E,t[6]=_*E,t[7]=(s*f-d*e)*E,t[8]=(u*e-s*l)*E,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,s,r,l,u,h){const f=Math.cos(l),d=Math.sin(l);return this.set(s*f,s*d,-s*(f*u+d*h)+u+t,-r*d,r*f,-r*(-d*u+f*h)+h+e,0,0,1),this}scale(t,e){return this.premultiply(ep.makeScale(t,e)),this}rotate(t){return this.premultiply(ep.makeRotation(-t)),this}translate(t,e){return this.premultiply(ep.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,s,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,s=t.elements;for(let r=0;r<9;r++)if(e[r]!==s[r])return!1;return!0}fromArray(t,e=0){for(let s=0;s<9;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const ep=new ue;function M1(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function xh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function gP(){const n=xh("canvas");return n.style.display="block",n}const mS={};function fo(n){n in mS||(mS[n]=!0,console.warn(n))}function vP(n,t,e){return new Promise(function(s,r){function l(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(l,e);break;default:s()}}setTimeout(l,e)})}function xP(n){const t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function yP(n){const t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const gS=new ue().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),vS=new ue().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function _P(){const n={enabled:!0,workingColorSpace:yo,spaces:{},convert:function(r,l,u){return this.enabled===!1||l===u||!l||!u||(this.spaces[l].transfer===je&&(r.r=Es(r.r),r.g=Es(r.g),r.b=Es(r.b)),this.spaces[l].primaries!==this.spaces[u].primaries&&(r.applyMatrix3(this.spaces[l].toXYZ),r.applyMatrix3(this.spaces[u].fromXYZ)),this.spaces[u].transfer===je&&(r.r=po(r.r),r.g=po(r.g),r.b=po(r.b))),r},workingToColorSpace:function(r,l){return this.convert(r,this.workingColorSpace,l)},colorSpaceToWorking:function(r,l){return this.convert(r,l,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===ca?gh:this.spaces[r].transfer},getLuminanceCoefficients:function(r,l=this.workingColorSpace){return r.fromArray(this.spaces[l].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,l,u){return r.copy(this.spaces[l].toXYZ).multiply(this.spaces[u].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,l){return fo("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,l)},toWorkingColorSpace:function(r,l){return fo("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,l)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],s=[.3127,.329];return n.define({[yo]:{primaries:t,whitePoint:s,transfer:gh,toXYZ:gS,fromXYZ:vS,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:fi},outputColorSpaceConfig:{drawingBufferColorSpace:fi}},[fi]:{primaries:t,whitePoint:s,transfer:je,toXYZ:gS,fromXYZ:vS,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:fi}}}),n}const De=_P();function Es(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function po(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Vr;class SP{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let s;if(t instanceof HTMLCanvasElement)s=t;else{Vr===void 0&&(Vr=xh("canvas")),Vr.width=t.width,Vr.height=t.height;const r=Vr.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),s=Vr}return s.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=xh("canvas");e.width=t.width,e.height=t.height;const s=e.getContext("2d");s.drawImage(t,0,0,t.width,t.height);const r=s.getImageData(0,0,t.width,t.height),l=r.data;for(let u=0;u<l.length;u++)l[u]=Es(l[u]/255)*255;return s.putImageData(r,0,0),e}else if(t.data){const e=t.data.slice(0);for(let s=0;s<e.length;s++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[s]=Math.floor(Es(e[s]/255)*255):e[s]=Es(e[s]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let MP=0;class Fg{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:MP++}),this.uuid=To(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const s={uuid:this.uuid,url:""},r=this.data;if(r!==null){let l;if(Array.isArray(r)){l=[];for(let u=0,h=r.length;u<h;u++)r[u].isDataTexture?l.push(np(r[u].image)):l.push(np(r[u]))}else l=np(r);s.url=l}return e||(t.images[this.uuid]=s),s}}function np(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?SP.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let bP=0;const ip=new Q;class Kn extends Eo{constructor(t=Kn.DEFAULT_IMAGE,e=Kn.DEFAULT_MAPPING,s=Qa,r=Qa,l=ki,u=Ja,h=Ni,f=Ki,d=Kn.DEFAULT_ANISOTROPY,g=ca){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:bP++}),this.uuid=To(),this.name="",this.source=new Fg(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=s,this.wrapT=r,this.magFilter=l,this.minFilter=u,this.anisotropy=d,this.format=h,this.internalFormat=null,this.type=f,this.offset=new Me(0,0),this.repeat=new Me(1,1),this.center=new Me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ue,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(ip).x}get height(){return this.source.getSize(ip).y}get depth(){return this.source.getSize(ip).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const s=t[e];if(s===void 0){console.warn(`THREE.Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const r=this[e];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${e}' does not exist.`);continue}r&&s&&r.isVector2&&s.isVector2||r&&s&&r.isVector3&&s.isVector3||r&&s&&r.isMatrix3&&s.isMatrix3?r.copy(s):this[e]=s}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const s={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),e||(t.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==f1)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case fm:t.x=t.x-Math.floor(t.x);break;case Qa:t.x=t.x<0?0:1;break;case dm:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case fm:t.y=t.y-Math.floor(t.y);break;case Qa:t.y=t.y<0?0:1;break;case dm:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Kn.DEFAULT_IMAGE=null;Kn.DEFAULT_MAPPING=f1;Kn.DEFAULT_ANISOTROPY=1;class He{constructor(t=0,e=0,s=0,r=1){He.prototype.isVector4=!0,this.x=t,this.y=e,this.z=s,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,s,r){return this.x=t,this.y=e,this.z=s,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,s=this.y,r=this.z,l=this.w,u=t.elements;return this.x=u[0]*e+u[4]*s+u[8]*r+u[12]*l,this.y=u[1]*e+u[5]*s+u[9]*r+u[13]*l,this.z=u[2]*e+u[6]*s+u[10]*r+u[14]*l,this.w=u[3]*e+u[7]*s+u[11]*r+u[15]*l,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,s,r,l;const f=t.elements,d=f[0],g=f[4],x=f[8],y=f[1],_=f[5],b=f[9],E=f[2],M=f[6],S=f[10];if(Math.abs(g-y)<.01&&Math.abs(x-E)<.01&&Math.abs(b-M)<.01){if(Math.abs(g+y)<.1&&Math.abs(x+E)<.1&&Math.abs(b+M)<.1&&Math.abs(d+_+S-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const w=(d+1)/2,A=(_+1)/2,N=(S+1)/2,O=(g+y)/4,I=(x+E)/4,z=(b+M)/4;return w>A&&w>N?w<.01?(s=0,r=.707106781,l=.707106781):(s=Math.sqrt(w),r=O/s,l=I/s):A>N?A<.01?(s=.707106781,r=0,l=.707106781):(r=Math.sqrt(A),s=O/r,l=z/r):N<.01?(s=.707106781,r=.707106781,l=0):(l=Math.sqrt(N),s=I/l,r=z/l),this.set(s,r,l,e),this}let L=Math.sqrt((M-b)*(M-b)+(x-E)*(x-E)+(y-g)*(y-g));return Math.abs(L)<.001&&(L=1),this.x=(M-b)/L,this.y=(x-E)/L,this.z=(y-g)/L,this.w=Math.acos((d+_+S-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=ye(this.x,t.x,e.x),this.y=ye(this.y,t.y,e.y),this.z=ye(this.z,t.z,e.z),this.w=ye(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=ye(this.x,t,e),this.y=ye(this.y,t,e),this.z=ye(this.z,t,e),this.w=ye(this.w,t,e),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(ye(s,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this.z=t.z+(e.z-t.z)*s,this.w=t.w+(e.w-t.w)*s,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class EP extends Eo{constructor(t=1,e=1,s={}){super(),s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ki,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},s),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=s.depth,this.scissor=new He(0,0,t,e),this.scissorTest=!1,this.viewport=new He(0,0,t,e);const r={width:t,height:e,depth:s.depth},l=new Kn(r);this.textures=[];const u=s.count;for(let h=0;h<u;h++)this.textures[h]=l.clone(),this.textures[h].isRenderTargetTexture=!0,this.textures[h].renderTarget=this;this._setTextureOptions(s),this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.resolveDepthBuffer=s.resolveDepthBuffer,this.resolveStencilBuffer=s.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=s.depthTexture,this.samples=s.samples,this.multiview=s.multiview}_setTextureOptions(t={}){const e={minFilter:ki,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let s=0;s<this.textures.length;s++)this.textures[s].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,s=1){if(this.width!==t||this.height!==e||this.depth!==s){this.width=t,this.height=e,this.depth=s;for(let r=0,l=this.textures.length;r<l;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=s,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,s=t.textures.length;e<s;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const r=Object.assign({},t.textures[e].image);this.textures[e].source=new Fg(r)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ar extends EP{constructor(t=1,e=1,s={}){super(t,e,s),this.isWebGLRenderTarget=!0}}class b1 extends Kn{constructor(t=null,e=1,s=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:s,depth:r},this.magFilter=pi,this.minFilter=pi,this.wrapR=Qa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class TP extends Kn{constructor(t=null,e=1,s=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:s,depth:r},this.magFilter=pi,this.minFilter=pi,this.wrapR=Qa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class or{constructor(t=new Q(1/0,1/0,1/0),e=new Q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,s=t.length;e<s;e+=3)this.expandByPoint(Ci.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,s=t.count;e<s;e++)this.expandByPoint(Ci.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,s=t.length;e<s;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const s=Ci.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const s=t.geometry;if(s!==void 0){const l=s.getAttribute("position");if(e===!0&&l!==void 0&&t.isInstancedMesh!==!0)for(let u=0,h=l.count;u<h;u++)t.isMesh===!0?t.getVertexPosition(u,Ci):Ci.fromBufferAttribute(l,u),Ci.applyMatrix4(t.matrixWorld),this.expandByPoint(Ci);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Ru.copy(t.boundingBox)):(s.boundingBox===null&&s.computeBoundingBox(),Ru.copy(s.boundingBox)),Ru.applyMatrix4(t.matrixWorld),this.union(Ru)}const r=t.children;for(let l=0,u=r.length;l<u;l++)this.expandByObject(r[l],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Ci),Ci.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,s;return t.normal.x>0?(e=t.normal.x*this.min.x,s=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,s=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,s+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,s+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,s+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,s+=t.normal.z*this.min.z),e<=-t.constant&&s>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(El),Cu.subVectors(this.max,El),jr.subVectors(t.a,El),Hr.subVectors(t.b,El),kr.subVectors(t.c,El),ta.subVectors(Hr,jr),ea.subVectors(kr,Hr),Ba.subVectors(jr,kr);let e=[0,-ta.z,ta.y,0,-ea.z,ea.y,0,-Ba.z,Ba.y,ta.z,0,-ta.x,ea.z,0,-ea.x,Ba.z,0,-Ba.x,-ta.y,ta.x,0,-ea.y,ea.x,0,-Ba.y,Ba.x,0];return!sp(e,jr,Hr,kr,Cu)||(e=[1,0,0,0,1,0,0,0,1],!sp(e,jr,Hr,kr,Cu))?!1:(Du.crossVectors(ta,ea),e=[Du.x,Du.y,Du.z],sp(e,jr,Hr,kr,Cu))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ci).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Ci).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(gs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),gs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),gs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),gs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),gs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),gs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),gs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),gs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(gs),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const gs=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],Ci=new Q,Ru=new or,jr=new Q,Hr=new Q,kr=new Q,ta=new Q,ea=new Q,Ba=new Q,El=new Q,Cu=new Q,Du=new Q,Va=new Q;function sp(n,t,e,s,r){for(let l=0,u=n.length-3;l<=u;l+=3){Va.fromArray(n,l);const h=r.x*Math.abs(Va.x)+r.y*Math.abs(Va.y)+r.z*Math.abs(Va.z),f=t.dot(Va),d=e.dot(Va),g=s.dot(Va);if(Math.max(-Math.max(f,d,g),Math.min(f,d,g))>h)return!1}return!0}const AP=new or,Tl=new Q,ap=new Q;class uc{constructor(t=new Q,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const s=this.center;e!==void 0?s.copy(e):AP.setFromPoints(t).getCenter(s);let r=0;for(let l=0,u=t.length;l<u;l++)r=Math.max(r,s.distanceToSquared(t[l]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const s=this.center.distanceToSquared(t);return e.copy(t),s>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Tl.subVectors(t,this.center);const e=Tl.lengthSq();if(e>this.radius*this.radius){const s=Math.sqrt(e),r=(s-this.radius)*.5;this.center.addScaledVector(Tl,r/s),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(ap.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Tl.copy(t.center).add(ap)),this.expandByPoint(Tl.copy(t.center).sub(ap))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const vs=new Q,rp=new Q,Lu=new Q,na=new Q,op=new Q,Pu=new Q,lp=new Q;class E1{constructor(t=new Q,e=new Q(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,vs)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const s=e.dot(this.direction);return s<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=vs.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(vs.copy(this.origin).addScaledVector(this.direction,e),vs.distanceToSquared(t))}distanceSqToSegment(t,e,s,r){rp.copy(t).add(e).multiplyScalar(.5),Lu.copy(e).sub(t).normalize(),na.copy(this.origin).sub(rp);const l=t.distanceTo(e)*.5,u=-this.direction.dot(Lu),h=na.dot(this.direction),f=-na.dot(Lu),d=na.lengthSq(),g=Math.abs(1-u*u);let x,y,_,b;if(g>0)if(x=u*f-h,y=u*h-f,b=l*g,x>=0)if(y>=-b)if(y<=b){const E=1/g;x*=E,y*=E,_=x*(x+u*y+2*h)+y*(u*x+y+2*f)+d}else y=l,x=Math.max(0,-(u*y+h)),_=-x*x+y*(y+2*f)+d;else y=-l,x=Math.max(0,-(u*y+h)),_=-x*x+y*(y+2*f)+d;else y<=-b?(x=Math.max(0,-(-u*l+h)),y=x>0?-l:Math.min(Math.max(-l,-f),l),_=-x*x+y*(y+2*f)+d):y<=b?(x=0,y=Math.min(Math.max(-l,-f),l),_=y*(y+2*f)+d):(x=Math.max(0,-(u*l+h)),y=x>0?l:Math.min(Math.max(-l,-f),l),_=-x*x+y*(y+2*f)+d);else y=u>0?-l:l,x=Math.max(0,-(u*y+h)),_=-x*x+y*(y+2*f)+d;return s&&s.copy(this.origin).addScaledVector(this.direction,x),r&&r.copy(rp).addScaledVector(Lu,y),_}intersectSphere(t,e){vs.subVectors(t.center,this.origin);const s=vs.dot(this.direction),r=vs.dot(vs)-s*s,l=t.radius*t.radius;if(r>l)return null;const u=Math.sqrt(l-r),h=s-u,f=s+u;return f<0?null:h<0?this.at(f,e):this.at(h,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const s=-(this.origin.dot(t.normal)+t.constant)/e;return s>=0?s:null}intersectPlane(t,e){const s=this.distanceToPlane(t);return s===null?null:this.at(s,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let s,r,l,u,h,f;const d=1/this.direction.x,g=1/this.direction.y,x=1/this.direction.z,y=this.origin;return d>=0?(s=(t.min.x-y.x)*d,r=(t.max.x-y.x)*d):(s=(t.max.x-y.x)*d,r=(t.min.x-y.x)*d),g>=0?(l=(t.min.y-y.y)*g,u=(t.max.y-y.y)*g):(l=(t.max.y-y.y)*g,u=(t.min.y-y.y)*g),s>u||l>r||((l>s||isNaN(s))&&(s=l),(u<r||isNaN(r))&&(r=u),x>=0?(h=(t.min.z-y.z)*x,f=(t.max.z-y.z)*x):(h=(t.max.z-y.z)*x,f=(t.min.z-y.z)*x),s>f||h>r)||((h>s||s!==s)&&(s=h),(f<r||r!==r)&&(r=f),r<0)?null:this.at(s>=0?s:r,e)}intersectsBox(t){return this.intersectBox(t,vs)!==null}intersectTriangle(t,e,s,r,l){op.subVectors(e,t),Pu.subVectors(s,t),lp.crossVectors(op,Pu);let u=this.direction.dot(lp),h;if(u>0){if(r)return null;h=1}else if(u<0)h=-1,u=-u;else return null;na.subVectors(this.origin,t);const f=h*this.direction.dot(Pu.crossVectors(na,Pu));if(f<0)return null;const d=h*this.direction.dot(op.cross(na));if(d<0||f+d>u)return null;const g=-h*na.dot(lp);return g<0?null:this.at(g/u,l)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class We{constructor(t,e,s,r,l,u,h,f,d,g,x,y,_,b,E,M){We.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,s,r,l,u,h,f,d,g,x,y,_,b,E,M)}set(t,e,s,r,l,u,h,f,d,g,x,y,_,b,E,M){const S=this.elements;return S[0]=t,S[4]=e,S[8]=s,S[12]=r,S[1]=l,S[5]=u,S[9]=h,S[13]=f,S[2]=d,S[6]=g,S[10]=x,S[14]=y,S[3]=_,S[7]=b,S[11]=E,S[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new We().fromArray(this.elements)}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],this}copyPosition(t){const e=this.elements,s=t.elements;return e[12]=s[12],e[13]=s[13],e[14]=s[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,s){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,e,s){return this.set(t.x,e.x,s.x,0,t.y,e.y,s.y,0,t.z,e.z,s.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,s=t.elements,r=1/Gr.setFromMatrixColumn(t,0).length(),l=1/Gr.setFromMatrixColumn(t,1).length(),u=1/Gr.setFromMatrixColumn(t,2).length();return e[0]=s[0]*r,e[1]=s[1]*r,e[2]=s[2]*r,e[3]=0,e[4]=s[4]*l,e[5]=s[5]*l,e[6]=s[6]*l,e[7]=0,e[8]=s[8]*u,e[9]=s[9]*u,e[10]=s[10]*u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,s=t.x,r=t.y,l=t.z,u=Math.cos(s),h=Math.sin(s),f=Math.cos(r),d=Math.sin(r),g=Math.cos(l),x=Math.sin(l);if(t.order==="XYZ"){const y=u*g,_=u*x,b=h*g,E=h*x;e[0]=f*g,e[4]=-f*x,e[8]=d,e[1]=_+b*d,e[5]=y-E*d,e[9]=-h*f,e[2]=E-y*d,e[6]=b+_*d,e[10]=u*f}else if(t.order==="YXZ"){const y=f*g,_=f*x,b=d*g,E=d*x;e[0]=y+E*h,e[4]=b*h-_,e[8]=u*d,e[1]=u*x,e[5]=u*g,e[9]=-h,e[2]=_*h-b,e[6]=E+y*h,e[10]=u*f}else if(t.order==="ZXY"){const y=f*g,_=f*x,b=d*g,E=d*x;e[0]=y-E*h,e[4]=-u*x,e[8]=b+_*h,e[1]=_+b*h,e[5]=u*g,e[9]=E-y*h,e[2]=-u*d,e[6]=h,e[10]=u*f}else if(t.order==="ZYX"){const y=u*g,_=u*x,b=h*g,E=h*x;e[0]=f*g,e[4]=b*d-_,e[8]=y*d+E,e[1]=f*x,e[5]=E*d+y,e[9]=_*d-b,e[2]=-d,e[6]=h*f,e[10]=u*f}else if(t.order==="YZX"){const y=u*f,_=u*d,b=h*f,E=h*d;e[0]=f*g,e[4]=E-y*x,e[8]=b*x+_,e[1]=x,e[5]=u*g,e[9]=-h*g,e[2]=-d*g,e[6]=_*x+b,e[10]=y-E*x}else if(t.order==="XZY"){const y=u*f,_=u*d,b=h*f,E=h*d;e[0]=f*g,e[4]=-x,e[8]=d*g,e[1]=y*x+E,e[5]=u*g,e[9]=_*x-b,e[2]=b*x-_,e[6]=h*g,e[10]=E*x+y}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(wP,t,RP)}lookAt(t,e,s){const r=this.elements;return ui.subVectors(t,e),ui.lengthSq()===0&&(ui.z=1),ui.normalize(),ia.crossVectors(s,ui),ia.lengthSq()===0&&(Math.abs(s.z)===1?ui.x+=1e-4:ui.z+=1e-4,ui.normalize(),ia.crossVectors(s,ui)),ia.normalize(),Uu.crossVectors(ui,ia),r[0]=ia.x,r[4]=Uu.x,r[8]=ui.x,r[1]=ia.y,r[5]=Uu.y,r[9]=ui.y,r[2]=ia.z,r[6]=Uu.z,r[10]=ui.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,r=e.elements,l=this.elements,u=s[0],h=s[4],f=s[8],d=s[12],g=s[1],x=s[5],y=s[9],_=s[13],b=s[2],E=s[6],M=s[10],S=s[14],L=s[3],w=s[7],A=s[11],N=s[15],O=r[0],I=r[4],z=r[8],U=r[12],C=r[1],j=r[5],it=r[9],$=r[13],et=r[2],ut=r[6],V=r[10],G=r[14],q=r[3],yt=r[7],F=r[11],nt=r[15];return l[0]=u*O+h*C+f*et+d*q,l[4]=u*I+h*j+f*ut+d*yt,l[8]=u*z+h*it+f*V+d*F,l[12]=u*U+h*$+f*G+d*nt,l[1]=g*O+x*C+y*et+_*q,l[5]=g*I+x*j+y*ut+_*yt,l[9]=g*z+x*it+y*V+_*F,l[13]=g*U+x*$+y*G+_*nt,l[2]=b*O+E*C+M*et+S*q,l[6]=b*I+E*j+M*ut+S*yt,l[10]=b*z+E*it+M*V+S*F,l[14]=b*U+E*$+M*G+S*nt,l[3]=L*O+w*C+A*et+N*q,l[7]=L*I+w*j+A*ut+N*yt,l[11]=L*z+w*it+A*V+N*F,l[15]=L*U+w*$+A*G+N*nt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[4],r=t[8],l=t[12],u=t[1],h=t[5],f=t[9],d=t[13],g=t[2],x=t[6],y=t[10],_=t[14],b=t[3],E=t[7],M=t[11],S=t[15];return b*(+l*f*x-r*d*x-l*h*y+s*d*y+r*h*_-s*f*_)+E*(+e*f*_-e*d*y+l*u*y-r*u*_+r*d*g-l*f*g)+M*(+e*d*x-e*h*_-l*u*x+s*u*_+l*h*g-s*d*g)+S*(-r*h*g-e*f*x+e*h*y+r*u*x-s*u*y+s*f*g)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,s){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=s),this}invert(){const t=this.elements,e=t[0],s=t[1],r=t[2],l=t[3],u=t[4],h=t[5],f=t[6],d=t[7],g=t[8],x=t[9],y=t[10],_=t[11],b=t[12],E=t[13],M=t[14],S=t[15],L=x*M*d-E*y*d+E*f*_-h*M*_-x*f*S+h*y*S,w=b*y*d-g*M*d-b*f*_+u*M*_+g*f*S-u*y*S,A=g*E*d-b*x*d+b*h*_-u*E*_-g*h*S+u*x*S,N=b*x*f-g*E*f-b*h*y+u*E*y+g*h*M-u*x*M,O=e*L+s*w+r*A+l*N;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/O;return t[0]=L*I,t[1]=(E*y*l-x*M*l-E*r*_+s*M*_+x*r*S-s*y*S)*I,t[2]=(h*M*l-E*f*l+E*r*d-s*M*d-h*r*S+s*f*S)*I,t[3]=(x*f*l-h*y*l-x*r*d+s*y*d+h*r*_-s*f*_)*I,t[4]=w*I,t[5]=(g*M*l-b*y*l+b*r*_-e*M*_-g*r*S+e*y*S)*I,t[6]=(b*f*l-u*M*l-b*r*d+e*M*d+u*r*S-e*f*S)*I,t[7]=(u*y*l-g*f*l+g*r*d-e*y*d-u*r*_+e*f*_)*I,t[8]=A*I,t[9]=(b*x*l-g*E*l-b*s*_+e*E*_+g*s*S-e*x*S)*I,t[10]=(u*E*l-b*h*l+b*s*d-e*E*d-u*s*S+e*h*S)*I,t[11]=(g*h*l-u*x*l-g*s*d+e*x*d+u*s*_-e*h*_)*I,t[12]=N*I,t[13]=(g*E*r-b*x*r+b*s*y-e*E*y-g*s*M+e*x*M)*I,t[14]=(b*h*r-u*E*r-b*s*f+e*E*f+u*s*M-e*h*M)*I,t[15]=(u*x*r-g*h*r+g*s*f-e*x*f-u*s*y+e*h*y)*I,this}scale(t){const e=this.elements,s=t.x,r=t.y,l=t.z;return e[0]*=s,e[4]*=r,e[8]*=l,e[1]*=s,e[5]*=r,e[9]*=l,e[2]*=s,e[6]*=r,e[10]*=l,e[3]*=s,e[7]*=r,e[11]*=l,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,s,r))}makeTranslation(t,e,s){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,s,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const s=Math.cos(e),r=Math.sin(e),l=1-s,u=t.x,h=t.y,f=t.z,d=l*u,g=l*h;return this.set(d*u+s,d*h-r*f,d*f+r*h,0,d*h+r*f,g*h+s,g*f-r*u,0,d*f-r*h,g*f+r*u,l*f*f+s,0,0,0,0,1),this}makeScale(t,e,s){return this.set(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,e,s,r,l,u){return this.set(1,s,l,0,t,1,u,0,e,r,1,0,0,0,0,1),this}compose(t,e,s){const r=this.elements,l=e._x,u=e._y,h=e._z,f=e._w,d=l+l,g=u+u,x=h+h,y=l*d,_=l*g,b=l*x,E=u*g,M=u*x,S=h*x,L=f*d,w=f*g,A=f*x,N=s.x,O=s.y,I=s.z;return r[0]=(1-(E+S))*N,r[1]=(_+A)*N,r[2]=(b-w)*N,r[3]=0,r[4]=(_-A)*O,r[5]=(1-(y+S))*O,r[6]=(M+L)*O,r[7]=0,r[8]=(b+w)*I,r[9]=(M-L)*I,r[10]=(1-(y+E))*I,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,s){const r=this.elements;let l=Gr.set(r[0],r[1],r[2]).length();const u=Gr.set(r[4],r[5],r[6]).length(),h=Gr.set(r[8],r[9],r[10]).length();this.determinant()<0&&(l=-l),t.x=r[12],t.y=r[13],t.z=r[14],Di.copy(this);const d=1/l,g=1/u,x=1/h;return Di.elements[0]*=d,Di.elements[1]*=d,Di.elements[2]*=d,Di.elements[4]*=g,Di.elements[5]*=g,Di.elements[6]*=g,Di.elements[8]*=x,Di.elements[9]*=x,Di.elements[10]*=x,e.setFromRotationMatrix(Di),s.x=l,s.y=u,s.z=h,this}makePerspective(t,e,s,r,l,u,h=bs){const f=this.elements,d=2*l/(e-t),g=2*l/(s-r),x=(e+t)/(e-t),y=(s+r)/(s-r);let _,b;if(h===bs)_=-(u+l)/(u-l),b=-2*u*l/(u-l);else if(h===vh)_=-u/(u-l),b=-u*l/(u-l);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return f[0]=d,f[4]=0,f[8]=x,f[12]=0,f[1]=0,f[5]=g,f[9]=y,f[13]=0,f[2]=0,f[6]=0,f[10]=_,f[14]=b,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(t,e,s,r,l,u,h=bs){const f=this.elements,d=1/(e-t),g=1/(s-r),x=1/(u-l),y=(e+t)*d,_=(s+r)*g;let b,E;if(h===bs)b=(u+l)*x,E=-2*x;else if(h===vh)b=l*x,E=-1*x;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return f[0]=2*d,f[4]=0,f[8]=0,f[12]=-y,f[1]=0,f[5]=2*g,f[9]=0,f[13]=-_,f[2]=0,f[6]=0,f[10]=E,f[14]=-b,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(t){const e=this.elements,s=t.elements;for(let r=0;r<16;r++)if(e[r]!==s[r])return!1;return!0}fromArray(t,e=0){for(let s=0;s<16;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t[e+9]=s[9],t[e+10]=s[10],t[e+11]=s[11],t[e+12]=s[12],t[e+13]=s[13],t[e+14]=s[14],t[e+15]=s[15],t}}const Gr=new Q,Di=new We,wP=new Q(0,0,0),RP=new Q(1,1,1),ia=new Q,Uu=new Q,ui=new Q,xS=new We,yS=new cc;class Zi{constructor(t=0,e=0,s=0,r=Zi.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=s,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,s,r=this._order){return this._x=t,this._y=e,this._z=s,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,s=!0){const r=t.elements,l=r[0],u=r[4],h=r[8],f=r[1],d=r[5],g=r[9],x=r[2],y=r[6],_=r[10];switch(e){case"XYZ":this._y=Math.asin(ye(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-g,_),this._z=Math.atan2(-u,l)):(this._x=Math.atan2(y,d),this._z=0);break;case"YXZ":this._x=Math.asin(-ye(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(h,_),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-x,l),this._z=0);break;case"ZXY":this._x=Math.asin(ye(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-x,_),this._z=Math.atan2(-u,d)):(this._y=0,this._z=Math.atan2(f,l));break;case"ZYX":this._y=Math.asin(-ye(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(y,_),this._z=Math.atan2(f,l)):(this._x=0,this._z=Math.atan2(-u,d));break;case"YZX":this._z=Math.asin(ye(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-g,d),this._y=Math.atan2(-x,l)):(this._x=0,this._y=Math.atan2(h,_));break;case"XZY":this._z=Math.asin(-ye(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(y,d),this._y=Math.atan2(h,l)):(this._x=Math.atan2(-g,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,s===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,s){return xS.makeRotationFromQuaternion(t),this.setFromRotationMatrix(xS,e,s)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return yS.setFromEuler(this),this.setFromQuaternion(yS,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Zi.DEFAULT_ORDER="XYZ";class zg{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let CP=0;const _S=new Q,Wr=new cc,xs=new We,Nu=new Q,Al=new Q,DP=new Q,LP=new cc,SS=new Q(1,0,0),MS=new Q(0,1,0),bS=new Q(0,0,1),ES={type:"added"},PP={type:"removed"},Xr={type:"childadded",child:null},cp={type:"childremoved",child:null};class kn extends Eo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:CP++}),this.uuid=To(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=kn.DEFAULT_UP.clone();const t=new Q,e=new Zi,s=new cc,r=new Q(1,1,1);function l(){s.setFromEuler(e,!1)}function u(){e.setFromQuaternion(s,void 0,!1)}e._onChange(l),s._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new We},normalMatrix:{value:new ue}}),this.matrix=new We,this.matrixWorld=new We,this.matrixAutoUpdate=kn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=kn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new zg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Wr.setFromAxisAngle(t,e),this.quaternion.multiply(Wr),this}rotateOnWorldAxis(t,e){return Wr.setFromAxisAngle(t,e),this.quaternion.premultiply(Wr),this}rotateX(t){return this.rotateOnAxis(SS,t)}rotateY(t){return this.rotateOnAxis(MS,t)}rotateZ(t){return this.rotateOnAxis(bS,t)}translateOnAxis(t,e){return _S.copy(t).applyQuaternion(this.quaternion),this.position.add(_S.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(SS,t)}translateY(t){return this.translateOnAxis(MS,t)}translateZ(t){return this.translateOnAxis(bS,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(xs.copy(this.matrixWorld).invert())}lookAt(t,e,s){t.isVector3?Nu.copy(t):Nu.set(t,e,s);const r=this.parent;this.updateWorldMatrix(!0,!1),Al.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xs.lookAt(Al,Nu,this.up):xs.lookAt(Nu,Al,this.up),this.quaternion.setFromRotationMatrix(xs),r&&(xs.extractRotation(r.matrixWorld),Wr.setFromRotationMatrix(xs),this.quaternion.premultiply(Wr.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(ES),Xr.child=t,this.dispatchEvent(Xr),Xr.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(PP),cp.child=t,this.dispatchEvent(cp),cp.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),xs.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),xs.multiply(t.parent.matrixWorld)),t.applyMatrix4(xs),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(ES),Xr.child=t,this.dispatchEvent(Xr),Xr.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let s=0,r=this.children.length;s<r;s++){const u=this.children[s].getObjectByProperty(t,e);if(u!==void 0)return u}}getObjectsByProperty(t,e,s=[]){this[t]===e&&s.push(this);const r=this.children;for(let l=0,u=r.length;l<u;l++)r[l].getObjectsByProperty(t,e,s);return s}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Al,t,DP),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Al,LP,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let s=0,r=e.length;s<r;s++)e[s].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let s=0,r=e.length;s<r;s++)e[s].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let s=0,r=e.length;s<r;s++)e[s].updateMatrixWorld(t)}updateWorldMatrix(t,e){const s=this.parent;if(t===!0&&s!==null&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const r=this.children;for(let l=0,u=r.length;l<u;l++)r[l].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",s={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(h=>({...h,boundingBox:h.boundingBox?h.boundingBox.toJSON():void 0,boundingSphere:h.boundingSphere?h.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(h=>({...h})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(t),r.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function l(h,f){return h[f.uuid]===void 0&&(h[f.uuid]=f.toJSON(t)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=l(t.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const f=h.shapes;if(Array.isArray(f))for(let d=0,g=f.length;d<g;d++){const x=f[d];l(t.shapes,x)}else l(t.shapes,f)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let f=0,d=this.material.length;f<d;f++)h.push(l(t.materials,this.material[f]));r.material=h}else r.material=l(t.materials,this.material);if(this.children.length>0){r.children=[];for(let h=0;h<this.children.length;h++)r.children.push(this.children[h].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let h=0;h<this.animations.length;h++){const f=this.animations[h];r.animations.push(l(t.animations,f))}}if(e){const h=u(t.geometries),f=u(t.materials),d=u(t.textures),g=u(t.images),x=u(t.shapes),y=u(t.skeletons),_=u(t.animations),b=u(t.nodes);h.length>0&&(s.geometries=h),f.length>0&&(s.materials=f),d.length>0&&(s.textures=d),g.length>0&&(s.images=g),x.length>0&&(s.shapes=x),y.length>0&&(s.skeletons=y),_.length>0&&(s.animations=_),b.length>0&&(s.nodes=b)}return s.object=r,s;function u(h){const f=[];for(const d in h){const g=h[d];delete g.metadata,f.push(g)}return f}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let s=0;s<t.children.length;s++){const r=t.children[s];this.add(r.clone())}return this}}kn.DEFAULT_UP=new Q(0,1,0);kn.DEFAULT_MATRIX_AUTO_UPDATE=!0;kn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Li=new Q,ys=new Q,up=new Q,_s=new Q,qr=new Q,Yr=new Q,TS=new Q,hp=new Q,fp=new Q,dp=new Q,pp=new He,mp=new He,gp=new He;class Ui{constructor(t=new Q,e=new Q,s=new Q){this.a=t,this.b=e,this.c=s}static getNormal(t,e,s,r){r.subVectors(s,e),Li.subVectors(t,e),r.cross(Li);const l=r.lengthSq();return l>0?r.multiplyScalar(1/Math.sqrt(l)):r.set(0,0,0)}static getBarycoord(t,e,s,r,l){Li.subVectors(r,e),ys.subVectors(s,e),up.subVectors(t,e);const u=Li.dot(Li),h=Li.dot(ys),f=Li.dot(up),d=ys.dot(ys),g=ys.dot(up),x=u*d-h*h;if(x===0)return l.set(0,0,0),null;const y=1/x,_=(d*f-h*g)*y,b=(u*g-h*f)*y;return l.set(1-_-b,b,_)}static containsPoint(t,e,s,r){return this.getBarycoord(t,e,s,r,_s)===null?!1:_s.x>=0&&_s.y>=0&&_s.x+_s.y<=1}static getInterpolation(t,e,s,r,l,u,h,f){return this.getBarycoord(t,e,s,r,_s)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(l,_s.x),f.addScaledVector(u,_s.y),f.addScaledVector(h,_s.z),f)}static getInterpolatedAttribute(t,e,s,r,l,u){return pp.setScalar(0),mp.setScalar(0),gp.setScalar(0),pp.fromBufferAttribute(t,e),mp.fromBufferAttribute(t,s),gp.fromBufferAttribute(t,r),u.setScalar(0),u.addScaledVector(pp,l.x),u.addScaledVector(mp,l.y),u.addScaledVector(gp,l.z),u}static isFrontFacing(t,e,s,r){return Li.subVectors(s,e),ys.subVectors(t,e),Li.cross(ys).dot(r)<0}set(t,e,s){return this.a.copy(t),this.b.copy(e),this.c.copy(s),this}setFromPointsAndIndices(t,e,s,r){return this.a.copy(t[e]),this.b.copy(t[s]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,s,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,s),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Li.subVectors(this.c,this.b),ys.subVectors(this.a,this.b),Li.cross(ys).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ui.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ui.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,s,r,l){return Ui.getInterpolation(t,this.a,this.b,this.c,e,s,r,l)}containsPoint(t){return Ui.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ui.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const s=this.a,r=this.b,l=this.c;let u,h;qr.subVectors(r,s),Yr.subVectors(l,s),hp.subVectors(t,s);const f=qr.dot(hp),d=Yr.dot(hp);if(f<=0&&d<=0)return e.copy(s);fp.subVectors(t,r);const g=qr.dot(fp),x=Yr.dot(fp);if(g>=0&&x<=g)return e.copy(r);const y=f*x-g*d;if(y<=0&&f>=0&&g<=0)return u=f/(f-g),e.copy(s).addScaledVector(qr,u);dp.subVectors(t,l);const _=qr.dot(dp),b=Yr.dot(dp);if(b>=0&&_<=b)return e.copy(l);const E=_*d-f*b;if(E<=0&&d>=0&&b<=0)return h=d/(d-b),e.copy(s).addScaledVector(Yr,h);const M=g*b-_*x;if(M<=0&&x-g>=0&&_-b>=0)return TS.subVectors(l,r),h=(x-g)/(x-g+(_-b)),e.copy(r).addScaledVector(TS,h);const S=1/(M+E+y);return u=E*S,h=y*S,e.copy(s).addScaledVector(qr,u).addScaledVector(Yr,h)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const T1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},sa={h:0,s:0,l:0},Ou={h:0,s:0,l:0};function vp(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}class Se{constructor(t,e,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,s)}set(t,e,s){if(e===void 0&&s===void 0){const r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,s);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=fi){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,De.colorSpaceToWorking(this,e),this}setRGB(t,e,s,r=De.workingColorSpace){return this.r=t,this.g=e,this.b=s,De.colorSpaceToWorking(this,r),this}setHSL(t,e,s,r=De.workingColorSpace){if(t=Ig(t,1),e=ye(e,0,1),s=ye(s,0,1),e===0)this.r=this.g=this.b=s;else{const l=s<=.5?s*(1+e):s+e-s*e,u=2*s-l;this.r=vp(u,l,t+1/3),this.g=vp(u,l,t),this.b=vp(u,l,t-1/3)}return De.colorSpaceToWorking(this,r),this}setStyle(t,e=fi){function s(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let l;const u=r[1],h=r[2];switch(u){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return s(l[4]),this.setRGB(Math.min(255,parseInt(l[1],10))/255,Math.min(255,parseInt(l[2],10))/255,Math.min(255,parseInt(l[3],10))/255,e);if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return s(l[4]),this.setRGB(Math.min(100,parseInt(l[1],10))/100,Math.min(100,parseInt(l[2],10))/100,Math.min(100,parseInt(l[3],10))/100,e);break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return s(l[4]),this.setHSL(parseFloat(l[1])/360,parseFloat(l[2])/100,parseFloat(l[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const l=r[1],u=l.length;if(u===3)return this.setRGB(parseInt(l.charAt(0),16)/15,parseInt(l.charAt(1),16)/15,parseInt(l.charAt(2),16)/15,e);if(u===6)return this.setHex(parseInt(l,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=fi){const s=T1[t.toLowerCase()];return s!==void 0?this.setHex(s,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Es(t.r),this.g=Es(t.g),this.b=Es(t.b),this}copyLinearToSRGB(t){return this.r=po(t.r),this.g=po(t.g),this.b=po(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=fi){return De.workingToColorSpace(Hn.copy(this),t),Math.round(ye(Hn.r*255,0,255))*65536+Math.round(ye(Hn.g*255,0,255))*256+Math.round(ye(Hn.b*255,0,255))}getHexString(t=fi){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=De.workingColorSpace){De.workingToColorSpace(Hn.copy(this),e);const s=Hn.r,r=Hn.g,l=Hn.b,u=Math.max(s,r,l),h=Math.min(s,r,l);let f,d;const g=(h+u)/2;if(h===u)f=0,d=0;else{const x=u-h;switch(d=g<=.5?x/(u+h):x/(2-u-h),u){case s:f=(r-l)/x+(r<l?6:0);break;case r:f=(l-s)/x+2;break;case l:f=(s-r)/x+4;break}f/=6}return t.h=f,t.s=d,t.l=g,t}getRGB(t,e=De.workingColorSpace){return De.workingToColorSpace(Hn.copy(this),e),t.r=Hn.r,t.g=Hn.g,t.b=Hn.b,t}getStyle(t=fi){De.workingToColorSpace(Hn.copy(this),t);const e=Hn.r,s=Hn.g,r=Hn.b;return t!==fi?`color(${t} ${e.toFixed(3)} ${s.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(s*255)},${Math.round(r*255)})`}offsetHSL(t,e,s){return this.getHSL(sa),this.setHSL(sa.h+t,sa.s+e,sa.l+s)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,s){return this.r=t.r+(e.r-t.r)*s,this.g=t.g+(e.g-t.g)*s,this.b=t.b+(e.b-t.b)*s,this}lerpHSL(t,e){this.getHSL(sa),t.getHSL(Ou);const s=jl(sa.h,Ou.h,e),r=jl(sa.s,Ou.s,e),l=jl(sa.l,Ou.l,e);return this.setHSL(s,r,l),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,s=this.g,r=this.b,l=t.elements;return this.r=l[0]*e+l[3]*s+l[6]*r,this.g=l[1]*e+l[4]*s+l[7]*r,this.b=l[2]*e+l[5]*s+l[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Hn=new Se;Se.NAMES=T1;let UP=0;class hc extends Eo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:UP++}),this.uuid=To(),this.name="",this.type="Material",this.blending=ho,this.side=ma,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=em,this.blendDst=nm,this.blendEquation=qa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Se(0,0,0),this.blendAlpha=0,this.depthFunc=go,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=uS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Br,this.stencilZFail=Br,this.stencilZPass=Br,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const s=t[e];if(s===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];if(r===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(s):r&&r.isVector3&&s&&s.isVector3?r.copy(s):this[e]=s}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const s={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),this.roughness!==void 0&&(s.roughness=this.roughness),this.metalness!==void 0&&(s.metalness=this.metalness),this.sheen!==void 0&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(s.shininess=this.shininess),this.clearcoat!==void 0&&(s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(s.dispersion=this.dispersion),this.iridescence!==void 0&&(s.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(s.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(s.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(s.combine=this.combine)),this.envMapRotation!==void 0&&(s.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(s.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(s.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(s.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(s.size=this.size),this.shadowSide!==null&&(s.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==ho&&(s.blending=this.blending),this.side!==ma&&(s.side=this.side),this.vertexColors===!0&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),this.transparent===!0&&(s.transparent=!0),this.blendSrc!==em&&(s.blendSrc=this.blendSrc),this.blendDst!==nm&&(s.blendDst=this.blendDst),this.blendEquation!==qa&&(s.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(s.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(s.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(s.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(s.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(s.blendAlpha=this.blendAlpha),this.depthFunc!==go&&(s.depthFunc=this.depthFunc),this.depthTest===!1&&(s.depthTest=this.depthTest),this.depthWrite===!1&&(s.depthWrite=this.depthWrite),this.colorWrite===!1&&(s.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(s.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==uS&&(s.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(s.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(s.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Br&&(s.stencilFail=this.stencilFail),this.stencilZFail!==Br&&(s.stencilZFail=this.stencilZFail),this.stencilZPass!==Br&&(s.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(s.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(s.rotation=this.rotation),this.polygonOffset===!0&&(s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(s.linewidth=this.linewidth),this.dashSize!==void 0&&(s.dashSize=this.dashSize),this.gapSize!==void 0&&(s.gapSize=this.gapSize),this.scale!==void 0&&(s.scale=this.scale),this.dithering===!0&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),this.alphaHash===!0&&(s.alphaHash=!0),this.alphaToCoverage===!0&&(s.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(s.premultipliedAlpha=!0),this.forceSinglePass===!0&&(s.forceSinglePass=!0),this.wireframe===!0&&(s.wireframe=!0),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(s.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(s.flatShading=!0),this.visible===!1&&(s.visible=!1),this.toneMapped===!1&&(s.toneMapped=!1),this.fog===!1&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData);function r(l){const u=[];for(const h in l){const f=l[h];delete f.metadata,u.push(f)}return u}if(e){const l=r(t.textures),u=r(t.images);l.length>0&&(s.textures=l),u.length>0&&(s.images=u)}return s}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let s=null;if(e!==null){const r=e.length;s=new Array(r);for(let l=0;l!==r;++l)s[l]=e[l].clone()}return this.clippingPlanes=s,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Bg extends hc{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Se(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zi,this.combine=u1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const dn=new Q,Iu=new Me;let NP=0;class Oi{constructor(t,e,s=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:NP++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=s,this.usage=hS,this.updateRanges=[],this.gpuType=Gi,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,s){t*=this.itemSize,s*=e.itemSize;for(let r=0,l=this.itemSize;r<l;r++)this.array[t+r]=e.array[s+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,s=this.count;e<s;e++)Iu.fromBufferAttribute(this,e),Iu.applyMatrix3(t),this.setXY(e,Iu.x,Iu.y);else if(this.itemSize===3)for(let e=0,s=this.count;e<s;e++)dn.fromBufferAttribute(this,e),dn.applyMatrix3(t),this.setXYZ(e,dn.x,dn.y,dn.z);return this}applyMatrix4(t){for(let e=0,s=this.count;e<s;e++)dn.fromBufferAttribute(this,e),dn.applyMatrix4(t),this.setXYZ(e,dn.x,dn.y,dn.z);return this}applyNormalMatrix(t){for(let e=0,s=this.count;e<s;e++)dn.fromBufferAttribute(this,e),dn.applyNormalMatrix(t),this.setXYZ(e,dn.x,dn.y,dn.z);return this}transformDirection(t){for(let e=0,s=this.count;e<s;e++)dn.fromBufferAttribute(this,e),dn.transformDirection(t),this.setXYZ(e,dn.x,dn.y,dn.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let s=this.array[t*this.itemSize+e];return this.normalized&&(s=io(s,this.array)),s}setComponent(t,e,s){return this.normalized&&(s=Wn(s,this.array)),this.array[t*this.itemSize+e]=s,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=io(e,this.array)),e}setX(t,e){return this.normalized&&(e=Wn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=io(e,this.array)),e}setY(t,e){return this.normalized&&(e=Wn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=io(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Wn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=io(e,this.array)),e}setW(t,e){return this.normalized&&(e=Wn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,s){return t*=this.itemSize,this.normalized&&(e=Wn(e,this.array),s=Wn(s,this.array)),this.array[t+0]=e,this.array[t+1]=s,this}setXYZ(t,e,s,r){return t*=this.itemSize,this.normalized&&(e=Wn(e,this.array),s=Wn(s,this.array),r=Wn(r,this.array)),this.array[t+0]=e,this.array[t+1]=s,this.array[t+2]=r,this}setXYZW(t,e,s,r,l){return t*=this.itemSize,this.normalized&&(e=Wn(e,this.array),s=Wn(s,this.array),r=Wn(r,this.array),l=Wn(l,this.array)),this.array[t+0]=e,this.array[t+1]=s,this.array[t+2]=r,this.array[t+3]=l,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==hS&&(t.usage=this.usage),t}}class A1 extends Oi{constructor(t,e,s){super(new Uint16Array(t),e,s)}}class w1 extends Oi{constructor(t,e,s){super(new Uint32Array(t),e,s)}}class Yi extends Oi{constructor(t,e,s){super(new Float32Array(t),e,s)}}let OP=0;const bi=new We,xp=new kn,Kr=new Q,hi=new or,wl=new or,Rn=new Q;class xa extends Eo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:OP++}),this.uuid=To(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(M1(t)?w1:A1)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,s=0){this.groups.push({start:t,count:e,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const s=this.attributes.normal;if(s!==void 0){const l=new ue().getNormalMatrix(t);s.applyNormalMatrix(l),s.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return bi.makeRotationFromQuaternion(t),this.applyMatrix4(bi),this}rotateX(t){return bi.makeRotationX(t),this.applyMatrix4(bi),this}rotateY(t){return bi.makeRotationY(t),this.applyMatrix4(bi),this}rotateZ(t){return bi.makeRotationZ(t),this.applyMatrix4(bi),this}translate(t,e,s){return bi.makeTranslation(t,e,s),this.applyMatrix4(bi),this}scale(t,e,s){return bi.makeScale(t,e,s),this.applyMatrix4(bi),this}lookAt(t){return xp.lookAt(t),xp.updateMatrix(),this.applyMatrix4(xp.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Kr).negate(),this.translate(Kr.x,Kr.y,Kr.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const s=[];for(let r=0,l=t.length;r<l;r++){const u=t[r];s.push(u.x,u.y,u.z||0)}this.setAttribute("position",new Yi(s,3))}else{const s=Math.min(t.length,e.count);for(let r=0;r<s;r++){const l=t[r];e.setXYZ(r,l.x,l.y,l.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new or);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let s=0,r=e.length;s<r;s++){const l=e[s];hi.setFromBufferAttribute(l),this.morphTargetsRelative?(Rn.addVectors(this.boundingBox.min,hi.min),this.boundingBox.expandByPoint(Rn),Rn.addVectors(this.boundingBox.max,hi.max),this.boundingBox.expandByPoint(Rn)):(this.boundingBox.expandByPoint(hi.min),this.boundingBox.expandByPoint(hi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new uc);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Q,1/0);return}if(t){const s=this.boundingSphere.center;if(hi.setFromBufferAttribute(t),e)for(let l=0,u=e.length;l<u;l++){const h=e[l];wl.setFromBufferAttribute(h),this.morphTargetsRelative?(Rn.addVectors(hi.min,wl.min),hi.expandByPoint(Rn),Rn.addVectors(hi.max,wl.max),hi.expandByPoint(Rn)):(hi.expandByPoint(wl.min),hi.expandByPoint(wl.max))}hi.getCenter(s);let r=0;for(let l=0,u=t.count;l<u;l++)Rn.fromBufferAttribute(t,l),r=Math.max(r,s.distanceToSquared(Rn));if(e)for(let l=0,u=e.length;l<u;l++){const h=e[l],f=this.morphTargetsRelative;for(let d=0,g=h.count;d<g;d++)Rn.fromBufferAttribute(h,d),f&&(Kr.fromBufferAttribute(t,d),Rn.add(Kr)),r=Math.max(r,s.distanceToSquared(Rn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const s=e.position,r=e.normal,l=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Oi(new Float32Array(4*s.count),4));const u=this.getAttribute("tangent"),h=[],f=[];for(let z=0;z<s.count;z++)h[z]=new Q,f[z]=new Q;const d=new Q,g=new Q,x=new Q,y=new Me,_=new Me,b=new Me,E=new Q,M=new Q;function S(z,U,C){d.fromBufferAttribute(s,z),g.fromBufferAttribute(s,U),x.fromBufferAttribute(s,C),y.fromBufferAttribute(l,z),_.fromBufferAttribute(l,U),b.fromBufferAttribute(l,C),g.sub(d),x.sub(d),_.sub(y),b.sub(y);const j=1/(_.x*b.y-b.x*_.y);isFinite(j)&&(E.copy(g).multiplyScalar(b.y).addScaledVector(x,-_.y).multiplyScalar(j),M.copy(x).multiplyScalar(_.x).addScaledVector(g,-b.x).multiplyScalar(j),h[z].add(E),h[U].add(E),h[C].add(E),f[z].add(M),f[U].add(M),f[C].add(M))}let L=this.groups;L.length===0&&(L=[{start:0,count:t.count}]);for(let z=0,U=L.length;z<U;++z){const C=L[z],j=C.start,it=C.count;for(let $=j,et=j+it;$<et;$+=3)S(t.getX($+0),t.getX($+1),t.getX($+2))}const w=new Q,A=new Q,N=new Q,O=new Q;function I(z){N.fromBufferAttribute(r,z),O.copy(N);const U=h[z];w.copy(U),w.sub(N.multiplyScalar(N.dot(U))).normalize(),A.crossVectors(O,U);const j=A.dot(f[z])<0?-1:1;u.setXYZW(z,w.x,w.y,w.z,j)}for(let z=0,U=L.length;z<U;++z){const C=L[z],j=C.start,it=C.count;for(let $=j,et=j+it;$<et;$+=3)I(t.getX($+0)),I(t.getX($+1)),I(t.getX($+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let s=this.getAttribute("normal");if(s===void 0)s=new Oi(new Float32Array(e.count*3),3),this.setAttribute("normal",s);else for(let y=0,_=s.count;y<_;y++)s.setXYZ(y,0,0,0);const r=new Q,l=new Q,u=new Q,h=new Q,f=new Q,d=new Q,g=new Q,x=new Q;if(t)for(let y=0,_=t.count;y<_;y+=3){const b=t.getX(y+0),E=t.getX(y+1),M=t.getX(y+2);r.fromBufferAttribute(e,b),l.fromBufferAttribute(e,E),u.fromBufferAttribute(e,M),g.subVectors(u,l),x.subVectors(r,l),g.cross(x),h.fromBufferAttribute(s,b),f.fromBufferAttribute(s,E),d.fromBufferAttribute(s,M),h.add(g),f.add(g),d.add(g),s.setXYZ(b,h.x,h.y,h.z),s.setXYZ(E,f.x,f.y,f.z),s.setXYZ(M,d.x,d.y,d.z)}else for(let y=0,_=e.count;y<_;y+=3)r.fromBufferAttribute(e,y+0),l.fromBufferAttribute(e,y+1),u.fromBufferAttribute(e,y+2),g.subVectors(u,l),x.subVectors(r,l),g.cross(x),s.setXYZ(y+0,g.x,g.y,g.z),s.setXYZ(y+1,g.x,g.y,g.z),s.setXYZ(y+2,g.x,g.y,g.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,s=t.count;e<s;e++)Rn.fromBufferAttribute(t,e),Rn.normalize(),t.setXYZ(e,Rn.x,Rn.y,Rn.z)}toNonIndexed(){function t(h,f){const d=h.array,g=h.itemSize,x=h.normalized,y=new d.constructor(f.length*g);let _=0,b=0;for(let E=0,M=f.length;E<M;E++){h.isInterleavedBufferAttribute?_=f[E]*h.data.stride+h.offset:_=f[E]*g;for(let S=0;S<g;S++)y[b++]=d[_++]}return new Oi(y,g,x)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new xa,s=this.index.array,r=this.attributes;for(const h in r){const f=r[h],d=t(f,s);e.setAttribute(h,d)}const l=this.morphAttributes;for(const h in l){const f=[],d=l[h];for(let g=0,x=d.length;g<x;g++){const y=d[g],_=t(y,s);f.push(_)}e.morphAttributes[h]=f}e.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let h=0,f=u.length;h<f;h++){const d=u[h];e.addGroup(d.start,d.count,d.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const d in f)f[d]!==void 0&&(t[d]=f[d]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const s=this.attributes;for(const f in s){const d=s[f];t.data.attributes[f]=d.toJSON(t.data)}const r={};let l=!1;for(const f in this.morphAttributes){const d=this.morphAttributes[f],g=[];for(let x=0,y=d.length;x<y;x++){const _=d[x];g.push(_.toJSON(t.data))}g.length>0&&(r[f]=g,l=!0)}l&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(t.data.groups=JSON.parse(JSON.stringify(u)));const h=this.boundingSphere;return h!==null&&(t.data.boundingSphere=h.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const s=t.index;s!==null&&this.setIndex(s.clone());const r=t.attributes;for(const d in r){const g=r[d];this.setAttribute(d,g.clone(e))}const l=t.morphAttributes;for(const d in l){const g=[],x=l[d];for(let y=0,_=x.length;y<_;y++)g.push(x[y].clone(e));this.morphAttributes[d]=g}this.morphTargetsRelative=t.morphTargetsRelative;const u=t.groups;for(let d=0,g=u.length;d<g;d++){const x=u[d];this.addGroup(x.start,x.count,x.materialIndex)}const h=t.boundingBox;h!==null&&(this.boundingBox=h.clone());const f=t.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const AS=new We,ja=new E1,Fu=new uc,wS=new Q,zu=new Q,Bu=new Q,Vu=new Q,yp=new Q,ju=new Q,RS=new Q,Hu=new Q;class Cn extends kn{constructor(t=new xa,e=new Bg){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,s=Object.keys(e);if(s.length>0){const r=e[s[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,u=r.length;l<u;l++){const h=r[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}getVertexPosition(t,e){const s=this.geometry,r=s.attributes.position,l=s.morphAttributes.position,u=s.morphTargetsRelative;e.fromBufferAttribute(r,t);const h=this.morphTargetInfluences;if(l&&h){ju.set(0,0,0);for(let f=0,d=l.length;f<d;f++){const g=h[f],x=l[f];g!==0&&(yp.fromBufferAttribute(x,t),u?ju.addScaledVector(yp,g):ju.addScaledVector(yp.sub(e),g))}e.add(ju)}return e}raycast(t,e){const s=this.geometry,r=this.material,l=this.matrixWorld;r!==void 0&&(s.boundingSphere===null&&s.computeBoundingSphere(),Fu.copy(s.boundingSphere),Fu.applyMatrix4(l),ja.copy(t.ray).recast(t.near),!(Fu.containsPoint(ja.origin)===!1&&(ja.intersectSphere(Fu,wS)===null||ja.origin.distanceToSquared(wS)>(t.far-t.near)**2))&&(AS.copy(l).invert(),ja.copy(t.ray).applyMatrix4(AS),!(s.boundingBox!==null&&ja.intersectsBox(s.boundingBox)===!1)&&this._computeIntersections(t,e,ja)))}_computeIntersections(t,e,s){let r;const l=this.geometry,u=this.material,h=l.index,f=l.attributes.position,d=l.attributes.uv,g=l.attributes.uv1,x=l.attributes.normal,y=l.groups,_=l.drawRange;if(h!==null)if(Array.isArray(u))for(let b=0,E=y.length;b<E;b++){const M=y[b],S=u[M.materialIndex],L=Math.max(M.start,_.start),w=Math.min(h.count,Math.min(M.start+M.count,_.start+_.count));for(let A=L,N=w;A<N;A+=3){const O=h.getX(A),I=h.getX(A+1),z=h.getX(A+2);r=ku(this,S,t,s,d,g,x,O,I,z),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=M.materialIndex,e.push(r))}}else{const b=Math.max(0,_.start),E=Math.min(h.count,_.start+_.count);for(let M=b,S=E;M<S;M+=3){const L=h.getX(M),w=h.getX(M+1),A=h.getX(M+2);r=ku(this,u,t,s,d,g,x,L,w,A),r&&(r.faceIndex=Math.floor(M/3),e.push(r))}}else if(f!==void 0)if(Array.isArray(u))for(let b=0,E=y.length;b<E;b++){const M=y[b],S=u[M.materialIndex],L=Math.max(M.start,_.start),w=Math.min(f.count,Math.min(M.start+M.count,_.start+_.count));for(let A=L,N=w;A<N;A+=3){const O=A,I=A+1,z=A+2;r=ku(this,S,t,s,d,g,x,O,I,z),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=M.materialIndex,e.push(r))}}else{const b=Math.max(0,_.start),E=Math.min(f.count,_.start+_.count);for(let M=b,S=E;M<S;M+=3){const L=M,w=M+1,A=M+2;r=ku(this,u,t,s,d,g,x,L,w,A),r&&(r.faceIndex=Math.floor(M/3),e.push(r))}}}}function IP(n,t,e,s,r,l,u,h){let f;if(t.side===Yn?f=s.intersectTriangle(u,l,r,!0,h):f=s.intersectTriangle(r,l,u,t.side===ma,h),f===null)return null;Hu.copy(h),Hu.applyMatrix4(n.matrixWorld);const d=e.ray.origin.distanceTo(Hu);return d<e.near||d>e.far?null:{distance:d,point:Hu.clone(),object:n}}function ku(n,t,e,s,r,l,u,h,f,d){n.getVertexPosition(h,zu),n.getVertexPosition(f,Bu),n.getVertexPosition(d,Vu);const g=IP(n,t,e,s,zu,Bu,Vu,RS);if(g){const x=new Q;Ui.getBarycoord(RS,zu,Bu,Vu,x),r&&(g.uv=Ui.getInterpolatedAttribute(r,h,f,d,x,new Me)),l&&(g.uv1=Ui.getInterpolatedAttribute(l,h,f,d,x,new Me)),u&&(g.normal=Ui.getInterpolatedAttribute(u,h,f,d,x,new Q),g.normal.dot(s.direction)>0&&g.normal.multiplyScalar(-1));const y={a:h,b:f,c:d,normal:new Q,materialIndex:0};Ui.getNormal(zu,Bu,Vu,y.normal),g.face=y,g.barycoord=x}return g}class Ao extends xa{constructor(t=1,e=1,s=1,r=1,l=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:s,widthSegments:r,heightSegments:l,depthSegments:u};const h=this;r=Math.floor(r),l=Math.floor(l),u=Math.floor(u);const f=[],d=[],g=[],x=[];let y=0,_=0;b("z","y","x",-1,-1,s,e,t,u,l,0),b("z","y","x",1,-1,s,e,-t,u,l,1),b("x","z","y",1,1,t,s,e,r,u,2),b("x","z","y",1,-1,t,s,-e,r,u,3),b("x","y","z",1,-1,t,e,s,r,l,4),b("x","y","z",-1,-1,t,e,-s,r,l,5),this.setIndex(f),this.setAttribute("position",new Yi(d,3)),this.setAttribute("normal",new Yi(g,3)),this.setAttribute("uv",new Yi(x,2));function b(E,M,S,L,w,A,N,O,I,z,U){const C=A/I,j=N/z,it=A/2,$=N/2,et=O/2,ut=I+1,V=z+1;let G=0,q=0;const yt=new Q;for(let F=0;F<V;F++){const nt=F*j-$;for(let Mt=0;Mt<ut;Mt++){const bt=Mt*C-it;yt[E]=bt*L,yt[M]=nt*w,yt[S]=et,d.push(yt.x,yt.y,yt.z),yt[E]=0,yt[M]=0,yt[S]=O>0?1:-1,g.push(yt.x,yt.y,yt.z),x.push(Mt/I),x.push(1-F/z),G+=1}}for(let F=0;F<z;F++)for(let nt=0;nt<I;nt++){const Mt=y+nt+ut*F,bt=y+nt+ut*(F+1),J=y+(nt+1)+ut*(F+1),ft=y+(nt+1)+ut*F;f.push(Mt,bt,ft),f.push(bt,J,ft),q+=6}h.addGroup(_,q,U),_+=q,y+=G}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ao(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function _o(n){const t={};for(const e in n){t[e]={};for(const s in n[e]){const r=n[e][s];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][s]=null):t[e][s]=r.clone():Array.isArray(r)?t[e][s]=r.slice():t[e][s]=r}}return t}function Xn(n){const t={};for(let e=0;e<n.length;e++){const s=_o(n[e]);for(const r in s)t[r]=s[r]}return t}function FP(n){const t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function R1(n){const t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:De.workingColorSpace}const zP={clone:_o,merge:Xn};var BP=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,VP=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ga extends hc{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=BP,this.fragmentShader=VP,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=_o(t.uniforms),this.uniformsGroups=FP(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const u=this.uniforms[r].value;u&&u.isTexture?e.uniforms[r]={type:"t",value:u.toJSON(t).uuid}:u&&u.isColor?e.uniforms[r]={type:"c",value:u.getHex()}:u&&u.isVector2?e.uniforms[r]={type:"v2",value:u.toArray()}:u&&u.isVector3?e.uniforms[r]={type:"v3",value:u.toArray()}:u&&u.isVector4?e.uniforms[r]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?e.uniforms[r]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?e.uniforms[r]={type:"m4",value:u.toArray()}:e.uniforms[r]={value:u}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const s={};for(const r in this.extensions)this.extensions[r]===!0&&(s[r]=!0);return Object.keys(s).length>0&&(e.extensions=s),e}}class C1 extends kn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new We,this.projectionMatrix=new We,this.projectionMatrixInverse=new We,this.coordinateSystem=bs}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const aa=new Q,CS=new Me,DS=new Me;class di extends C1{constructor(t=50,e=1,s=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=s,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=tc*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Vl*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return tc*2*Math.atan(Math.tan(Vl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,s){aa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(aa.x,aa.y).multiplyScalar(-t/aa.z),aa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(aa.x,aa.y).multiplyScalar(-t/aa.z)}getViewSize(t,e){return this.getViewBounds(t,CS,DS),e.subVectors(DS,CS)}setViewOffset(t,e,s,r,l,u){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=s,this.view.offsetY=r,this.view.width=l,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(Vl*.5*this.fov)/this.zoom,s=2*e,r=this.aspect*s,l=-.5*r;const u=this.view;if(this.view!==null&&this.view.enabled){const f=u.fullWidth,d=u.fullHeight;l+=u.offsetX*r/f,e-=u.offsetY*s/d,r*=u.width/f,s*=u.height/d}const h=this.filmOffset;h!==0&&(l+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+r,e,e-s,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Zr=-90,Qr=1;class jP extends kn{constructor(t,e,s){super(),this.type="CubeCamera",this.renderTarget=s,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new di(Zr,Qr,t,e);r.layers=this.layers,this.add(r);const l=new di(Zr,Qr,t,e);l.layers=this.layers,this.add(l);const u=new di(Zr,Qr,t,e);u.layers=this.layers,this.add(u);const h=new di(Zr,Qr,t,e);h.layers=this.layers,this.add(h);const f=new di(Zr,Qr,t,e);f.layers=this.layers,this.add(f);const d=new di(Zr,Qr,t,e);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[s,r,l,u,h,f]=e;for(const d of e)this.remove(d);if(t===bs)s.up.set(0,1,0),s.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),l.up.set(0,0,-1),l.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(t===vh)s.up.set(0,-1,0),s.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),l.up.set(0,0,1),l.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const d of e)this.add(d),d.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:s,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[l,u,h,f,d,g]=this.children,x=t.getRenderTarget(),y=t.getActiveCubeFace(),_=t.getActiveMipmapLevel(),b=t.xr.enabled;t.xr.enabled=!1;const E=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,t.setRenderTarget(s,0,r),t.render(e,l),t.setRenderTarget(s,1,r),t.render(e,u),t.setRenderTarget(s,2,r),t.render(e,h),t.setRenderTarget(s,3,r),t.render(e,f),t.setRenderTarget(s,4,r),t.render(e,d),s.texture.generateMipmaps=E,t.setRenderTarget(s,5,r),t.render(e,g),t.setRenderTarget(x,y,_),t.xr.enabled=b,s.texture.needsPMREMUpdate=!0}}class D1 extends Kn{constructor(t=[],e=vo,s,r,l,u,h,f,d,g){super(t,e,s,r,l,u,h,f,d,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class HP extends ar{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const s={width:t,height:t,depth:1},r=[s,s,s,s,s,s];this.texture=new D1(r),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const s={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ao(5,5,5),l=new ga({name:"CubemapFromEquirect",uniforms:_o(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,side:Yn,blending:fa});l.uniforms.tEquirect.value=e;const u=new Cn(r,l),h=e.minFilter;return e.minFilter===Ja&&(e.minFilter=ki),new jP(1,10,this).update(t,u),e.minFilter=h,u.geometry.dispose(),u.material.dispose(),this}clear(t,e=!0,s=!0,r=!0){const l=t.getRenderTarget();for(let u=0;u<6;u++)t.setRenderTarget(this,u),t.clear(e,s,r);t.setRenderTarget(l)}}class Gu extends kn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const kP={type:"move"};class _p{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Gu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Gu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Gu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const s of t.hand.values())this._getHandJoint(e,s)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,s){let r=null,l=null,u=null;const h=this._targetRay,f=this._grip,d=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(d&&t.hand){u=!0;for(const E of t.hand.values()){const M=e.getJointPose(E,s),S=this._getHandJoint(d,E);M!==null&&(S.matrix.fromArray(M.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=M.radius),S.visible=M!==null}const g=d.joints["index-finger-tip"],x=d.joints["thumb-tip"],y=g.position.distanceTo(x.position),_=.02,b=.005;d.inputState.pinching&&y>_+b?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!d.inputState.pinching&&y<=_-b&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else f!==null&&t.gripSpace&&(l=e.getPose(t.gripSpace,s),l!==null&&(f.matrix.fromArray(l.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,l.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(l.linearVelocity)):f.hasLinearVelocity=!1,l.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(l.angularVelocity)):f.hasAngularVelocity=!1));h!==null&&(r=e.getPose(t.targetRaySpace,s),r===null&&l!==null&&(r=l),r!==null&&(h.matrix.fromArray(r.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,r.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(r.linearVelocity)):h.hasLinearVelocity=!1,r.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(r.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(kP)))}return h!==null&&(h.visible=r!==null),f!==null&&(f.visible=l!==null),d!==null&&(d.visible=u!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const s=new Gu;s.matrixAutoUpdate=!1,s.visible=!1,t.joints[e.jointName]=s,t.add(s)}return t.joints[e.jointName]}}class L1 extends kn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Zi,this.environmentIntensity=1,this.environmentRotation=new Zi,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class GP extends Kn{constructor(t=null,e=1,s=1,r,l,u,h,f,d=pi,g=pi,x,y){super(null,u,h,f,d,g,r,l,x,y),this.isDataTexture=!0,this.image={data:t,width:e,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class LS extends Oi{constructor(t,e,s,r=1){super(t,e,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Jr=new We,PS=new We,Wu=[],US=new or,WP=new We,Rl=new Cn,Cl=new uc;class P1 extends Cn{constructor(t,e,s){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new LS(new Float32Array(s*16),16),this.instanceColor=null,this.morphTexture=null,this.count=s,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<s;r++)this.setMatrixAt(r,WP)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new or),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let s=0;s<e;s++)this.getMatrixAt(s,Jr),US.copy(t.boundingBox).applyMatrix4(Jr),this.boundingBox.union(US)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new uc),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let s=0;s<e;s++)this.getMatrixAt(s,Jr),Cl.copy(t.boundingSphere).applyMatrix4(Jr),this.boundingSphere.union(Cl)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const s=e.morphTargetInfluences,r=this.morphTexture.source.data.data,l=s.length+1,u=t*l+1;for(let h=0;h<s.length;h++)s[h]=r[u+h]}raycast(t,e){const s=this.matrixWorld,r=this.count;if(Rl.geometry=this.geometry,Rl.material=this.material,Rl.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Cl.copy(this.boundingSphere),Cl.applyMatrix4(s),t.ray.intersectsSphere(Cl)!==!1))for(let l=0;l<r;l++){this.getMatrixAt(l,Jr),PS.multiplyMatrices(s,Jr),Rl.matrixWorld=PS,Rl.raycast(t,Wu);for(let u=0,h=Wu.length;u<h;u++){const f=Wu[u];f.instanceId=l,f.object=this,e.push(f)}Wu.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new LS(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const s=e.morphTargetInfluences,r=s.length+1;this.morphTexture===null&&(this.morphTexture=new GP(new Float32Array(r*this.count),r,this.count,Pg,Gi));const l=this.morphTexture.source.data.data;let u=0;for(let d=0;d<s.length;d++)u+=s[d];const h=this.geometry.morphTargetsRelative?1:1-u,f=r*t;l[f]=h,l.set(s,f+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Sp=new Q,XP=new Q,qP=new ue;class la{constructor(t=new Q(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,s,r){return this.normal.set(t,e,s),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,s){const r=Sp.subVectors(s,e).cross(XP.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const s=t.delta(Sp),r=this.normal.dot(s);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const l=-(t.start.dot(this.normal)+this.constant)/r;return l<0||l>1?null:e.copy(t.start).addScaledVector(s,l)}intersectsLine(t){const e=this.distanceToPoint(t.start),s=this.distanceToPoint(t.end);return e<0&&s>0||s<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const s=e||qP.getNormalMatrix(t),r=this.coplanarPoint(Sp).applyMatrix4(t),l=this.normal.applyMatrix3(s).normalize();return this.constant=-r.dot(l),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ha=new uc,YP=new Me(.5,.5),Xu=new Q;class Vg{constructor(t=new la,e=new la,s=new la,r=new la,l=new la,u=new la){this.planes=[t,e,s,r,l,u]}set(t,e,s,r,l,u){const h=this.planes;return h[0].copy(t),h[1].copy(e),h[2].copy(s),h[3].copy(r),h[4].copy(l),h[5].copy(u),this}copy(t){const e=this.planes;for(let s=0;s<6;s++)e[s].copy(t.planes[s]);return this}setFromProjectionMatrix(t,e=bs){const s=this.planes,r=t.elements,l=r[0],u=r[1],h=r[2],f=r[3],d=r[4],g=r[5],x=r[6],y=r[7],_=r[8],b=r[9],E=r[10],M=r[11],S=r[12],L=r[13],w=r[14],A=r[15];if(s[0].setComponents(f-l,y-d,M-_,A-S).normalize(),s[1].setComponents(f+l,y+d,M+_,A+S).normalize(),s[2].setComponents(f+u,y+g,M+b,A+L).normalize(),s[3].setComponents(f-u,y-g,M-b,A-L).normalize(),s[4].setComponents(f-h,y-x,M-E,A-w).normalize(),e===bs)s[5].setComponents(f+h,y+x,M+E,A+w).normalize();else if(e===vh)s[5].setComponents(h,x,E,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Ha.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Ha.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Ha)}intersectsSprite(t){Ha.center.set(0,0,0);const e=YP.distanceTo(t.center);return Ha.radius=.7071067811865476+e,Ha.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ha)}intersectsSphere(t){const e=this.planes,s=t.center,r=-t.radius;for(let l=0;l<6;l++)if(e[l].distanceToPoint(s)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let s=0;s<6;s++){const r=e[s];if(Xu.x=r.normal.x>0?t.max.x:t.min.x,Xu.y=r.normal.y>0?t.max.y:t.min.y,Xu.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Xu)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let s=0;s<6;s++)if(e[s].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class U1 extends Kn{constructor(t,e,s=sr,r,l,u,h=pi,f=pi,d,g=Jl,x=1){if(g!==Jl&&g!==$l)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const y={width:t,height:e,depth:x};super(y,r,l,u,h,f,g,s,d),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Fg(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class Th extends xa{constructor(t=1,e=1,s=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:s,heightSegments:r};const l=t/2,u=e/2,h=Math.floor(s),f=Math.floor(r),d=h+1,g=f+1,x=t/h,y=e/f,_=[],b=[],E=[],M=[];for(let S=0;S<g;S++){const L=S*y-u;for(let w=0;w<d;w++){const A=w*x-l;b.push(A,-L,0),E.push(0,0,1),M.push(w/h),M.push(1-S/f)}}for(let S=0;S<f;S++)for(let L=0;L<h;L++){const w=L+d*S,A=L+d*(S+1),N=L+1+d*(S+1),O=L+1+d*S;_.push(w,A,O),_.push(A,N,O)}this.setIndex(_),this.setAttribute("position",new Yi(b,3)),this.setAttribute("normal",new Yi(E,3)),this.setAttribute("uv",new Yi(M,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Th(t.width,t.height,t.widthSegments,t.heightSegments)}}class jg extends xa{constructor(t=1,e=32,s=16,r=0,l=Math.PI*2,u=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:s,phiStart:r,phiLength:l,thetaStart:u,thetaLength:h},e=Math.max(3,Math.floor(e)),s=Math.max(2,Math.floor(s));const f=Math.min(u+h,Math.PI);let d=0;const g=[],x=new Q,y=new Q,_=[],b=[],E=[],M=[];for(let S=0;S<=s;S++){const L=[],w=S/s;let A=0;S===0&&u===0?A=.5/e:S===s&&f===Math.PI&&(A=-.5/e);for(let N=0;N<=e;N++){const O=N/e;x.x=-t*Math.cos(r+O*l)*Math.sin(u+w*h),x.y=t*Math.cos(u+w*h),x.z=t*Math.sin(r+O*l)*Math.sin(u+w*h),b.push(x.x,x.y,x.z),y.copy(x).normalize(),E.push(y.x,y.y,y.z),M.push(O+A,1-w),L.push(d++)}g.push(L)}for(let S=0;S<s;S++)for(let L=0;L<e;L++){const w=g[S][L+1],A=g[S][L],N=g[S+1][L],O=g[S+1][L+1];(S!==0||u>0)&&_.push(w,A,O),(S!==s-1||f<Math.PI)&&_.push(A,N,O)}this.setIndex(_),this.setAttribute("position",new Yi(b,3)),this.setAttribute("normal",new Yi(E,3)),this.setAttribute("uv",new Yi(M,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new jg(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class jm extends hc{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Se(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Se(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_1,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zi,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class KP extends jm{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ye(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Se(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Se(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Se(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class ZP extends hc{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=GL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class QP extends hc{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class N1 extends kn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Se(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}const Mp=new We,NS=new Q,OS=new Q;class JP{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Me(512,512),this.mapType=Ki,this.map=null,this.mapPass=null,this.matrix=new We,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vg,this._frameExtents=new Me(1,1),this._viewportCount=1,this._viewports=[new He(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,s=this.matrix;NS.setFromMatrixPosition(t.matrixWorld),e.position.copy(NS),OS.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(OS),e.updateMatrixWorld(),Mp.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mp),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(Mp)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}const IS=new We,Dl=new Q,bp=new Q;class $P extends JP{constructor(){super(new di(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Me(4,2),this._viewportCount=6,this._viewports=[new He(2,1,1,1),new He(0,1,1,1),new He(3,1,1,1),new He(1,1,1,1),new He(3,0,1,1),new He(1,0,1,1)],this._cubeDirections=[new Q(1,0,0),new Q(-1,0,0),new Q(0,0,1),new Q(0,0,-1),new Q(0,1,0),new Q(0,-1,0)],this._cubeUps=[new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,0,1),new Q(0,0,-1)]}updateMatrices(t,e=0){const s=this.camera,r=this.matrix,l=t.distance||s.far;l!==s.far&&(s.far=l,s.updateProjectionMatrix()),Dl.setFromMatrixPosition(t.matrixWorld),s.position.copy(Dl),bp.copy(s.position),bp.add(this._cubeDirections[e]),s.up.copy(this._cubeUps[e]),s.lookAt(bp),s.updateMatrixWorld(),r.makeTranslation(-Dl.x,-Dl.y,-Dl.z),IS.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IS)}}class O1 extends N1{constructor(t,e,s=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=r,this.shadow=new $P}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class tU extends C1{constructor(t=-1,e=1,s=1,r=-1,l=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=s,this.bottom=r,this.near=l,this.far=u,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,s,r,l,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=s,this.view.offsetY=r,this.view.width=l,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let l=s-t,u=s+t,h=r+e,f=r-e;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=d*this.view.offsetX,u=l+d*this.view.width,h-=g*this.view.offsetY,f=h-g*this.view.height}this.projectionMatrix.makeOrthographic(l,u,h,f,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class eU extends N1{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class nU extends di{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}class iU{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=performance.now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}const FS=new We;class sU{constructor(t,e,s=0,r=1/0){this.ray=new E1(t,e),this.near=s,this.far=r,this.camera=null,this.layers=new zg,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return FS.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(FS),this}intersectObject(t,e=!0,s=[]){return Hm(t,this,s,e),s.sort(zS),s}intersectObjects(t,e=!0,s=[]){for(let r=0,l=t.length;r<l;r++)Hm(t[r],this,s,e);return s.sort(zS),s}}function zS(n,t){return n.distance-t.distance}function Hm(n,t,e,s){let r=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(r=!1),r===!0&&s===!0){const l=n.children;for(let u=0,h=l.length;u<h;u++)Hm(l[u],t,e,!0)}}function BS(n,t,e,s){const r=aU(s);switch(e){case g1:return n*t;case Pg:return n*t/r.components*r.byteLength;case Ug:return n*t/r.components*r.byteLength;case x1:return n*t*2/r.components*r.byteLength;case Ng:return n*t*2/r.components*r.byteLength;case v1:return n*t*3/r.components*r.byteLength;case Ni:return n*t*4/r.components*r.byteLength;case Og:return n*t*4/r.components*r.byteLength;case ih:case sh:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case ah:case rh:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case mm:case vm:return Math.max(n,16)*Math.max(t,8)/4;case pm:case gm:return Math.max(n,8)*Math.max(t,8)/2;case xm:case ym:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case _m:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Sm:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Mm:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case bm:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case Em:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case Tm:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case Am:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case wm:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case Rm:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case Cm:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case Dm:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case Lm:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case Pm:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case Um:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case Nm:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case oh:case Om:case Im:return Math.ceil(n/4)*Math.ceil(t/4)*16;case y1:case Fm:return Math.ceil(n/4)*Math.ceil(t/4)*8;case zm:case Bm:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function aU(n){switch(n){case Ki:case d1:return{byteLength:1,components:1};case Zl:case p1:case lc:return{byteLength:2,components:1};case Dg:case Lg:return{byteLength:2,components:4};case sr:case Cg:case Gi:return{byteLength:4,components:1};case m1:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Rg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Rg);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function I1(){let n=null,t=!1,e=null,s=null;function r(l,u){e(l,u),s=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(s=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(s),t=!1},setAnimationLoop:function(l){e=l},setContext:function(l){n=l}}}function rU(n){const t=new WeakMap;function e(h,f){const d=h.array,g=h.usage,x=d.byteLength,y=n.createBuffer();n.bindBuffer(f,y),n.bufferData(f,d,g),h.onUploadCallback();let _;if(d instanceof Float32Array)_=n.FLOAT;else if(typeof Float16Array<"u"&&d instanceof Float16Array)_=n.HALF_FLOAT;else if(d instanceof Uint16Array)h.isFloat16BufferAttribute?_=n.HALF_FLOAT:_=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)_=n.SHORT;else if(d instanceof Uint32Array)_=n.UNSIGNED_INT;else if(d instanceof Int32Array)_=n.INT;else if(d instanceof Int8Array)_=n.BYTE;else if(d instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:y,type:_,bytesPerElement:d.BYTES_PER_ELEMENT,version:h.version,size:x}}function s(h,f,d){const g=f.array,x=f.updateRanges;if(n.bindBuffer(d,h),x.length===0)n.bufferSubData(d,0,g);else{x.sort((_,b)=>_.start-b.start);let y=0;for(let _=1;_<x.length;_++){const b=x[y],E=x[_];E.start<=b.start+b.count+1?b.count=Math.max(b.count,E.start+E.count-b.start):(++y,x[y]=E)}x.length=y+1;for(let _=0,b=x.length;_<b;_++){const E=x[_];n.bufferSubData(d,E.start*g.BYTES_PER_ELEMENT,g,E.start,E.count)}f.clearUpdateRanges()}f.onUploadCallback()}function r(h){return h.isInterleavedBufferAttribute&&(h=h.data),t.get(h)}function l(h){h.isInterleavedBufferAttribute&&(h=h.data);const f=t.get(h);f&&(n.deleteBuffer(f.buffer),t.delete(h))}function u(h,f){if(h.isInterleavedBufferAttribute&&(h=h.data),h.isGLBufferAttribute){const g=t.get(h);(!g||g.version<h.version)&&t.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}const d=t.get(h);if(d===void 0)t.set(h,e(h,f));else if(d.version<h.version){if(d.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(d.buffer,h,f),d.version=h.version}}return{get:r,remove:l,update:u}}var oU=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,lU=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,cU=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,uU=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hU=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,fU=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,dU=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,pU=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,mU=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,gU=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,vU=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,xU=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,yU=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,_U=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,SU=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,MU=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,bU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,EU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,TU=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,AU=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,wU=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,RU=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,CU=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,DU=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,LU=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,PU=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,UU=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,NU=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,OU=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,IU=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,FU="gl_FragColor = linearToOutputTexel( gl_FragColor );",zU=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,BU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,VU=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,jU=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,HU=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,kU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,GU=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,WU=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,XU=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,qU=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,YU=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,KU=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ZU=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,QU=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,JU=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,$U=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,tN=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,eN=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,nN=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,iN=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,sN=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,aN=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,rN=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,oN=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lN=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,cN=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,uN=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hN=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fN=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,dN=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,pN=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,mN=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gN=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vN=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,xN=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,yN=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,_N=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,SN=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,MN=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,bN=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,EN=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,TN=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,AN=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,wN=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,RN=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,CN=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,DN=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,LN=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,PN=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,UN=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,NN=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ON=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,IN=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,FN=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,zN=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,BN=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,VN=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,jN=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,HN=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,kN=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,GN=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,WN=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,XN=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,qN=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,YN=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,KN=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ZN=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,QN=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,JN=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,$N=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tO=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,eO=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,nO=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,iO=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sO=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,aO=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const rO=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,oO=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cO=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hO=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fO=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,dO=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,pO=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,mO=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,gO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,vO=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xO=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yO=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_O=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,SO=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MO=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bO=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EO=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,TO=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AO=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,wO=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,RO=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CO=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DO=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,LO=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PO=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UO=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NO=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,OO=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,IO=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FO=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,zO=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,BO=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ce={alphahash_fragment:oU,alphahash_pars_fragment:lU,alphamap_fragment:cU,alphamap_pars_fragment:uU,alphatest_fragment:hU,alphatest_pars_fragment:fU,aomap_fragment:dU,aomap_pars_fragment:pU,batching_pars_vertex:mU,batching_vertex:gU,begin_vertex:vU,beginnormal_vertex:xU,bsdfs:yU,iridescence_fragment:_U,bumpmap_pars_fragment:SU,clipping_planes_fragment:MU,clipping_planes_pars_fragment:bU,clipping_planes_pars_vertex:EU,clipping_planes_vertex:TU,color_fragment:AU,color_pars_fragment:wU,color_pars_vertex:RU,color_vertex:CU,common:DU,cube_uv_reflection_fragment:LU,defaultnormal_vertex:PU,displacementmap_pars_vertex:UU,displacementmap_vertex:NU,emissivemap_fragment:OU,emissivemap_pars_fragment:IU,colorspace_fragment:FU,colorspace_pars_fragment:zU,envmap_fragment:BU,envmap_common_pars_fragment:VU,envmap_pars_fragment:jU,envmap_pars_vertex:HU,envmap_physical_pars_fragment:$U,envmap_vertex:kU,fog_vertex:GU,fog_pars_vertex:WU,fog_fragment:XU,fog_pars_fragment:qU,gradientmap_pars_fragment:YU,lightmap_pars_fragment:KU,lights_lambert_fragment:ZU,lights_lambert_pars_fragment:QU,lights_pars_begin:JU,lights_toon_fragment:tN,lights_toon_pars_fragment:eN,lights_phong_fragment:nN,lights_phong_pars_fragment:iN,lights_physical_fragment:sN,lights_physical_pars_fragment:aN,lights_fragment_begin:rN,lights_fragment_maps:oN,lights_fragment_end:lN,logdepthbuf_fragment:cN,logdepthbuf_pars_fragment:uN,logdepthbuf_pars_vertex:hN,logdepthbuf_vertex:fN,map_fragment:dN,map_pars_fragment:pN,map_particle_fragment:mN,map_particle_pars_fragment:gN,metalnessmap_fragment:vN,metalnessmap_pars_fragment:xN,morphinstance_vertex:yN,morphcolor_vertex:_N,morphnormal_vertex:SN,morphtarget_pars_vertex:MN,morphtarget_vertex:bN,normal_fragment_begin:EN,normal_fragment_maps:TN,normal_pars_fragment:AN,normal_pars_vertex:wN,normal_vertex:RN,normalmap_pars_fragment:CN,clearcoat_normal_fragment_begin:DN,clearcoat_normal_fragment_maps:LN,clearcoat_pars_fragment:PN,iridescence_pars_fragment:UN,opaque_fragment:NN,packing:ON,premultiplied_alpha_fragment:IN,project_vertex:FN,dithering_fragment:zN,dithering_pars_fragment:BN,roughnessmap_fragment:VN,roughnessmap_pars_fragment:jN,shadowmap_pars_fragment:HN,shadowmap_pars_vertex:kN,shadowmap_vertex:GN,shadowmask_pars_fragment:WN,skinbase_vertex:XN,skinning_pars_vertex:qN,skinning_vertex:YN,skinnormal_vertex:KN,specularmap_fragment:ZN,specularmap_pars_fragment:QN,tonemapping_fragment:JN,tonemapping_pars_fragment:$N,transmission_fragment:tO,transmission_pars_fragment:eO,uv_pars_fragment:nO,uv_pars_vertex:iO,uv_vertex:sO,worldpos_vertex:aO,background_vert:rO,background_frag:oO,backgroundCube_vert:lO,backgroundCube_frag:cO,cube_vert:uO,cube_frag:hO,depth_vert:fO,depth_frag:dO,distanceRGBA_vert:pO,distanceRGBA_frag:mO,equirect_vert:gO,equirect_frag:vO,linedashed_vert:xO,linedashed_frag:yO,meshbasic_vert:_O,meshbasic_frag:SO,meshlambert_vert:MO,meshlambert_frag:bO,meshmatcap_vert:EO,meshmatcap_frag:TO,meshnormal_vert:AO,meshnormal_frag:wO,meshphong_vert:RO,meshphong_frag:CO,meshphysical_vert:DO,meshphysical_frag:LO,meshtoon_vert:PO,meshtoon_frag:UO,points_vert:NO,points_frag:OO,shadow_vert:IO,shadow_frag:FO,sprite_vert:zO,sprite_frag:BO},Nt={common:{diffuse:{value:new Se(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ue},alphaMap:{value:null},alphaMapTransform:{value:new ue},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ue}},envmap:{envMap:{value:null},envMapRotation:{value:new ue},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ue}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ue}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ue},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ue},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ue},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ue}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ue}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ue}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Se(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Se(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ue},alphaTest:{value:0},uvTransform:{value:new ue}},sprite:{diffuse:{value:new Se(16777215)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ue},alphaMap:{value:null},alphaMapTransform:{value:new ue},alphaTest:{value:0}}},Hi={basic:{uniforms:Xn([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.fog]),vertexShader:ce.meshbasic_vert,fragmentShader:ce.meshbasic_frag},lambert:{uniforms:Xn([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Se(0)}}]),vertexShader:ce.meshlambert_vert,fragmentShader:ce.meshlambert_frag},phong:{uniforms:Xn([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Se(0)},specular:{value:new Se(1118481)},shininess:{value:30}}]),vertexShader:ce.meshphong_vert,fragmentShader:ce.meshphong_frag},standard:{uniforms:Xn([Nt.common,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.roughnessmap,Nt.metalnessmap,Nt.fog,Nt.lights,{emissive:{value:new Se(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ce.meshphysical_vert,fragmentShader:ce.meshphysical_frag},toon:{uniforms:Xn([Nt.common,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.gradientmap,Nt.fog,Nt.lights,{emissive:{value:new Se(0)}}]),vertexShader:ce.meshtoon_vert,fragmentShader:ce.meshtoon_frag},matcap:{uniforms:Xn([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,{matcap:{value:null}}]),vertexShader:ce.meshmatcap_vert,fragmentShader:ce.meshmatcap_frag},points:{uniforms:Xn([Nt.points,Nt.fog]),vertexShader:ce.points_vert,fragmentShader:ce.points_frag},dashed:{uniforms:Xn([Nt.common,Nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ce.linedashed_vert,fragmentShader:ce.linedashed_frag},depth:{uniforms:Xn([Nt.common,Nt.displacementmap]),vertexShader:ce.depth_vert,fragmentShader:ce.depth_frag},normal:{uniforms:Xn([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,{opacity:{value:1}}]),vertexShader:ce.meshnormal_vert,fragmentShader:ce.meshnormal_frag},sprite:{uniforms:Xn([Nt.sprite,Nt.fog]),vertexShader:ce.sprite_vert,fragmentShader:ce.sprite_frag},background:{uniforms:{uvTransform:{value:new ue},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ce.background_vert,fragmentShader:ce.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ue}},vertexShader:ce.backgroundCube_vert,fragmentShader:ce.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ce.cube_vert,fragmentShader:ce.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ce.equirect_vert,fragmentShader:ce.equirect_frag},distanceRGBA:{uniforms:Xn([Nt.common,Nt.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ce.distanceRGBA_vert,fragmentShader:ce.distanceRGBA_frag},shadow:{uniforms:Xn([Nt.lights,Nt.fog,{color:{value:new Se(0)},opacity:{value:1}}]),vertexShader:ce.shadow_vert,fragmentShader:ce.shadow_frag}};Hi.physical={uniforms:Xn([Hi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ue},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ue},clearcoatNormalScale:{value:new Me(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ue},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ue},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ue},sheen:{value:0},sheenColor:{value:new Se(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ue},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ue},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ue},transmissionSamplerSize:{value:new Me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ue},attenuationDistance:{value:0},attenuationColor:{value:new Se(0)},specularColor:{value:new Se(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ue},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ue},anisotropyVector:{value:new Me},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ue}}]),vertexShader:ce.meshphysical_vert,fragmentShader:ce.meshphysical_frag};const qu={r:0,b:0,g:0},ka=new Zi,VO=new We;function jO(n,t,e,s,r,l,u){const h=new Se(0);let f=l===!0?0:1,d,g,x=null,y=0,_=null;function b(w){let A=w.isScene===!0?w.background:null;return A&&A.isTexture&&(A=(w.backgroundBlurriness>0?e:t).get(A)),A}function E(w){let A=!1;const N=b(w);N===null?S(h,f):N&&N.isColor&&(S(N,1),A=!0);const O=n.xr.getEnvironmentBlendMode();O==="additive"?s.buffers.color.setClear(0,0,0,1,u):O==="alpha-blend"&&s.buffers.color.setClear(0,0,0,0,u),(n.autoClear||A)&&(s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function M(w,A){const N=b(A);N&&(N.isCubeTexture||N.mapping===Eh)?(g===void 0&&(g=new Cn(new Ao(1,1,1),new ga({name:"BackgroundCubeMaterial",uniforms:_o(Hi.backgroundCube.uniforms),vertexShader:Hi.backgroundCube.vertexShader,fragmentShader:Hi.backgroundCube.fragmentShader,side:Yn,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(O,I,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(g)),ka.copy(A.backgroundRotation),ka.x*=-1,ka.y*=-1,ka.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(ka.y*=-1,ka.z*=-1),g.material.uniforms.envMap.value=N,g.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(VO.makeRotationFromEuler(ka)),g.material.toneMapped=De.getTransfer(N.colorSpace)!==je,(x!==N||y!==N.version||_!==n.toneMapping)&&(g.material.needsUpdate=!0,x=N,y=N.version,_=n.toneMapping),g.layers.enableAll(),w.unshift(g,g.geometry,g.material,0,0,null)):N&&N.isTexture&&(d===void 0&&(d=new Cn(new Th(2,2),new ga({name:"BackgroundMaterial",uniforms:_o(Hi.background.uniforms),vertexShader:Hi.background.vertexShader,fragmentShader:Hi.background.fragmentShader,side:ma,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=N,d.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,d.material.toneMapped=De.getTransfer(N.colorSpace)!==je,N.matrixAutoUpdate===!0&&N.updateMatrix(),d.material.uniforms.uvTransform.value.copy(N.matrix),(x!==N||y!==N.version||_!==n.toneMapping)&&(d.material.needsUpdate=!0,x=N,y=N.version,_=n.toneMapping),d.layers.enableAll(),w.unshift(d,d.geometry,d.material,0,0,null))}function S(w,A){w.getRGB(qu,R1(n)),s.buffers.color.setClear(qu.r,qu.g,qu.b,A,u)}function L(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return h},setClearColor:function(w,A=1){h.set(w),f=A,S(h,f)},getClearAlpha:function(){return f},setClearAlpha:function(w){f=w,S(h,f)},render:E,addToRenderList:M,dispose:L}}function HO(n,t){const e=n.getParameter(n.MAX_VERTEX_ATTRIBS),s={},r=y(null);let l=r,u=!1;function h(C,j,it,$,et){let ut=!1;const V=x($,it,j);l!==V&&(l=V,d(l.object)),ut=_(C,$,it,et),ut&&b(C,$,it,et),et!==null&&t.update(et,n.ELEMENT_ARRAY_BUFFER),(ut||u)&&(u=!1,A(C,j,it,$),et!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(et).buffer))}function f(){return n.createVertexArray()}function d(C){return n.bindVertexArray(C)}function g(C){return n.deleteVertexArray(C)}function x(C,j,it){const $=it.wireframe===!0;let et=s[C.id];et===void 0&&(et={},s[C.id]=et);let ut=et[j.id];ut===void 0&&(ut={},et[j.id]=ut);let V=ut[$];return V===void 0&&(V=y(f()),ut[$]=V),V}function y(C){const j=[],it=[],$=[];for(let et=0;et<e;et++)j[et]=0,it[et]=0,$[et]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:it,attributeDivisors:$,object:C,attributes:{},index:null}}function _(C,j,it,$){const et=l.attributes,ut=j.attributes;let V=0;const G=it.getAttributes();for(const q in G)if(G[q].location>=0){const F=et[q];let nt=ut[q];if(nt===void 0&&(q==="instanceMatrix"&&C.instanceMatrix&&(nt=C.instanceMatrix),q==="instanceColor"&&C.instanceColor&&(nt=C.instanceColor)),F===void 0||F.attribute!==nt||nt&&F.data!==nt.data)return!0;V++}return l.attributesNum!==V||l.index!==$}function b(C,j,it,$){const et={},ut=j.attributes;let V=0;const G=it.getAttributes();for(const q in G)if(G[q].location>=0){let F=ut[q];F===void 0&&(q==="instanceMatrix"&&C.instanceMatrix&&(F=C.instanceMatrix),q==="instanceColor"&&C.instanceColor&&(F=C.instanceColor));const nt={};nt.attribute=F,F&&F.data&&(nt.data=F.data),et[q]=nt,V++}l.attributes=et,l.attributesNum=V,l.index=$}function E(){const C=l.newAttributes;for(let j=0,it=C.length;j<it;j++)C[j]=0}function M(C){S(C,0)}function S(C,j){const it=l.newAttributes,$=l.enabledAttributes,et=l.attributeDivisors;it[C]=1,$[C]===0&&(n.enableVertexAttribArray(C),$[C]=1),et[C]!==j&&(n.vertexAttribDivisor(C,j),et[C]=j)}function L(){const C=l.newAttributes,j=l.enabledAttributes;for(let it=0,$=j.length;it<$;it++)j[it]!==C[it]&&(n.disableVertexAttribArray(it),j[it]=0)}function w(C,j,it,$,et,ut,V){V===!0?n.vertexAttribIPointer(C,j,it,et,ut):n.vertexAttribPointer(C,j,it,$,et,ut)}function A(C,j,it,$){E();const et=$.attributes,ut=it.getAttributes(),V=j.defaultAttributeValues;for(const G in ut){const q=ut[G];if(q.location>=0){let yt=et[G];if(yt===void 0&&(G==="instanceMatrix"&&C.instanceMatrix&&(yt=C.instanceMatrix),G==="instanceColor"&&C.instanceColor&&(yt=C.instanceColor)),yt!==void 0){const F=yt.normalized,nt=yt.itemSize,Mt=t.get(yt);if(Mt===void 0)continue;const bt=Mt.buffer,J=Mt.type,ft=Mt.bytesPerElement,vt=J===n.INT||J===n.UNSIGNED_INT||yt.gpuType===Cg;if(yt.isInterleavedBufferAttribute){const wt=yt.data,Ct=wt.stride,ee=yt.offset;if(wt.isInstancedInterleavedBuffer){for(let Ht=0;Ht<q.locationSize;Ht++)S(q.location+Ht,wt.meshPerAttribute);C.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=wt.meshPerAttribute*wt.count)}else for(let Ht=0;Ht<q.locationSize;Ht++)M(q.location+Ht);n.bindBuffer(n.ARRAY_BUFFER,bt);for(let Ht=0;Ht<q.locationSize;Ht++)w(q.location+Ht,nt/q.locationSize,J,F,Ct*ft,(ee+nt/q.locationSize*Ht)*ft,vt)}else{if(yt.isInstancedBufferAttribute){for(let wt=0;wt<q.locationSize;wt++)S(q.location+wt,yt.meshPerAttribute);C.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=yt.meshPerAttribute*yt.count)}else for(let wt=0;wt<q.locationSize;wt++)M(q.location+wt);n.bindBuffer(n.ARRAY_BUFFER,bt);for(let wt=0;wt<q.locationSize;wt++)w(q.location+wt,nt/q.locationSize,J,F,nt*ft,nt/q.locationSize*wt*ft,vt)}}else if(V!==void 0){const F=V[G];if(F!==void 0)switch(F.length){case 2:n.vertexAttrib2fv(q.location,F);break;case 3:n.vertexAttrib3fv(q.location,F);break;case 4:n.vertexAttrib4fv(q.location,F);break;default:n.vertexAttrib1fv(q.location,F)}}}}L()}function N(){z();for(const C in s){const j=s[C];for(const it in j){const $=j[it];for(const et in $)g($[et].object),delete $[et];delete j[it]}delete s[C]}}function O(C){if(s[C.id]===void 0)return;const j=s[C.id];for(const it in j){const $=j[it];for(const et in $)g($[et].object),delete $[et];delete j[it]}delete s[C.id]}function I(C){for(const j in s){const it=s[j];if(it[C.id]===void 0)continue;const $=it[C.id];for(const et in $)g($[et].object),delete $[et];delete it[C.id]}}function z(){U(),u=!0,l!==r&&(l=r,d(l.object))}function U(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:h,reset:z,resetDefaultState:U,dispose:N,releaseStatesOfGeometry:O,releaseStatesOfProgram:I,initAttributes:E,enableAttribute:M,disableUnusedAttributes:L}}function kO(n,t,e){let s;function r(d){s=d}function l(d,g){n.drawArrays(s,d,g),e.update(g,s,1)}function u(d,g,x){x!==0&&(n.drawArraysInstanced(s,d,g,x),e.update(g,s,x))}function h(d,g,x){if(x===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(s,d,0,g,0,x);let _=0;for(let b=0;b<x;b++)_+=g[b];e.update(_,s,1)}function f(d,g,x,y){if(x===0)return;const _=t.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<d.length;b++)u(d[b],g[b],y[b]);else{_.multiDrawArraysInstancedWEBGL(s,d,0,g,0,y,0,x);let b=0;for(let E=0;E<x;E++)b+=g[E]*y[E];e.update(b,s,1)}}this.setMode=r,this.render=l,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=f}function GO(n,t,e,s){let r;function l(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){const I=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function u(I){return!(I!==Ni&&s.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function h(I){const z=I===lc&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(I!==Ki&&s.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==Gi&&!z)}function f(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=e.precision!==void 0?e.precision:"highp";const g=f(d);g!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",g,"instead."),d=g);const x=e.logarithmicDepthBuffer===!0,y=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),_=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=n.getParameter(n.MAX_TEXTURE_SIZE),M=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),S=n.getParameter(n.MAX_VERTEX_ATTRIBS),L=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),N=b>0,O=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:l,getMaxPrecision:f,textureFormatReadable:u,textureTypeReadable:h,precision:d,logarithmicDepthBuffer:x,reverseDepthBuffer:y,maxTextures:_,maxVertexTextures:b,maxTextureSize:E,maxCubemapSize:M,maxAttributes:S,maxVertexUniforms:L,maxVaryings:w,maxFragmentUniforms:A,vertexTextures:N,maxSamples:O}}function WO(n){const t=this;let e=null,s=0,r=!1,l=!1;const u=new la,h=new ue,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(x,y){const _=x.length!==0||y||s!==0||r;return r=y,s=x.length,_},this.beginShadows=function(){l=!0,g(null)},this.endShadows=function(){l=!1},this.setGlobalState=function(x,y){e=g(x,y,0)},this.setState=function(x,y,_){const b=x.clippingPlanes,E=x.clipIntersection,M=x.clipShadows,S=n.get(x);if(!r||b===null||b.length===0||l&&!M)l?g(null):d();else{const L=l?0:s,w=L*4;let A=S.clippingState||null;f.value=A,A=g(b,y,w,_);for(let N=0;N!==w;++N)A[N]=e[N];S.clippingState=A,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=L}};function d(){f.value!==e&&(f.value=e,f.needsUpdate=s>0),t.numPlanes=s,t.numIntersection=0}function g(x,y,_,b){const E=x!==null?x.length:0;let M=null;if(E!==0){if(M=f.value,b!==!0||M===null){const S=_+E*4,L=y.matrixWorldInverse;h.getNormalMatrix(L),(M===null||M.length<S)&&(M=new Float32Array(S));for(let w=0,A=_;w!==E;++w,A+=4)u.copy(x[w]).applyMatrix4(L,h),u.normal.toArray(M,A),M[A+3]=u.constant}f.value=M,f.needsUpdate=!0}return t.numPlanes=E,t.numIntersection=0,M}}function XO(n){let t=new WeakMap;function e(u,h){return h===um?u.mapping=vo:h===hm&&(u.mapping=xo),u}function s(u){if(u&&u.isTexture){const h=u.mapping;if(h===um||h===hm)if(t.has(u)){const f=t.get(u).texture;return e(f,u.mapping)}else{const f=u.image;if(f&&f.height>0){const d=new HP(f.height);return d.fromEquirectangularTexture(n,u),t.set(u,d),u.addEventListener("dispose",r),e(d.texture,u.mapping)}else return null}}return u}function r(u){const h=u.target;h.removeEventListener("dispose",r);const f=t.get(h);f!==void 0&&(t.delete(h),f.dispose())}function l(){t=new WeakMap}return{get:s,dispose:l}}const uo=4,VS=[.125,.215,.35,.446,.526,.582],Ya=20,Ep=new tU,jS=new Se;let Tp=null,Ap=0,wp=0,Rp=!1;const Xa=(1+Math.sqrt(5))/2,$r=1/Xa,HS=[new Q(-Xa,$r,0),new Q(Xa,$r,0),new Q(-$r,0,Xa),new Q($r,0,Xa),new Q(0,Xa,-$r),new Q(0,Xa,$r),new Q(-1,1,-1),new Q(1,1,-1),new Q(-1,1,1),new Q(1,1,1)],qO=new Q;class km{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,s=.1,r=100,l={}){const{size:u=256,position:h=qO}=l;Tp=this._renderer.getRenderTarget(),Ap=this._renderer.getActiveCubeFace(),wp=this._renderer.getActiveMipmapLevel(),Rp=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(u);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(t,s,r,f,h),e>0&&this._blur(f,0,0,e),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=WS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=GS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Tp,Ap,wp),this._renderer.xr.enabled=Rp,t.scissorTest=!1,Yu(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===vo||t.mapping===xo?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Tp=this._renderer.getRenderTarget(),Ap=this._renderer.getActiveCubeFace(),wp=this._renderer.getActiveMipmapLevel(),Rp=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const s=e||this._allocateTargets();return this._textureToCubeUV(t,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,s={magFilter:ki,minFilter:ki,generateMipmaps:!1,type:lc,format:Ni,colorSpace:yo,depthBuffer:!1},r=kS(t,e,s);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=kS(t,e,s);const{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=YO(l)),this._blurMaterial=KO(l,t,e)}return r}_compileMaterial(t){const e=new Cn(this._lodPlanes[0],t);this._renderer.compile(e,Ep)}_sceneToCubeUV(t,e,s,r,l){const f=new di(90,1,e,s),d=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],x=this._renderer,y=x.autoClear,_=x.toneMapping;x.getClearColor(jS),x.toneMapping=da,x.autoClear=!1;const b=new Bg({name:"PMREM.Background",side:Yn,depthWrite:!1,depthTest:!1}),E=new Cn(new Ao,b);let M=!1;const S=t.background;S?S.isColor&&(b.color.copy(S),t.background=null,M=!0):(b.color.copy(jS),M=!0);for(let L=0;L<6;L++){const w=L%3;w===0?(f.up.set(0,d[L],0),f.position.set(l.x,l.y,l.z),f.lookAt(l.x+g[L],l.y,l.z)):w===1?(f.up.set(0,0,d[L]),f.position.set(l.x,l.y,l.z),f.lookAt(l.x,l.y+g[L],l.z)):(f.up.set(0,d[L],0),f.position.set(l.x,l.y,l.z),f.lookAt(l.x,l.y,l.z+g[L]));const A=this._cubeSize;Yu(r,w*A,L>2?A:0,A,A),x.setRenderTarget(r),M&&x.render(E,f),x.render(t,f)}E.geometry.dispose(),E.material.dispose(),x.toneMapping=_,x.autoClear=y,t.background=S}_textureToCubeUV(t,e){const s=this._renderer,r=t.mapping===vo||t.mapping===xo;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=WS()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=GS());const l=r?this._cubemapMaterial:this._equirectMaterial,u=new Cn(this._lodPlanes[0],l),h=l.uniforms;h.envMap.value=t;const f=this._cubeSize;Yu(e,0,0,3*f,2*f),s.setRenderTarget(e),s.render(u,Ep)}_applyPMREM(t){const e=this._renderer,s=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let l=1;l<r;l++){const u=Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]),h=HS[(r-l-1)%HS.length];this._blur(t,l-1,l,u,h)}e.autoClear=s}_blur(t,e,s,r,l){const u=this._pingPongRenderTarget;this._halfBlur(t,u,e,s,r,"latitudinal",l),this._halfBlur(u,t,s,s,r,"longitudinal",l)}_halfBlur(t,e,s,r,l,u,h){const f=this._renderer,d=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const g=3,x=new Cn(this._lodPlanes[r],d),y=d.uniforms,_=this._sizeLods[s]-1,b=isFinite(l)?Math.PI/(2*_):2*Math.PI/(2*Ya-1),E=l/b,M=isFinite(l)?1+Math.floor(g*E):Ya;M>Ya&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${Ya}`);const S=[];let L=0;for(let I=0;I<Ya;++I){const z=I/E,U=Math.exp(-z*z/2);S.push(U),I===0?L+=U:I<M&&(L+=2*U)}for(let I=0;I<S.length;I++)S[I]=S[I]/L;y.envMap.value=t.texture,y.samples.value=M,y.weights.value=S,y.latitudinal.value=u==="latitudinal",h&&(y.poleAxis.value=h);const{_lodMax:w}=this;y.dTheta.value=b,y.mipInt.value=w-s;const A=this._sizeLods[r],N=3*A*(r>w-uo?r-w+uo:0),O=4*(this._cubeSize-A);Yu(e,N,O,3*A,2*A),f.setRenderTarget(e),f.render(x,Ep)}}function YO(n){const t=[],e=[],s=[];let r=n;const l=n-uo+1+VS.length;for(let u=0;u<l;u++){const h=Math.pow(2,r);e.push(h);let f=1/h;u>n-uo?f=VS[u-n+uo-1]:u===0&&(f=0),s.push(f);const d=1/(h-2),g=-d,x=1+d,y=[g,g,x,g,x,x,g,g,x,x,g,x],_=6,b=6,E=3,M=2,S=1,L=new Float32Array(E*b*_),w=new Float32Array(M*b*_),A=new Float32Array(S*b*_);for(let O=0;O<_;O++){const I=O%3*2/3-1,z=O>2?0:-1,U=[I,z,0,I+2/3,z,0,I+2/3,z+1,0,I,z,0,I+2/3,z+1,0,I,z+1,0];L.set(U,E*b*O),w.set(y,M*b*O);const C=[O,O,O,O,O,O];A.set(C,S*b*O)}const N=new xa;N.setAttribute("position",new Oi(L,E)),N.setAttribute("uv",new Oi(w,M)),N.setAttribute("faceIndex",new Oi(A,S)),t.push(N),r>uo&&r--}return{lodPlanes:t,sizeLods:e,sigmas:s}}function kS(n,t,e){const s=new ar(n,t,e);return s.texture.mapping=Eh,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function Yu(n,t,e,s,r){n.viewport.set(t,e,s,r),n.scissor.set(t,e,s,r)}function KO(n,t,e){const s=new Float32Array(Ya),r=new Q(0,1,0);return new ga({name:"SphericalGaussianBlur",defines:{n:Ya,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Hg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:fa,depthTest:!1,depthWrite:!1})}function GS(){return new ga({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Hg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:fa,depthTest:!1,depthWrite:!1})}function WS(){return new ga({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Hg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:fa,depthTest:!1,depthWrite:!1})}function Hg(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ZO(n){let t=new WeakMap,e=null;function s(h){if(h&&h.isTexture){const f=h.mapping,d=f===um||f===hm,g=f===vo||f===xo;if(d||g){let x=t.get(h);const y=x!==void 0?x.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==y)return e===null&&(e=new km(n)),x=d?e.fromEquirectangular(h,x):e.fromCubemap(h,x),x.texture.pmremVersion=h.pmremVersion,t.set(h,x),x.texture;if(x!==void 0)return x.texture;{const _=h.image;return d&&_&&_.height>0||g&&_&&r(_)?(e===null&&(e=new km(n)),x=d?e.fromEquirectangular(h):e.fromCubemap(h),x.texture.pmremVersion=h.pmremVersion,t.set(h,x),h.addEventListener("dispose",l),x.texture):null}}}return h}function r(h){let f=0;const d=6;for(let g=0;g<d;g++)h[g]!==void 0&&f++;return f===d}function l(h){const f=h.target;f.removeEventListener("dispose",l);const d=t.get(f);d!==void 0&&(t.delete(f),d.dispose())}function u(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:s,dispose:u}}function QO(n){const t={};function e(s){if(t[s]!==void 0)return t[s];let r;switch(s){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(s)}return t[s]=r,r}return{has:function(s){return e(s)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(s){const r=e(s);return r===null&&fo("THREE.WebGLRenderer: "+s+" extension not supported."),r}}}function JO(n,t,e,s){const r={},l=new WeakMap;function u(x){const y=x.target;y.index!==null&&t.remove(y.index);for(const b in y.attributes)t.remove(y.attributes[b]);y.removeEventListener("dispose",u),delete r[y.id];const _=l.get(y);_&&(t.remove(_),l.delete(y)),s.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,e.memory.geometries--}function h(x,y){return r[y.id]===!0||(y.addEventListener("dispose",u),r[y.id]=!0,e.memory.geometries++),y}function f(x){const y=x.attributes;for(const _ in y)t.update(y[_],n.ARRAY_BUFFER)}function d(x){const y=[],_=x.index,b=x.attributes.position;let E=0;if(_!==null){const L=_.array;E=_.version;for(let w=0,A=L.length;w<A;w+=3){const N=L[w+0],O=L[w+1],I=L[w+2];y.push(N,O,O,I,I,N)}}else if(b!==void 0){const L=b.array;E=b.version;for(let w=0,A=L.length/3-1;w<A;w+=3){const N=w+0,O=w+1,I=w+2;y.push(N,O,O,I,I,N)}}else return;const M=new(M1(y)?w1:A1)(y,1);M.version=E;const S=l.get(x);S&&t.remove(S),l.set(x,M)}function g(x){const y=l.get(x);if(y){const _=x.index;_!==null&&y.version<_.version&&d(x)}else d(x);return l.get(x)}return{get:h,update:f,getWireframeAttribute:g}}function $O(n,t,e){let s;function r(y){s=y}let l,u;function h(y){l=y.type,u=y.bytesPerElement}function f(y,_){n.drawElements(s,_,l,y*u),e.update(_,s,1)}function d(y,_,b){b!==0&&(n.drawElementsInstanced(s,_,l,y*u,b),e.update(_,s,b))}function g(y,_,b){if(b===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(s,_,0,l,y,0,b);let M=0;for(let S=0;S<b;S++)M+=_[S];e.update(M,s,1)}function x(y,_,b,E){if(b===0)return;const M=t.get("WEBGL_multi_draw");if(M===null)for(let S=0;S<y.length;S++)d(y[S]/u,_[S],E[S]);else{M.multiDrawElementsInstancedWEBGL(s,_,0,l,y,0,E,0,b);let S=0;for(let L=0;L<b;L++)S+=_[L]*E[L];e.update(S,s,1)}}this.setMode=r,this.setIndex=h,this.render=f,this.renderInstances=d,this.renderMultiDraw=g,this.renderMultiDrawInstances=x}function tI(n){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function s(l,u,h){switch(e.calls++,u){case n.TRIANGLES:e.triangles+=h*(l/3);break;case n.LINES:e.lines+=h*(l/2);break;case n.LINE_STRIP:e.lines+=h*(l-1);break;case n.LINE_LOOP:e.lines+=h*l;break;case n.POINTS:e.points+=h*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:s}}function eI(n,t,e){const s=new WeakMap,r=new He;function l(u,h,f){const d=u.morphTargetInfluences,g=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,x=g!==void 0?g.length:0;let y=s.get(h);if(y===void 0||y.count!==x){let C=function(){z.dispose(),s.delete(h),h.removeEventListener("dispose",C)};var _=C;y!==void 0&&y.texture.dispose();const b=h.morphAttributes.position!==void 0,E=h.morphAttributes.normal!==void 0,M=h.morphAttributes.color!==void 0,S=h.morphAttributes.position||[],L=h.morphAttributes.normal||[],w=h.morphAttributes.color||[];let A=0;b===!0&&(A=1),E===!0&&(A=2),M===!0&&(A=3);let N=h.attributes.position.count*A,O=1;N>t.maxTextureSize&&(O=Math.ceil(N/t.maxTextureSize),N=t.maxTextureSize);const I=new Float32Array(N*O*4*x),z=new b1(I,N,O,x);z.type=Gi,z.needsUpdate=!0;const U=A*4;for(let j=0;j<x;j++){const it=S[j],$=L[j],et=w[j],ut=N*O*4*j;for(let V=0;V<it.count;V++){const G=V*U;b===!0&&(r.fromBufferAttribute(it,V),I[ut+G+0]=r.x,I[ut+G+1]=r.y,I[ut+G+2]=r.z,I[ut+G+3]=0),E===!0&&(r.fromBufferAttribute($,V),I[ut+G+4]=r.x,I[ut+G+5]=r.y,I[ut+G+6]=r.z,I[ut+G+7]=0),M===!0&&(r.fromBufferAttribute(et,V),I[ut+G+8]=r.x,I[ut+G+9]=r.y,I[ut+G+10]=r.z,I[ut+G+11]=et.itemSize===4?r.w:1)}}y={count:x,texture:z,size:new Me(N,O)},s.set(h,y),h.addEventListener("dispose",C)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)f.getUniforms().setValue(n,"morphTexture",u.morphTexture,e);else{let b=0;for(let M=0;M<d.length;M++)b+=d[M];const E=h.morphTargetsRelative?1:1-b;f.getUniforms().setValue(n,"morphTargetBaseInfluence",E),f.getUniforms().setValue(n,"morphTargetInfluences",d)}f.getUniforms().setValue(n,"morphTargetsTexture",y.texture,e),f.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}return{update:l}}function nI(n,t,e,s){let r=new WeakMap;function l(f){const d=s.render.frame,g=f.geometry,x=t.get(f,g);if(r.get(x)!==d&&(t.update(x),r.set(x,d)),f.isInstancedMesh&&(f.hasEventListener("dispose",h)===!1&&f.addEventListener("dispose",h),r.get(f)!==d&&(e.update(f.instanceMatrix,n.ARRAY_BUFFER),f.instanceColor!==null&&e.update(f.instanceColor,n.ARRAY_BUFFER),r.set(f,d))),f.isSkinnedMesh){const y=f.skeleton;r.get(y)!==d&&(y.update(),r.set(y,d))}return x}function u(){r=new WeakMap}function h(f){const d=f.target;d.removeEventListener("dispose",h),e.remove(d.instanceMatrix),d.instanceColor!==null&&e.remove(d.instanceColor)}return{update:l,dispose:u}}const F1=new Kn,XS=new U1(1,1),z1=new b1,B1=new TP,V1=new D1,qS=[],YS=[],KS=new Float32Array(16),ZS=new Float32Array(9),QS=new Float32Array(4);function wo(n,t,e){const s=n[0];if(s<=0||s>0)return n;const r=t*e;let l=qS[r];if(l===void 0&&(l=new Float32Array(r),qS[r]=l),t!==0){s.toArray(l,0);for(let u=1,h=0;u!==t;++u)h+=e,n[u].toArray(l,h)}return l}function _n(n,t){if(n.length!==t.length)return!1;for(let e=0,s=n.length;e<s;e++)if(n[e]!==t[e])return!1;return!0}function Sn(n,t){for(let e=0,s=t.length;e<s;e++)n[e]=t[e]}function Ah(n,t){let e=YS[t];e===void 0&&(e=new Int32Array(t),YS[t]=e);for(let s=0;s!==t;++s)e[s]=n.allocateTextureUnit();return e}function iI(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function sI(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(_n(e,t))return;n.uniform2fv(this.addr,t),Sn(e,t)}}function aI(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(_n(e,t))return;n.uniform3fv(this.addr,t),Sn(e,t)}}function rI(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(_n(e,t))return;n.uniform4fv(this.addr,t),Sn(e,t)}}function oI(n,t){const e=this.cache,s=t.elements;if(s===void 0){if(_n(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),Sn(e,t)}else{if(_n(e,s))return;QS.set(s),n.uniformMatrix2fv(this.addr,!1,QS),Sn(e,s)}}function lI(n,t){const e=this.cache,s=t.elements;if(s===void 0){if(_n(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),Sn(e,t)}else{if(_n(e,s))return;ZS.set(s),n.uniformMatrix3fv(this.addr,!1,ZS),Sn(e,s)}}function cI(n,t){const e=this.cache,s=t.elements;if(s===void 0){if(_n(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),Sn(e,t)}else{if(_n(e,s))return;KS.set(s),n.uniformMatrix4fv(this.addr,!1,KS),Sn(e,s)}}function uI(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function hI(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(_n(e,t))return;n.uniform2iv(this.addr,t),Sn(e,t)}}function fI(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(_n(e,t))return;n.uniform3iv(this.addr,t),Sn(e,t)}}function dI(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(_n(e,t))return;n.uniform4iv(this.addr,t),Sn(e,t)}}function pI(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function mI(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(_n(e,t))return;n.uniform2uiv(this.addr,t),Sn(e,t)}}function gI(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(_n(e,t))return;n.uniform3uiv(this.addr,t),Sn(e,t)}}function vI(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(_n(e,t))return;n.uniform4uiv(this.addr,t),Sn(e,t)}}function xI(n,t,e){const s=this.cache,r=e.allocateTextureUnit();s[0]!==r&&(n.uniform1i(this.addr,r),s[0]=r);let l;this.type===n.SAMPLER_2D_SHADOW?(XS.compareFunction=S1,l=XS):l=F1,e.setTexture2D(t||l,r)}function yI(n,t,e){const s=this.cache,r=e.allocateTextureUnit();s[0]!==r&&(n.uniform1i(this.addr,r),s[0]=r),e.setTexture3D(t||B1,r)}function _I(n,t,e){const s=this.cache,r=e.allocateTextureUnit();s[0]!==r&&(n.uniform1i(this.addr,r),s[0]=r),e.setTextureCube(t||V1,r)}function SI(n,t,e){const s=this.cache,r=e.allocateTextureUnit();s[0]!==r&&(n.uniform1i(this.addr,r),s[0]=r),e.setTexture2DArray(t||z1,r)}function MI(n){switch(n){case 5126:return iI;case 35664:return sI;case 35665:return aI;case 35666:return rI;case 35674:return oI;case 35675:return lI;case 35676:return cI;case 5124:case 35670:return uI;case 35667:case 35671:return hI;case 35668:case 35672:return fI;case 35669:case 35673:return dI;case 5125:return pI;case 36294:return mI;case 36295:return gI;case 36296:return vI;case 35678:case 36198:case 36298:case 36306:case 35682:return xI;case 35679:case 36299:case 36307:return yI;case 35680:case 36300:case 36308:case 36293:return _I;case 36289:case 36303:case 36311:case 36292:return SI}}function bI(n,t){n.uniform1fv(this.addr,t)}function EI(n,t){const e=wo(t,this.size,2);n.uniform2fv(this.addr,e)}function TI(n,t){const e=wo(t,this.size,3);n.uniform3fv(this.addr,e)}function AI(n,t){const e=wo(t,this.size,4);n.uniform4fv(this.addr,e)}function wI(n,t){const e=wo(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function RI(n,t){const e=wo(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function CI(n,t){const e=wo(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function DI(n,t){n.uniform1iv(this.addr,t)}function LI(n,t){n.uniform2iv(this.addr,t)}function PI(n,t){n.uniform3iv(this.addr,t)}function UI(n,t){n.uniform4iv(this.addr,t)}function NI(n,t){n.uniform1uiv(this.addr,t)}function OI(n,t){n.uniform2uiv(this.addr,t)}function II(n,t){n.uniform3uiv(this.addr,t)}function FI(n,t){n.uniform4uiv(this.addr,t)}function zI(n,t,e){const s=this.cache,r=t.length,l=Ah(e,r);_n(s,l)||(n.uniform1iv(this.addr,l),Sn(s,l));for(let u=0;u!==r;++u)e.setTexture2D(t[u]||F1,l[u])}function BI(n,t,e){const s=this.cache,r=t.length,l=Ah(e,r);_n(s,l)||(n.uniform1iv(this.addr,l),Sn(s,l));for(let u=0;u!==r;++u)e.setTexture3D(t[u]||B1,l[u])}function VI(n,t,e){const s=this.cache,r=t.length,l=Ah(e,r);_n(s,l)||(n.uniform1iv(this.addr,l),Sn(s,l));for(let u=0;u!==r;++u)e.setTextureCube(t[u]||V1,l[u])}function jI(n,t,e){const s=this.cache,r=t.length,l=Ah(e,r);_n(s,l)||(n.uniform1iv(this.addr,l),Sn(s,l));for(let u=0;u!==r;++u)e.setTexture2DArray(t[u]||z1,l[u])}function HI(n){switch(n){case 5126:return bI;case 35664:return EI;case 35665:return TI;case 35666:return AI;case 35674:return wI;case 35675:return RI;case 35676:return CI;case 5124:case 35670:return DI;case 35667:case 35671:return LI;case 35668:case 35672:return PI;case 35669:case 35673:return UI;case 5125:return NI;case 36294:return OI;case 36295:return II;case 36296:return FI;case 35678:case 36198:case 36298:case 36306:case 35682:return zI;case 35679:case 36299:case 36307:return BI;case 35680:case 36300:case 36308:case 36293:return VI;case 36289:case 36303:case 36311:case 36292:return jI}}class kI{constructor(t,e,s){this.id=t,this.addr=s,this.cache=[],this.type=e.type,this.setValue=MI(e.type)}}class GI{constructor(t,e,s){this.id=t,this.addr=s,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=HI(e.type)}}class WI{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,s){const r=this.seq;for(let l=0,u=r.length;l!==u;++l){const h=r[l];h.setValue(t,e[h.id],s)}}}const Cp=/(\w+)(\])?(\[|\.)?/g;function JS(n,t){n.seq.push(t),n.map[t.id]=t}function XI(n,t,e){const s=n.name,r=s.length;for(Cp.lastIndex=0;;){const l=Cp.exec(s),u=Cp.lastIndex;let h=l[1];const f=l[2]==="]",d=l[3];if(f&&(h=h|0),d===void 0||d==="["&&u+2===r){JS(e,d===void 0?new kI(h,n,t):new GI(h,n,t));break}else{let x=e.map[h];x===void 0&&(x=new WI(h),JS(e,x)),e=x}}}class lh{constructor(t,e){this.seq=[],this.map={};const s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<s;++r){const l=t.getActiveUniform(e,r),u=t.getUniformLocation(e,l.name);XI(l,u,this)}}setValue(t,e,s,r){const l=this.map[e];l!==void 0&&l.setValue(t,s,r)}setOptional(t,e,s){const r=e[s];r!==void 0&&this.setValue(t,s,r)}static upload(t,e,s,r){for(let l=0,u=e.length;l!==u;++l){const h=e[l],f=s[h.id];f.needsUpdate!==!1&&h.setValue(t,f.value,r)}}static seqWithValue(t,e){const s=[];for(let r=0,l=t.length;r!==l;++r){const u=t[r];u.id in e&&s.push(u)}return s}}function $S(n,t,e){const s=n.createShader(t);return n.shaderSource(s,e),n.compileShader(s),s}const qI=37297;let YI=0;function KI(n,t){const e=n.split(`
`),s=[],r=Math.max(t-6,0),l=Math.min(t+6,e.length);for(let u=r;u<l;u++){const h=u+1;s.push(`${h===t?">":" "} ${h}: ${e[u]}`)}return s.join(`
`)}const tM=new ue;function ZI(n){De._getMatrix(tM,De.workingColorSpace,n);const t=`mat3( ${tM.elements.map(e=>e.toFixed(4))} )`;switch(De.getTransfer(n)){case gh:return[t,"LinearTransferOETF"];case je:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function eM(n,t,e){const s=n.getShaderParameter(t,n.COMPILE_STATUS),r=n.getShaderInfoLog(t).trim();if(s&&r==="")return"";const l=/ERROR: 0:(\d+)/.exec(r);if(l){const u=parseInt(l[1]);return e.toUpperCase()+`

`+r+`

`+KI(n.getShaderSource(t),u)}else return r}function QI(n,t){const e=ZI(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function JI(n,t){let e;switch(t){case FL:e="Linear";break;case zL:e="Reinhard";break;case BL:e="Cineon";break;case h1:e="ACESFilmic";break;case jL:e="AgX";break;case HL:e="Neutral";break;case VL:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const Ku=new Q;function $I(){De.getLuminanceCoefficients(Ku);const n=Ku.x.toFixed(4),t=Ku.y.toFixed(4),e=Ku.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function tF(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Pl).join(`
`)}function eF(n){const t=[];for(const e in n){const s=n[e];s!==!1&&t.push("#define "+e+" "+s)}return t.join(`
`)}function nF(n,t){const e={},s=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let r=0;r<s;r++){const l=n.getActiveAttrib(t,r),u=l.name;let h=1;l.type===n.FLOAT_MAT2&&(h=2),l.type===n.FLOAT_MAT3&&(h=3),l.type===n.FLOAT_MAT4&&(h=4),e[u]={type:l.type,location:n.getAttribLocation(t,u),locationSize:h}}return e}function Pl(n){return n!==""}function nM(n,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function iM(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const iF=/^[ \t]*#include +<([\w\d./]+)>/gm;function Gm(n){return n.replace(iF,aF)}const sF=new Map;function aF(n,t){let e=ce[t];if(e===void 0){const s=sF.get(t);if(s!==void 0)e=ce[s],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,s);else throw new Error("Can not resolve #include <"+t+">")}return Gm(e)}const rF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sM(n){return n.replace(rF,oF)}function oF(n,t,e,s){let r="";for(let l=parseInt(t);l<parseInt(e);l++)r+=s.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return r}function aM(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function lF(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===c1?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===gL?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ss&&(t="SHADOWMAP_TYPE_VSM"),t}function cF(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case vo:case xo:t="ENVMAP_TYPE_CUBE";break;case Eh:t="ENVMAP_TYPE_CUBE_UV";break}return t}function uF(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case xo:t="ENVMAP_MODE_REFRACTION";break}return t}function hF(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case u1:t="ENVMAP_BLENDING_MULTIPLY";break;case OL:t="ENVMAP_BLENDING_MIX";break;case IL:t="ENVMAP_BLENDING_ADD";break}return t}function fF(n){const t=n.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,s=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:s,maxMip:e}}function dF(n,t,e,s){const r=n.getContext(),l=e.defines;let u=e.vertexShader,h=e.fragmentShader;const f=lF(e),d=cF(e),g=uF(e),x=hF(e),y=fF(e),_=tF(e),b=eF(l),E=r.createProgram();let M,S,L=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(M=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(Pl).join(`
`),M.length>0&&(M+=`
`),S=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(Pl).join(`
`),S.length>0&&(S+=`
`)):(M=[aM(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+g:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+f:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Pl).join(`
`),S=[aM(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.envMap?"#define "+g:"",e.envMap?"#define "+x:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+f:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==da?"#define TONE_MAPPING":"",e.toneMapping!==da?ce.tonemapping_pars_fragment:"",e.toneMapping!==da?JI("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",ce.colorspace_pars_fragment,QI("linearToOutputTexel",e.outputColorSpace),$I(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(Pl).join(`
`)),u=Gm(u),u=nM(u,e),u=iM(u,e),h=Gm(h),h=nM(h,e),h=iM(h,e),u=sM(u),h=sM(h),e.isRawShaderMaterial!==!0&&(L=`#version 300 es
`,M=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,S=["#define varying in",e.glslVersion===fS?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===fS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const w=L+M+u,A=L+S+h,N=$S(r,r.VERTEX_SHADER,w),O=$S(r,r.FRAGMENT_SHADER,A);r.attachShader(E,N),r.attachShader(E,O),e.index0AttributeName!==void 0?r.bindAttribLocation(E,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(E,0,"position"),r.linkProgram(E);function I(j){if(n.debug.checkShaderErrors){const it=r.getProgramInfoLog(E).trim(),$=r.getShaderInfoLog(N).trim(),et=r.getShaderInfoLog(O).trim();let ut=!0,V=!0;if(r.getProgramParameter(E,r.LINK_STATUS)===!1)if(ut=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,E,N,O);else{const G=eM(r,N,"vertex"),q=eM(r,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(E,r.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+it+`
`+G+`
`+q)}else it!==""?console.warn("THREE.WebGLProgram: Program Info Log:",it):($===""||et==="")&&(V=!1);V&&(j.diagnostics={runnable:ut,programLog:it,vertexShader:{log:$,prefix:M},fragmentShader:{log:et,prefix:S}})}r.deleteShader(N),r.deleteShader(O),z=new lh(r,E),U=nF(r,E)}let z;this.getUniforms=function(){return z===void 0&&I(this),z};let U;this.getAttributes=function(){return U===void 0&&I(this),U};let C=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=r.getProgramParameter(E,qI)),C},this.destroy=function(){s.releaseStatesOfProgram(this),r.deleteProgram(E),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=YI++,this.cacheKey=t,this.usedTimes=1,this.program=E,this.vertexShader=N,this.fragmentShader=O,this}let pF=0;class mF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,s=t.fragmentShader,r=this._getShaderStage(e),l=this._getShaderStage(s),u=this._getShaderCacheForMaterial(t);return u.has(r)===!1&&(u.add(r),r.usedTimes++),u.has(l)===!1&&(u.add(l),l.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const s of e)s.usedTimes--,s.usedTimes===0&&this.shaderCache.delete(s.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let s=e.get(t);return s===void 0&&(s=new Set,e.set(t,s)),s}_getShaderStage(t){const e=this.shaderCache;let s=e.get(t);return s===void 0&&(s=new gF(t),e.set(t,s)),s}}class gF{constructor(t){this.id=pF++,this.code=t,this.usedTimes=0}}function vF(n,t,e,s,r,l,u){const h=new zg,f=new mF,d=new Set,g=[],x=r.logarithmicDepthBuffer,y=r.vertexTextures;let _=r.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(U){return d.add(U),U===0?"uv":`uv${U}`}function M(U,C,j,it,$){const et=it.fog,ut=$.geometry,V=U.isMeshStandardMaterial?it.environment:null,G=(U.isMeshStandardMaterial?e:t).get(U.envMap||V),q=G&&G.mapping===Eh?G.image.height:null,yt=b[U.type];U.precision!==null&&(_=r.getMaxPrecision(U.precision),_!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",_,"instead."));const F=ut.morphAttributes.position||ut.morphAttributes.normal||ut.morphAttributes.color,nt=F!==void 0?F.length:0;let Mt=0;ut.morphAttributes.position!==void 0&&(Mt=1),ut.morphAttributes.normal!==void 0&&(Mt=2),ut.morphAttributes.color!==void 0&&(Mt=3);let bt,J,ft,vt;if(yt){const Re=Hi[yt];bt=Re.vertexShader,J=Re.fragmentShader}else bt=U.vertexShader,J=U.fragmentShader,f.update(U),ft=f.getVertexShaderID(U),vt=f.getFragmentShaderID(U);const wt=n.getRenderTarget(),Ct=n.state.buffers.depth.getReversed(),ee=$.isInstancedMesh===!0,Ht=$.isBatchedMesh===!0,_e=!!U.map,Ae=!!U.matcap,fe=!!G,k=!!U.aoMap,mn=!!U.lightMap,be=!!U.bumpMap,ge=!!U.normalMap,Gt=!!U.displacementMap,Ee=!!U.emissiveMap,Zt=!!U.metalnessMap,oe=!!U.roughnessMap,sn=U.anisotropy>0,B=U.clearcoat>0,R=U.dispersion>0,at=U.iridescence>0,pt=U.sheen>0,gt=U.transmission>0,ht=sn&&!!U.anisotropyMap,It=B&&!!U.clearcoatMap,Pt=B&&!!U.clearcoatNormalMap,kt=B&&!!U.clearcoatRoughnessMap,Wt=at&&!!U.iridescenceMap,Et=at&&!!U.iridescenceThicknessMap,Ft=pt&&!!U.sheenColorMap,Yt=pt&&!!U.sheenRoughnessMap,Kt=!!U.specularMap,Dt=!!U.specularColorMap,re=!!U.specularIntensityMap,X=gt&&!!U.transmissionMap,Ut=gt&&!!U.thicknessMap,Tt=!!U.gradientMap,zt=!!U.alphaMap,Rt=U.alphaTest>0,St=!!U.alphaHash,Vt=!!U.extensions;let ae=da;U.toneMapped&&(wt===null||wt.isXRRenderTarget===!0)&&(ae=n.toneMapping);const Ne={shaderID:yt,shaderType:U.type,shaderName:U.name,vertexShader:bt,fragmentShader:J,defines:U.defines,customVertexShaderID:ft,customFragmentShaderID:vt,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:_,batching:Ht,batchingColor:Ht&&$._colorsTexture!==null,instancing:ee,instancingColor:ee&&$.instanceColor!==null,instancingMorph:ee&&$.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:wt===null?n.outputColorSpace:wt.isXRRenderTarget===!0?wt.texture.colorSpace:yo,alphaToCoverage:!!U.alphaToCoverage,map:_e,matcap:Ae,envMap:fe,envMapMode:fe&&G.mapping,envMapCubeUVHeight:q,aoMap:k,lightMap:mn,bumpMap:be,normalMap:ge,displacementMap:y&&Gt,emissiveMap:Ee,normalMapObjectSpace:ge&&U.normalMapType===XL,normalMapTangentSpace:ge&&U.normalMapType===_1,metalnessMap:Zt,roughnessMap:oe,anisotropy:sn,anisotropyMap:ht,clearcoat:B,clearcoatMap:It,clearcoatNormalMap:Pt,clearcoatRoughnessMap:kt,dispersion:R,iridescence:at,iridescenceMap:Wt,iridescenceThicknessMap:Et,sheen:pt,sheenColorMap:Ft,sheenRoughnessMap:Yt,specularMap:Kt,specularColorMap:Dt,specularIntensityMap:re,transmission:gt,transmissionMap:X,thicknessMap:Ut,gradientMap:Tt,opaque:U.transparent===!1&&U.blending===ho&&U.alphaToCoverage===!1,alphaMap:zt,alphaTest:Rt,alphaHash:St,combine:U.combine,mapUv:_e&&E(U.map.channel),aoMapUv:k&&E(U.aoMap.channel),lightMapUv:mn&&E(U.lightMap.channel),bumpMapUv:be&&E(U.bumpMap.channel),normalMapUv:ge&&E(U.normalMap.channel),displacementMapUv:Gt&&E(U.displacementMap.channel),emissiveMapUv:Ee&&E(U.emissiveMap.channel),metalnessMapUv:Zt&&E(U.metalnessMap.channel),roughnessMapUv:oe&&E(U.roughnessMap.channel),anisotropyMapUv:ht&&E(U.anisotropyMap.channel),clearcoatMapUv:It&&E(U.clearcoatMap.channel),clearcoatNormalMapUv:Pt&&E(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:kt&&E(U.clearcoatRoughnessMap.channel),iridescenceMapUv:Wt&&E(U.iridescenceMap.channel),iridescenceThicknessMapUv:Et&&E(U.iridescenceThicknessMap.channel),sheenColorMapUv:Ft&&E(U.sheenColorMap.channel),sheenRoughnessMapUv:Yt&&E(U.sheenRoughnessMap.channel),specularMapUv:Kt&&E(U.specularMap.channel),specularColorMapUv:Dt&&E(U.specularColorMap.channel),specularIntensityMapUv:re&&E(U.specularIntensityMap.channel),transmissionMapUv:X&&E(U.transmissionMap.channel),thicknessMapUv:Ut&&E(U.thicknessMap.channel),alphaMapUv:zt&&E(U.alphaMap.channel),vertexTangents:!!ut.attributes.tangent&&(ge||sn),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!ut.attributes.color&&ut.attributes.color.itemSize===4,pointsUvs:$.isPoints===!0&&!!ut.attributes.uv&&(_e||zt),fog:!!et,useFog:U.fog===!0,fogExp2:!!et&&et.isFogExp2,flatShading:U.flatShading===!0&&U.wireframe===!1,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:x,reverseDepthBuffer:Ct,skinning:$.isSkinnedMesh===!0,morphTargets:ut.morphAttributes.position!==void 0,morphNormals:ut.morphAttributes.normal!==void 0,morphColors:ut.morphAttributes.color!==void 0,morphTargetsCount:nt,morphTextureStride:Mt,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:U.dithering,shadowMapEnabled:n.shadowMap.enabled&&j.length>0,shadowMapType:n.shadowMap.type,toneMapping:ae,decodeVideoTexture:_e&&U.map.isVideoTexture===!0&&De.getTransfer(U.map.colorSpace)===je,decodeVideoTextureEmissive:Ee&&U.emissiveMap.isVideoTexture===!0&&De.getTransfer(U.emissiveMap.colorSpace)===je,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Ms,flipSided:U.side===Yn,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:Vt&&U.extensions.clipCullDistance===!0&&s.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Vt&&U.extensions.multiDraw===!0||Ht)&&s.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:s.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return Ne.vertexUv1s=d.has(1),Ne.vertexUv2s=d.has(2),Ne.vertexUv3s=d.has(3),d.clear(),Ne}function S(U){const C=[];if(U.shaderID?C.push(U.shaderID):(C.push(U.customVertexShaderID),C.push(U.customFragmentShaderID)),U.defines!==void 0)for(const j in U.defines)C.push(j),C.push(U.defines[j]);return U.isRawShaderMaterial===!1&&(L(C,U),w(C,U),C.push(n.outputColorSpace)),C.push(U.customProgramCacheKey),C.join()}function L(U,C){U.push(C.precision),U.push(C.outputColorSpace),U.push(C.envMapMode),U.push(C.envMapCubeUVHeight),U.push(C.mapUv),U.push(C.alphaMapUv),U.push(C.lightMapUv),U.push(C.aoMapUv),U.push(C.bumpMapUv),U.push(C.normalMapUv),U.push(C.displacementMapUv),U.push(C.emissiveMapUv),U.push(C.metalnessMapUv),U.push(C.roughnessMapUv),U.push(C.anisotropyMapUv),U.push(C.clearcoatMapUv),U.push(C.clearcoatNormalMapUv),U.push(C.clearcoatRoughnessMapUv),U.push(C.iridescenceMapUv),U.push(C.iridescenceThicknessMapUv),U.push(C.sheenColorMapUv),U.push(C.sheenRoughnessMapUv),U.push(C.specularMapUv),U.push(C.specularColorMapUv),U.push(C.specularIntensityMapUv),U.push(C.transmissionMapUv),U.push(C.thicknessMapUv),U.push(C.combine),U.push(C.fogExp2),U.push(C.sizeAttenuation),U.push(C.morphTargetsCount),U.push(C.morphAttributeCount),U.push(C.numDirLights),U.push(C.numPointLights),U.push(C.numSpotLights),U.push(C.numSpotLightMaps),U.push(C.numHemiLights),U.push(C.numRectAreaLights),U.push(C.numDirLightShadows),U.push(C.numPointLightShadows),U.push(C.numSpotLightShadows),U.push(C.numSpotLightShadowsWithMaps),U.push(C.numLightProbes),U.push(C.shadowMapType),U.push(C.toneMapping),U.push(C.numClippingPlanes),U.push(C.numClipIntersection),U.push(C.depthPacking)}function w(U,C){h.disableAll(),C.supportsVertexTextures&&h.enable(0),C.instancing&&h.enable(1),C.instancingColor&&h.enable(2),C.instancingMorph&&h.enable(3),C.matcap&&h.enable(4),C.envMap&&h.enable(5),C.normalMapObjectSpace&&h.enable(6),C.normalMapTangentSpace&&h.enable(7),C.clearcoat&&h.enable(8),C.iridescence&&h.enable(9),C.alphaTest&&h.enable(10),C.vertexColors&&h.enable(11),C.vertexAlphas&&h.enable(12),C.vertexUv1s&&h.enable(13),C.vertexUv2s&&h.enable(14),C.vertexUv3s&&h.enable(15),C.vertexTangents&&h.enable(16),C.anisotropy&&h.enable(17),C.alphaHash&&h.enable(18),C.batching&&h.enable(19),C.dispersion&&h.enable(20),C.batchingColor&&h.enable(21),C.gradientMap&&h.enable(22),U.push(h.mask),h.disableAll(),C.fog&&h.enable(0),C.useFog&&h.enable(1),C.flatShading&&h.enable(2),C.logarithmicDepthBuffer&&h.enable(3),C.reverseDepthBuffer&&h.enable(4),C.skinning&&h.enable(5),C.morphTargets&&h.enable(6),C.morphNormals&&h.enable(7),C.morphColors&&h.enable(8),C.premultipliedAlpha&&h.enable(9),C.shadowMapEnabled&&h.enable(10),C.doubleSided&&h.enable(11),C.flipSided&&h.enable(12),C.useDepthPacking&&h.enable(13),C.dithering&&h.enable(14),C.transmission&&h.enable(15),C.sheen&&h.enable(16),C.opaque&&h.enable(17),C.pointsUvs&&h.enable(18),C.decodeVideoTexture&&h.enable(19),C.decodeVideoTextureEmissive&&h.enable(20),C.alphaToCoverage&&h.enable(21),U.push(h.mask)}function A(U){const C=b[U.type];let j;if(C){const it=Hi[C];j=zP.clone(it.uniforms)}else j=U.uniforms;return j}function N(U,C){let j;for(let it=0,$=g.length;it<$;it++){const et=g[it];if(et.cacheKey===C){j=et,++j.usedTimes;break}}return j===void 0&&(j=new dF(n,C,U,l),g.push(j)),j}function O(U){if(--U.usedTimes===0){const C=g.indexOf(U);g[C]=g[g.length-1],g.pop(),U.destroy()}}function I(U){f.remove(U)}function z(){f.dispose()}return{getParameters:M,getProgramCacheKey:S,getUniforms:A,acquireProgram:N,releaseProgram:O,releaseShaderCache:I,programs:g,dispose:z}}function xF(){let n=new WeakMap;function t(u){return n.has(u)}function e(u){let h=n.get(u);return h===void 0&&(h={},n.set(u,h)),h}function s(u){n.delete(u)}function r(u,h,f){n.get(u)[h]=f}function l(){n=new WeakMap}return{has:t,get:e,remove:s,update:r,dispose:l}}function yF(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function rM(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function oM(){const n=[];let t=0;const e=[],s=[],r=[];function l(){t=0,e.length=0,s.length=0,r.length=0}function u(x,y,_,b,E,M){let S=n[t];return S===void 0?(S={id:x.id,object:x,geometry:y,material:_,groupOrder:b,renderOrder:x.renderOrder,z:E,group:M},n[t]=S):(S.id=x.id,S.object=x,S.geometry=y,S.material=_,S.groupOrder=b,S.renderOrder=x.renderOrder,S.z=E,S.group=M),t++,S}function h(x,y,_,b,E,M){const S=u(x,y,_,b,E,M);_.transmission>0?s.push(S):_.transparent===!0?r.push(S):e.push(S)}function f(x,y,_,b,E,M){const S=u(x,y,_,b,E,M);_.transmission>0?s.unshift(S):_.transparent===!0?r.unshift(S):e.unshift(S)}function d(x,y){e.length>1&&e.sort(x||yF),s.length>1&&s.sort(y||rM),r.length>1&&r.sort(y||rM)}function g(){for(let x=t,y=n.length;x<y;x++){const _=n[x];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:e,transmissive:s,transparent:r,init:l,push:h,unshift:f,finish:g,sort:d}}function _F(){let n=new WeakMap;function t(s,r){const l=n.get(s);let u;return l===void 0?(u=new oM,n.set(s,[u])):r>=l.length?(u=new oM,l.push(u)):u=l[r],u}function e(){n=new WeakMap}return{get:t,dispose:e}}function SF(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new Q,color:new Se};break;case"SpotLight":e={position:new Q,direction:new Q,color:new Se,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new Q,color:new Se,distance:0,decay:0};break;case"HemisphereLight":e={direction:new Q,skyColor:new Se,groundColor:new Se};break;case"RectAreaLight":e={color:new Se,position:new Q,halfWidth:new Q,halfHeight:new Q};break}return n[t.id]=e,e}}}function MF(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}let bF=0;function EF(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function TF(n){const t=new SF,e=MF(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)s.probe.push(new Q);const r=new Q,l=new We,u=new We;function h(d){let g=0,x=0,y=0;for(let U=0;U<9;U++)s.probe[U].set(0,0,0);let _=0,b=0,E=0,M=0,S=0,L=0,w=0,A=0,N=0,O=0,I=0;d.sort(EF);for(let U=0,C=d.length;U<C;U++){const j=d[U],it=j.color,$=j.intensity,et=j.distance,ut=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)g+=it.r*$,x+=it.g*$,y+=it.b*$;else if(j.isLightProbe){for(let V=0;V<9;V++)s.probe[V].addScaledVector(j.sh.coefficients[V],$);I++}else if(j.isDirectionalLight){const V=t.get(j);if(V.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const G=j.shadow,q=e.get(j);q.shadowIntensity=G.intensity,q.shadowBias=G.bias,q.shadowNormalBias=G.normalBias,q.shadowRadius=G.radius,q.shadowMapSize=G.mapSize,s.directionalShadow[_]=q,s.directionalShadowMap[_]=ut,s.directionalShadowMatrix[_]=j.shadow.matrix,L++}s.directional[_]=V,_++}else if(j.isSpotLight){const V=t.get(j);V.position.setFromMatrixPosition(j.matrixWorld),V.color.copy(it).multiplyScalar($),V.distance=et,V.coneCos=Math.cos(j.angle),V.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),V.decay=j.decay,s.spot[E]=V;const G=j.shadow;if(j.map&&(s.spotLightMap[N]=j.map,N++,G.updateMatrices(j),j.castShadow&&O++),s.spotLightMatrix[E]=G.matrix,j.castShadow){const q=e.get(j);q.shadowIntensity=G.intensity,q.shadowBias=G.bias,q.shadowNormalBias=G.normalBias,q.shadowRadius=G.radius,q.shadowMapSize=G.mapSize,s.spotShadow[E]=q,s.spotShadowMap[E]=ut,A++}E++}else if(j.isRectAreaLight){const V=t.get(j);V.color.copy(it).multiplyScalar($),V.halfWidth.set(j.width*.5,0,0),V.halfHeight.set(0,j.height*.5,0),s.rectArea[M]=V,M++}else if(j.isPointLight){const V=t.get(j);if(V.color.copy(j.color).multiplyScalar(j.intensity),V.distance=j.distance,V.decay=j.decay,j.castShadow){const G=j.shadow,q=e.get(j);q.shadowIntensity=G.intensity,q.shadowBias=G.bias,q.shadowNormalBias=G.normalBias,q.shadowRadius=G.radius,q.shadowMapSize=G.mapSize,q.shadowCameraNear=G.camera.near,q.shadowCameraFar=G.camera.far,s.pointShadow[b]=q,s.pointShadowMap[b]=ut,s.pointShadowMatrix[b]=j.shadow.matrix,w++}s.point[b]=V,b++}else if(j.isHemisphereLight){const V=t.get(j);V.skyColor.copy(j.color).multiplyScalar($),V.groundColor.copy(j.groundColor).multiplyScalar($),s.hemi[S]=V,S++}}M>0&&(n.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=Nt.LTC_FLOAT_1,s.rectAreaLTC2=Nt.LTC_FLOAT_2):(s.rectAreaLTC1=Nt.LTC_HALF_1,s.rectAreaLTC2=Nt.LTC_HALF_2)),s.ambient[0]=g,s.ambient[1]=x,s.ambient[2]=y;const z=s.hash;(z.directionalLength!==_||z.pointLength!==b||z.spotLength!==E||z.rectAreaLength!==M||z.hemiLength!==S||z.numDirectionalShadows!==L||z.numPointShadows!==w||z.numSpotShadows!==A||z.numSpotMaps!==N||z.numLightProbes!==I)&&(s.directional.length=_,s.spot.length=E,s.rectArea.length=M,s.point.length=b,s.hemi.length=S,s.directionalShadow.length=L,s.directionalShadowMap.length=L,s.pointShadow.length=w,s.pointShadowMap.length=w,s.spotShadow.length=A,s.spotShadowMap.length=A,s.directionalShadowMatrix.length=L,s.pointShadowMatrix.length=w,s.spotLightMatrix.length=A+N-O,s.spotLightMap.length=N,s.numSpotLightShadowsWithMaps=O,s.numLightProbes=I,z.directionalLength=_,z.pointLength=b,z.spotLength=E,z.rectAreaLength=M,z.hemiLength=S,z.numDirectionalShadows=L,z.numPointShadows=w,z.numSpotShadows=A,z.numSpotMaps=N,z.numLightProbes=I,s.version=bF++)}function f(d,g){let x=0,y=0,_=0,b=0,E=0;const M=g.matrixWorldInverse;for(let S=0,L=d.length;S<L;S++){const w=d[S];if(w.isDirectionalLight){const A=s.directional[x];A.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(M),x++}else if(w.isSpotLight){const A=s.spot[_];A.position.setFromMatrixPosition(w.matrixWorld),A.position.applyMatrix4(M),A.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(M),_++}else if(w.isRectAreaLight){const A=s.rectArea[b];A.position.setFromMatrixPosition(w.matrixWorld),A.position.applyMatrix4(M),u.identity(),l.copy(w.matrixWorld),l.premultiply(M),u.extractRotation(l),A.halfWidth.set(w.width*.5,0,0),A.halfHeight.set(0,w.height*.5,0),A.halfWidth.applyMatrix4(u),A.halfHeight.applyMatrix4(u),b++}else if(w.isPointLight){const A=s.point[y];A.position.setFromMatrixPosition(w.matrixWorld),A.position.applyMatrix4(M),y++}else if(w.isHemisphereLight){const A=s.hemi[E];A.direction.setFromMatrixPosition(w.matrixWorld),A.direction.transformDirection(M),E++}}}return{setup:h,setupView:f,state:s}}function lM(n){const t=new TF(n),e=[],s=[];function r(g){d.camera=g,e.length=0,s.length=0}function l(g){e.push(g)}function u(g){s.push(g)}function h(){t.setup(e)}function f(g){t.setupView(e,g)}const d={lightsArray:e,shadowsArray:s,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:d,setupLights:h,setupLightsView:f,pushLight:l,pushShadow:u}}function AF(n){let t=new WeakMap;function e(r,l=0){const u=t.get(r);let h;return u===void 0?(h=new lM(n),t.set(r,[h])):l>=u.length?(h=new lM(n),u.push(h)):h=u[l],h}function s(){t=new WeakMap}return{get:e,dispose:s}}const wF=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,RF=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function CF(n,t,e){let s=new Vg;const r=new Me,l=new Me,u=new He,h=new ZP({depthPacking:WL}),f=new QP,d={},g=e.maxTextureSize,x={[ma]:Yn,[Yn]:ma,[Ms]:Ms},y=new ga({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:wF,fragmentShader:RF}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const b=new xa;b.setAttribute("position",new Oi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new Cn(b,y),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c1;let S=this.type;this.render=function(O,I,z){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||O.length===0)return;const U=n.getRenderTarget(),C=n.getActiveCubeFace(),j=n.getActiveMipmapLevel(),it=n.state;it.setBlending(fa),it.buffers.color.setClear(1,1,1,1),it.buffers.depth.setTest(!0),it.setScissorTest(!1);const $=S!==Ss&&this.type===Ss,et=S===Ss&&this.type!==Ss;for(let ut=0,V=O.length;ut<V;ut++){const G=O[ut],q=G.shadow;if(q===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(q.autoUpdate===!1&&q.needsUpdate===!1)continue;r.copy(q.mapSize);const yt=q.getFrameExtents();if(r.multiply(yt),l.copy(q.mapSize),(r.x>g||r.y>g)&&(r.x>g&&(l.x=Math.floor(g/yt.x),r.x=l.x*yt.x,q.mapSize.x=l.x),r.y>g&&(l.y=Math.floor(g/yt.y),r.y=l.y*yt.y,q.mapSize.y=l.y)),q.map===null||$===!0||et===!0){const nt=this.type!==Ss?{minFilter:pi,magFilter:pi}:{};q.map!==null&&q.map.dispose(),q.map=new ar(r.x,r.y,nt),q.map.texture.name=G.name+".shadowMap",q.camera.updateProjectionMatrix()}n.setRenderTarget(q.map),n.clear();const F=q.getViewportCount();for(let nt=0;nt<F;nt++){const Mt=q.getViewport(nt);u.set(l.x*Mt.x,l.y*Mt.y,l.x*Mt.z,l.y*Mt.w),it.viewport(u),q.updateMatrices(G,nt),s=q.getFrustum(),A(I,z,q.camera,G,this.type)}q.isPointLightShadow!==!0&&this.type===Ss&&L(q,z),q.needsUpdate=!1}S=this.type,M.needsUpdate=!1,n.setRenderTarget(U,C,j)};function L(O,I){const z=t.update(E);y.defines.VSM_SAMPLES!==O.blurSamples&&(y.defines.VSM_SAMPLES=O.blurSamples,_.defines.VSM_SAMPLES=O.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new ar(r.x,r.y)),y.uniforms.shadow_pass.value=O.map.texture,y.uniforms.resolution.value=O.mapSize,y.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(I,null,z,y,E,null),_.uniforms.shadow_pass.value=O.mapPass.texture,_.uniforms.resolution.value=O.mapSize,_.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(I,null,z,_,E,null)}function w(O,I,z,U){let C=null;const j=z.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(j!==void 0)C=j;else if(C=z.isPointLight===!0?f:h,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0||I.alphaToCoverage===!0){const it=C.uuid,$=I.uuid;let et=d[it];et===void 0&&(et={},d[it]=et);let ut=et[$];ut===void 0&&(ut=C.clone(),et[$]=ut,I.addEventListener("dispose",N)),C=ut}if(C.visible=I.visible,C.wireframe=I.wireframe,U===Ss?C.side=I.shadowSide!==null?I.shadowSide:I.side:C.side=I.shadowSide!==null?I.shadowSide:x[I.side],C.alphaMap=I.alphaMap,C.alphaTest=I.alphaToCoverage===!0?.5:I.alphaTest,C.map=I.map,C.clipShadows=I.clipShadows,C.clippingPlanes=I.clippingPlanes,C.clipIntersection=I.clipIntersection,C.displacementMap=I.displacementMap,C.displacementScale=I.displacementScale,C.displacementBias=I.displacementBias,C.wireframeLinewidth=I.wireframeLinewidth,C.linewidth=I.linewidth,z.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const it=n.properties.get(C);it.light=z}return C}function A(O,I,z,U,C){if(O.visible===!1)return;if(O.layers.test(I.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&C===Ss)&&(!O.frustumCulled||s.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,O.matrixWorld);const $=t.update(O),et=O.material;if(Array.isArray(et)){const ut=$.groups;for(let V=0,G=ut.length;V<G;V++){const q=ut[V],yt=et[q.materialIndex];if(yt&&yt.visible){const F=w(O,yt,U,C);O.onBeforeShadow(n,O,I,z,$,F,q),n.renderBufferDirect(z,null,$,F,O,q),O.onAfterShadow(n,O,I,z,$,F,q)}}}else if(et.visible){const ut=w(O,et,U,C);O.onBeforeShadow(n,O,I,z,$,ut,null),n.renderBufferDirect(z,null,$,ut,O,null),O.onAfterShadow(n,O,I,z,$,ut,null)}}const it=O.children;for(let $=0,et=it.length;$<et;$++)A(it[$],I,z,U,C)}function N(O){O.target.removeEventListener("dispose",N);for(const z in d){const U=d[z],C=O.target.uuid;C in U&&(U[C].dispose(),delete U[C])}}}const DF={[im]:sm,[am]:lm,[rm]:cm,[go]:om,[sm]:im,[lm]:am,[cm]:rm,[om]:go};function LF(n,t){function e(){let X=!1;const Ut=new He;let Tt=null;const zt=new He(0,0,0,0);return{setMask:function(Rt){Tt!==Rt&&!X&&(n.colorMask(Rt,Rt,Rt,Rt),Tt=Rt)},setLocked:function(Rt){X=Rt},setClear:function(Rt,St,Vt,ae,Ne){Ne===!0&&(Rt*=ae,St*=ae,Vt*=ae),Ut.set(Rt,St,Vt,ae),zt.equals(Ut)===!1&&(n.clearColor(Rt,St,Vt,ae),zt.copy(Ut))},reset:function(){X=!1,Tt=null,zt.set(-1,0,0,0)}}}function s(){let X=!1,Ut=!1,Tt=null,zt=null,Rt=null;return{setReversed:function(St){if(Ut!==St){const Vt=t.get("EXT_clip_control");St?Vt.clipControlEXT(Vt.LOWER_LEFT_EXT,Vt.ZERO_TO_ONE_EXT):Vt.clipControlEXT(Vt.LOWER_LEFT_EXT,Vt.NEGATIVE_ONE_TO_ONE_EXT),Ut=St;const ae=Rt;Rt=null,this.setClear(ae)}},getReversed:function(){return Ut},setTest:function(St){St?wt(n.DEPTH_TEST):Ct(n.DEPTH_TEST)},setMask:function(St){Tt!==St&&!X&&(n.depthMask(St),Tt=St)},setFunc:function(St){if(Ut&&(St=DF[St]),zt!==St){switch(St){case im:n.depthFunc(n.NEVER);break;case sm:n.depthFunc(n.ALWAYS);break;case am:n.depthFunc(n.LESS);break;case go:n.depthFunc(n.LEQUAL);break;case rm:n.depthFunc(n.EQUAL);break;case om:n.depthFunc(n.GEQUAL);break;case lm:n.depthFunc(n.GREATER);break;case cm:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}zt=St}},setLocked:function(St){X=St},setClear:function(St){Rt!==St&&(Ut&&(St=1-St),n.clearDepth(St),Rt=St)},reset:function(){X=!1,Tt=null,zt=null,Rt=null,Ut=!1}}}function r(){let X=!1,Ut=null,Tt=null,zt=null,Rt=null,St=null,Vt=null,ae=null,Ne=null;return{setTest:function(Re){X||(Re?wt(n.STENCIL_TEST):Ct(n.STENCIL_TEST))},setMask:function(Re){Ut!==Re&&!X&&(n.stencilMask(Re),Ut=Re)},setFunc:function(Re,ni,Mn){(Tt!==Re||zt!==ni||Rt!==Mn)&&(n.stencilFunc(Re,ni,Mn),Tt=Re,zt=ni,Rt=Mn)},setOp:function(Re,ni,Mn){(St!==Re||Vt!==ni||ae!==Mn)&&(n.stencilOp(Re,ni,Mn),St=Re,Vt=ni,ae=Mn)},setLocked:function(Re){X=Re},setClear:function(Re){Ne!==Re&&(n.clearStencil(Re),Ne=Re)},reset:function(){X=!1,Ut=null,Tt=null,zt=null,Rt=null,St=null,Vt=null,ae=null,Ne=null}}}const l=new e,u=new s,h=new r,f=new WeakMap,d=new WeakMap;let g={},x={},y=new WeakMap,_=[],b=null,E=!1,M=null,S=null,L=null,w=null,A=null,N=null,O=null,I=new Se(0,0,0),z=0,U=!1,C=null,j=null,it=null,$=null,et=null;const ut=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,G=0;const q=n.getParameter(n.VERSION);q.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(q)[1]),V=G>=1):q.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),V=G>=2);let yt=null,F={};const nt=n.getParameter(n.SCISSOR_BOX),Mt=n.getParameter(n.VIEWPORT),bt=new He().fromArray(nt),J=new He().fromArray(Mt);function ft(X,Ut,Tt,zt){const Rt=new Uint8Array(4),St=n.createTexture();n.bindTexture(X,St),n.texParameteri(X,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(X,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Vt=0;Vt<Tt;Vt++)X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY?n.texImage3D(Ut,0,n.RGBA,1,1,zt,0,n.RGBA,n.UNSIGNED_BYTE,Rt):n.texImage2D(Ut+Vt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Rt);return St}const vt={};vt[n.TEXTURE_2D]=ft(n.TEXTURE_2D,n.TEXTURE_2D,1),vt[n.TEXTURE_CUBE_MAP]=ft(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),vt[n.TEXTURE_2D_ARRAY]=ft(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),vt[n.TEXTURE_3D]=ft(n.TEXTURE_3D,n.TEXTURE_3D,1,1),l.setClear(0,0,0,1),u.setClear(1),h.setClear(0),wt(n.DEPTH_TEST),u.setFunc(go),be(!1),ge(rS),wt(n.CULL_FACE),k(fa);function wt(X){g[X]!==!0&&(n.enable(X),g[X]=!0)}function Ct(X){g[X]!==!1&&(n.disable(X),g[X]=!1)}function ee(X,Ut){return x[X]!==Ut?(n.bindFramebuffer(X,Ut),x[X]=Ut,X===n.DRAW_FRAMEBUFFER&&(x[n.FRAMEBUFFER]=Ut),X===n.FRAMEBUFFER&&(x[n.DRAW_FRAMEBUFFER]=Ut),!0):!1}function Ht(X,Ut){let Tt=_,zt=!1;if(X){Tt=y.get(Ut),Tt===void 0&&(Tt=[],y.set(Ut,Tt));const Rt=X.textures;if(Tt.length!==Rt.length||Tt[0]!==n.COLOR_ATTACHMENT0){for(let St=0,Vt=Rt.length;St<Vt;St++)Tt[St]=n.COLOR_ATTACHMENT0+St;Tt.length=Rt.length,zt=!0}}else Tt[0]!==n.BACK&&(Tt[0]=n.BACK,zt=!0);zt&&n.drawBuffers(Tt)}function _e(X){return b!==X?(n.useProgram(X),b=X,!0):!1}const Ae={[qa]:n.FUNC_ADD,[xL]:n.FUNC_SUBTRACT,[yL]:n.FUNC_REVERSE_SUBTRACT};Ae[_L]=n.MIN,Ae[SL]=n.MAX;const fe={[ML]:n.ZERO,[bL]:n.ONE,[EL]:n.SRC_COLOR,[em]:n.SRC_ALPHA,[DL]:n.SRC_ALPHA_SATURATE,[RL]:n.DST_COLOR,[AL]:n.DST_ALPHA,[TL]:n.ONE_MINUS_SRC_COLOR,[nm]:n.ONE_MINUS_SRC_ALPHA,[CL]:n.ONE_MINUS_DST_COLOR,[wL]:n.ONE_MINUS_DST_ALPHA,[LL]:n.CONSTANT_COLOR,[PL]:n.ONE_MINUS_CONSTANT_COLOR,[UL]:n.CONSTANT_ALPHA,[NL]:n.ONE_MINUS_CONSTANT_ALPHA};function k(X,Ut,Tt,zt,Rt,St,Vt,ae,Ne,Re){if(X===fa){E===!0&&(Ct(n.BLEND),E=!1);return}if(E===!1&&(wt(n.BLEND),E=!0),X!==vL){if(X!==M||Re!==U){if((S!==qa||A!==qa)&&(n.blendEquation(n.FUNC_ADD),S=qa,A=qa),Re)switch(X){case ho:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case oS:n.blendFunc(n.ONE,n.ONE);break;case lS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case cS:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}else switch(X){case ho:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case oS:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case lS:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case cS:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}L=null,w=null,N=null,O=null,I.set(0,0,0),z=0,M=X,U=Re}return}Rt=Rt||Ut,St=St||Tt,Vt=Vt||zt,(Ut!==S||Rt!==A)&&(n.blendEquationSeparate(Ae[Ut],Ae[Rt]),S=Ut,A=Rt),(Tt!==L||zt!==w||St!==N||Vt!==O)&&(n.blendFuncSeparate(fe[Tt],fe[zt],fe[St],fe[Vt]),L=Tt,w=zt,N=St,O=Vt),(ae.equals(I)===!1||Ne!==z)&&(n.blendColor(ae.r,ae.g,ae.b,Ne),I.copy(ae),z=Ne),M=X,U=!1}function mn(X,Ut){X.side===Ms?Ct(n.CULL_FACE):wt(n.CULL_FACE);let Tt=X.side===Yn;Ut&&(Tt=!Tt),be(Tt),X.blending===ho&&X.transparent===!1?k(fa):k(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.blendColor,X.blendAlpha,X.premultipliedAlpha),u.setFunc(X.depthFunc),u.setTest(X.depthTest),u.setMask(X.depthWrite),l.setMask(X.colorWrite);const zt=X.stencilWrite;h.setTest(zt),zt&&(h.setMask(X.stencilWriteMask),h.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),h.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),Ee(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits),X.alphaToCoverage===!0?wt(n.SAMPLE_ALPHA_TO_COVERAGE):Ct(n.SAMPLE_ALPHA_TO_COVERAGE)}function be(X){C!==X&&(X?n.frontFace(n.CW):n.frontFace(n.CCW),C=X)}function ge(X){X!==pL?(wt(n.CULL_FACE),X!==j&&(X===rS?n.cullFace(n.BACK):X===mL?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ct(n.CULL_FACE),j=X}function Gt(X){X!==it&&(V&&n.lineWidth(X),it=X)}function Ee(X,Ut,Tt){X?(wt(n.POLYGON_OFFSET_FILL),($!==Ut||et!==Tt)&&(n.polygonOffset(Ut,Tt),$=Ut,et=Tt)):Ct(n.POLYGON_OFFSET_FILL)}function Zt(X){X?wt(n.SCISSOR_TEST):Ct(n.SCISSOR_TEST)}function oe(X){X===void 0&&(X=n.TEXTURE0+ut-1),yt!==X&&(n.activeTexture(X),yt=X)}function sn(X,Ut,Tt){Tt===void 0&&(yt===null?Tt=n.TEXTURE0+ut-1:Tt=yt);let zt=F[Tt];zt===void 0&&(zt={type:void 0,texture:void 0},F[Tt]=zt),(zt.type!==X||zt.texture!==Ut)&&(yt!==Tt&&(n.activeTexture(Tt),yt=Tt),n.bindTexture(X,Ut||vt[X]),zt.type=X,zt.texture=Ut)}function B(){const X=F[yt];X!==void 0&&X.type!==void 0&&(n.bindTexture(X.type,null),X.type=void 0,X.texture=void 0)}function R(){try{n.compressedTexImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function at(){try{n.compressedTexImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function pt(){try{n.texSubImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function gt(){try{n.texSubImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function ht(){try{n.compressedTexSubImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function It(){try{n.compressedTexSubImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Pt(){try{n.texStorage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function kt(){try{n.texStorage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Wt(){try{n.texImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Et(){try{n.texImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ft(X){bt.equals(X)===!1&&(n.scissor(X.x,X.y,X.z,X.w),bt.copy(X))}function Yt(X){J.equals(X)===!1&&(n.viewport(X.x,X.y,X.z,X.w),J.copy(X))}function Kt(X,Ut){let Tt=d.get(Ut);Tt===void 0&&(Tt=new WeakMap,d.set(Ut,Tt));let zt=Tt.get(X);zt===void 0&&(zt=n.getUniformBlockIndex(Ut,X.name),Tt.set(X,zt))}function Dt(X,Ut){const zt=d.get(Ut).get(X);f.get(Ut)!==zt&&(n.uniformBlockBinding(Ut,zt,X.__bindingPointIndex),f.set(Ut,zt))}function re(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),u.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),g={},yt=null,F={},x={},y=new WeakMap,_=[],b=null,E=!1,M=null,S=null,L=null,w=null,A=null,N=null,O=null,I=new Se(0,0,0),z=0,U=!1,C=null,j=null,it=null,$=null,et=null,bt.set(0,0,n.canvas.width,n.canvas.height),J.set(0,0,n.canvas.width,n.canvas.height),l.reset(),u.reset(),h.reset()}return{buffers:{color:l,depth:u,stencil:h},enable:wt,disable:Ct,bindFramebuffer:ee,drawBuffers:Ht,useProgram:_e,setBlending:k,setMaterial:mn,setFlipSided:be,setCullFace:ge,setLineWidth:Gt,setPolygonOffset:Ee,setScissorTest:Zt,activeTexture:oe,bindTexture:sn,unbindTexture:B,compressedTexImage2D:R,compressedTexImage3D:at,texImage2D:Wt,texImage3D:Et,updateUBOMapping:Kt,uniformBlockBinding:Dt,texStorage2D:Pt,texStorage3D:kt,texSubImage2D:pt,texSubImage3D:gt,compressedTexSubImage2D:ht,compressedTexSubImage3D:It,scissor:Ft,viewport:Yt,reset:re}}function PF(n,t,e,s,r,l,u){const h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Me,g=new WeakMap;let x;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(B,R){return _?new OffscreenCanvas(B,R):xh("canvas")}function E(B,R,at){let pt=1;const gt=sn(B);if((gt.width>at||gt.height>at)&&(pt=at/Math.max(gt.width,gt.height)),pt<1)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap||typeof VideoFrame<"u"&&B instanceof VideoFrame){const ht=Math.floor(pt*gt.width),It=Math.floor(pt*gt.height);x===void 0&&(x=b(ht,It));const Pt=R?b(ht,It):x;return Pt.width=ht,Pt.height=It,Pt.getContext("2d").drawImage(B,0,0,ht,It),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+gt.width+"x"+gt.height+") to ("+ht+"x"+It+")."),Pt}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+gt.width+"x"+gt.height+")."),B;return B}function M(B){return B.generateMipmaps}function S(B){n.generateMipmap(B)}function L(B){return B.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:B.isWebGL3DRenderTarget?n.TEXTURE_3D:B.isWebGLArrayRenderTarget||B.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function w(B,R,at,pt,gt=!1){if(B!==null){if(n[B]!==void 0)return n[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let ht=R;if(R===n.RED&&(at===n.FLOAT&&(ht=n.R32F),at===n.HALF_FLOAT&&(ht=n.R16F),at===n.UNSIGNED_BYTE&&(ht=n.R8)),R===n.RED_INTEGER&&(at===n.UNSIGNED_BYTE&&(ht=n.R8UI),at===n.UNSIGNED_SHORT&&(ht=n.R16UI),at===n.UNSIGNED_INT&&(ht=n.R32UI),at===n.BYTE&&(ht=n.R8I),at===n.SHORT&&(ht=n.R16I),at===n.INT&&(ht=n.R32I)),R===n.RG&&(at===n.FLOAT&&(ht=n.RG32F),at===n.HALF_FLOAT&&(ht=n.RG16F),at===n.UNSIGNED_BYTE&&(ht=n.RG8)),R===n.RG_INTEGER&&(at===n.UNSIGNED_BYTE&&(ht=n.RG8UI),at===n.UNSIGNED_SHORT&&(ht=n.RG16UI),at===n.UNSIGNED_INT&&(ht=n.RG32UI),at===n.BYTE&&(ht=n.RG8I),at===n.SHORT&&(ht=n.RG16I),at===n.INT&&(ht=n.RG32I)),R===n.RGB_INTEGER&&(at===n.UNSIGNED_BYTE&&(ht=n.RGB8UI),at===n.UNSIGNED_SHORT&&(ht=n.RGB16UI),at===n.UNSIGNED_INT&&(ht=n.RGB32UI),at===n.BYTE&&(ht=n.RGB8I),at===n.SHORT&&(ht=n.RGB16I),at===n.INT&&(ht=n.RGB32I)),R===n.RGBA_INTEGER&&(at===n.UNSIGNED_BYTE&&(ht=n.RGBA8UI),at===n.UNSIGNED_SHORT&&(ht=n.RGBA16UI),at===n.UNSIGNED_INT&&(ht=n.RGBA32UI),at===n.BYTE&&(ht=n.RGBA8I),at===n.SHORT&&(ht=n.RGBA16I),at===n.INT&&(ht=n.RGBA32I)),R===n.RGB&&at===n.UNSIGNED_INT_5_9_9_9_REV&&(ht=n.RGB9_E5),R===n.RGBA){const It=gt?gh:De.getTransfer(pt);at===n.FLOAT&&(ht=n.RGBA32F),at===n.HALF_FLOAT&&(ht=n.RGBA16F),at===n.UNSIGNED_BYTE&&(ht=It===je?n.SRGB8_ALPHA8:n.RGBA8),at===n.UNSIGNED_SHORT_4_4_4_4&&(ht=n.RGBA4),at===n.UNSIGNED_SHORT_5_5_5_1&&(ht=n.RGB5_A1)}return(ht===n.R16F||ht===n.R32F||ht===n.RG16F||ht===n.RG32F||ht===n.RGBA16F||ht===n.RGBA32F)&&t.get("EXT_color_buffer_float"),ht}function A(B,R){let at;return B?R===null||R===sr||R===Ql?at=n.DEPTH24_STENCIL8:R===Gi?at=n.DEPTH32F_STENCIL8:R===Zl&&(at=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):R===null||R===sr||R===Ql?at=n.DEPTH_COMPONENT24:R===Gi?at=n.DEPTH_COMPONENT32F:R===Zl&&(at=n.DEPTH_COMPONENT16),at}function N(B,R){return M(B)===!0||B.isFramebufferTexture&&B.minFilter!==pi&&B.minFilter!==ki?Math.log2(Math.max(R.width,R.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?R.mipmaps.length:1}function O(B){const R=B.target;R.removeEventListener("dispose",O),z(R),R.isVideoTexture&&g.delete(R)}function I(B){const R=B.target;R.removeEventListener("dispose",I),C(R)}function z(B){const R=s.get(B);if(R.__webglInit===void 0)return;const at=B.source,pt=y.get(at);if(pt){const gt=pt[R.__cacheKey];gt.usedTimes--,gt.usedTimes===0&&U(B),Object.keys(pt).length===0&&y.delete(at)}s.remove(B)}function U(B){const R=s.get(B);n.deleteTexture(R.__webglTexture);const at=B.source,pt=y.get(at);delete pt[R.__cacheKey],u.memory.textures--}function C(B){const R=s.get(B);if(B.depthTexture&&(B.depthTexture.dispose(),s.remove(B.depthTexture)),B.isWebGLCubeRenderTarget)for(let pt=0;pt<6;pt++){if(Array.isArray(R.__webglFramebuffer[pt]))for(let gt=0;gt<R.__webglFramebuffer[pt].length;gt++)n.deleteFramebuffer(R.__webglFramebuffer[pt][gt]);else n.deleteFramebuffer(R.__webglFramebuffer[pt]);R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer[pt])}else{if(Array.isArray(R.__webglFramebuffer))for(let pt=0;pt<R.__webglFramebuffer.length;pt++)n.deleteFramebuffer(R.__webglFramebuffer[pt]);else n.deleteFramebuffer(R.__webglFramebuffer);if(R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer),R.__webglMultisampledFramebuffer&&n.deleteFramebuffer(R.__webglMultisampledFramebuffer),R.__webglColorRenderbuffer)for(let pt=0;pt<R.__webglColorRenderbuffer.length;pt++)R.__webglColorRenderbuffer[pt]&&n.deleteRenderbuffer(R.__webglColorRenderbuffer[pt]);R.__webglDepthRenderbuffer&&n.deleteRenderbuffer(R.__webglDepthRenderbuffer)}const at=B.textures;for(let pt=0,gt=at.length;pt<gt;pt++){const ht=s.get(at[pt]);ht.__webglTexture&&(n.deleteTexture(ht.__webglTexture),u.memory.textures--),s.remove(at[pt])}s.remove(B)}let j=0;function it(){j=0}function $(){const B=j;return B>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+r.maxTextures),j+=1,B}function et(B){const R=[];return R.push(B.wrapS),R.push(B.wrapT),R.push(B.wrapR||0),R.push(B.magFilter),R.push(B.minFilter),R.push(B.anisotropy),R.push(B.internalFormat),R.push(B.format),R.push(B.type),R.push(B.generateMipmaps),R.push(B.premultiplyAlpha),R.push(B.flipY),R.push(B.unpackAlignment),R.push(B.colorSpace),R.join()}function ut(B,R){const at=s.get(B);if(B.isVideoTexture&&Zt(B),B.isRenderTargetTexture===!1&&B.version>0&&at.__version!==B.version){const pt=B.image;if(pt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{vt(at,B,R);return}}e.bindTexture(n.TEXTURE_2D,at.__webglTexture,n.TEXTURE0+R)}function V(B,R){const at=s.get(B);if(B.version>0&&at.__version!==B.version){vt(at,B,R);return}e.bindTexture(n.TEXTURE_2D_ARRAY,at.__webglTexture,n.TEXTURE0+R)}function G(B,R){const at=s.get(B);if(B.version>0&&at.__version!==B.version){vt(at,B,R);return}e.bindTexture(n.TEXTURE_3D,at.__webglTexture,n.TEXTURE0+R)}function q(B,R){const at=s.get(B);if(B.version>0&&at.__version!==B.version){wt(at,B,R);return}e.bindTexture(n.TEXTURE_CUBE_MAP,at.__webglTexture,n.TEXTURE0+R)}const yt={[fm]:n.REPEAT,[Qa]:n.CLAMP_TO_EDGE,[dm]:n.MIRRORED_REPEAT},F={[pi]:n.NEAREST,[kL]:n.NEAREST_MIPMAP_NEAREST,[wu]:n.NEAREST_MIPMAP_LINEAR,[ki]:n.LINEAR,[$d]:n.LINEAR_MIPMAP_NEAREST,[Ja]:n.LINEAR_MIPMAP_LINEAR},nt={[qL]:n.NEVER,[$L]:n.ALWAYS,[YL]:n.LESS,[S1]:n.LEQUAL,[KL]:n.EQUAL,[JL]:n.GEQUAL,[ZL]:n.GREATER,[QL]:n.NOTEQUAL};function Mt(B,R){if(R.type===Gi&&t.has("OES_texture_float_linear")===!1&&(R.magFilter===ki||R.magFilter===$d||R.magFilter===wu||R.magFilter===Ja||R.minFilter===ki||R.minFilter===$d||R.minFilter===wu||R.minFilter===Ja)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(B,n.TEXTURE_WRAP_S,yt[R.wrapS]),n.texParameteri(B,n.TEXTURE_WRAP_T,yt[R.wrapT]),(B===n.TEXTURE_3D||B===n.TEXTURE_2D_ARRAY)&&n.texParameteri(B,n.TEXTURE_WRAP_R,yt[R.wrapR]),n.texParameteri(B,n.TEXTURE_MAG_FILTER,F[R.magFilter]),n.texParameteri(B,n.TEXTURE_MIN_FILTER,F[R.minFilter]),R.compareFunction&&(n.texParameteri(B,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(B,n.TEXTURE_COMPARE_FUNC,nt[R.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(R.magFilter===pi||R.minFilter!==wu&&R.minFilter!==Ja||R.type===Gi&&t.has("OES_texture_float_linear")===!1)return;if(R.anisotropy>1||s.get(R).__currentAnisotropy){const at=t.get("EXT_texture_filter_anisotropic");n.texParameterf(B,at.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(R.anisotropy,r.getMaxAnisotropy())),s.get(R).__currentAnisotropy=R.anisotropy}}}function bt(B,R){let at=!1;B.__webglInit===void 0&&(B.__webglInit=!0,R.addEventListener("dispose",O));const pt=R.source;let gt=y.get(pt);gt===void 0&&(gt={},y.set(pt,gt));const ht=et(R);if(ht!==B.__cacheKey){gt[ht]===void 0&&(gt[ht]={texture:n.createTexture(),usedTimes:0},u.memory.textures++,at=!0),gt[ht].usedTimes++;const It=gt[B.__cacheKey];It!==void 0&&(gt[B.__cacheKey].usedTimes--,It.usedTimes===0&&U(R)),B.__cacheKey=ht,B.__webglTexture=gt[ht].texture}return at}function J(B,R,at){return Math.floor(Math.floor(B/at)/R)}function ft(B,R,at,pt){const ht=B.updateRanges;if(ht.length===0)e.texSubImage2D(n.TEXTURE_2D,0,0,0,R.width,R.height,at,pt,R.data);else{ht.sort((Et,Ft)=>Et.start-Ft.start);let It=0;for(let Et=1;Et<ht.length;Et++){const Ft=ht[It],Yt=ht[Et],Kt=Ft.start+Ft.count,Dt=J(Yt.start,R.width,4),re=J(Ft.start,R.width,4);Yt.start<=Kt+1&&Dt===re&&J(Yt.start+Yt.count-1,R.width,4)===Dt?Ft.count=Math.max(Ft.count,Yt.start+Yt.count-Ft.start):(++It,ht[It]=Yt)}ht.length=It+1;const Pt=n.getParameter(n.UNPACK_ROW_LENGTH),kt=n.getParameter(n.UNPACK_SKIP_PIXELS),Wt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,R.width);for(let Et=0,Ft=ht.length;Et<Ft;Et++){const Yt=ht[Et],Kt=Math.floor(Yt.start/4),Dt=Math.ceil(Yt.count/4),re=Kt%R.width,X=Math.floor(Kt/R.width),Ut=Dt,Tt=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,re),n.pixelStorei(n.UNPACK_SKIP_ROWS,X),e.texSubImage2D(n.TEXTURE_2D,0,re,X,Ut,Tt,at,pt,R.data)}B.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Pt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,kt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Wt)}}function vt(B,R,at){let pt=n.TEXTURE_2D;(R.isDataArrayTexture||R.isCompressedArrayTexture)&&(pt=n.TEXTURE_2D_ARRAY),R.isData3DTexture&&(pt=n.TEXTURE_3D);const gt=bt(B,R),ht=R.source;e.bindTexture(pt,B.__webglTexture,n.TEXTURE0+at);const It=s.get(ht);if(ht.version!==It.__version||gt===!0){e.activeTexture(n.TEXTURE0+at);const Pt=De.getPrimaries(De.workingColorSpace),kt=R.colorSpace===ca?null:De.getPrimaries(R.colorSpace),Wt=R.colorSpace===ca||Pt===kt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Wt);let Et=E(R.image,!1,r.maxTextureSize);Et=oe(R,Et);const Ft=l.convert(R.format,R.colorSpace),Yt=l.convert(R.type);let Kt=w(R.internalFormat,Ft,Yt,R.colorSpace,R.isVideoTexture);Mt(pt,R);let Dt;const re=R.mipmaps,X=R.isVideoTexture!==!0,Ut=It.__version===void 0||gt===!0,Tt=ht.dataReady,zt=N(R,Et);if(R.isDepthTexture)Kt=A(R.format===$l,R.type),Ut&&(X?e.texStorage2D(n.TEXTURE_2D,1,Kt,Et.width,Et.height):e.texImage2D(n.TEXTURE_2D,0,Kt,Et.width,Et.height,0,Ft,Yt,null));else if(R.isDataTexture)if(re.length>0){X&&Ut&&e.texStorage2D(n.TEXTURE_2D,zt,Kt,re[0].width,re[0].height);for(let Rt=0,St=re.length;Rt<St;Rt++)Dt=re[Rt],X?Tt&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,Dt.width,Dt.height,Ft,Yt,Dt.data):e.texImage2D(n.TEXTURE_2D,Rt,Kt,Dt.width,Dt.height,0,Ft,Yt,Dt.data);R.generateMipmaps=!1}else X?(Ut&&e.texStorage2D(n.TEXTURE_2D,zt,Kt,Et.width,Et.height),Tt&&ft(R,Et,Ft,Yt)):e.texImage2D(n.TEXTURE_2D,0,Kt,Et.width,Et.height,0,Ft,Yt,Et.data);else if(R.isCompressedTexture)if(R.isCompressedArrayTexture){X&&Ut&&e.texStorage3D(n.TEXTURE_2D_ARRAY,zt,Kt,re[0].width,re[0].height,Et.depth);for(let Rt=0,St=re.length;Rt<St;Rt++)if(Dt=re[Rt],R.format!==Ni)if(Ft!==null)if(X){if(Tt)if(R.layerUpdates.size>0){const Vt=BS(Dt.width,Dt.height,R.format,R.type);for(const ae of R.layerUpdates){const Ne=Dt.data.subarray(ae*Vt/Dt.data.BYTES_PER_ELEMENT,(ae+1)*Vt/Dt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,ae,Dt.width,Dt.height,1,Ft,Ne)}R.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,0,Dt.width,Dt.height,Et.depth,Ft,Dt.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Rt,Kt,Dt.width,Dt.height,Et.depth,0,Dt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else X?Tt&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,0,Dt.width,Dt.height,Et.depth,Ft,Yt,Dt.data):e.texImage3D(n.TEXTURE_2D_ARRAY,Rt,Kt,Dt.width,Dt.height,Et.depth,0,Ft,Yt,Dt.data)}else{X&&Ut&&e.texStorage2D(n.TEXTURE_2D,zt,Kt,re[0].width,re[0].height);for(let Rt=0,St=re.length;Rt<St;Rt++)Dt=re[Rt],R.format!==Ni?Ft!==null?X?Tt&&e.compressedTexSubImage2D(n.TEXTURE_2D,Rt,0,0,Dt.width,Dt.height,Ft,Dt.data):e.compressedTexImage2D(n.TEXTURE_2D,Rt,Kt,Dt.width,Dt.height,0,Dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):X?Tt&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,Dt.width,Dt.height,Ft,Yt,Dt.data):e.texImage2D(n.TEXTURE_2D,Rt,Kt,Dt.width,Dt.height,0,Ft,Yt,Dt.data)}else if(R.isDataArrayTexture)if(X){if(Ut&&e.texStorage3D(n.TEXTURE_2D_ARRAY,zt,Kt,Et.width,Et.height,Et.depth),Tt)if(R.layerUpdates.size>0){const Rt=BS(Et.width,Et.height,R.format,R.type);for(const St of R.layerUpdates){const Vt=Et.data.subarray(St*Rt/Et.data.BYTES_PER_ELEMENT,(St+1)*Rt/Et.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,St,Et.width,Et.height,1,Ft,Yt,Vt)}R.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Et.width,Et.height,Et.depth,Ft,Yt,Et.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,Kt,Et.width,Et.height,Et.depth,0,Ft,Yt,Et.data);else if(R.isData3DTexture)X?(Ut&&e.texStorage3D(n.TEXTURE_3D,zt,Kt,Et.width,Et.height,Et.depth),Tt&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Et.width,Et.height,Et.depth,Ft,Yt,Et.data)):e.texImage3D(n.TEXTURE_3D,0,Kt,Et.width,Et.height,Et.depth,0,Ft,Yt,Et.data);else if(R.isFramebufferTexture){if(Ut)if(X)e.texStorage2D(n.TEXTURE_2D,zt,Kt,Et.width,Et.height);else{let Rt=Et.width,St=Et.height;for(let Vt=0;Vt<zt;Vt++)e.texImage2D(n.TEXTURE_2D,Vt,Kt,Rt,St,0,Ft,Yt,null),Rt>>=1,St>>=1}}else if(re.length>0){if(X&&Ut){const Rt=sn(re[0]);e.texStorage2D(n.TEXTURE_2D,zt,Kt,Rt.width,Rt.height)}for(let Rt=0,St=re.length;Rt<St;Rt++)Dt=re[Rt],X?Tt&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,Ft,Yt,Dt):e.texImage2D(n.TEXTURE_2D,Rt,Kt,Ft,Yt,Dt);R.generateMipmaps=!1}else if(X){if(Ut){const Rt=sn(Et);e.texStorage2D(n.TEXTURE_2D,zt,Kt,Rt.width,Rt.height)}Tt&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Ft,Yt,Et)}else e.texImage2D(n.TEXTURE_2D,0,Kt,Ft,Yt,Et);M(R)&&S(pt),It.__version=ht.version,R.onUpdate&&R.onUpdate(R)}B.__version=R.version}function wt(B,R,at){if(R.image.length!==6)return;const pt=bt(B,R),gt=R.source;e.bindTexture(n.TEXTURE_CUBE_MAP,B.__webglTexture,n.TEXTURE0+at);const ht=s.get(gt);if(gt.version!==ht.__version||pt===!0){e.activeTexture(n.TEXTURE0+at);const It=De.getPrimaries(De.workingColorSpace),Pt=R.colorSpace===ca?null:De.getPrimaries(R.colorSpace),kt=R.colorSpace===ca||It===Pt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,kt);const Wt=R.isCompressedTexture||R.image[0].isCompressedTexture,Et=R.image[0]&&R.image[0].isDataTexture,Ft=[];for(let St=0;St<6;St++)!Wt&&!Et?Ft[St]=E(R.image[St],!0,r.maxCubemapSize):Ft[St]=Et?R.image[St].image:R.image[St],Ft[St]=oe(R,Ft[St]);const Yt=Ft[0],Kt=l.convert(R.format,R.colorSpace),Dt=l.convert(R.type),re=w(R.internalFormat,Kt,Dt,R.colorSpace),X=R.isVideoTexture!==!0,Ut=ht.__version===void 0||pt===!0,Tt=gt.dataReady;let zt=N(R,Yt);Mt(n.TEXTURE_CUBE_MAP,R);let Rt;if(Wt){X&&Ut&&e.texStorage2D(n.TEXTURE_CUBE_MAP,zt,re,Yt.width,Yt.height);for(let St=0;St<6;St++){Rt=Ft[St].mipmaps;for(let Vt=0;Vt<Rt.length;Vt++){const ae=Rt[Vt];R.format!==Ni?Kt!==null?X?Tt&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,Vt,0,0,ae.width,ae.height,Kt,ae.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,Vt,re,ae.width,ae.height,0,ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):X?Tt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,Vt,0,0,ae.width,ae.height,Kt,Dt,ae.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,Vt,re,ae.width,ae.height,0,Kt,Dt,ae.data)}}}else{if(Rt=R.mipmaps,X&&Ut){Rt.length>0&&zt++;const St=sn(Ft[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,zt,re,St.width,St.height)}for(let St=0;St<6;St++)if(Et){X?Tt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,0,0,0,Ft[St].width,Ft[St].height,Kt,Dt,Ft[St].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,0,re,Ft[St].width,Ft[St].height,0,Kt,Dt,Ft[St].data);for(let Vt=0;Vt<Rt.length;Vt++){const Ne=Rt[Vt].image[St].image;X?Tt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,Vt+1,0,0,Ne.width,Ne.height,Kt,Dt,Ne.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,Vt+1,re,Ne.width,Ne.height,0,Kt,Dt,Ne.data)}}else{X?Tt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,0,0,0,Kt,Dt,Ft[St]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,0,re,Kt,Dt,Ft[St]);for(let Vt=0;Vt<Rt.length;Vt++){const ae=Rt[Vt];X?Tt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,Vt+1,0,0,Kt,Dt,ae.image[St]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+St,Vt+1,re,Kt,Dt,ae.image[St])}}}M(R)&&S(n.TEXTURE_CUBE_MAP),ht.__version=gt.version,R.onUpdate&&R.onUpdate(R)}B.__version=R.version}function Ct(B,R,at,pt,gt,ht){const It=l.convert(at.format,at.colorSpace),Pt=l.convert(at.type),kt=w(at.internalFormat,It,Pt,at.colorSpace),Wt=s.get(R),Et=s.get(at);if(Et.__renderTarget=R,!Wt.__hasExternalTextures){const Ft=Math.max(1,R.width>>ht),Yt=Math.max(1,R.height>>ht);gt===n.TEXTURE_3D||gt===n.TEXTURE_2D_ARRAY?e.texImage3D(gt,ht,kt,Ft,Yt,R.depth,0,It,Pt,null):e.texImage2D(gt,ht,kt,Ft,Yt,0,It,Pt,null)}e.bindFramebuffer(n.FRAMEBUFFER,B),Ee(R)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,pt,gt,Et.__webglTexture,0,Gt(R)):(gt===n.TEXTURE_2D||gt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&gt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,pt,gt,Et.__webglTexture,ht),e.bindFramebuffer(n.FRAMEBUFFER,null)}function ee(B,R,at){if(n.bindRenderbuffer(n.RENDERBUFFER,B),R.depthBuffer){const pt=R.depthTexture,gt=pt&&pt.isDepthTexture?pt.type:null,ht=A(R.stencilBuffer,gt),It=R.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Pt=Gt(R);Ee(R)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pt,ht,R.width,R.height):at?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pt,ht,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,ht,R.width,R.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,It,n.RENDERBUFFER,B)}else{const pt=R.textures;for(let gt=0;gt<pt.length;gt++){const ht=pt[gt],It=l.convert(ht.format,ht.colorSpace),Pt=l.convert(ht.type),kt=w(ht.internalFormat,It,Pt,ht.colorSpace),Wt=Gt(R);at&&Ee(R)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Wt,kt,R.width,R.height):Ee(R)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Wt,kt,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,kt,R.width,R.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ht(B,R){if(R&&R.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,B),!(R.depthTexture&&R.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const pt=s.get(R.depthTexture);pt.__renderTarget=R,(!pt.__webglTexture||R.depthTexture.image.width!==R.width||R.depthTexture.image.height!==R.height)&&(R.depthTexture.image.width=R.width,R.depthTexture.image.height=R.height,R.depthTexture.needsUpdate=!0),ut(R.depthTexture,0);const gt=pt.__webglTexture,ht=Gt(R);if(R.depthTexture.format===Jl)Ee(R)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,gt,0,ht):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,gt,0);else if(R.depthTexture.format===$l)Ee(R)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,gt,0,ht):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,gt,0);else throw new Error("Unknown depthTexture format")}function _e(B){const R=s.get(B),at=B.isWebGLCubeRenderTarget===!0;if(R.__boundDepthTexture!==B.depthTexture){const pt=B.depthTexture;if(R.__depthDisposeCallback&&R.__depthDisposeCallback(),pt){const gt=()=>{delete R.__boundDepthTexture,delete R.__depthDisposeCallback,pt.removeEventListener("dispose",gt)};pt.addEventListener("dispose",gt),R.__depthDisposeCallback=gt}R.__boundDepthTexture=pt}if(B.depthTexture&&!R.__autoAllocateDepthBuffer){if(at)throw new Error("target.depthTexture not supported in Cube render targets");const pt=B.texture.mipmaps;pt&&pt.length>0?Ht(R.__webglFramebuffer[0],B):Ht(R.__webglFramebuffer,B)}else if(at){R.__webglDepthbuffer=[];for(let pt=0;pt<6;pt++)if(e.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer[pt]),R.__webglDepthbuffer[pt]===void 0)R.__webglDepthbuffer[pt]=n.createRenderbuffer(),ee(R.__webglDepthbuffer[pt],B,!1);else{const gt=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ht=R.__webglDepthbuffer[pt];n.bindRenderbuffer(n.RENDERBUFFER,ht),n.framebufferRenderbuffer(n.FRAMEBUFFER,gt,n.RENDERBUFFER,ht)}}else{const pt=B.texture.mipmaps;if(pt&&pt.length>0?e.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer[0]):e.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer),R.__webglDepthbuffer===void 0)R.__webglDepthbuffer=n.createRenderbuffer(),ee(R.__webglDepthbuffer,B,!1);else{const gt=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ht=R.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ht),n.framebufferRenderbuffer(n.FRAMEBUFFER,gt,n.RENDERBUFFER,ht)}}e.bindFramebuffer(n.FRAMEBUFFER,null)}function Ae(B,R,at){const pt=s.get(B);R!==void 0&&Ct(pt.__webglFramebuffer,B,B.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),at!==void 0&&_e(B)}function fe(B){const R=B.texture,at=s.get(B),pt=s.get(R);B.addEventListener("dispose",I);const gt=B.textures,ht=B.isWebGLCubeRenderTarget===!0,It=gt.length>1;if(It||(pt.__webglTexture===void 0&&(pt.__webglTexture=n.createTexture()),pt.__version=R.version,u.memory.textures++),ht){at.__webglFramebuffer=[];for(let Pt=0;Pt<6;Pt++)if(R.mipmaps&&R.mipmaps.length>0){at.__webglFramebuffer[Pt]=[];for(let kt=0;kt<R.mipmaps.length;kt++)at.__webglFramebuffer[Pt][kt]=n.createFramebuffer()}else at.__webglFramebuffer[Pt]=n.createFramebuffer()}else{if(R.mipmaps&&R.mipmaps.length>0){at.__webglFramebuffer=[];for(let Pt=0;Pt<R.mipmaps.length;Pt++)at.__webglFramebuffer[Pt]=n.createFramebuffer()}else at.__webglFramebuffer=n.createFramebuffer();if(It)for(let Pt=0,kt=gt.length;Pt<kt;Pt++){const Wt=s.get(gt[Pt]);Wt.__webglTexture===void 0&&(Wt.__webglTexture=n.createTexture(),u.memory.textures++)}if(B.samples>0&&Ee(B)===!1){at.__webglMultisampledFramebuffer=n.createFramebuffer(),at.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,at.__webglMultisampledFramebuffer);for(let Pt=0;Pt<gt.length;Pt++){const kt=gt[Pt];at.__webglColorRenderbuffer[Pt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,at.__webglColorRenderbuffer[Pt]);const Wt=l.convert(kt.format,kt.colorSpace),Et=l.convert(kt.type),Ft=w(kt.internalFormat,Wt,Et,kt.colorSpace,B.isXRRenderTarget===!0),Yt=Gt(B);n.renderbufferStorageMultisample(n.RENDERBUFFER,Yt,Ft,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pt,n.RENDERBUFFER,at.__webglColorRenderbuffer[Pt])}n.bindRenderbuffer(n.RENDERBUFFER,null),B.depthBuffer&&(at.__webglDepthRenderbuffer=n.createRenderbuffer(),ee(at.__webglDepthRenderbuffer,B,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ht){e.bindTexture(n.TEXTURE_CUBE_MAP,pt.__webglTexture),Mt(n.TEXTURE_CUBE_MAP,R);for(let Pt=0;Pt<6;Pt++)if(R.mipmaps&&R.mipmaps.length>0)for(let kt=0;kt<R.mipmaps.length;kt++)Ct(at.__webglFramebuffer[Pt][kt],B,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Pt,kt);else Ct(at.__webglFramebuffer[Pt],B,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Pt,0);M(R)&&S(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(It){for(let Pt=0,kt=gt.length;Pt<kt;Pt++){const Wt=gt[Pt],Et=s.get(Wt);e.bindTexture(n.TEXTURE_2D,Et.__webglTexture),Mt(n.TEXTURE_2D,Wt),Ct(at.__webglFramebuffer,B,Wt,n.COLOR_ATTACHMENT0+Pt,n.TEXTURE_2D,0),M(Wt)&&S(n.TEXTURE_2D)}e.unbindTexture()}else{let Pt=n.TEXTURE_2D;if((B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(Pt=B.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Pt,pt.__webglTexture),Mt(Pt,R),R.mipmaps&&R.mipmaps.length>0)for(let kt=0;kt<R.mipmaps.length;kt++)Ct(at.__webglFramebuffer[kt],B,R,n.COLOR_ATTACHMENT0,Pt,kt);else Ct(at.__webglFramebuffer,B,R,n.COLOR_ATTACHMENT0,Pt,0);M(R)&&S(Pt),e.unbindTexture()}B.depthBuffer&&_e(B)}function k(B){const R=B.textures;for(let at=0,pt=R.length;at<pt;at++){const gt=R[at];if(M(gt)){const ht=L(B),It=s.get(gt).__webglTexture;e.bindTexture(ht,It),S(ht),e.unbindTexture()}}}const mn=[],be=[];function ge(B){if(B.samples>0){if(Ee(B)===!1){const R=B.textures,at=B.width,pt=B.height;let gt=n.COLOR_BUFFER_BIT;const ht=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,It=s.get(B),Pt=R.length>1;if(Pt)for(let Wt=0;Wt<R.length;Wt++)e.bindFramebuffer(n.FRAMEBUFFER,It.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Wt,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,It.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Wt,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,It.__webglMultisampledFramebuffer);const kt=B.texture.mipmaps;kt&&kt.length>0?e.bindFramebuffer(n.DRAW_FRAMEBUFFER,It.__webglFramebuffer[0]):e.bindFramebuffer(n.DRAW_FRAMEBUFFER,It.__webglFramebuffer);for(let Wt=0;Wt<R.length;Wt++){if(B.resolveDepthBuffer&&(B.depthBuffer&&(gt|=n.DEPTH_BUFFER_BIT),B.stencilBuffer&&B.resolveStencilBuffer&&(gt|=n.STENCIL_BUFFER_BIT)),Pt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,It.__webglColorRenderbuffer[Wt]);const Et=s.get(R[Wt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Et,0)}n.blitFramebuffer(0,0,at,pt,0,0,at,pt,gt,n.NEAREST),f===!0&&(mn.length=0,be.length=0,mn.push(n.COLOR_ATTACHMENT0+Wt),B.depthBuffer&&B.resolveDepthBuffer===!1&&(mn.push(ht),be.push(ht),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,be)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,mn))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Pt)for(let Wt=0;Wt<R.length;Wt++){e.bindFramebuffer(n.FRAMEBUFFER,It.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Wt,n.RENDERBUFFER,It.__webglColorRenderbuffer[Wt]);const Et=s.get(R[Wt]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,It.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Wt,n.TEXTURE_2D,Et,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,It.__webglMultisampledFramebuffer)}else if(B.depthBuffer&&B.resolveDepthBuffer===!1&&f){const R=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[R])}}}function Gt(B){return Math.min(r.maxSamples,B.samples)}function Ee(B){const R=s.get(B);return B.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&R.__useRenderToTexture!==!1}function Zt(B){const R=u.render.frame;g.get(B)!==R&&(g.set(B,R),B.update())}function oe(B,R){const at=B.colorSpace,pt=B.format,gt=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||at!==yo&&at!==ca&&(De.getTransfer(at)===je?(pt!==Ni||gt!==Ki)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",at)),R}function sn(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement?(d.width=B.naturalWidth||B.width,d.height=B.naturalHeight||B.height):typeof VideoFrame<"u"&&B instanceof VideoFrame?(d.width=B.displayWidth,d.height=B.displayHeight):(d.width=B.width,d.height=B.height),d}this.allocateTextureUnit=$,this.resetTextureUnits=it,this.setTexture2D=ut,this.setTexture2DArray=V,this.setTexture3D=G,this.setTextureCube=q,this.rebindTextures=Ae,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=k,this.updateMultisampleRenderTarget=ge,this.setupDepthRenderbuffer=_e,this.setupFrameBufferTexture=Ct,this.useMultisampledRTT=Ee}function UF(n,t){function e(s,r=ca){let l;const u=De.getTransfer(r);if(s===Ki)return n.UNSIGNED_BYTE;if(s===Dg)return n.UNSIGNED_SHORT_4_4_4_4;if(s===Lg)return n.UNSIGNED_SHORT_5_5_5_1;if(s===m1)return n.UNSIGNED_INT_5_9_9_9_REV;if(s===d1)return n.BYTE;if(s===p1)return n.SHORT;if(s===Zl)return n.UNSIGNED_SHORT;if(s===Cg)return n.INT;if(s===sr)return n.UNSIGNED_INT;if(s===Gi)return n.FLOAT;if(s===lc)return n.HALF_FLOAT;if(s===g1)return n.ALPHA;if(s===v1)return n.RGB;if(s===Ni)return n.RGBA;if(s===Jl)return n.DEPTH_COMPONENT;if(s===$l)return n.DEPTH_STENCIL;if(s===Pg)return n.RED;if(s===Ug)return n.RED_INTEGER;if(s===x1)return n.RG;if(s===Ng)return n.RG_INTEGER;if(s===Og)return n.RGBA_INTEGER;if(s===ih||s===sh||s===ah||s===rh)if(u===je)if(l=t.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(s===ih)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===sh)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===ah)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===rh)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=t.get("WEBGL_compressed_texture_s3tc"),l!==null){if(s===ih)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===sh)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===ah)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===rh)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===pm||s===mm||s===gm||s===vm)if(l=t.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(s===pm)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===mm)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===gm)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===vm)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===xm||s===ym||s===_m)if(l=t.get("WEBGL_compressed_texture_etc"),l!==null){if(s===xm||s===ym)return u===je?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===_m)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Sm||s===Mm||s===bm||s===Em||s===Tm||s===Am||s===wm||s===Rm||s===Cm||s===Dm||s===Lm||s===Pm||s===Um||s===Nm)if(l=t.get("WEBGL_compressed_texture_astc"),l!==null){if(s===Sm)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Mm)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===bm)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Em)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Tm)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Am)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===wm)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Rm)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Cm)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Dm)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Lm)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Pm)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Um)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Nm)return u===je?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===oh||s===Om||s===Im)if(l=t.get("EXT_texture_compression_bptc"),l!==null){if(s===oh)return u===je?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Om)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Im)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===y1||s===Fm||s===zm||s===Bm)if(l=t.get("EXT_texture_compression_rgtc"),l!==null){if(s===oh)return l.COMPRESSED_RED_RGTC1_EXT;if(s===Fm)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===zm)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Bm)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ql?n.UNSIGNED_INT_24_8:n[s]!==void 0?n[s]:null}return{convert:e}}const NF=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,OF=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class IF{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,s){if(this.texture===null){const r=new Kn,l=t.properties.get(r);l.__webglTexture=e.texture,(e.depthNear!==s.depthNear||e.depthFar!==s.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,s=new ga({vertexShader:NF,fragmentShader:OF,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Cn(new Th(20,20),s)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class FF extends Eo{constructor(t,e){super();const s=this;let r=null,l=1,u=null,h="local-floor",f=1,d=null,g=null,x=null,y=null,_=null,b=null;const E=new IF,M=e.getContextAttributes();let S=null,L=null;const w=[],A=[],N=new Me;let O=null;const I=new di;I.viewport=new He;const z=new di;z.viewport=new He;const U=[I,z],C=new nU;let j=null,it=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let ft=w[J];return ft===void 0&&(ft=new _p,w[J]=ft),ft.getTargetRaySpace()},this.getControllerGrip=function(J){let ft=w[J];return ft===void 0&&(ft=new _p,w[J]=ft),ft.getGripSpace()},this.getHand=function(J){let ft=w[J];return ft===void 0&&(ft=new _p,w[J]=ft),ft.getHandSpace()};function $(J){const ft=A.indexOf(J.inputSource);if(ft===-1)return;const vt=w[ft];vt!==void 0&&(vt.update(J.inputSource,J.frame,d||u),vt.dispatchEvent({type:J.type,data:J.inputSource}))}function et(){r.removeEventListener("select",$),r.removeEventListener("selectstart",$),r.removeEventListener("selectend",$),r.removeEventListener("squeeze",$),r.removeEventListener("squeezestart",$),r.removeEventListener("squeezeend",$),r.removeEventListener("end",et),r.removeEventListener("inputsourceschange",ut);for(let J=0;J<w.length;J++){const ft=A[J];ft!==null&&(A[J]=null,w[J].disconnect(ft))}j=null,it=null,E.reset(),t.setRenderTarget(S),_=null,y=null,x=null,r=null,L=null,bt.stop(),s.isPresenting=!1,t.setPixelRatio(O),t.setSize(N.width,N.height,!1),s.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){l=J,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){h=J,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||u},this.setReferenceSpace=function(J){d=J},this.getBaseLayer=function(){return y!==null?y:_},this.getBinding=function(){return x},this.getFrame=function(){return b},this.getSession=function(){return r},this.setSession=async function(J){if(r=J,r!==null){if(S=t.getRenderTarget(),r.addEventListener("select",$),r.addEventListener("selectstart",$),r.addEventListener("selectend",$),r.addEventListener("squeeze",$),r.addEventListener("squeezestart",$),r.addEventListener("squeezeend",$),r.addEventListener("end",et),r.addEventListener("inputsourceschange",ut),M.xrCompatible!==!0&&await e.makeXRCompatible(),O=t.getPixelRatio(),t.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let vt=null,wt=null,Ct=null;M.depth&&(Ct=M.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,vt=M.stencil?$l:Jl,wt=M.stencil?Ql:sr);const ee={colorFormat:e.RGBA8,depthFormat:Ct,scaleFactor:l};x=new XRWebGLBinding(r,e),y=x.createProjectionLayer(ee),r.updateRenderState({layers:[y]}),t.setPixelRatio(1),t.setSize(y.textureWidth,y.textureHeight,!1),L=new ar(y.textureWidth,y.textureHeight,{format:Ni,type:Ki,depthTexture:new U1(y.textureWidth,y.textureHeight,wt,void 0,void 0,void 0,void 0,void 0,void 0,vt),stencilBuffer:M.stencil,colorSpace:t.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const vt={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:l};_=new XRWebGLLayer(r,e,vt),r.updateRenderState({baseLayer:_}),t.setPixelRatio(1),t.setSize(_.framebufferWidth,_.framebufferHeight,!1),L=new ar(_.framebufferWidth,_.framebufferHeight,{format:Ni,type:Ki,colorSpace:t.outputColorSpace,stencilBuffer:M.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}L.isXRRenderTarget=!0,this.setFoveation(f),d=null,u=await r.requestReferenceSpace(h),bt.setContext(r),bt.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function ut(J){for(let ft=0;ft<J.removed.length;ft++){const vt=J.removed[ft],wt=A.indexOf(vt);wt>=0&&(A[wt]=null,w[wt].disconnect(vt))}for(let ft=0;ft<J.added.length;ft++){const vt=J.added[ft];let wt=A.indexOf(vt);if(wt===-1){for(let ee=0;ee<w.length;ee++)if(ee>=A.length){A.push(vt),wt=ee;break}else if(A[ee]===null){A[ee]=vt,wt=ee;break}if(wt===-1)break}const Ct=w[wt];Ct&&Ct.connect(vt)}}const V=new Q,G=new Q;function q(J,ft,vt){V.setFromMatrixPosition(ft.matrixWorld),G.setFromMatrixPosition(vt.matrixWorld);const wt=V.distanceTo(G),Ct=ft.projectionMatrix.elements,ee=vt.projectionMatrix.elements,Ht=Ct[14]/(Ct[10]-1),_e=Ct[14]/(Ct[10]+1),Ae=(Ct[9]+1)/Ct[5],fe=(Ct[9]-1)/Ct[5],k=(Ct[8]-1)/Ct[0],mn=(ee[8]+1)/ee[0],be=Ht*k,ge=Ht*mn,Gt=wt/(-k+mn),Ee=Gt*-k;if(ft.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(Ee),J.translateZ(Gt),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert(),Ct[10]===-1)J.projectionMatrix.copy(ft.projectionMatrix),J.projectionMatrixInverse.copy(ft.projectionMatrixInverse);else{const Zt=Ht+Gt,oe=_e+Gt,sn=be-Ee,B=ge+(wt-Ee),R=Ae*_e/oe*Zt,at=fe*_e/oe*Zt;J.projectionMatrix.makePerspective(sn,B,R,at,Zt,oe),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}}function yt(J,ft){ft===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(ft.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(r===null)return;let ft=J.near,vt=J.far;E.texture!==null&&(E.depthNear>0&&(ft=E.depthNear),E.depthFar>0&&(vt=E.depthFar)),C.near=z.near=I.near=ft,C.far=z.far=I.far=vt,(j!==C.near||it!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),j=C.near,it=C.far),I.layers.mask=J.layers.mask|2,z.layers.mask=J.layers.mask|4,C.layers.mask=I.layers.mask|z.layers.mask;const wt=J.parent,Ct=C.cameras;yt(C,wt);for(let ee=0;ee<Ct.length;ee++)yt(Ct[ee],wt);Ct.length===2?q(C,I,z):C.projectionMatrix.copy(I.projectionMatrix),F(J,C,wt)};function F(J,ft,vt){vt===null?J.matrix.copy(ft.matrixWorld):(J.matrix.copy(vt.matrixWorld),J.matrix.invert(),J.matrix.multiply(ft.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(ft.projectionMatrix),J.projectionMatrixInverse.copy(ft.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=tc*2*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(y===null&&_===null))return f},this.setFoveation=function(J){f=J,y!==null&&(y.fixedFoveation=J),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=J)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(C)};let nt=null;function Mt(J,ft){if(g=ft.getViewerPose(d||u),b=ft,g!==null){const vt=g.views;_!==null&&(t.setRenderTargetFramebuffer(L,_.framebuffer),t.setRenderTarget(L));let wt=!1;vt.length!==C.cameras.length&&(C.cameras.length=0,wt=!0);for(let Ht=0;Ht<vt.length;Ht++){const _e=vt[Ht];let Ae=null;if(_!==null)Ae=_.getViewport(_e);else{const k=x.getViewSubImage(y,_e);Ae=k.viewport,Ht===0&&(t.setRenderTargetTextures(L,k.colorTexture,k.depthStencilTexture),t.setRenderTarget(L))}let fe=U[Ht];fe===void 0&&(fe=new di,fe.layers.enable(Ht),fe.viewport=new He,U[Ht]=fe),fe.matrix.fromArray(_e.transform.matrix),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.projectionMatrix.fromArray(_e.projectionMatrix),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert(),fe.viewport.set(Ae.x,Ae.y,Ae.width,Ae.height),Ht===0&&(C.matrix.copy(fe.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),wt===!0&&C.cameras.push(fe)}const Ct=r.enabledFeatures;if(Ct&&Ct.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&x){const Ht=x.getDepthInformation(vt[0]);Ht&&Ht.isValid&&Ht.texture&&E.init(t,Ht,r.renderState)}}for(let vt=0;vt<w.length;vt++){const wt=A[vt],Ct=w[vt];wt!==null&&Ct!==void 0&&Ct.update(wt,ft,d||u)}nt&&nt(J,ft),ft.detectedPlanes&&s.dispatchEvent({type:"planesdetected",data:ft}),b=null}const bt=new I1;bt.setAnimationLoop(Mt),this.setAnimationLoop=function(J){nt=J},this.dispose=function(){}}}const Ga=new Zi,zF=new We;function BF(n,t){function e(M,S){M.matrixAutoUpdate===!0&&M.updateMatrix(),S.value.copy(M.matrix)}function s(M,S){S.color.getRGB(M.fogColor.value,R1(n)),S.isFog?(M.fogNear.value=S.near,M.fogFar.value=S.far):S.isFogExp2&&(M.fogDensity.value=S.density)}function r(M,S,L,w,A){S.isMeshBasicMaterial||S.isMeshLambertMaterial?l(M,S):S.isMeshToonMaterial?(l(M,S),x(M,S)):S.isMeshPhongMaterial?(l(M,S),g(M,S)):S.isMeshStandardMaterial?(l(M,S),y(M,S),S.isMeshPhysicalMaterial&&_(M,S,A)):S.isMeshMatcapMaterial?(l(M,S),b(M,S)):S.isMeshDepthMaterial?l(M,S):S.isMeshDistanceMaterial?(l(M,S),E(M,S)):S.isMeshNormalMaterial?l(M,S):S.isLineBasicMaterial?(u(M,S),S.isLineDashedMaterial&&h(M,S)):S.isPointsMaterial?f(M,S,L,w):S.isSpriteMaterial?d(M,S):S.isShadowMaterial?(M.color.value.copy(S.color),M.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function l(M,S){M.opacity.value=S.opacity,S.color&&M.diffuse.value.copy(S.color),S.emissive&&M.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(M.map.value=S.map,e(S.map,M.mapTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,e(S.alphaMap,M.alphaMapTransform)),S.bumpMap&&(M.bumpMap.value=S.bumpMap,e(S.bumpMap,M.bumpMapTransform),M.bumpScale.value=S.bumpScale,S.side===Yn&&(M.bumpScale.value*=-1)),S.normalMap&&(M.normalMap.value=S.normalMap,e(S.normalMap,M.normalMapTransform),M.normalScale.value.copy(S.normalScale),S.side===Yn&&M.normalScale.value.negate()),S.displacementMap&&(M.displacementMap.value=S.displacementMap,e(S.displacementMap,M.displacementMapTransform),M.displacementScale.value=S.displacementScale,M.displacementBias.value=S.displacementBias),S.emissiveMap&&(M.emissiveMap.value=S.emissiveMap,e(S.emissiveMap,M.emissiveMapTransform)),S.specularMap&&(M.specularMap.value=S.specularMap,e(S.specularMap,M.specularMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest);const L=t.get(S),w=L.envMap,A=L.envMapRotation;w&&(M.envMap.value=w,Ga.copy(A),Ga.x*=-1,Ga.y*=-1,Ga.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Ga.y*=-1,Ga.z*=-1),M.envMapRotation.value.setFromMatrix4(zF.makeRotationFromEuler(Ga)),M.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=S.reflectivity,M.ior.value=S.ior,M.refractionRatio.value=S.refractionRatio),S.lightMap&&(M.lightMap.value=S.lightMap,M.lightMapIntensity.value=S.lightMapIntensity,e(S.lightMap,M.lightMapTransform)),S.aoMap&&(M.aoMap.value=S.aoMap,M.aoMapIntensity.value=S.aoMapIntensity,e(S.aoMap,M.aoMapTransform))}function u(M,S){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,S.map&&(M.map.value=S.map,e(S.map,M.mapTransform))}function h(M,S){M.dashSize.value=S.dashSize,M.totalSize.value=S.dashSize+S.gapSize,M.scale.value=S.scale}function f(M,S,L,w){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,M.size.value=S.size*L,M.scale.value=w*.5,S.map&&(M.map.value=S.map,e(S.map,M.uvTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,e(S.alphaMap,M.alphaMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest)}function d(M,S){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,M.rotation.value=S.rotation,S.map&&(M.map.value=S.map,e(S.map,M.mapTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,e(S.alphaMap,M.alphaMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest)}function g(M,S){M.specular.value.copy(S.specular),M.shininess.value=Math.max(S.shininess,1e-4)}function x(M,S){S.gradientMap&&(M.gradientMap.value=S.gradientMap)}function y(M,S){M.metalness.value=S.metalness,S.metalnessMap&&(M.metalnessMap.value=S.metalnessMap,e(S.metalnessMap,M.metalnessMapTransform)),M.roughness.value=S.roughness,S.roughnessMap&&(M.roughnessMap.value=S.roughnessMap,e(S.roughnessMap,M.roughnessMapTransform)),S.envMap&&(M.envMapIntensity.value=S.envMapIntensity)}function _(M,S,L){M.ior.value=S.ior,S.sheen>0&&(M.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),M.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(M.sheenColorMap.value=S.sheenColorMap,e(S.sheenColorMap,M.sheenColorMapTransform)),S.sheenRoughnessMap&&(M.sheenRoughnessMap.value=S.sheenRoughnessMap,e(S.sheenRoughnessMap,M.sheenRoughnessMapTransform))),S.clearcoat>0&&(M.clearcoat.value=S.clearcoat,M.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(M.clearcoatMap.value=S.clearcoatMap,e(S.clearcoatMap,M.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,e(S.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(M.clearcoatNormalMap.value=S.clearcoatNormalMap,e(S.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===Yn&&M.clearcoatNormalScale.value.negate())),S.dispersion>0&&(M.dispersion.value=S.dispersion),S.iridescence>0&&(M.iridescence.value=S.iridescence,M.iridescenceIOR.value=S.iridescenceIOR,M.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(M.iridescenceMap.value=S.iridescenceMap,e(S.iridescenceMap,M.iridescenceMapTransform)),S.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=S.iridescenceThicknessMap,e(S.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),S.transmission>0&&(M.transmission.value=S.transmission,M.transmissionSamplerMap.value=L.texture,M.transmissionSamplerSize.value.set(L.width,L.height),S.transmissionMap&&(M.transmissionMap.value=S.transmissionMap,e(S.transmissionMap,M.transmissionMapTransform)),M.thickness.value=S.thickness,S.thicknessMap&&(M.thicknessMap.value=S.thicknessMap,e(S.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=S.attenuationDistance,M.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(M.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(M.anisotropyMap.value=S.anisotropyMap,e(S.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=S.specularIntensity,M.specularColor.value.copy(S.specularColor),S.specularColorMap&&(M.specularColorMap.value=S.specularColorMap,e(S.specularColorMap,M.specularColorMapTransform)),S.specularIntensityMap&&(M.specularIntensityMap.value=S.specularIntensityMap,e(S.specularIntensityMap,M.specularIntensityMapTransform))}function b(M,S){S.matcap&&(M.matcap.value=S.matcap)}function E(M,S){const L=t.get(S).light;M.referencePosition.value.setFromMatrixPosition(L.matrixWorld),M.nearDistance.value=L.shadow.camera.near,M.farDistance.value=L.shadow.camera.far}return{refreshFogUniforms:s,refreshMaterialUniforms:r}}function VF(n,t,e,s){let r={},l={},u=[];const h=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function f(L,w){const A=w.program;s.uniformBlockBinding(L,A)}function d(L,w){let A=r[L.id];A===void 0&&(b(L),A=g(L),r[L.id]=A,L.addEventListener("dispose",M));const N=w.program;s.updateUBOMapping(L,N);const O=t.render.frame;l[L.id]!==O&&(y(L),l[L.id]=O)}function g(L){const w=x();L.__bindingPointIndex=w;const A=n.createBuffer(),N=L.__size,O=L.usage;return n.bindBuffer(n.UNIFORM_BUFFER,A),n.bufferData(n.UNIFORM_BUFFER,N,O),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,A),A}function x(){for(let L=0;L<h;L++)if(u.indexOf(L)===-1)return u.push(L),L;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(L){const w=r[L.id],A=L.uniforms,N=L.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let O=0,I=A.length;O<I;O++){const z=Array.isArray(A[O])?A[O]:[A[O]];for(let U=0,C=z.length;U<C;U++){const j=z[U];if(_(j,O,U,N)===!0){const it=j.__offset,$=Array.isArray(j.value)?j.value:[j.value];let et=0;for(let ut=0;ut<$.length;ut++){const V=$[ut],G=E(V);typeof V=="number"||typeof V=="boolean"?(j.__data[0]=V,n.bufferSubData(n.UNIFORM_BUFFER,it+et,j.__data)):V.isMatrix3?(j.__data[0]=V.elements[0],j.__data[1]=V.elements[1],j.__data[2]=V.elements[2],j.__data[3]=0,j.__data[4]=V.elements[3],j.__data[5]=V.elements[4],j.__data[6]=V.elements[5],j.__data[7]=0,j.__data[8]=V.elements[6],j.__data[9]=V.elements[7],j.__data[10]=V.elements[8],j.__data[11]=0):(V.toArray(j.__data,et),et+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,it,j.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function _(L,w,A,N){const O=L.value,I=w+"_"+A;if(N[I]===void 0)return typeof O=="number"||typeof O=="boolean"?N[I]=O:N[I]=O.clone(),!0;{const z=N[I];if(typeof O=="number"||typeof O=="boolean"){if(z!==O)return N[I]=O,!0}else if(z.equals(O)===!1)return z.copy(O),!0}return!1}function b(L){const w=L.uniforms;let A=0;const N=16;for(let I=0,z=w.length;I<z;I++){const U=Array.isArray(w[I])?w[I]:[w[I]];for(let C=0,j=U.length;C<j;C++){const it=U[C],$=Array.isArray(it.value)?it.value:[it.value];for(let et=0,ut=$.length;et<ut;et++){const V=$[et],G=E(V),q=A%N,yt=q%G.boundary,F=q+yt;A+=yt,F!==0&&N-F<G.storage&&(A+=N-F),it.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),it.__offset=A,A+=G.storage}}}const O=A%N;return O>0&&(A+=N-O),L.__size=A,L.__cache={},this}function E(L){const w={boundary:0,storage:0};return typeof L=="number"||typeof L=="boolean"?(w.boundary=4,w.storage=4):L.isVector2?(w.boundary=8,w.storage=8):L.isVector3||L.isColor?(w.boundary=16,w.storage=12):L.isVector4?(w.boundary=16,w.storage=16):L.isMatrix3?(w.boundary=48,w.storage=48):L.isMatrix4?(w.boundary=64,w.storage=64):L.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",L),w}function M(L){const w=L.target;w.removeEventListener("dispose",M);const A=u.indexOf(w.__bindingPointIndex);u.splice(A,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete l[w.id]}function S(){for(const L in r)n.deleteBuffer(r[L]);u=[],r={},l={}}return{bind:f,update:d,dispose:S}}class jF{constructor(t={}){const{canvas:e=gP(),context:s=null,depth:r=!0,stencil:l=!1,alpha:u=!1,antialias:h=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:d=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:x=!1,reverseDepthBuffer:y=!1}=t;this.isWebGLRenderer=!0;let _;if(s!==null){if(typeof WebGLRenderingContext<"u"&&s instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=s.getContextAttributes().alpha}else _=u;const b=new Uint32Array(4),E=new Int32Array(4);let M=null,S=null;const L=[],w=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=da,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const A=this;let N=!1;this._outputColorSpace=fi;let O=0,I=0,z=null,U=-1,C=null;const j=new He,it=new He;let $=null;const et=new Se(0);let ut=0,V=e.width,G=e.height,q=1,yt=null,F=null;const nt=new He(0,0,V,G),Mt=new He(0,0,V,G);let bt=!1;const J=new Vg;let ft=!1,vt=!1;const wt=new We,Ct=new We,ee=new Q,Ht=new He,_e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ae=!1;function fe(){return z===null?q:1}let k=s;function mn(P,K){return e.getContext(P,K)}try{const P={alpha:!0,depth:r,stencil:l,antialias:h,premultipliedAlpha:f,preserveDrawingBuffer:d,powerPreference:g,failIfMajorPerformanceCaveat:x};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Rg}`),e.addEventListener("webglcontextlost",zt,!1),e.addEventListener("webglcontextrestored",Rt,!1),e.addEventListener("webglcontextcreationerror",St,!1),k===null){const K="webgl2";if(k=mn(K,P),k===null)throw mn(K)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(P){throw console.error("THREE.WebGLRenderer: "+P.message),P}let be,ge,Gt,Ee,Zt,oe,sn,B,R,at,pt,gt,ht,It,Pt,kt,Wt,Et,Ft,Yt,Kt,Dt,re,X;function Ut(){be=new QO(k),be.init(),Dt=new UF(k,be),ge=new GO(k,be,t,Dt),Gt=new LF(k,be),ge.reverseDepthBuffer&&y&&Gt.buffers.depth.setReversed(!0),Ee=new tI(k),Zt=new xF,oe=new PF(k,be,Gt,Zt,ge,Dt,Ee),sn=new XO(A),B=new ZO(A),R=new rU(k),re=new HO(k,R),at=new JO(k,R,Ee,re),pt=new nI(k,at,R,Ee),Ft=new eI(k,ge,oe),kt=new WO(Zt),gt=new vF(A,sn,B,be,ge,re,kt),ht=new BF(A,Zt),It=new _F,Pt=new AF(be),Et=new jO(A,sn,B,Gt,pt,_,f),Wt=new CF(A,pt,ge),X=new VF(k,Ee,ge,Gt),Yt=new kO(k,be,Ee),Kt=new $O(k,be,Ee),Ee.programs=gt.programs,A.capabilities=ge,A.extensions=be,A.properties=Zt,A.renderLists=It,A.shadowMap=Wt,A.state=Gt,A.info=Ee}Ut();const Tt=new FF(A,k);this.xr=Tt,this.getContext=function(){return k},this.getContextAttributes=function(){return k.getContextAttributes()},this.forceContextLoss=function(){const P=be.get("WEBGL_lose_context");P&&P.loseContext()},this.forceContextRestore=function(){const P=be.get("WEBGL_lose_context");P&&P.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(P){P!==void 0&&(q=P,this.setSize(V,G,!1))},this.getSize=function(P){return P.set(V,G)},this.setSize=function(P,K,lt=!0){if(Tt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}V=P,G=K,e.width=Math.floor(P*q),e.height=Math.floor(K*q),lt===!0&&(e.style.width=P+"px",e.style.height=K+"px"),this.setViewport(0,0,P,K)},this.getDrawingBufferSize=function(P){return P.set(V*q,G*q).floor()},this.setDrawingBufferSize=function(P,K,lt){V=P,G=K,q=lt,e.width=Math.floor(P*lt),e.height=Math.floor(K*lt),this.setViewport(0,0,P,K)},this.getCurrentViewport=function(P){return P.copy(j)},this.getViewport=function(P){return P.copy(nt)},this.setViewport=function(P,K,lt,ct){P.isVector4?nt.set(P.x,P.y,P.z,P.w):nt.set(P,K,lt,ct),Gt.viewport(j.copy(nt).multiplyScalar(q).round())},this.getScissor=function(P){return P.copy(Mt)},this.setScissor=function(P,K,lt,ct){P.isVector4?Mt.set(P.x,P.y,P.z,P.w):Mt.set(P,K,lt,ct),Gt.scissor(it.copy(Mt).multiplyScalar(q).round())},this.getScissorTest=function(){return bt},this.setScissorTest=function(P){Gt.setScissorTest(bt=P)},this.setOpaqueSort=function(P){yt=P},this.setTransparentSort=function(P){F=P},this.getClearColor=function(P){return P.copy(Et.getClearColor())},this.setClearColor=function(){Et.setClearColor(...arguments)},this.getClearAlpha=function(){return Et.getClearAlpha()},this.setClearAlpha=function(){Et.setClearAlpha(...arguments)},this.clear=function(P=!0,K=!0,lt=!0){let ct=0;if(P){let Z=!1;if(z!==null){const At=z.texture.format;Z=At===Og||At===Ng||At===Ug}if(Z){const At=z.texture.type,Lt=At===Ki||At===sr||At===Zl||At===Ql||At===Dg||At===Lg,Ot=Et.getClearColor(),Bt=Et.getClearAlpha(),ne=Ot.r,Jt=Ot.g,Xt=Ot.b;Lt?(b[0]=ne,b[1]=Jt,b[2]=Xt,b[3]=Bt,k.clearBufferuiv(k.COLOR,0,b)):(E[0]=ne,E[1]=Jt,E[2]=Xt,E[3]=Bt,k.clearBufferiv(k.COLOR,0,E))}else ct|=k.COLOR_BUFFER_BIT}K&&(ct|=k.DEPTH_BUFFER_BIT),lt&&(ct|=k.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),k.clear(ct)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",zt,!1),e.removeEventListener("webglcontextrestored",Rt,!1),e.removeEventListener("webglcontextcreationerror",St,!1),Et.dispose(),It.dispose(),Pt.dispose(),Zt.dispose(),sn.dispose(),B.dispose(),pt.dispose(),re.dispose(),X.dispose(),gt.dispose(),Tt.dispose(),Tt.removeEventListener("sessionstart",gn),Tt.removeEventListener("sessionend",Ln),Zn.stop()};function zt(P){P.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function Rt(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const P=Ee.autoReset,K=Wt.enabled,lt=Wt.autoUpdate,ct=Wt.needsUpdate,Z=Wt.type;Ut(),Ee.autoReset=P,Wt.enabled=K,Wt.autoUpdate=lt,Wt.needsUpdate=ct,Wt.type=Z}function St(P){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",P.statusMessage)}function Vt(P){const K=P.target;K.removeEventListener("dispose",Vt),ae(K)}function ae(P){Ne(P),Zt.remove(P)}function Ne(P){const K=Zt.get(P).programs;K!==void 0&&(K.forEach(function(lt){gt.releaseProgram(lt)}),P.isShaderMaterial&&gt.releaseShaderCache(P))}this.renderBufferDirect=function(P,K,lt,ct,Z,At){K===null&&(K=_e);const Lt=Z.isMesh&&Z.matrixWorld.determinant()<0,Ot=Sa(P,K,lt,ct,Z);Gt.setMaterial(ct,Lt);let Bt=lt.index,ne=1;if(ct.wireframe===!0){if(Bt=at.getWireframeAttribute(lt),Bt===void 0)return;ne=2}const Jt=lt.drawRange,Xt=lt.attributes.position;let he=Jt.start*ne,Pe=(Jt.start+Jt.count)*ne;At!==null&&(he=Math.max(he,At.start*ne),Pe=Math.min(Pe,(At.start+At.count)*ne)),Bt!==null?(he=Math.max(he,0),Pe=Math.min(Pe,Bt.count)):Xt!=null&&(he=Math.max(he,0),Pe=Math.min(Pe,Xt.count));const Ke=Pe-he;if(Ke<0||Ke===1/0)return;re.setup(Z,ct,Ot,lt,Bt);let pe,Ue=Yt;if(Bt!==null&&(pe=R.get(Bt),Ue=Kt,Ue.setIndex(pe)),Z.isMesh)ct.wireframe===!0?(Gt.setLineWidth(ct.wireframeLinewidth*fe()),Ue.setMode(k.LINES)):Ue.setMode(k.TRIANGLES);else if(Z.isLine){let Qt=ct.linewidth;Qt===void 0&&(Qt=1),Gt.setLineWidth(Qt*fe()),Z.isLineSegments?Ue.setMode(k.LINES):Z.isLineLoop?Ue.setMode(k.LINE_LOOP):Ue.setMode(k.LINE_STRIP)}else Z.isPoints?Ue.setMode(k.POINTS):Z.isSprite&&Ue.setMode(k.TRIANGLES);if(Z.isBatchedMesh)if(Z._multiDrawInstances!==null)fo("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ue.renderMultiDrawInstances(Z._multiDrawStarts,Z._multiDrawCounts,Z._multiDrawCount,Z._multiDrawInstances);else if(be.get("WEBGL_multi_draw"))Ue.renderMultiDraw(Z._multiDrawStarts,Z._multiDrawCounts,Z._multiDrawCount);else{const Qt=Z._multiDrawStarts,Fe=Z._multiDrawCounts,Te=Z._multiDrawCount,bn=Bt?R.get(Bt).bytesPerElement:1,Ls=Zt.get(ct).currentProgram.getUniforms();for(let Xe=0;Xe<Te;Xe++)Ls.setValue(k,"_gl_DrawID",Xe),Ue.render(Qt[Xe]/bn,Fe[Xe])}else if(Z.isInstancedMesh)Ue.renderInstances(he,Ke,Z.count);else if(lt.isInstancedBufferGeometry){const Qt=lt._maxInstanceCount!==void 0?lt._maxInstanceCount:1/0,Fe=Math.min(lt.instanceCount,Qt);Ue.renderInstances(he,Ke,Fe)}else Ue.render(he,Ke)};function Re(P,K,lt){P.transparent===!0&&P.side===Ms&&P.forceSinglePass===!1?(P.side=Yn,P.needsUpdate=!0,Cs(P,K,lt),P.side=ma,P.needsUpdate=!0,Cs(P,K,lt),P.side=Ms):Cs(P,K,lt)}this.compile=function(P,K,lt=null){lt===null&&(lt=P),S=Pt.get(lt),S.init(K),w.push(S),lt.traverseVisible(function(Z){Z.isLight&&Z.layers.test(K.layers)&&(S.pushLight(Z),Z.castShadow&&S.pushShadow(Z))}),P!==lt&&P.traverseVisible(function(Z){Z.isLight&&Z.layers.test(K.layers)&&(S.pushLight(Z),Z.castShadow&&S.pushShadow(Z))}),S.setupLights();const ct=new Set;return P.traverse(function(Z){if(!(Z.isMesh||Z.isPoints||Z.isLine||Z.isSprite))return;const At=Z.material;if(At)if(Array.isArray(At))for(let Lt=0;Lt<At.length;Lt++){const Ot=At[Lt];Re(Ot,lt,Z),ct.add(Ot)}else Re(At,lt,Z),ct.add(At)}),S=w.pop(),ct},this.compileAsync=function(P,K,lt=null){const ct=this.compile(P,K,lt);return new Promise(Z=>{function At(){if(ct.forEach(function(Lt){Zt.get(Lt).currentProgram.isReady()&&ct.delete(Lt)}),ct.size===0){Z(P);return}setTimeout(At,10)}be.get("KHR_parallel_shader_compile")!==null?At():setTimeout(At,10)})};let ni=null;function Mn(P){ni&&ni(P)}function gn(){Zn.stop()}function Ln(){Zn.start()}const Zn=new I1;Zn.setAnimationLoop(Mn),typeof self<"u"&&Zn.setContext(self),this.setAnimationLoop=function(P){ni=P,Tt.setAnimationLoop(P),P===null?Zn.stop():Zn.start()},Tt.addEventListener("sessionstart",gn),Tt.addEventListener("sessionend",Ln),this.render=function(P,K){if(K!==void 0&&K.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(P.matrixWorldAutoUpdate===!0&&P.updateMatrixWorld(),K.parent===null&&K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),Tt.enabled===!0&&Tt.isPresenting===!0&&(Tt.cameraAutoUpdate===!0&&Tt.updateCamera(K),K=Tt.getCamera()),P.isScene===!0&&P.onBeforeRender(A,P,K,z),S=Pt.get(P,w.length),S.init(K),w.push(S),Ct.multiplyMatrices(K.projectionMatrix,K.matrixWorldInverse),J.setFromProjectionMatrix(Ct),vt=this.localClippingEnabled,ft=kt.init(this.clippingPlanes,vt),M=It.get(P,L.length),M.init(),L.push(M),Tt.enabled===!0&&Tt.isPresenting===!0){const At=A.xr.getDepthSensingMesh();At!==null&&ya(At,K,-1/0,A.sortObjects)}ya(P,K,0,A.sortObjects),M.finish(),A.sortObjects===!0&&M.sort(yt,F),Ae=Tt.enabled===!1||Tt.isPresenting===!1||Tt.hasDepthSensing()===!1,Ae&&Et.addToRenderList(M,P),this.info.render.frame++,ft===!0&&kt.beginShadows();const lt=S.state.shadowsArray;Wt.render(lt,P,K),ft===!0&&kt.endShadows(),this.info.autoReset===!0&&this.info.reset();const ct=M.opaque,Z=M.transmissive;if(S.setupLights(),K.isArrayCamera){const At=K.cameras;if(Z.length>0)for(let Lt=0,Ot=At.length;Lt<Ot;Lt++){const Bt=At[Lt];dc(ct,Z,P,Bt)}Ae&&Et.render(P);for(let Lt=0,Ot=At.length;Lt<Ot;Lt++){const Bt=At[Lt];fc(M,P,Bt,Bt.viewport)}}else Z.length>0&&dc(ct,Z,P,K),Ae&&Et.render(P),fc(M,P,K);z!==null&&I===0&&(oe.updateMultisampleRenderTarget(z),oe.updateRenderTargetMipmap(z)),P.isScene===!0&&P.onAfterRender(A,P,K),re.resetDefaultState(),U=-1,C=null,w.pop(),w.length>0?(S=w[w.length-1],ft===!0&&kt.setGlobalState(A.clippingPlanes,S.state.camera)):S=null,L.pop(),L.length>0?M=L[L.length-1]:M=null};function ya(P,K,lt,ct){if(P.visible===!1)return;if(P.layers.test(K.layers)){if(P.isGroup)lt=P.renderOrder;else if(P.isLOD)P.autoUpdate===!0&&P.update(K);else if(P.isLight)S.pushLight(P),P.castShadow&&S.pushShadow(P);else if(P.isSprite){if(!P.frustumCulled||J.intersectsSprite(P)){ct&&Ht.setFromMatrixPosition(P.matrixWorld).applyMatrix4(Ct);const Lt=pt.update(P),Ot=P.material;Ot.visible&&M.push(P,Lt,Ot,lt,Ht.z,null)}}else if((P.isMesh||P.isLine||P.isPoints)&&(!P.frustumCulled||J.intersectsObject(P))){const Lt=pt.update(P),Ot=P.material;if(ct&&(P.boundingSphere!==void 0?(P.boundingSphere===null&&P.computeBoundingSphere(),Ht.copy(P.boundingSphere.center)):(Lt.boundingSphere===null&&Lt.computeBoundingSphere(),Ht.copy(Lt.boundingSphere.center)),Ht.applyMatrix4(P.matrixWorld).applyMatrix4(Ct)),Array.isArray(Ot)){const Bt=Lt.groups;for(let ne=0,Jt=Bt.length;ne<Jt;ne++){const Xt=Bt[ne],he=Ot[Xt.materialIndex];he&&he.visible&&M.push(P,Lt,he,lt,Ht.z,Xt)}}else Ot.visible&&M.push(P,Lt,Ot,lt,Ht.z,null)}}const At=P.children;for(let Lt=0,Ot=At.length;Lt<Ot;Lt++)ya(At[Lt],K,lt,ct)}function fc(P,K,lt,ct){const Z=P.opaque,At=P.transmissive,Lt=P.transparent;S.setupLightsView(lt),ft===!0&&kt.setGlobalState(A.clippingPlanes,lt),ct&&Gt.viewport(j.copy(ct)),Z.length>0&&_a(Z,K,lt),At.length>0&&_a(At,K,lt),Lt.length>0&&_a(Lt,K,lt),Gt.buffers.depth.setTest(!0),Gt.buffers.depth.setMask(!0),Gt.buffers.color.setMask(!0),Gt.setPolygonOffset(!1)}function dc(P,K,lt,ct){if((lt.isScene===!0?lt.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[ct.id]===void 0&&(S.state.transmissionRenderTarget[ct.id]=new ar(1,1,{generateMipmaps:!0,type:be.has("EXT_color_buffer_half_float")||be.has("EXT_color_buffer_float")?lc:Ki,minFilter:Ja,samples:4,stencilBuffer:l,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:De.workingColorSpace}));const At=S.state.transmissionRenderTarget[ct.id],Lt=ct.viewport||j;At.setSize(Lt.z*A.transmissionResolutionScale,Lt.w*A.transmissionResolutionScale);const Ot=A.getRenderTarget(),Bt=A.getActiveCubeFace(),ne=A.getActiveMipmapLevel();A.setRenderTarget(At),A.getClearColor(et),ut=A.getClearAlpha(),ut<1&&A.setClearColor(16777215,.5),A.clear(),Ae&&Et.render(lt);const Jt=A.toneMapping;A.toneMapping=da;const Xt=ct.viewport;if(ct.viewport!==void 0&&(ct.viewport=void 0),S.setupLightsView(ct),ft===!0&&kt.setGlobalState(A.clippingPlanes,ct),_a(P,lt,ct),oe.updateMultisampleRenderTarget(At),oe.updateRenderTargetMipmap(At),be.has("WEBGL_multisampled_render_to_texture")===!1){let he=!1;for(let Pe=0,Ke=K.length;Pe<Ke;Pe++){const pe=K[Pe],Ue=pe.object,Qt=pe.geometry,Fe=pe.material,Te=pe.group;if(Fe.side===Ms&&Ue.layers.test(ct.layers)){const bn=Fe.side;Fe.side=Yn,Fe.needsUpdate=!0,Rs(Ue,lt,ct,Qt,Fe,Te),Fe.side=bn,Fe.needsUpdate=!0,he=!0}}he===!0&&(oe.updateMultisampleRenderTarget(At),oe.updateRenderTargetMipmap(At))}A.setRenderTarget(Ot,Bt,ne),A.setClearColor(et,ut),Xt!==void 0&&(ct.viewport=Xt),A.toneMapping=Jt}function _a(P,K,lt){const ct=K.isScene===!0?K.overrideMaterial:null;for(let Z=0,At=P.length;Z<At;Z++){const Lt=P[Z],Ot=Lt.object,Bt=Lt.geometry,ne=Lt.group;let Jt=Lt.material;Jt.allowOverride===!0&&ct!==null&&(Jt=ct),Ot.layers.test(lt.layers)&&Rs(Ot,K,lt,Bt,Jt,ne)}}function Rs(P,K,lt,ct,Z,At){P.onBeforeRender(A,K,lt,ct,Z,At),P.modelViewMatrix.multiplyMatrices(lt.matrixWorldInverse,P.matrixWorld),P.normalMatrix.getNormalMatrix(P.modelViewMatrix),Z.onBeforeRender(A,K,lt,ct,P,At),Z.transparent===!0&&Z.side===Ms&&Z.forceSinglePass===!1?(Z.side=Yn,Z.needsUpdate=!0,A.renderBufferDirect(lt,K,ct,Z,P,At),Z.side=ma,Z.needsUpdate=!0,A.renderBufferDirect(lt,K,ct,Z,P,At),Z.side=Ms):A.renderBufferDirect(lt,K,ct,Z,P,At),P.onAfterRender(A,K,lt,ct,Z,At)}function Cs(P,K,lt){K.isScene!==!0&&(K=_e);const ct=Zt.get(P),Z=S.state.lights,At=S.state.shadowsArray,Lt=Z.state.version,Ot=gt.getParameters(P,Z.state,At,K,lt),Bt=gt.getProgramCacheKey(Ot);let ne=ct.programs;ct.environment=P.isMeshStandardMaterial?K.environment:null,ct.fog=K.fog,ct.envMap=(P.isMeshStandardMaterial?B:sn).get(P.envMap||ct.environment),ct.envMapRotation=ct.environment!==null&&P.envMap===null?K.environmentRotation:P.envMapRotation,ne===void 0&&(P.addEventListener("dispose",Vt),ne=new Map,ct.programs=ne);let Jt=ne.get(Bt);if(Jt!==void 0){if(ct.currentProgram===Jt&&ct.lightsStateVersion===Lt)return Ji(P,Ot),Jt}else Ot.uniforms=gt.getUniforms(P),P.onBeforeCompile(Ot,A),Jt=gt.acquireProgram(Ot,Bt),ne.set(Bt,Jt),ct.uniforms=Ot.uniforms;const Xt=ct.uniforms;return(!P.isShaderMaterial&&!P.isRawShaderMaterial||P.clipping===!0)&&(Xt.clippingPlanes=kt.uniform),Ji(P,Ot),ct.needsLights=un(P),ct.lightsStateVersion=Lt,ct.needsLights&&(Xt.ambientLightColor.value=Z.state.ambient,Xt.lightProbe.value=Z.state.probe,Xt.directionalLights.value=Z.state.directional,Xt.directionalLightShadows.value=Z.state.directionalShadow,Xt.spotLights.value=Z.state.spot,Xt.spotLightShadows.value=Z.state.spotShadow,Xt.rectAreaLights.value=Z.state.rectArea,Xt.ltc_1.value=Z.state.rectAreaLTC1,Xt.ltc_2.value=Z.state.rectAreaLTC2,Xt.pointLights.value=Z.state.point,Xt.pointLightShadows.value=Z.state.pointShadow,Xt.hemisphereLights.value=Z.state.hemi,Xt.directionalShadowMap.value=Z.state.directionalShadowMap,Xt.directionalShadowMatrix.value=Z.state.directionalShadowMatrix,Xt.spotShadowMap.value=Z.state.spotShadowMap,Xt.spotLightMatrix.value=Z.state.spotLightMatrix,Xt.spotLightMap.value=Z.state.spotLightMap,Xt.pointShadowMap.value=Z.state.pointShadowMap,Xt.pointShadowMatrix.value=Z.state.pointShadowMatrix),ct.currentProgram=Jt,ct.uniformsList=null,Jt}function Qi(P){if(P.uniformsList===null){const K=P.currentProgram.getUniforms();P.uniformsList=lh.seqWithValue(K.seq,P.uniforms)}return P.uniformsList}function Ji(P,K){const lt=Zt.get(P);lt.outputColorSpace=K.outputColorSpace,lt.batching=K.batching,lt.batchingColor=K.batchingColor,lt.instancing=K.instancing,lt.instancingColor=K.instancingColor,lt.instancingMorph=K.instancingMorph,lt.skinning=K.skinning,lt.morphTargets=K.morphTargets,lt.morphNormals=K.morphNormals,lt.morphColors=K.morphColors,lt.morphTargetsCount=K.morphTargetsCount,lt.numClippingPlanes=K.numClippingPlanes,lt.numIntersection=K.numClipIntersection,lt.vertexAlphas=K.vertexAlphas,lt.vertexTangents=K.vertexTangents,lt.toneMapping=K.toneMapping}function Sa(P,K,lt,ct,Z){K.isScene!==!0&&(K=_e),oe.resetTextureUnits();const At=K.fog,Lt=ct.isMeshStandardMaterial?K.environment:null,Ot=z===null?A.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:yo,Bt=(ct.isMeshStandardMaterial?B:sn).get(ct.envMap||Lt),ne=ct.vertexColors===!0&&!!lt.attributes.color&&lt.attributes.color.itemSize===4,Jt=!!lt.attributes.tangent&&(!!ct.normalMap||ct.anisotropy>0),Xt=!!lt.morphAttributes.position,he=!!lt.morphAttributes.normal,Pe=!!lt.morphAttributes.color;let Ke=da;ct.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(Ke=A.toneMapping);const pe=lt.morphAttributes.position||lt.morphAttributes.normal||lt.morphAttributes.color,Ue=pe!==void 0?pe.length:0,Qt=Zt.get(ct),Fe=S.state.lights;if(ft===!0&&(vt===!0||P!==C)){const En=P===C&&ct.id===U;kt.setState(ct,P,En)}let Te=!1;ct.version===Qt.__version?(Qt.needsLights&&Qt.lightsStateVersion!==Fe.state.version||Qt.outputColorSpace!==Ot||Z.isBatchedMesh&&Qt.batching===!1||!Z.isBatchedMesh&&Qt.batching===!0||Z.isBatchedMesh&&Qt.batchingColor===!0&&Z.colorTexture===null||Z.isBatchedMesh&&Qt.batchingColor===!1&&Z.colorTexture!==null||Z.isInstancedMesh&&Qt.instancing===!1||!Z.isInstancedMesh&&Qt.instancing===!0||Z.isSkinnedMesh&&Qt.skinning===!1||!Z.isSkinnedMesh&&Qt.skinning===!0||Z.isInstancedMesh&&Qt.instancingColor===!0&&Z.instanceColor===null||Z.isInstancedMesh&&Qt.instancingColor===!1&&Z.instanceColor!==null||Z.isInstancedMesh&&Qt.instancingMorph===!0&&Z.morphTexture===null||Z.isInstancedMesh&&Qt.instancingMorph===!1&&Z.morphTexture!==null||Qt.envMap!==Bt||ct.fog===!0&&Qt.fog!==At||Qt.numClippingPlanes!==void 0&&(Qt.numClippingPlanes!==kt.numPlanes||Qt.numIntersection!==kt.numIntersection)||Qt.vertexAlphas!==ne||Qt.vertexTangents!==Jt||Qt.morphTargets!==Xt||Qt.morphNormals!==he||Qt.morphColors!==Pe||Qt.toneMapping!==Ke||Qt.morphTargetsCount!==Ue)&&(Te=!0):(Te=!0,Qt.__version=ct.version);let bn=Qt.currentProgram;Te===!0&&(bn=Cs(ct,K,Z));let Ls=!1,Xe=!1,ts=!1;const ke=bn.getUniforms(),zn=Qt.uniforms;if(Gt.useProgram(bn.program)&&(Ls=!0,Xe=!0,ts=!0),ct.id!==U&&(U=ct.id,Xe=!0),Ls||C!==P){Gt.buffers.depth.getReversed()?(wt.copy(P.projectionMatrix),xP(wt),yP(wt),ke.setValue(k,"projectionMatrix",wt)):ke.setValue(k,"projectionMatrix",P.projectionMatrix),ke.setValue(k,"viewMatrix",P.matrixWorldInverse);const Pn=ke.map.cameraPosition;Pn!==void 0&&Pn.setValue(k,ee.setFromMatrixPosition(P.matrixWorld)),ge.logarithmicDepthBuffer&&ke.setValue(k,"logDepthBufFC",2/(Math.log(P.far+1)/Math.LN2)),(ct.isMeshPhongMaterial||ct.isMeshToonMaterial||ct.isMeshLambertMaterial||ct.isMeshBasicMaterial||ct.isMeshStandardMaterial||ct.isShaderMaterial)&&ke.setValue(k,"isOrthographic",P.isOrthographicCamera===!0),C!==P&&(C=P,Xe=!0,ts=!0)}if(Z.isSkinnedMesh){ke.setOptional(k,Z,"bindMatrix"),ke.setOptional(k,Z,"bindMatrixInverse");const En=Z.skeleton;En&&(En.boneTexture===null&&En.computeBoneTexture(),ke.setValue(k,"boneTexture",En.boneTexture,oe))}Z.isBatchedMesh&&(ke.setOptional(k,Z,"batchingTexture"),ke.setValue(k,"batchingTexture",Z._matricesTexture,oe),ke.setOptional(k,Z,"batchingIdTexture"),ke.setValue(k,"batchingIdTexture",Z._indirectTexture,oe),ke.setOptional(k,Z,"batchingColorTexture"),Z._colorsTexture!==null&&ke.setValue(k,"batchingColorTexture",Z._colorsTexture,oe));const vn=lt.morphAttributes;if((vn.position!==void 0||vn.normal!==void 0||vn.color!==void 0)&&Ft.update(Z,lt,bn),(Xe||Qt.receiveShadow!==Z.receiveShadow)&&(Qt.receiveShadow=Z.receiveShadow,ke.setValue(k,"receiveShadow",Z.receiveShadow)),ct.isMeshGouraudMaterial&&ct.envMap!==null&&(zn.envMap.value=Bt,zn.flipEnvMap.value=Bt.isCubeTexture&&Bt.isRenderTargetTexture===!1?-1:1),ct.isMeshStandardMaterial&&ct.envMap===null&&K.environment!==null&&(zn.envMapIntensity.value=K.environmentIntensity),Xe&&(ke.setValue(k,"toneMappingExposure",A.toneMappingExposure),Qt.needsLights&&Ds(zn,ts),At&&ct.fog===!0&&ht.refreshFogUniforms(zn,At),ht.refreshMaterialUniforms(zn,ct,q,G,S.state.transmissionRenderTarget[P.id]),lh.upload(k,Qi(Qt),zn,oe)),ct.isShaderMaterial&&ct.uniformsNeedUpdate===!0&&(lh.upload(k,Qi(Qt),zn,oe),ct.uniformsNeedUpdate=!1),ct.isSpriteMaterial&&ke.setValue(k,"center",Z.center),ke.setValue(k,"modelViewMatrix",Z.modelViewMatrix),ke.setValue(k,"normalMatrix",Z.normalMatrix),ke.setValue(k,"modelMatrix",Z.matrixWorld),ct.isShaderMaterial||ct.isRawShaderMaterial){const En=ct.uniformsGroups;for(let Pn=0,Ii=En.length;Pn<Ii;Pn++){const es=En[Pn];X.update(es,bn),X.bind(es,bn)}}return bn}function Ds(P,K){P.ambientLightColor.needsUpdate=K,P.lightProbe.needsUpdate=K,P.directionalLights.needsUpdate=K,P.directionalLightShadows.needsUpdate=K,P.pointLights.needsUpdate=K,P.pointLightShadows.needsUpdate=K,P.spotLights.needsUpdate=K,P.spotLightShadows.needsUpdate=K,P.rectAreaLights.needsUpdate=K,P.hemisphereLights.needsUpdate=K}function un(P){return P.isMeshLambertMaterial||P.isMeshToonMaterial||P.isMeshPhongMaterial||P.isMeshStandardMaterial||P.isShadowMaterial||P.isShaderMaterial&&P.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(P,K,lt){const ct=Zt.get(P);ct.__autoAllocateDepthBuffer=P.resolveDepthBuffer===!1,ct.__autoAllocateDepthBuffer===!1&&(ct.__useRenderToTexture=!1),Zt.get(P.texture).__webglTexture=K,Zt.get(P.depthTexture).__webglTexture=ct.__autoAllocateDepthBuffer?void 0:lt,ct.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(P,K){const lt=Zt.get(P);lt.__webglFramebuffer=K,lt.__useDefaultFramebuffer=K===void 0};const pc=k.createFramebuffer();this.setRenderTarget=function(P,K=0,lt=0){z=P,O=K,I=lt;let ct=!0,Z=null,At=!1,Lt=!1;if(P){const Bt=Zt.get(P);if(Bt.__useDefaultFramebuffer!==void 0)Gt.bindFramebuffer(k.FRAMEBUFFER,null),ct=!1;else if(Bt.__webglFramebuffer===void 0)oe.setupRenderTarget(P);else if(Bt.__hasExternalTextures)oe.rebindTextures(P,Zt.get(P.texture).__webglTexture,Zt.get(P.depthTexture).__webglTexture);else if(P.depthBuffer){const Xt=P.depthTexture;if(Bt.__boundDepthTexture!==Xt){if(Xt!==null&&Zt.has(Xt)&&(P.width!==Xt.image.width||P.height!==Xt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");oe.setupDepthRenderbuffer(P)}}const ne=P.texture;(ne.isData3DTexture||ne.isDataArrayTexture||ne.isCompressedArrayTexture)&&(Lt=!0);const Jt=Zt.get(P).__webglFramebuffer;P.isWebGLCubeRenderTarget?(Array.isArray(Jt[K])?Z=Jt[K][lt]:Z=Jt[K],At=!0):P.samples>0&&oe.useMultisampledRTT(P)===!1?Z=Zt.get(P).__webglMultisampledFramebuffer:Array.isArray(Jt)?Z=Jt[lt]:Z=Jt,j.copy(P.viewport),it.copy(P.scissor),$=P.scissorTest}else j.copy(nt).multiplyScalar(q).floor(),it.copy(Mt).multiplyScalar(q).floor(),$=bt;if(lt!==0&&(Z=pc),Gt.bindFramebuffer(k.FRAMEBUFFER,Z)&&ct&&Gt.drawBuffers(P,Z),Gt.viewport(j),Gt.scissor(it),Gt.setScissorTest($),At){const Bt=Zt.get(P.texture);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+K,Bt.__webglTexture,lt)}else if(Lt){const Bt=Zt.get(P.texture),ne=K;k.framebufferTextureLayer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,Bt.__webglTexture,lt,ne)}else if(P!==null&&lt!==0){const Bt=Zt.get(P.texture);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,Bt.__webglTexture,lt)}U=-1},this.readRenderTargetPixels=function(P,K,lt,ct,Z,At,Lt,Ot=0){if(!(P&&P.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Bt=Zt.get(P).__webglFramebuffer;if(P.isWebGLCubeRenderTarget&&Lt!==void 0&&(Bt=Bt[Lt]),Bt){Gt.bindFramebuffer(k.FRAMEBUFFER,Bt);try{const ne=P.textures[Ot],Jt=ne.format,Xt=ne.type;if(!ge.textureFormatReadable(Jt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ge.textureTypeReadable(Xt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}K>=0&&K<=P.width-ct&&lt>=0&&lt<=P.height-Z&&(P.textures.length>1&&k.readBuffer(k.COLOR_ATTACHMENT0+Ot),k.readPixels(K,lt,ct,Z,Dt.convert(Jt),Dt.convert(Xt),At))}finally{const ne=z!==null?Zt.get(z).__webglFramebuffer:null;Gt.bindFramebuffer(k.FRAMEBUFFER,ne)}}},this.readRenderTargetPixelsAsync=async function(P,K,lt,ct,Z,At,Lt,Ot=0){if(!(P&&P.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Bt=Zt.get(P).__webglFramebuffer;if(P.isWebGLCubeRenderTarget&&Lt!==void 0&&(Bt=Bt[Lt]),Bt)if(K>=0&&K<=P.width-ct&&lt>=0&&lt<=P.height-Z){Gt.bindFramebuffer(k.FRAMEBUFFER,Bt);const ne=P.textures[Ot],Jt=ne.format,Xt=ne.type;if(!ge.textureFormatReadable(Jt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ge.textureTypeReadable(Xt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const he=k.createBuffer();k.bindBuffer(k.PIXEL_PACK_BUFFER,he),k.bufferData(k.PIXEL_PACK_BUFFER,At.byteLength,k.STREAM_READ),P.textures.length>1&&k.readBuffer(k.COLOR_ATTACHMENT0+Ot),k.readPixels(K,lt,ct,Z,Dt.convert(Jt),Dt.convert(Xt),0);const Pe=z!==null?Zt.get(z).__webglFramebuffer:null;Gt.bindFramebuffer(k.FRAMEBUFFER,Pe);const Ke=k.fenceSync(k.SYNC_GPU_COMMANDS_COMPLETE,0);return k.flush(),await vP(k,Ke,4),k.bindBuffer(k.PIXEL_PACK_BUFFER,he),k.getBufferSubData(k.PIXEL_PACK_BUFFER,0,At),k.deleteBuffer(he),k.deleteSync(Ke),At}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(P,K=null,lt=0){const ct=Math.pow(2,-lt),Z=Math.floor(P.image.width*ct),At=Math.floor(P.image.height*ct),Lt=K!==null?K.x:0,Ot=K!==null?K.y:0;oe.setTexture2D(P,0),k.copyTexSubImage2D(k.TEXTURE_2D,lt,0,0,Lt,Ot,Z,At),Gt.unbindTexture()};const mc=k.createFramebuffer(),$i=k.createFramebuffer();this.copyTextureToTexture=function(P,K,lt=null,ct=null,Z=0,At=null){At===null&&(Z!==0?(fo("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),At=Z,Z=0):At=0);let Lt,Ot,Bt,ne,Jt,Xt,he,Pe,Ke;const pe=P.isCompressedTexture?P.mipmaps[At]:P.image;if(lt!==null)Lt=lt.max.x-lt.min.x,Ot=lt.max.y-lt.min.y,Bt=lt.isBox3?lt.max.z-lt.min.z:1,ne=lt.min.x,Jt=lt.min.y,Xt=lt.isBox3?lt.min.z:0;else{const vn=Math.pow(2,-Z);Lt=Math.floor(pe.width*vn),Ot=Math.floor(pe.height*vn),P.isDataArrayTexture?Bt=pe.depth:P.isData3DTexture?Bt=Math.floor(pe.depth*vn):Bt=1,ne=0,Jt=0,Xt=0}ct!==null?(he=ct.x,Pe=ct.y,Ke=ct.z):(he=0,Pe=0,Ke=0);const Ue=Dt.convert(K.format),Qt=Dt.convert(K.type);let Fe;K.isData3DTexture?(oe.setTexture3D(K,0),Fe=k.TEXTURE_3D):K.isDataArrayTexture||K.isCompressedArrayTexture?(oe.setTexture2DArray(K,0),Fe=k.TEXTURE_2D_ARRAY):(oe.setTexture2D(K,0),Fe=k.TEXTURE_2D),k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,K.flipY),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),k.pixelStorei(k.UNPACK_ALIGNMENT,K.unpackAlignment);const Te=k.getParameter(k.UNPACK_ROW_LENGTH),bn=k.getParameter(k.UNPACK_IMAGE_HEIGHT),Ls=k.getParameter(k.UNPACK_SKIP_PIXELS),Xe=k.getParameter(k.UNPACK_SKIP_ROWS),ts=k.getParameter(k.UNPACK_SKIP_IMAGES);k.pixelStorei(k.UNPACK_ROW_LENGTH,pe.width),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,pe.height),k.pixelStorei(k.UNPACK_SKIP_PIXELS,ne),k.pixelStorei(k.UNPACK_SKIP_ROWS,Jt),k.pixelStorei(k.UNPACK_SKIP_IMAGES,Xt);const ke=P.isDataArrayTexture||P.isData3DTexture,zn=K.isDataArrayTexture||K.isData3DTexture;if(P.isDepthTexture){const vn=Zt.get(P),En=Zt.get(K),Pn=Zt.get(vn.__renderTarget),Ii=Zt.get(En.__renderTarget);Gt.bindFramebuffer(k.READ_FRAMEBUFFER,Pn.__webglFramebuffer),Gt.bindFramebuffer(k.DRAW_FRAMEBUFFER,Ii.__webglFramebuffer);for(let es=0;es<Bt;es++)ke&&(k.framebufferTextureLayer(k.READ_FRAMEBUFFER,k.COLOR_ATTACHMENT0,Zt.get(P).__webglTexture,Z,Xt+es),k.framebufferTextureLayer(k.DRAW_FRAMEBUFFER,k.COLOR_ATTACHMENT0,Zt.get(K).__webglTexture,At,Ke+es)),k.blitFramebuffer(ne,Jt,Lt,Ot,he,Pe,Lt,Ot,k.DEPTH_BUFFER_BIT,k.NEAREST);Gt.bindFramebuffer(k.READ_FRAMEBUFFER,null),Gt.bindFramebuffer(k.DRAW_FRAMEBUFFER,null)}else if(Z!==0||P.isRenderTargetTexture||Zt.has(P)){const vn=Zt.get(P),En=Zt.get(K);Gt.bindFramebuffer(k.READ_FRAMEBUFFER,mc),Gt.bindFramebuffer(k.DRAW_FRAMEBUFFER,$i);for(let Pn=0;Pn<Bt;Pn++)ke?k.framebufferTextureLayer(k.READ_FRAMEBUFFER,k.COLOR_ATTACHMENT0,vn.__webglTexture,Z,Xt+Pn):k.framebufferTexture2D(k.READ_FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,vn.__webglTexture,Z),zn?k.framebufferTextureLayer(k.DRAW_FRAMEBUFFER,k.COLOR_ATTACHMENT0,En.__webglTexture,At,Ke+Pn):k.framebufferTexture2D(k.DRAW_FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,En.__webglTexture,At),Z!==0?k.blitFramebuffer(ne,Jt,Lt,Ot,he,Pe,Lt,Ot,k.COLOR_BUFFER_BIT,k.NEAREST):zn?k.copyTexSubImage3D(Fe,At,he,Pe,Ke+Pn,ne,Jt,Lt,Ot):k.copyTexSubImage2D(Fe,At,he,Pe,ne,Jt,Lt,Ot);Gt.bindFramebuffer(k.READ_FRAMEBUFFER,null),Gt.bindFramebuffer(k.DRAW_FRAMEBUFFER,null)}else zn?P.isDataTexture||P.isData3DTexture?k.texSubImage3D(Fe,At,he,Pe,Ke,Lt,Ot,Bt,Ue,Qt,pe.data):K.isCompressedArrayTexture?k.compressedTexSubImage3D(Fe,At,he,Pe,Ke,Lt,Ot,Bt,Ue,pe.data):k.texSubImage3D(Fe,At,he,Pe,Ke,Lt,Ot,Bt,Ue,Qt,pe):P.isDataTexture?k.texSubImage2D(k.TEXTURE_2D,At,he,Pe,Lt,Ot,Ue,Qt,pe.data):P.isCompressedTexture?k.compressedTexSubImage2D(k.TEXTURE_2D,At,he,Pe,pe.width,pe.height,Ue,pe.data):k.texSubImage2D(k.TEXTURE_2D,At,he,Pe,Lt,Ot,Ue,Qt,pe);k.pixelStorei(k.UNPACK_ROW_LENGTH,Te),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,bn),k.pixelStorei(k.UNPACK_SKIP_PIXELS,Ls),k.pixelStorei(k.UNPACK_SKIP_ROWS,Xe),k.pixelStorei(k.UNPACK_SKIP_IMAGES,ts),At===0&&K.generateMipmaps&&k.generateMipmap(Fe),Gt.unbindTexture()},this.copyTextureToTexture3D=function(P,K,lt=null,ct=null,Z=0){return fo('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(P,K,lt,ct,Z)},this.initRenderTarget=function(P){Zt.get(P).__webglFramebuffer===void 0&&oe.setupRenderTarget(P)},this.initTexture=function(P){P.isCubeTexture?oe.setTextureCube(P,0):P.isData3DTexture?oe.setTexture3D(P,0):P.isDataArrayTexture||P.isCompressedArrayTexture?oe.setTexture2DArray(P,0):oe.setTexture2D(P,0),Gt.unbindTexture()},this.resetState=function(){O=0,I=0,z=null,Gt.reset(),re.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return bs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=De._getDrawingBufferColorSpace(t),e.unpackColorSpace=De._getUnpackColorSpace()}}class HF extends L1{constructor(){super();const t=new Ao;t.deleteAttribute("uv");const e=new jm({side:Yn}),s=new jm,r=new O1(16777215,900,28,2);r.position.set(.418,16.199,.3),this.add(r);const l=new Cn(t,e);l.position.set(-.757,13.219,.717),l.scale.set(31.713,28.305,28.591),this.add(l);const u=new P1(t,s,6),h=new kn;h.position.set(-10.906,2.009,1.846),h.rotation.set(0,-.195,0),h.scale.set(2.328,7.905,4.651),h.updateMatrix(),u.setMatrixAt(0,h.matrix),h.position.set(-5.607,-.754,-.758),h.rotation.set(0,.994,0),h.scale.set(1.97,1.534,3.955),h.updateMatrix(),u.setMatrixAt(1,h.matrix),h.position.set(6.167,.857,7.803),h.rotation.set(0,.561,0),h.scale.set(3.927,6.285,3.687),h.updateMatrix(),u.setMatrixAt(2,h.matrix),h.position.set(-2.017,.018,6.124),h.rotation.set(0,.333,0),h.scale.set(2.002,4.566,2.064),h.updateMatrix(),u.setMatrixAt(3,h.matrix),h.position.set(2.291,-.756,-2.621),h.rotation.set(0,-.286,0),h.scale.set(1.546,1.552,1.496),h.updateMatrix(),u.setMatrixAt(4,h.matrix),h.position.set(-2.193,-.369,-5.547),h.rotation.set(0,.516,0),h.scale.set(3.875,3.487,2.986),h.updateMatrix(),u.setMatrixAt(5,h.matrix),this.add(u);const f=new Cn(t,to(50));f.position.set(-16.116,14.37,8.208),f.scale.set(.1,2.428,2.739),this.add(f);const d=new Cn(t,to(50));d.position.set(-16.109,18.021,-8.207),d.scale.set(.1,2.425,2.751),this.add(d);const g=new Cn(t,to(17));g.position.set(14.904,12.198,-1.832),g.scale.set(.15,4.265,6.331),this.add(g);const x=new Cn(t,to(43));x.position.set(-.462,8.89,14.52),x.scale.set(4.38,5.441,.088),this.add(x);const y=new Cn(t,to(20));y.position.set(3.235,11.486,-12.541),y.scale.set(2.5,2,.1),this.add(y);const _=new Cn(t,to(100));_.position.set(0,20,0),_.scale.set(1,.1,1),this.add(_)}dispose(){const t=new Set;this.traverse(e=>{e.isMesh&&(t.add(e.geometry),t.add(e.material))});for(const e of t)e.dispose()}}function to(n){const t=new Bg;return t.color.setScalar(n),t}class kF{#t;canvas;camera;cameraMinAspect;cameraMaxAspect;cameraFov;maxPixelRatio;minPixelRatio;scene;renderer;#n;size={width:0,height:0,wWidth:0,wHeight:0,ratio:0,pixelRatio:0};render=this.#b;onBeforeRender=()=>{};onAfterRender=()=>{};onAfterResize=()=>{};#s=!1;#i=!1;isDisposed=!1;#a;#r;#o;#l=new iU;#e={elapsed:0,delta:0};#h;constructor(t){this.#t={...t},this.#m(),this.#g(),this.#v(),this.resize(),this.#x()}#m(){this.camera=new di,this.cameraFov=this.camera.fov}#g(){this.scene=new L1}#v(){this.#t.canvas?this.canvas=this.#t.canvas:this.#t.id?this.canvas=document.getElementById(this.#t.id):console.error("Three: Missing canvas or id parameter"),this.canvas.style.display="block";const t={canvas:this.canvas,powerPreference:"high-performance",...this.#t.rendererOptions??{}};this.renderer=new jF(t),this.renderer.outputColorSpace=fi}#x(){this.#t.size instanceof Object||(window.addEventListener("resize",this.#c.bind(this)),this.#t.size==="parent"&&this.canvas.parentNode&&(this.#r=new ResizeObserver(this.#c.bind(this)),this.#r.observe(this.canvas.parentNode))),this.#a=new IntersectionObserver(this.#_.bind(this),{root:null,rootMargin:"0px",threshold:0}),this.#a.observe(this.canvas),document.addEventListener("visibilitychange",this.#f.bind(this))}#y(){window.removeEventListener("resize",this.#c.bind(this)),this.#r?.disconnect(),this.#a?.disconnect(),document.removeEventListener("visibilitychange",this.#f.bind(this))}#_(t){this.#s=t[0].isIntersecting,this.#s?this.#p():this.#u()}#f(){this.#s&&(document.hidden?this.#u():this.#p())}#c(){this.#o&&clearTimeout(this.#o),this.#o=setTimeout(this.resize.bind(this),100)}resize(){let t,e;this.#t.size instanceof Object?(t=this.#t.size.width,e=this.#t.size.height):this.#t.size==="parent"&&this.canvas.parentNode?(t=this.canvas.parentNode.offsetWidth,e=this.canvas.parentNode.offsetHeight):(t=window.innerWidth,e=window.innerHeight),this.size.width=t,this.size.height=e,this.size.ratio=t/e,this.#S(),this.#M(),this.onAfterResize(this.size)}#S(){this.camera.aspect=this.size.width/this.size.height,this.camera.isPerspectiveCamera&&this.cameraFov&&(this.cameraMinAspect&&this.camera.aspect<this.cameraMinAspect?this.#d(this.cameraMinAspect):this.cameraMaxAspect&&this.camera.aspect>this.cameraMaxAspect?this.#d(this.cameraMaxAspect):this.camera.fov=this.cameraFov),this.camera.updateProjectionMatrix(),this.updateWorldSize()}#d(t){const e=Math.tan(Vm.degToRad(this.cameraFov/2))/(this.camera.aspect/t);this.camera.fov=2*Vm.radToDeg(Math.atan(e))}updateWorldSize(){if(this.camera.isPerspectiveCamera){const t=this.camera.fov*Math.PI/180;this.size.wHeight=2*Math.tan(t/2)*this.camera.position.length(),this.size.wWidth=this.size.wHeight*this.camera.aspect}else this.camera.isOrthographicCamera&&(this.size.wHeight=this.camera.top-this.camera.bottom,this.size.wWidth=this.camera.right-this.camera.left)}#M(){this.renderer.setSize(this.size.width,this.size.height),this.#n?.setSize(this.size.width,this.size.height);let t=window.devicePixelRatio;this.maxPixelRatio&&t>this.maxPixelRatio?t=this.maxPixelRatio:this.minPixelRatio&&t<this.minPixelRatio&&(t=this.minPixelRatio),this.renderer.setPixelRatio(t),this.size.pixelRatio=t}get postprocessing(){return this.#n}set postprocessing(t){this.#n=t,this.render=t.render.bind(t)}#p(){if(this.#i)return;const t=()=>{this.#h=requestAnimationFrame(t),this.#e.delta=this.#l.getDelta(),this.#e.elapsed+=this.#e.delta,this.onBeforeRender(this.#e),this.render(),this.onAfterRender(this.#e)};this.#i=!0,this.#l.start(),t()}#u(){this.#i&&(cancelAnimationFrame(this.#h),this.#i=!1,this.#l.stop())}#b(){this.renderer.render(this.scene,this.camera)}clear(){this.scene.traverse(t=>{t.isMesh&&typeof t.material=="object"&&t.material!==null&&(Object.keys(t.material).forEach(e=>{const s=t.material[e];s!==null&&typeof s=="object"&&typeof s.dispose=="function"&&s.dispose()}),t.material.dispose(),t.geometry.dispose())}),this.scene.clear()}dispose(){this.#y(),this.#u(),this.clear(),this.#n?.dispose(),this.renderer.dispose(),this.isDisposed=!0}}const $a=new Map,rr=new Me;let Dp=!1;function GF(n){const t={position:new Me,nPosition:new Me,hover:!1,onEnter(){},onMove(){},onClick(){},onLeave(){},...n};return function(e,s){$a.has(e)||($a.set(e,s),Dp||(document.body.addEventListener("pointermove",cM),document.body.addEventListener("pointerleave",uM),document.body.addEventListener("click",WF),Dp=!0))}(n.domElement,t),t.dispose=()=>{const e=n.domElement;$a.delete(e),$a.size===0&&(document.body.removeEventListener("pointermove",cM),document.body.removeEventListener("pointerleave",uM),Dp=!1)},t}function cM(n){rr.x=n.clientX,rr.y=n.clientY;for(const[t,e]of $a){const s=t.getBoundingClientRect();H1(s)?(j1(e,s),e.hover||(e.hover=!0,e.onEnter(e)),e.onMove(e)):e.hover&&(e.hover=!1,e.onLeave(e))}}function WF(n){rr.x=n.clientX,rr.y=n.clientY;for(const[t,e]of $a){const s=t.getBoundingClientRect();j1(e,s),H1(s)&&e.onClick(e)}}function uM(){for(const n of $a.values())n.hover&&(n.hover=!1,n.onLeave(n))}function j1(n,t){const{position:e,nPosition:s}=n;e.x=rr.x-t.left,e.y=rr.y-t.top,s.x=e.x/t.width*2-1,s.y=-e.y/t.height*2+1}function H1(n){const{x:t,y:e}=rr,{left:s,top:r,width:l,height:u}=n;return t>=s&&t<=s+l&&e>=r&&e<=r+u}const{randFloat:XF,randFloatSpread:Lp}=Vm,Pp=new Q,on=new Q,Zu=new Q,qF=new Q,ln=new Q,Qu=new Q,eo=new Q,ra=new Q,Ju=new Q,hM=new Q;class YF{constructor(t){this.config=t,this.positionData=new Float32Array(3*t.count).fill(0),this.velocityData=new Float32Array(3*t.count).fill(0),this.sizeData=new Float32Array(t.count).fill(1),this.center=new Q,this.#t(),this.setSizes()}#t(){const{config:t,positionData:e}=this;this.center.toArray(e,0);for(let s=1;s<t.count;s++){const r=3*s;e[r]=Lp(2*t.maxX),e[r+1]=Lp(2*t.maxY),e[r+2]=Lp(2*t.maxZ)}}setSizes(){const{config:t,sizeData:e}=this;e[0]=t.size0;for(let s=1;s<t.count;s++)e[s]=XF(t.minSize,t.maxSize)}update(t){const{config:e,center:s,positionData:r,sizeData:l,velocityData:u}=this;let h=0;e.controlSphere0&&(h=1,Pp.fromArray(r,0),Pp.lerp(s,.1).toArray(r,0),qF.set(0,0,0).toArray(u,0));for(let f=h;f<e.count;f++){const d=3*f;on.fromArray(r,d),ln.fromArray(u,d),ln.y-=t.delta*e.gravity*l[f],ln.multiplyScalar(e.friction),ln.clampLength(0,e.maxVelocity),on.add(ln),on.toArray(r,d),ln.toArray(u,d)}for(let f=h;f<e.count;f++){const d=3*f;on.fromArray(r,d),ln.fromArray(u,d);const g=l[f];for(let y=f+1;y<e.count;y++){const _=3*y;Zu.fromArray(r,_),Qu.fromArray(u,_);const b=l[y];eo.copy(Zu).sub(on);const E=eo.length(),M=g+b;if(E<M){const S=M-E;ra.copy(eo).normalize().multiplyScalar(.5*S),Ju.copy(ra).multiplyScalar(Math.max(ln.length(),1)),hM.copy(ra).multiplyScalar(Math.max(Qu.length(),1)),on.sub(ra),ln.sub(Ju),on.toArray(r,d),ln.toArray(u,d),Zu.add(ra),Qu.add(hM),Zu.toArray(r,_),Qu.toArray(u,_)}}if(e.controlSphere0){eo.copy(Pp).sub(on);const y=eo.length(),_=g+l[0];if(y<_){const b=_-y;ra.copy(eo.normalize()).multiplyScalar(b),Ju.copy(ra).multiplyScalar(Math.max(ln.length(),2)),on.sub(ra),ln.sub(Ju)}}Math.abs(on.x)+g>e.maxX&&(on.x=Math.sign(on.x)*(e.maxX-g),ln.x=-ln.x*e.wallBounce),e.gravity===0?Math.abs(on.y)+g>e.maxY&&(on.y=Math.sign(on.y)*(e.maxY-g),ln.y=-ln.y*e.wallBounce):on.y-g<-e.maxY&&(on.y=-e.maxY+g,ln.y=-ln.y*e.wallBounce);const x=Math.max(e.maxZ,e.maxSize);Math.abs(on.z)+g>x&&(on.z=Math.sign(on.z)*(e.maxZ-g),ln.z=-ln.z*e.wallBounce),on.toArray(r,d),ln.toArray(u,d)}}}class KF extends KP{constructor(t){super(t),this.uniforms={thicknessDistortion:{value:.1},thicknessAmbient:{value:0},thicknessAttenuation:{value:.1},thicknessPower:{value:2},thicknessScale:{value:10}},this.defines.USE_UV="",this.onBeforeCompile=e=>{Object.assign(e.uniforms,this.uniforms),e.fragmentShader=`
        uniform float thicknessPower;
        uniform float thicknessScale;
        uniform float thicknessDistortion;
        uniform float thicknessAmbient;
        uniform float thicknessAttenuation;
      `+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("void main() {",`
        void RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, inout ReflectedLight reflectedLight) {
          vec3 scatteringHalf = normalize(directLight.direction + (geometryNormal * thicknessDistortion));
          float scatteringDot = pow(saturate(dot(geometryViewDir, -scatteringHalf)), thicknessPower) * thicknessScale;
          #ifdef USE_COLOR
            vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * vColor;
          #else
            vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * diffuse;
          #endif
          reflectedLight.directDiffuse += scatteringIllu * thicknessAttenuation * directLight.color;
        }

        void main() {
      `);const s=ce.lights_fragment_begin.replaceAll("RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );",`
          RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
          RE_Direct_Scattering(directLight, vUv, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, reflectedLight);
        `);e.fragmentShader=e.fragmentShader.replace("#include <lights_fragment_begin>",s),this.onBeforeCompile2&&this.onBeforeCompile2(e)}}}const ZF={count:200,colors:[0,0,0],ambientColor:16777215,ambientIntensity:1,lightIntensity:200,materialParams:{metalness:.5,roughness:.5,clearcoat:1,clearcoatRoughness:.15},minSize:.5,maxSize:1,size0:1,gravity:.5,friction:.9975,wallBounce:.95,maxVelocity:.15,maxX:5,maxY:5,maxZ:2,controlSphere0:!1,followCursor:!0},no=new kn;class QF extends P1{constructor(t,e={}){const s={...ZF,...e},r=new HF,l=new km(t,.04).fromScene(r).texture,u=new jg,h=new KF({envMap:l,...s.materialParams});h.envMapRotation.x=-Math.PI/2,super(u,h,s.count),this.config=s,this.physics=new YF(s),this.#t(),this.setColors(s.colors)}#t(){this.ambientLight=new eU(this.config.ambientColor,this.config.ambientIntensity),this.add(this.ambientLight),this.light=new O1(this.config.colors[0],this.config.lightIntensity),this.add(this.light)}setColors(t){if(Array.isArray(t)&&t.length>1){const e=function(s){let r,l;function u(h){r=h,l=[],r.forEach(f=>{l.push(new Se(f))})}return u(s),{setColors:u,getColorAt:function(h,f=new Se){const d=Math.max(0,Math.min(1,h))*(r.length-1),g=Math.floor(d),x=l[g];if(g>=r.length-1)return x.clone();const y=d-g,_=l[g+1];return f.r=x.r+y*(_.r-x.r),f.g=x.g+y*(_.g-x.g),f.b=x.b+y*(_.b-x.b),f}}}(t);for(let s=0;s<this.count;s++)this.setColorAt(s,e.getColorAt(s/this.count)),s===0&&this.light.color.copy(e.getColorAt(s/this.count));this.instanceColor.needsUpdate=!0}}update(t){this.physics.update(t);for(let e=0;e<this.count;e++)no.position.fromArray(this.physics.positionData,3*e),e===0&&this.config.followCursor===!1?no.scale.setScalar(0):no.scale.setScalar(this.physics.sizeData[e]),no.updateMatrix(),this.setMatrixAt(e,no.matrix),e===0&&this.light.position.copy(no.position);this.instanceMatrix.needsUpdate=!0}}function JF(n,t={}){const e=new kF({canvas:n,size:"parent",rendererOptions:{antialias:!0,alpha:!0}});let s;e.renderer.toneMapping=h1,e.camera.position.set(0,0,20),e.camera.lookAt(0,0,0),e.cameraMaxAspect=1.5,e.resize(),d(t);const r=new sU,l=new la(new Q(0,0,1),0),u=new Q;let h=!1;const f=GF({domElement:n,onMove(){r.setFromCamera(f.nPosition,e.camera),e.camera.getWorldDirection(l.normal),r.ray.intersectPlane(l,u),s.physics.center.copy(u),s.config.controlSphere0=!0},onLeave(){s.config.controlSphere0=!1}});function d(g){s&&(e.clear(),e.scene.remove(s)),s=new QF(e.renderer,g),e.scene.add(s)}return e.onBeforeRender=g=>{h||s.update(g)},e.onAfterResize=g=>{s.config.maxX=g.wWidth/2,s.config.maxY=g.wHeight/2},{three:e,get spheres(){return s},setCount(g){d({...s.config,count:g})},togglePause(){h=!h},dispose(){f.dispose(),e.dispose()}}}const $F=({className:n="",followCursor:t=!0,colors:e=["#000000"],...s})=>{const r=xt.useRef(null),l=xt.useRef(null);return xt.useEffect(()=>{const u=r.current;if(u)return l.current=JF(u,{followCursor:t,colors:e,...s}),()=>{l.current&&l.current.dispose()}},[e,t]),m.jsx("canvas",{className:`${n} w-full h-full`,ref:r})};function fM(n){const t=n.replace("#",""),e=parseInt(t.substring(0,2),16)/255,s=parseInt(t.substring(2,4),16)/255,r=parseInt(t.substring(4,6),16)/255;return[e,s,r]}function Hl(n){return n-Math.floor(n)}function t4(n){let t=[n*.1031,n*.103,n*.0973].map(Hl);const e=[t[1],t[2],t[0]],s=t[0]*(e[0]+33.33)+t[1]*(e[1]+33.33)+t[2]*(e[2]+33.33);for(let r=0;r<3;r++)t[r]=Hl(t[r]+s);return t}function e4(n){let t=[n[0]*.1031,n[1]*.103,n[2]*.0973].map(Hl);const e=[t[1],t[0],t[2]],s=t[0]*(e[0]+33.33)+t[1]*(e[1]+33.33)+t[2]*(e[2]+33.33);for(let f=0;f<3;f++)t[f]=Hl(t[f]+s);const r=[t[0],t[0],t[1]],l=[t[1],t[0],t[0]],u=[t[2],t[1],t[0]],h=[];for(let f=0;f<3;f++)h[f]=Hl((r[f]+l[f])*u[f]);return h}const n4=`#version 300 es
precision highp float;
layout(location = 0) in vec2 position;
void main() {
  gl_Position = vec4(position, 0.0, 1.0);
}
`,i4=`#version 300 es
precision highp float;
uniform vec3 iResolution;
uniform float iTime;
uniform vec3 iMouse;
uniform vec3 iColor;
uniform vec3 iCursorColor;
uniform float iAnimationSize;
uniform int iBallCount;
uniform float iCursorBallSize;
uniform vec3 iMetaBalls[50];
uniform float iClumpFactor;
uniform bool enableTransparency;
out vec4 outColor;
const float PI = 3.14159265359;

float getMetaBallValue(vec2 c, float r, vec2 p) {
  vec2 d = p - c;
  float dist2 = dot(d, d);
  return (r * r) / dist2;
}

void main() {
  vec2 fc = gl_FragCoord.xy;
  float scale = iAnimationSize / iResolution.y;
  vec2 coord = (fc - iResolution.xy * 0.5) * scale;
  vec2 mouseW = (iMouse.xy - iResolution.xy * 0.5) * scale;
  float m1 = 0.0;
  for (int i = 0; i < 50; i++) {
    if (i >= iBallCount) break;
    m1 += getMetaBallValue(iMetaBalls[i].xy, iMetaBalls[i].z, coord);
  }
  float m2 = getMetaBallValue(mouseW, iCursorBallSize, coord);
  float total = m1 + m2;
  float f = smoothstep(-1.0, 1.0, (total - 1.3) / min(1.0, fwidth(total)));
  vec3 cFinal = vec3(0.0);
  if (total > 0.0) {
    float alpha1 = m1 / total;
    float alpha2 = m2 / total;
    cFinal = iColor * alpha1 + iCursorColor * alpha2;
  }
  outColor = vec4(cFinal * f, enableTransparency ? f : 1.0);
}
`,s4=({color:n="#ffffff",speed:t=.3,enableMouseInteraction:e=!0,hoverSmoothness:s=.05,animationSize:r=30,ballCount:l=15,clumpFactor:u=1,cursorBallSize:h=3,cursorBallColor:f="#ffffff",enableTransparency:d=!1})=>{const g=xt.useRef(null);return xt.useEffect(()=>{const x=g.current;if(!x)return;const y=1,_=new qb({dpr:y,alpha:!0,premultipliedAlpha:!1}),b=_.gl;b.clearColor(0,0,0,d?0:1),x.appendChild(b.canvas);const E=new Qb(b,{left:-1,right:1,top:1,bottom:-1,near:.1,far:10});E.position.z=1;const M=new oD(b),[S,L,w]=fM(n),[A,N,O]=fM(f),I=[];for(let ft=0;ft<50;ft++)I.push(new Ze(0,0,0));const z=new Xb(b,{vertex:n4,fragment:i4,uniforms:{iTime:{value:0},iResolution:{value:new Ze(0,0,0)},iMouse:{value:new Ze(0,0,0)},iColor:{value:new Ze(S,L,w)},iCursorColor:{value:new Ze(A,N,O)},iAnimationSize:{value:r},iBallCount:{value:l},iCursorBallSize:{value:h},iMetaBalls:{value:I},iClumpFactor:{value:u},enableTransparency:{value:d}}}),U=new Jb(b,{geometry:M,program:z}),C=new Tg;U.setParent(C);const it=Math.min(l,50),$=[];for(let ft=0;ft<it;ft++){const vt=ft+1,wt=t4(vt),Ct=wt[0]*(2*Math.PI),ee=.1*Math.PI+wt[1]*(.4*Math.PI-.1*Math.PI),Ht=5+wt[1]*5,_e=e4(wt),Ae=Math.floor(_e[0]*2),fe=.5+_e[2]*(2-.5);$.push({st:Ct,dtFactor:ee,baseScale:Ht,toggle:Ae,radius:fe})}const et={x:0,y:0};let ut=!1,V=0,G=0;function q(){if(!x)return;const ft=x.clientWidth,vt=x.clientHeight;_.setSize(ft*y,vt*y),b.canvas.style.width=ft+"px",b.canvas.style.height=vt+"px",z.uniforms.iResolution.value.set(b.canvas.width,b.canvas.height,0)}window.addEventListener("resize",q),q();function yt(ft){if(!e)return;const vt=x.getBoundingClientRect(),wt=ft.clientX-vt.left,Ct=ft.clientY-vt.top;V=wt/vt.width*b.canvas.width,G=(1-Ct/vt.height)*b.canvas.height}function F(){e&&(ut=!0)}function nt(){e&&(ut=!1)}x.addEventListener("pointermove",yt),x.addEventListener("pointerenter",F),x.addEventListener("pointerleave",nt);const Mt=performance.now();let bt;function J(ft){bt=requestAnimationFrame(J);const vt=(ft-Mt)*.001;z.uniforms.iTime.value=vt;for(let ee=0;ee<it;ee++){const Ht=$[ee],_e=vt*t*Ht.dtFactor,Ae=Ht.st+_e,fe=Math.cos(Ae),k=Math.sin(Ae+_e*Ht.toggle),mn=fe*Ht.baseScale*u,be=k*Ht.baseScale*u;I[ee].set(mn,be,Ht.radius)}let wt,Ct;if(ut)wt=V,Ct=G;else{const ee=b.canvas.width*.5,Ht=b.canvas.height*.5,_e=b.canvas.width*.15,Ae=b.canvas.height*.15;wt=ee+Math.cos(vt*t)*_e,Ct=Ht+Math.sin(vt*t)*Ae}et.x+=(wt-et.x)*s,et.y+=(Ct-et.y)*s,z.uniforms.iMouse.value.set(et.x,et.y,0),_.render({scene:C,camera:E})}return bt=requestAnimationFrame(J),()=>{cancelAnimationFrame(bt),window.removeEventListener("resize",q),x.removeEventListener("pointermove",yt),x.removeEventListener("pointerenter",F),x.removeEventListener("pointerleave",nt),x.removeChild(b.canvas),b.getExtension("WEBGL_lose_context")?.loseContext()}},[n,f,t,e,s,r,l,u,h,d]),m.jsx("div",{ref:g,className:"w-full h-full relative"})};function a4(){return m.jsx("section",{id:"interactive",className:"py-20 bg-[#f9fafb] text-gray-800",children:m.jsxs("div",{className:"max-w-6xl mx-auto px-6 space-y-6",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center text-purple-600",children:"Interactive Bits"}),m.jsx("p",{className:"text-center text-gray-600 max-w-xl mx-auto",children:"Explore bite-sized interactive experiences built with React and canvas  a blend of creativity, logic, and fun."}),m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full",children:[m.jsx("h3",{className:"font-semibold text-lg mb-4",children:"MetaBalls Interaction"}),m.jsx("div",{className:"w-full",style:{height:"400px"},children:m.jsx(s4,{color:"#ff6b6b",cursorBallColor:"#5227FF",cursorBallSize:2,ballCount:15,animationSize:30,enableMouseInteraction:!0,enableTransparency:!0,hoverSmoothness:.05,clumpFactor:1,speed:.3})})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full",children:[m.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Colorful Ball Pit"}),m.jsx("div",{className:"w-full",style:{height:"400px"},children:m.jsx($F,{count:200,gravity:.5,friction:.9975,wallBounce:.95,followCursor:!0,colors:["#ff007f","#00ffff","#ffea00","#ff6b6b","#00ff00"]})})]})]})})}function r4(){return m.jsx(dL,{sparkColor:"#a78bfa",sparkSize:10,sparkRadius:15,sparkCount:8,duration:400,children:m.jsxs("div",{className:"bg-[#f7f8f9] text-gray-800 font-sans",children:[m.jsx(MD,{}),m.jsx(mD,{}),m.jsx(Au,{children:m.jsx(HD,{})}),m.jsx(Au,{children:m.jsx(LD,{})}),m.jsx(Au,{children:m.jsx(zD,{})}),m.jsx(Au,{children:m.jsx(a4,{})}),m.jsx(fL,{}),m.jsx(BD,{})]})})}eA.createRoot(document.getElementById("root")).render(m.jsx(xt.StrictMode,{children:m.jsx(r4,{})}));
